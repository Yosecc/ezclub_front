import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.2d9493fa.js";import{_ as t}from"./V-Control.237cc4d1.js";import{_ as a}from"./V-Field.vue_vue&type=script&setup=true&lang.1e8c9fad.js";import{_ as l}from"./inputsLayaut.vue_vue&type=style&index=0&lang.7c99132b.js";import{_ as s}from"./formLayaut.vue_vue&type=style&index=0&lang.34ec138d.js";import{p as u,h as n,g as i,s as r,v as o,P as p,A as m,n as c,c as d,m as v,a as f,d as y}from"./index.56773f49.js";import{d as b,r as h,w as _,c as g,o as x,h as S,j,k as C,D as k,Q as A,R as M,J as P,S as w,Y as D,E as N,F as V,G as $,U as F,a9 as I,z as T,a4 as q,A as E,B as J,L as R}from"./vendor.c636f33b.js";import{q as L,c as z,E as B,b as O,e as U,h as G,F as H,G as K,H as Q,y as W,I as Y,J as X,K as Z,L as ee,m as te}from"./Members.3f9f6616.js";import{_ as ae}from"./V-Card.vue_vue&type=script&setup=true&lang.513c973c.js";import{_ as le}from"./V-Loader.vue_vue&type=script&setup=true&lang.a4702afa.js";import{_ as se}from"./V-Placeload.c195e33d.js";import{_ as ue}from"./V-Modal.vue_vue&type=script&setup=true&lang.d231cd7d.js";import{_ as ne}from"./V-Progress.vue_vue&type=script&setup=true&lang.0a744130.js";import{_ as ie}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.56a6fc43.js";import{a as re,m as oe}from"./Memberships.23e2b2a3.js";import{g as pe}from"./Recurrences.a78aa81b.js";import{g as me}from"./Discounts.9fec4a64.js";import{e as ce,c as de,s as ve,d as fe}from"./config.8ebe5154.js";import{h as ye}from"./Staffs.6ee2e842.js";import{o as be}from"./PaymentMethodsData.5ccc05c6.js";import{p as he}from"./sidebarLayoutState.7607026f.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.32e67a93.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.b041b4d1.js";import"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.0c1f8e0b.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.d7fa5c56.js";import"./useDropdown.35c6b80e.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.e8d66525.js";import"./V-Dropdown.2bdf3018.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.e220a16b.js";import"./Companies.257787d6.js";import"./activePanelState.8d6f746c.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.6004025a.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.3160f209.js";import"./V-Message.vue_vue&type=script&setup=true&lang.085649cc.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.63bdcb05.js";import"./navbarLayoutState.0b2c05f7.js";import"./video.c58ada5a.js";import"./darkModeState.77580bb1.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.cce55643.js";import"./AnimatedLogo.a42abb6a.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.e5a3139a.js";import"./V-Block.vue_vue&type=script&setup=true&lang.29ae6253.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.068e83d3.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.1e8fe599.js";var _e=b({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e,i=h(!1);_((()=>a.inputs),((e,t)=>{r()}));const r=()=>{i.value=!0,setTimeout((()=>{i.value=!1}),500)},o=g((()=>p.value?a.inputs.filter((e=>e.typeMember.includes("Company"))):a.inputs.filter((e=>e.typeMember.includes("Individual"))))),p=h(!1),m=e=>{p.value=!e.input.model,r()},c=e=>{let a=u(o.value);n.value||(a.select_type=a.select_type?"Company":"Individual",t("returData",a),t("changeStep",e))};return(t,a)=>{const u=l,n=s;return x(),S(n,{titles:{title:e.title},"is-loading":i.value,buttons:["next","back"],step:1,onChangeStep:c},{default:j((()=>[C(u,{"inputs-step":k(o),onChangeSwitch:m},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}}),ge=b({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e=>{t("changeStep",e)};return(t,u)=>{const n=l,i=s;return x(),S(i,{titles:{title:e.title},buttons:["next","prev"],step:2,onChangeStep:a},{default:j((()=>[C(n,{"inputs-step":k(L)},null,8,["inputs-step"])])),_:1},8,["titles"])}}});const xe={key:0},Se=N(" Remove Family Member "),je={key:1,class:"column d-flex justify-content-center flex-column is-4 mx-auto"},Ce=N(" Add Another Family Member ");var ke=b({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(u,{emit:n}){const p=u,m=h(!1);_((()=>p.inputs),((e,t)=>{c()}));const c=()=>{m.value=!0,setTimeout((()=>{m.value=!1}),500)},d=h([]);g((()=>(c(),d.value.forEach(((e,t)=>{f.value.includes(t)?d.value[t]=e.filter((e=>e.category.includes("Minor"))):d.value[t]=JSON.parse(JSON.stringify(p.inputs))})),d.value)));const v=e=>{n("returData",d),n("changeStep",e)},f=h([]),y=g((()=>d.value.length>0)),b=h(0),N=()=>{if(b.value>0)for(var e=0;e<b.value;++e){const e=h(JSON.parse(JSON.stringify(p.inputs)));i(e.value,"misma_direccion").change=V,d.value.push(e.value)}},V=function(e){this.model?(r(e,"postal_code",""),r(e,"country_id",""),r(e,"city_id",""),r(e,"state_id","")):(r(e,"postal_code",o(z.value,"postal_code")),r(e,"country_id",o(z.value,"country_id")),r(e,"city_id",o(z.value,"city_id")),r(e,"state_id",o(z.value,"state_id")))};return(n,i)=>{const r=l,o=e,p=ae,c=t,h=a,_=s;return x(),S(_,{titles:{title:u.title},"is-loading":m.value,buttons:["next","prev"],step:2,onChangeStep:v},{default:j((()=>[k(y)?(x(),S("div",xe,[(x(!0),S(A,null,M(d.value,((e,t)=>(x(),S(p,{key:t,class:"mb-4"},{default:j((()=>[C(r,{"inputs-step":e,onChangeSwitch:e=>{return a=t,void f.value.findIndex((e=>e==a));var a}},null,8,["inputs-step","onChangeSwitch"]),C(o,{onClick:e=>d.value.splice(t,1),color:"danger",class:"mx-auto",icon:"fas fa-times"},{default:j((()=>[Se])),_:2},1032,["onClick"])])),_:2},1024)))),128))])):P("",!0),k(y)?P("",!0):(x(),S("div",je,[C(h,{class:"mb-4"},{default:j((()=>[C(c,null,{default:j((()=>[w(C("input",{type:"number","onUpdate:modelValue":i[1]||(i[1]=e=>b.value=e),class:"input text-center",placeholder:"Family quantity"},null,512),[[D,b.value]])])),_:1})])),_:1}),C(o,{onClick:N,color:"info",icon:"fas fa-check",raised:""},{default:j((()=>[Ce])),_:1})]))])),_:1},8,["titles","is-loading"])}}}),Ae=b({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep"],setup(e,{emit:t}){const a=e,u=h(!1);_((()=>a.inputs),((e,t)=>{i()}));const n=e=>{let a=[];r.value.forEach((e=>{e.values.forEach((e=>{let t=e.values.find((e=>"sms"==e.name)).model.length,l=e.values.find((e=>"email"==e.name)).model.length;a.push({[e.name]:e.value,sms:t>0,email:l>0})}))})),t("returnData",a),t("changeStep",e)},i=()=>{u.value=!0,setTimeout((()=>{u.value=!1}),500)},r=g((()=>a.inputs)),o=h(!1),p=e=>{o.value=!e.input.model,i()};return(t,a)=>{const i=l,o=s;return x(),S(o,{titles:{title:e.title},"is-loading":u.value,buttons:["next","prev"],step:3,onChangeStep:n},{default:j((()=>[C(i,{"inputs-step":k(r),onChangeSwitch:p},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}});const Me={class:""};var Pe=b({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberships:{type:Array,default:[]},notes:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(e,{emit:t}){const a=e,u=h(!1),i=h([]);_((()=>a.inputs),((e,t)=>{r()}));const r=()=>{u.value=!0,setTimeout((()=>{u.value=!1}),500)},p=e=>{let a=null;B.value.forEach(((e,t)=>{0==t?a=e.inputs:i.value.push(e)})),n.value||(t("returnData",{memberMembership:a,familyMembership:i}),t("changeStep",e))},m=g((()=>{B.value=[];const e=h(JSON.parse(JSON.stringify(O.value)));U(e.value),B.value.push({member:a.member,inputs:e.value});for(var t=0;t<a.familiares.length;++t){const e=h(JSON.parse(JSON.stringify(O.value)));U(e.value),B.value.push({member:a.familiares[t],inputs:e.value})}return B.value}));return(t,a)=>{const n=l,i=ae,r=s;return x(),S(r,{titles:{title:e.title},isloading:u.value,buttons:["next","prev"],step:4,onChangeStep:p},{default:j((()=>[(x(!0),S(A,null,M(k(m),((e,t)=>(x(),S(i,{key:`ss${t}`,class:"mb-4"},{default:j((()=>[C("p",Me,[C("b",null,V(k(o)(e.member,"name"))+" "+V(k(o)(e.member,"second_name"))+" "+V(k(o)(e.member,"last_name")),1)]),C(n,{"inputs-step":e.inputs},null,8,["inputs-step"])])),_:2},1024)))),128)),C(i,{class:"mb-4"},{default:j((()=>[C(n,{"inputs-step":e.notes},null,8,["inputs-step"])])),_:1})])),_:1},8,["titles","isloading"])}}});const we=C("div",{id:"payment-element"},null,-1),De=N("Pay now "),Ne=C("div",{id:"payment-message",class:"hidden"},null,-1);var Ve=b({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},emits:["PaymentAction"],setup(t,{emit:a}){const l=t,s=Stripe(p.value);_((()=>l.id),(e=>{console.log("cambio"),u.value=!0,f()}));const u=h(!0);h({id:l.id,amount:l.amount});const n=h(),i=g((()=>"stripe"!=l.url?{payment_type_id:3,amount:l.amount}:{id:l.id,member_mermship_id:l.member_membership,amount:l.amount,payment_type_id:1}));h(null);const r=h(null),o=h(null),d=h(!1),v=h(null),f=async()=>{let e=await m.post(l.url,i.value).then((e=>{r.value=e.data.clientSecret,v.value=e.data.user_id,n.value=s.elements({clientSecret:r.value,appearance:{theme:"night",rules:{".Input":{boxShadow:"none"}}}}),o.value=n.value.create("card",{classes:{base:"base_card"}}),o.value.mount("#payment-element")})).catch((e=>{u.value=!1}));return u.value=!1,e},y=h(null),b=async e=>{e.preventDefault(),d.value=!0;const{setupIntent:t,error:u}=await s.confirmCardSetup(r.value,{payment_method:{card:o.value,billing_details:{name:y.value}}});if(u)d.value=!1,console.log(),c.error(u.message);else{const{payment_method:e}=t,{data:s}=await m.post("paymentStripe",{payment_method:e,amount:l.amount,user_id:v.value,membership_member_id:l.member_membership}).catch((e=>{d.value=!1}));s&&(a("PaymentAction",s),c.success("Success Payment"))}d.value=!1};return $((()=>{d.value=!1,f()})),(t,a)=>{const l=se,s=e,n=le,i=ae;return x(),S(A,null,[u.value?(x(),S(l,{key:0,height:"500px"})):P("",!0),w(C(i,{class:"mt-6"},{default:j((()=>[C("form",{onSubmit:I(b,["prevent"]),id:"payment-form"},[w(C("input",{id:"card-holder-name",class:"input mb-3","onUpdate:modelValue":a[1]||(a[1]=e=>y.value=e),placeholder:"Name",type:"text"},null,512),[[D,y.value]]),we,C(n,{size:"small",active:d.value},{default:j((()=>[C(s,{id:"submit",class:"mt-4",color:"info"},{default:j((()=>[De])),_:1})])),_:1},8,["active"]),Ne],40,["onSubmit"])])),_:1},512),[[F,!u.value]])],64)}}});const $e=C("p",{class:"title is-3"},"Payment Success",-1),Fe=C("h1",{class:"title is-6"},null,-1),Ie={class:"table is-hoverable is-striped is-fullwidth"},Te=C("thead",null,[C("tr",null,[C("th",{scope:"col"},"Membership Name"),C("th",{scope:"col"},"Plan"),C("th",{scope:"col"},"Cost"),C("th",{scope:"col"},"Import")])],-1),qe=C("p",null,null,-1),Ee={style:{"text-align":"right"}},Je={key:0},Re=C("td",null,"Initiation Fee",-1),Le={style:{"text-align":"right"}},ze={style:{"text-align":"right"}},Be=C("td",{colspan:"3",style:{"text-align":"right"}},[C("b",null,"Subtotal")],-1),Oe={style:{"text-align":"right"}},Ue={colspan:"3",style:{"text-align":"right"}},Ge={style:{"text-align":"right"}},He=C("td",{colspan:"3",style:{"text-align":"right"}},[C("b",null,"Total to pay")],-1),Ke={style:{"text-align":"right"}},Qe=C("td",{colspan:"3",style:{"text-align":"right"}},"Recurring total",-1),We={key:2,class:"d-flex justify-content-between"},Ye=N(" Card Payment "),Xe={class:"d-flex mb-4 justify-content-between"},Ze={class:"title is-5"},et=N(" Total: "),tt={class:"title is-5"},at=N(" Cash Total: "),lt={class:"\n            d-flex\n            justify-content-center\n            align-items-center\n            flex-column\n            mb-4\n          "},st=C("p",{class:"title is-5 mb-4"},"Change Back:",-1),ut={class:"title is-3 mb-0"},nt={class:"d-flex justify-content-center flex-wrap mb-4"},it=C("div",{class:"w-100"},null,-1),rt={class:"d-flex justify-content-center"},ot=N("Reset"),pt=N("Confirm");var mt=b({expose:[],props:{type:{type:String,default:"create"},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberMembership:{type:Array,default:[]},familyMembership:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(l,{emit:u}){$((()=>{r()}));const n=h(null),r=async()=>{let e={memberships_id:i(c.value.inputs,"memberships_id").model,recurrences_id:i(c.value.inputs,"recurrences_id").model,is_initiation_fee:0==i(c.value.inputs,"is_initiation_fee").model.length};G(e).then((e=>{n.value=e.data}))},p=h(!1),m=(e,t=3)=>{u("returnData",{total:z}),u("changeStep",e,t,{cash:X.value,changeBack:Z.value})},c=g((()=>B.value[0])),f=g((()=>{let e=d(c.value.inputs,"memberships_id");return null!=e?e:[]})),y=g((()=>{let e=d(c.value.inputs,"recurrences_id");return null!=e?e:[]})),b=g((()=>{let e=o(c.value.inputs,"initiation_fee");return null!=e?e:[]})),F=g((()=>{let e=i(c.value.inputs,"discount");return null!=e?e:[]})),I=g((()=>{let e=parseFloat(T().format("DD")),t=0,a=0;return y.value.days>=30&&(a=e-y.value.payday,t=y.value.amount/y.value.days*a),{days:a,amount:Math.abs(Math.round(t))}})),E=e=>{let t=parseFloat(T().format("DD")),a=0,l=0;return e.days>=30&&(l=t-e.payday,a=e.amount/e.days*l),{days:l,amount:Math.abs(Math.round(a))}},J=e=>{if(""!=o(c.value.inputs,"memberships_id"))return"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:v(e.tax.value),value:e.tax.value}},R=g((()=>J(f))),L=g((()=>{let e=0;return e+=y.value.amount,o(c.value.inputs,"is_initiation_fee").length||(e+=b.value),e-=I.value.amount,F.value.data&&("dolar"==F.value.data.type?e-=F.value.data.value:"percentaje"==F.value.data.type&&(e-=e/100*F.value.data.value)),e+=e/100*R.value.value,o(c.value.member,"leo_vet_fr").length&&(e-=e/100*f.value.descuento_vet),e})),z=g((()=>{let e=0;return e+=L.value,e+=U.value,e})),O=g((()=>{let e=[];return B.value.forEach(((t,a)=>{a>0&&(console.log(t),e.push(t))})),e})),U=g((()=>{let e=0;return O.value.forEach((t=>{if(""!=o(t.inputs,"memberships_id")&&""!=o(t.inputs,"recurrences_id")){let l=(e=>{let t=0;return t+=e.membershipCost,e.is_initiation_fee.length||(t+=e.initiation_fee),t-=e.prorated,null!=e.discount&&("dolar"==e.discount.type?t-=e.discount.value:"percentaje"==e.discount.type&&(t-=t/100*e.discount.value)),t+=t/100*e.objTax.value,e.is_vet&&(t-=t/100*e.discount_vet),t})({membershipCost:(a=d(t.inputs,"recurrences_id"),a.amount),is_initiation_fee:o(t.inputs,"is_initiation_fee"),initiation_fee:o(t.inputs,"initiation_fee"),objTax:J(d(t.inputs,"memberships_id")),prorated:E(d(t.inputs,"recurrences_id")).amount,discount:i(t.inputs,"discount").data,is_vet:i(t.member,"leo_vet_fr").model.length,discount_vet:d(t.inputs,"memberships_id").descuento_vet});e+=l}var a})),e})),W=h(!1);_((()=>K),((e,t)=>{W.value=!0,re.value=!1})),_(H.value,(()=>{H.value||(re.value=!1)}));const Y=h(!1),X=h(0),Z=g((()=>{const e=parseFloat(X.value)-parseFloat(z.value);return e>0?e:0})),ee=h(3),te=g((()=>null!=K.value&&null!=Q.value&&3==ee.value)),se=q(),ne=h(!0),ie=e=>{se.push({name:"members-profile",query:{id:K.value},hash:"#memberMembership"}),ee.value=0,ne.value=!1};h(!1);const re=h(!1);return h(!1),(u,r)=>{const d=ae,f=e,y=le,b=Ve,h=t,_=a,g=ue,$=s;return""!=k(o)(k(c).inputs,"memberships_id")?(x(),S($,{key:0,titles:{title:l.title},"is-loading":p.value,buttons:["prev"],step:5,onChangeStep:m},{default:j((()=>[ne.value?P("",!0):(x(),S(d,{key:0,color:"success",class:"mb-3"},{default:j((()=>[$e])),_:1})),n.value?(x(),S(d,{key:1,class:"mb-4"},{default:j((()=>[Fe,C("table",Ie,[Te,C("tbody",null,[C("tr",null,[C("td",null,V(n.value.membership.name),1),C("td",null,V(n.value.quote.computed.recurring.interval),1),C("td",null,[qe,N(" "+V(k(v)((new Intl.NumberFormat).format(10*n.value.quote.computed.recurring.amount_subtotal))),1)]),C("td",Ee,V(k(v)((new Intl.NumberFormat).format(10*n.value.quote.computed.recurring.amount_subtotal))),1)]),0==k(i)(k(c).inputs,"is_initiation_fee").model.length?(x(),S("tr",Je,[C("td",null,V(n.value.membership.name),1),Re,C("td",null,V(k(v)((new Intl.NumberFormat).format(n.value.membership.initiation_fee))),1),C("td",Le,V(k(v)(n.value.membership.initiation_fee)),1)])):P("",!0),C("tr",ze,[Be,C("td",null,V(k(v)((new Intl.NumberFormat).format(10*n.value.quote.amount_subtotal))),1)]),C("tr",Oe,[C("td",Ue," Tax "+V(n.value.tax.percentage)+"% ",1),C("td",null,V(k(v)((new Intl.NumberFormat).format(10*n.value.quote.total_details.amount_tax))),1)]),C("tr",Ge,[He,C("td",null,V(k(v)((new Intl.NumberFormat).format(10*n.value.quote.amount_total))),1)]),C("tr",Ke,[Qe,C("td",null,V(k(v)((new Intl.NumberFormat).format(10*n.value.quote.computed.recurring.amount_total))),1)])])])])),_:1})):P("",!0),ne.value?(x(),S("div",We,[C(y,{size:"small",active:re.value},{default:j((()=>[C(f,{color:"success",onClick:r[1]||(r[1]=e=>(m(6,3),ee.value=3,re.value=!0))},{default:j((()=>[Ye])),_:1})])),_:1},8,["active"])])):P("",!0),k(te)?(x(),S(b,{key:3,amount:k(z),id:k(K),member_membership:k(Q),onPaymentAction:ie},null,8,["amount","id","member_membership"])):P("",!0),C(g,{open:Y.value,actions:"center",onClose:r[6]||(r[6]=e=>Y.value=!1)},{content:j((()=>[C("div",Xe,[C("p",Ze,[et,C("b",null,V(k(v)(k(z))),1)]),C("p",tt,[at,C("b",null,V(k(v)(X.value)),1)])]),C("div",lt,[st,C("p",ut,[C("b",null,V(k(v)(k(Z))),1)])]),C("div",nt,[C(f,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:r[2]||(r[2]=e=>X.value=k(z))},{default:j((()=>[N(" Full Payment "+V(k(v)(k(z))),1)])),_:1}),it,(x(),S(A,null,M([5,10,20,50,100],((e,t)=>C(f,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>X.value+=e},{default:j((()=>[N(" $"+V(e),1)])),_:2},1032,["onClick"]))),64))]),C("div",rt,[C(_,null,{default:j((()=>[C(h,null,{default:j((()=>[w(C("input",{"onUpdate:modelValue":r[3]||(r[3]=e=>X.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[D,X.value]])])),_:1})])),_:1})])])),action:j((()=>[C(f,{color:void 0,onClick:r[4]||(r[4]=e=>X.value=0),class:"d-flex justify-content-center",raised:""},{default:j((()=>[ot])),_:1}),C(f,{color:"success",onClick:r[5]||(r[5]=e=>(m(6,1),ee.value=1)),disabled:k(z)>X.value,class:"d-flex justify-content-center",raised:""},{default:j((()=>[pt])),_:1},8,["disabled"])])),_:1},8,["open"])])),_:1},8,["titles","is-loading"])):P("",!0)}}});E("data-v-915b2888");const ct={class:"content"},dt={class:"content-text"};J();var vt=b({expose:[],props:{active:{type:Boolean,default:!1,required:!0},step:{type:Number,default:0,required:!0},text:{type:String,default:""}},setup(e){const t=e,a=g((()=>t.active?100:0));return(t,l)=>{const s=ne;return x(),S("div",ct,[C("div",{class:["circle",e.active?"active":""]},null,2),C(s,{class:"progressbar",value:k(a),size:"smaller"},null,8,["value"]),C("div",dt,[C("p",null,"STEP "+V(e.step),1),C("p",null,[C("b",null,V(e.text),1)])])])}}});vt.__scopeId="data-v-915b2888";const ft={class:"columns is-multiline"},yt={class:"column is-12"},bt={class:"column is-9"},ht={class:"column is-3"};var _t=b({expose:[],setup(l){he.value="Add New members",R({title:"Members"}),$((()=>{le(),re().then((e=>{f(O,"memberships_id",e.data.memberships)})),i(O.value,"memberships_id").disabled=!1,i(O.value,"recurrences_id").disabled=!1,i(O.value,"is_initiation_fee").disabled=!1,i(O.value,"discount").disabled=!1,me(1,"membership").then((e=>{f(O,"discount",e.data.discounts)})),pe().then((e=>{})),ce().then((e=>{f(z,"city_id",de.value),f(W,"city_id",de.value),f(z,"state_id",ve.value),f(W,"state_id",ve.value),f(z,"country_id",fe.value),f(W,"country_id",fe.value)})),ye().then((e=>{f(O,"staff_id",e.data)}))}));const s=h(1),n=h([{step:1,text:"Member Information",categories:["Adult","Minor","Prospect"]},{step:2,text:"Add Family Member",categories:["Adult","Prospect"]},{step:2,text:"Parent / Guardian",categories:["Minor"]},{step:3,text:"Contact Preference",categories:["Adult","Minor","Prospect"]},{step:4,text:"Select membership",categories:["Adult","Minor","Prospect"]},{step:5,text:"Add Payment Method",categories:["Adult","Minor","Prospect"]},{step:6,text:"Sign Contract & Waiver",categories:["Adult","Minor","Prospect"]}]),r=g((()=>z.value.filter((e=>e.categories.includes(X.value.model))))),o=g((()=>n.value.find((e=>e.step==s.value&&e.categories.includes(X.value.model))))),p=g((()=>n.value.filter((e=>e.categories.includes(X.value.model))))),m=g((()=>u(L.value))),d=(e,t=3,a={})=>{X.value.model,6==e?ae(t,a):s.value=e},v=h(null),b=e=>{v.value=e},_=h(null),D=e=>{_.value=e},I=h([]),T=e=>{I.value=e.value},q=h([]),E=h([]),J=e=>{E.value=e.familyMembership.value,q.value=e.memberMembership};h(null),h(null);const U=h(null),G=e=>{U.value=e.total.value},ae=(e,t)=>{const a=new FormData;((e,t)=>{for(var a in t)e.append(a,t[a])})(a,v.value);let l=_.value;for(var s=0;s<l.length;s++){var n=l[s];for(var i in n)a.append(`notifications[${s}][${i}]`,n[i])}let r=u(q.value);for(var s in r)if("diciplines"==s){let e=r[s];for(var o=0;o<e.length;++o)a.append("diciplines[]",e[o])}else a.append(s,r[s]);a.append("total",U.value),a.append("payment_type_id",e),1==e&&(a.append("cash",t.cash),a.append("cash_back",t.changeBack));let p=u(X.value,{array:!1});for(var s in p)a.append(s,p[s]);let d=u(Y.value);for(var s in d)a.append(s,d[s]);let f=u(be.value);for(var s in f)a.append(s,f[s]);for(var s in E.value.forEach(((e,t)=>{let l=u(e.member);for(var s in l)"category"==s&&(l[s]?l[s]="Minor":l[s]="Adult"),a.append(`familiares[${t}][${s}]`,l[s]);let n=_.value;for(s=0;s<n.length;s++){var i=n[s];for(var r in i)a.append(`familiares[${t}][notifications][${s}][${r}]`,i[r])}let o=u(e.inputs);for(var s in o)if("diciplines"==s){let e=o[s];for(var p=0;p<e.length;++p)a.append(`familiares[${t}][diciplines][]`,e[p])}else a.append(`familiares[${t}][${s}]`,o[s]);a.append(`familiares[${t}][total]`,U.value);let m=u(Y.value);for(var s in m)a.append(`familiares[${t}][${s}]`,m[s]);let c=u(be.value);for(var s in c)a.append(`familiares[${t}][${s}]`,c[s])})),m.value)a.append(s,m.value[s]);ee(a).then((e=>{H.value=!1,console.log(e),K.value=e.data.member.id,Q.value=e.data.member.membership_members.id,te.value=e.data.member,console.log(te.value)})).catch((e=>{for(var t in console.log(e),e.value=!0,e.response.data.errores)e.response.data.errores[t].forEach((e=>{c.error(`${t}: ${e}`)}))}))},le=()=>{K.value=null,Q.value=null;let e=["is_family","principal_family"];y(z.value.filter((t=>!e.includes(t.name)))),e=["recurrence"],y(O.value.filter((t=>!e.includes(t.name)))),y(Y.value),y(L.value)};return(l,u)=>{const n=e,i=t,m=a,c=_e,v=ge,f=ke,y=Ae,h=Pe,_=mt,g=vt,$=ie;return x(),S($,null,{default:j((()=>[C("div",ft,[C("div",yt,[1==s.value?(x(),S(m,{key:0,class:"w-100",addons:""},{default:j((()=>[(x(!0),S(A,null,M(k(X).values,((e,t)=>(x(),S(i,{key:`categoymember-${t}`},{default:j((()=>[C(n,{onClick:t=>k(X).model=e,color:k(X).model==e?"primary":void 0,rounded:""},{default:j((()=>[N(V(e),1)])),_:2},1032,["onClick","color"])])),_:2},1024)))),128))])),_:1})):P("",!0)]),C("div",bt,[w(C(c,{type:"create",title:k(o).text,inputs:k(r),onChangeStep:d,onReturData:b},null,8,["title","inputs"]),[[F,1==s.value]]),w(C(v,{title:k(o).text,onChangeStep:d},null,8,["title"]),[[F,2==s.value&&"Minor"==k(X).model]]),w(C(f,{type:"create",title:k(o).text,inputs:k(W),onChangeStep:d,onReturData:T},null,8,["title","inputs"]),[[F,2==s.value&&("Adult"==k(X).model||"Prospect"==k(X).model)]]),w(C(y,{type:"create",title:k(o).text,inputs:k(Z),onChangeStep:d,onReturnData:D},null,8,["title","inputs"]),[[F,3==s.value]]),w(C(h,{type:"create",member:k(r),familiares:I.value,title:k(o).text,inputs:k(B),memberships:k(oe),notes:k(Y),onChangeStep:d,onReturnData:J},null,8,["member","familiares","title","inputs","memberships","notes"]),[[F,4==s.value]]),5==s.value?(x(),S(_,{key:0,type:"create",title:k(o).text,member:k(r),familiares:I.value,inputs:k(B),"member-membership":q.value,"family-membership":E.value,onChangeStep:d,onReturnData:G},null,8,["title","member","familiares","inputs","member-membership","family-membership"])):P("",!0)]),C("div",ht,[(x(!0),S(A,null,M(k(p),((e,t)=>(x(),S(g,{key:t,active:e.step<=s.value,step:e.step,text:e.text},null,8,["active","step","text"])))),128))])])])),_:1})}}});export default _t;
