import{A as a,n as e,g as s}from"./index.91d8990f.js";import{l as t}from"./Companies.66421503.js";import{r as o,c as l}from"./vendor.c636f33b.js";const n=o([]),r=o(!1);o(!1);const u=o(1),c=o(null),i=o(!1),d=o(!1),v=o(null),p=o(null),_=o(!1),m=a=>{const s=n.value.findIndex((e=>e.product_id==a.id));if(a.stock&&a.stock.current_stock>0)if(-1==s)n.value.push({product_id:a.id,count:1,products_amount:a.price,name:a.name,stock:a.stock.current_stock});else{n.value.find((e=>e.product_id==a.id)).count+1<=a.stock.current_stock?n.value.find((e=>e.product_id==a.id)).count++:e.error("Sin Stock")}else e.error("Sin Stock")},f=l((()=>{let a=0;return n.value.forEach((e=>{a+=e.products_amount*e.count})),a})),y=l((()=>$.value&&f.value?f.value/100*$.value.find((a=>1==a.id)).value:0)),k=l((()=>f.value+y.value)),w=(a,s,t)=>{"minus"==a?(s.count>0&&s.count--,0==s.count&&n.value.splice(t,1)):s.count+1<=s.stock?s.count++:e.error("Sin Stock")},h=o(0),b=l((()=>{const a=parseFloat(h.value)-parseFloat(k.value);return a>0?a:0})),x=a=>{h.value=parseFloat(h.value)+parseFloat(a)},S=o(null),g=o({email:null,phone:null,barcode:null}),j=()=>{const a={total:k.value,tax_id:1,payment_type_id:S.value,email:g.value.email,phone:g.value.phone,barcode:g.value.barcode,change_back:b.value,products:n.value,locations_id:s(t.value,"locations_id").model};F(a).then((a=>{console.log(a.data),1==S.value&&(S.value=null,g.value.email=null,g.value.phone=null,g.value.barcode=null,h.value=0,n.value=[],u.value=3,r.value=!1),3==S.value&&(c.value=a.data.order),c.value=a.data.order,e.success("Success"),z({invoice_pdf:a.data.invoice_pdf,order:a.data.order})})).catch((a=>{e.error(a.response.data.message)}))},F=async e=>await a.post("orders",e),A=async e=>await a.post("orders/activate",{payment_intent_client_secret:e});o("");const $=o(null),q=async()=>{const e=await a.get("taxes");return $.value=e.data.taxes,e},z=a=>{p.value=a.invoice_pdf,c.value=a.order,i.value=!0},B=async e=>await a.post("orders/store_debit_automatic",e),C=async e=>await a.post("orders/swipe_card",e),E=async e=>await a.post("orders/cancel_payment_intent",{id:e}),I=async(e,s)=>await a.post("orders/another_try",{id:e,terminal_id:s}),D=async e=>await a.post("orders/capture_payment",{id:e}),G=async(e,s)=>await a.post(`orders/send_receipt/${e}`,{email:s}),H=async(e,s,t)=>await a.post(`orders/send_invoice_mail/${e}`,{email:s,invoice_pdf:t});export{A,d as B,m as a,n as b,w as c,k as d,r as e,h as f,b as g,x as h,z as i,B as j,p as k,G as l,v as m,H as n,c as o,j as p,S as q,i as r,f as s,y as t,C as u,E as v,I as w,D as x,_ as y,q as z};
