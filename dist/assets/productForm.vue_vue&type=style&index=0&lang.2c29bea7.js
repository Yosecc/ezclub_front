import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.94a80eab.js";import{_ as t}from"./V-Avatar.vue_vue&type=script&setup=true&lang.e1ab07d1.js";import{_ as s}from"./inputsLayaut.vue_vue&type=style&index=0&lang.fe437b85.js";import{_ as a}from"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.4ed7b4e8.js";import{_ as r}from"./V-Tag.vue_vue&type=script&setup=true&lang.b4486146.js";import{_ as l}from"./V-Card.vue_vue&type=script&setup=true&lang.bff7be9b.js";import{d as o,a4 as i,b as c,o as u,i as n,k as p,j as d,G as f,F as v,D as m,Q as b,R as h,z as y,E as _}from"./vendor.1faf4f77.js";import{i as g,c as j,d as k,e as w,f as $,s as x}from"./Products.cca68b61.js";import{b as A,v as C,g as E,n as P,p as D,e as V}from"./index.6fffb7e6.js";const Y={class:"title is-4 mb-0"},S=_(" Go Back "),z=_(" Save Changes "),B={class:"columns is-multiline mx-auto"},F={class:"p-6 column is-12"},G=p("h1",{class:"title is-5 mb-0"},"Product Picture",-1),M={class:"d-flex justify-content-center"},T={class:"text-center"},q={class:"column is-12"},L=p("h1",{class:"title is-5"},"Prices",-1),Q={class:"table is-hoverable is-fullwidth"},R=p("thead",null,[p("tr",null,[p("th",{scope:"col"},"Status"),p("th",{scope:"col"},"Price"),p("th",{scope:"col"},"Create Date"),p("th",{scope:"col"},"User")])],-1),U={class:"w-100 justify-content-center d-flex"},H=_(" Add Price ");var I=o({expose:[],props:{type:{type:String,default:"create"}},setup(o){const _=o,I=i(),J=c((()=>"create"==_.type?{title:"Add a new product",subtitle:"Add information for a new product"}:{title:"Edit product",subtitle:"Edit information for a product"})),K=c((()=>`${A.value}storage/${C(g.value,"photo")}`)),N=()=>{""!=E(j.value,"price").model?confirm("Are you sure you want to add a new price? This action will disable the previous price and it cannot be restored")&&w(E(j.value,"price").model).then((e=>{P.success("success save"),window.location.reload()})).catch((e=>{for(var t in e.response.data.errores)e.response.data.errores[t].forEach((e=>{P.error(`${t}: ${e}`)}))})):P.error("Price is required")},O=()=>{let e=D(g.value);e.price=E(j.value,"price").model;const t=new FormData;for(var s in e)"locations"==s?e[s].forEach((e=>{t.append("locations[]",e)})):t.append(s,e[s]);console.log(...t),"edit"==_.type&&$(t).then((e=>{P.success(e.data.message),V(g.value),I.back()})).catch((e=>{for(var t in e.response.data.errores)e.response.data.errores[t].forEach((e=>{P.error(`${t}: ${e}`)}))})),"create"==_.type&&x(t).then((e=>{P.success(e.data.message),V(g.value),I.back()})).catch((e=>{for(var t in e.response.data.errores)e.response.data.errores[t].forEach((e=>{P.error(`${t}: ${e}`)}))}))};return(i,c)=>{const _=e,w=t,$=s,x=a,A=r,C=l;return u(),n("div",null,[p(x,null,{"header-left":d((()=>[p("div",null,[p("h1",Y,v(m(J).title),1),p("p",null,v(m(J).subtitle),1)])])),"header-right":d((()=>[p(_,{onClick:c[1]||(c[1]=e=>m(I).back()),class:"mr-3"},{default:d((()=>[S])),_:1}),p(_,{onClick:O,color:"primary"},{default:d((()=>[z])),_:1})])),content:d((()=>[p("div",B,[p("div",F,[G,p("div",M,[p("div",T,[p(w,{picture:m(K),class:"mb-4",size:"xl"},null,8,["picture"]),p($,{"inputs-step":i.input_image},null,8,["inputs-step"])])])]),p("div",q,[p($,{"inputs-step":m(g)},null,8,["inputs-step"]),"create"==o.type?(u(),n($,{key:0,"inputs-step":m(j)},null,8,["inputs-step"])):f("v-if",!0)])])])),_:1}),"edit"==o.type?(u(),n(C,{key:0,class:"mt-4"},{default:d((()=>[L,p("table",Q,[R,p("tbody",null,[(u(!0),n(b,null,h(m(k).prices,((e,t)=>(u(),n("tr",{key:`price-${t}`},[p("td",null,[p(A,{color:e.status?"success":"danger",label:e.status?"Active":"Archived",rounded:""},null,8,["color","label"])]),p("td",null,"$"+v(e.price),1),p("td",null,v(m(y)(e.created_at).format("MM-DD-YYYY")),1),p("td",null,v(e.user.name),1)])))),128))])]),p("div",U,[p($,{"inputs-step":m(j)},null,8,["inputs-step"]),p(_,{color:"info",onClick:N,class:"mt-5 ml-3"},{default:d((()=>[H])),_:1})])])),_:1})):f("v-if",!0)])}}});export{I as _};
