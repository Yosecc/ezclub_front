import{_ as e}from"./V-Placeload.9d0101ab.js";import{_ as t}from"./V-Button.vue_vue&type=script&setup=true&lang.a97a12f7.js";import{_ as s}from"./V-Avatar.vue_vue&type=script&setup=true&lang.acbf948e.js";import{_ as a}from"./V-Control.b36667bf.js";import{_ as l}from"./V-Field.vue_vue&type=script&setup=true&lang.189c1bf7.js";import{_ as o}from"./V-Tag.vue_vue&type=script&setup=true&lang.eb96c098.js";import{_ as u}from"./V-FlexTable.vue_vue&type=script&setup=true&lang.a0cb7547.js";import{_ as r}from"./V-PlaceholderSection.vue_vue&type=script&setup=true&lang.3abc5d60.js";import{_ as n}from"./V-Modal.vue_vue&type=script&setup=true&lang.5145729d.js";import{_ as c}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.b8f434c4.js";import{d as i,z as p,r as d,A as v,b as m,o as f,h as _,B as y,D as b,j,E as k,k as h,K as g,L as x,N as V,O as P,G as S,S as w,H as C}from"./vendor.e3a29b40.js";import{p as T}from"./sidebarLayoutState.436b738a.js";import{a as I,b as A,d as B}from"./Inventory.1b3fcc81.js";import{g as D,p as L}from"./Products.3445c250.js";import{n as U}from"./Mixin.788265f9.js";import{a as z}from"./index.430aaeb5.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.c122a196.js";import"./useDropdown.dfad556c.js";import"./V-Dropdown.7404a3e2.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.1a89ef3a.js";import"./activePanelState.5a49edcb.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.f55dcd08.js";import"./V-Message.vue_vue&type=script&setup=true&lang.f3abd056.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.b59ccca7.js";import"./navbarLayoutState.a69fd485.js";import"./video.674f0486.js";import"./darkModeState.a53f3c67.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.2f79059e.js";import"./AnimatedLogo.e43df3fc.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.5e6c3f74.js";import"./V-Block.vue_vue&type=script&setup=true&lang.f5251e79.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.16aa198e.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.c5504f9b.js";import"./moment.08a7f518.js";import"./notyf.es.f84e4201.js";const M={key:0,class:"page-content-inner"},$={class:"title is-4 mb-0"},E={class:"title is-6 mb-0"},N={key:0,class:"title is-6"},F={key:1},q={class:"title is-5"},G={key:2},H={class:"d-flex justify-content-end mb-4 w-100"},K=C("Back"),O=C("Save"),J=h("div",{class:"flex-table-header"},[h("span",null,"Product"),h("span",null,"Previous stock"),h("span",null,"Current stock"),h("span",null,"Total"),h("span",null,"-")],-1),Q={class:"flex-table-cell","data-th":"product"},R={class:"light-text d-flex align-items-center"},W={class:"flex-table-cell","data-th":"current_stock"},X={class:"flex-table-cell","data-th":"previous_stock"},Y={class:"flex-table-cell","data-th":"previous_stock"},Z={class:"flex-table-cell","data-th":"-"},ee={class:"d-flex justify-content-end mt-4 w-100"},te=C("Save"),se=C("Confirm");var ae=i({expose:[],setup(i){T.value="Inventory Create",p({title:"Inventory"});const C=y(),ae=b();d([]),v((()=>{re.value=!0,D().then((e=>{I(C.query.id).then((e=>{ue(),setTimeout((()=>{re.value=!1}),1e3)}))}))}));const le=d([]),oe=m((()=>le.value)),ue=()=>{L.value.forEach((e=>{let t=null,s=null,a=null,l=!1;if(null!=A.value.products){let o=A.value.products.find((t=>t.product_id==e.id));null!=o&&(t=o.current_stock,s=o.previous_stock,a=t+s,l=!0)}let o={id:e.id,name:e.name,photo:e.photo,current_stock:t,previous_stock:s,subtotal:a,status:l};0==A.value.status&&0==o.status||le.value.push(o)}))},re=d(!1),ne=d(!1),ce=d("Processing Inventory... Please do not close the browser window until the process is complete"),ie=()=>{ne.value=!1,re.value=!0;let e={products:de.value};B(e).then((e=>{console.log("response.data",e.data),U.success("Data Save"),re.value=!1}))},pe=d({}),de=d([]),ve=()=>{ne.value=!0,oe.value.forEach((e=>{null!=e.previous_stock&&null!=e.current_stock&&de.value.push({product_id:e.id,previous_stock:e.previous_stock,current_stock:e.current_stock})})),pe.value=`Do you want to save ${de.value.length} products out of ${L.value.length}? Products not added in inventory will have stock = 0`},me=m((()=>null!=A.value.products?A.value.products.length:""));return(i,p)=>{const d=e,v=t,m=s,y=a,b=l,C=o,T=u,I=r,B=n,D=c;return f(),_(D,null,{default:j((()=>[k(A)?(f(),_("div",M,[h("h1",$,"Inventory #"+g(k(A).id),1),h("h1",E," Status: "+g(1==k(A).status?"Active":"Close"),1),k(A)?(f(),_("h1",N," Products: "+g(k(me)),1)):x("",!0),re.value?(f(),_("div",F,[h("p",q,g(ce.value),1),h(d,{height:"200px"})])):(f(),_("div",G,[h("div",H,[h(v,{color:"",raised:"",onClick:p[1]||(p[1]=e=>k(ae).back()),class:"mr-3"},{default:j((()=>[K])),_:1}),k(A).status?(f(),_(v,{key:0,color:"success",onClick:ve,raised:""},{default:j((()=>[O])),_:1})):x("",!0)]),h(T,null,{header:j((()=>[J])),body:j((()=>[(f(!0),_(V,null,P(le.value,(e=>(f(),_("div",{key:e.id,class:"flex-table-item"},[h("div",Q,[h("span",R,[h(m,{picture:`${k(z)}storage/${e.photo}`,color:"primary",size:"medium",class:"mr-3"},null,8,["picture"]),h("div",null,[h("p",null,g(e.name),1)])])]),h("div",W,[h(b,null,{default:j((()=>[h(y,null,{default:j((()=>[S(h("input",{"onUpdate:modelValue":t=>e.previous_stock=t,type:"number",class:"input",readonly:0==k(A).status},null,8,["onUpdate:modelValue","readonly"]),[[w,e.previous_stock]])])),_:2},1024)])),_:2},1024)]),h("div",X,[h(b,null,{default:j((()=>[h(y,null,{default:j((()=>[S(h("input",{"onUpdate:modelValue":t=>e.current_stock=t,type:"number",class:"input",readonly:0==k(A).status},null,8,["onUpdate:modelValue","readonly"]),[[w,e.current_stock]])])),_:2},1024)])),_:2},1024)]),h("div",Y,[h("p",null,g(isNaN(e.subtotal)?"":e.subtotal),1)]),h("div",Z,[e.status?(f(),_(C,{key:0,color:"success",label:"Save",rounded:"",elevated:""})):(f(),_(C,{key:1,color:void 0,label:"Pending",rounded:"",elevated:""}))])])))),128))])),_:1}),h("div",ee,[k(A).status?(f(),_(v,{key:0,color:"success",onClick:ve,raised:""},{default:j((()=>[te])),_:1})):x("",!0)])])),h(B,{open:ne.value,actions:"center",onClose:p[2]||(p[2]=e=>ne.value=!1)},{content:j((()=>[h(I,{title:"Are you sure you want to save the changes?",subtitle:"This action will affect the stock of all products and cannot be undone."}),h("p",null,g(pe.value),1)])),action:j((()=>[h(v,{color:"primary",onClick:ie,raised:""},{default:j((()=>[se])),_:1})])),_:1},8,["open"])])):x("",!0)])),_:1})}}});export default ae;
