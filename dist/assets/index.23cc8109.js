import{_ as e}from"./V-Placeload.e1b5c41e.js";import{_ as t}from"./V-Avatar.vue_vue&type=script&setup=true&lang.119fc4d3.js";import{_ as a}from"./V-Card.vue_vue&type=script&setup=true&lang.e9093fe9.js";import{m as l,i as s,a as n,b as i,s as r,c as u,p as o,d as c,e as m,f as d,g as p,h as v,j as h,k as b,l as y,n as _,o as f,q as g,r as x,t as k,u as M,v as j,w as C,x as S,D as w}from"./Members.c4485938.js";import{a as D,P,A as $,F as Y}from"./index.f16c85df.js";import{d as I,w as T,z as A,b as E,r as F,D as V,o as N,h as q,K as z,A as W,j as H,k as L,J as R,L as B,N as U,F as O,Q as G,a3 as J,G as K,R as Q,I as X,y as Z}from"./vendor.685e53b0.js";import{_ as ee}from"./V-Button.vue_vue&type=script&setup=true&lang.e4f3f19e.js";import{_ as te}from"./V-Loader.vue_vue&type=script&setup=true&lang.bfc6d522.js";import{_ as ae}from"./V-Control.2f65f00c.js";import{_ as le}from"./V-Field.vue_vue&type=script&setup=true&lang.c6cf6183.js";import{_ as se}from"./V-Modal.vue_vue&type=script&setup=true&lang.146bedbc.js";import{k as ne,v as ie,i as re,m as ue,n as oe,p as ce,l as me,s as de,a as pe}from"./ActivityPanel.vue_vue&type=style&index=0&lang.251c264b.js";import{h as ve}from"./moment.08a7f518.js";import{_ as he,a as be,d as ye}from"./Companies.3346badf.js";import{_ as _e}from"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.fc314ba9.js";import{_ as fe}from"./signComponent.vue_vue&type=script&setup=true&lang.6fa7cb35.js";import{_ as ge}from"./pdf_icon.4b8e9b3e.js";import{_ as xe}from"./FlexTableDropdown.vue_vue&type=script&setup=true&lang.cc61794c.js";import{_ as ke}from"./V-Block.vue_vue&type=script&setup=true&lang.218e9dd3.js";import{_ as Me}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.4a239076.js";import{p as je}from"./sidebarLayoutState.b1e70c1b.js";import{g as Ce}from"./Discounts.779840ac.js";import{g as Se}from"./Memberships.bf6d470d.js";import{g as we,r as De}from"./Recurrences.c4feb7ed.js";import{h as Pe}from"./Staffs.4097c3a8.js";import{a as $e}from"./Diciplines.f0ecfeeb.js";import{g as Ye}from"./config.60b6b7b6.js";import"./useDropdown.0a27f828.js";import"./V-Dropdown.4b56e22f.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.a7327817.js";import"./notyf.es.f84e4201.js";import"./activePanelState.618a6e66.js";import"./fastpizza.1e58d0ec.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.0ae318bf.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.fbfe4d00.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.62f4b657.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.1e68f9e1.js";import"./V-Message.vue_vue&type=script&setup=true&lang.8a404c76.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.5d7a09f8.js";import"./navbarLayoutState.69a0c767.js";import"./video.89824664.js";import"./darkModeState.ac572066.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.7abfdf0e.js";import"./AnimatedLogo.77bc3feb.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.0d63a362.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.9f34b4f7.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.0749519e.js";const Ie={class:"d-flex justify-content-center align-items-center flex-column mb-4"},Te={class:"mt-5 text-center"},Ae={class:"title is-5 is-narrow"},Ee={class:"w-100 mt-5"},Fe=L("i",{class:"iconify",style:{"font-size":"20px",color:"white"},"data-icon":"feather:arrow-right","aria-hidden":"true"},null,-1);var Ve=I({expose:[],props:{category:{type:String,default:"Adult"}},emits:["changeMenu"],setup(e,{emit:n}){const i=e,r=W();T((()=>r.hash),(e=>{m.value=u.findIndex((e=>e.component==r.hash.slice(1)))})),A((()=>{""!=r.hash&&(m.value=u.findIndex((e=>e.component==r.hash.slice(1))))}));const u=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Family Members",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"}],o=[{name:"Personal Information",component:"personalInformation"},{name:"Waiver",component:"memberWaiver"}],c=E((()=>["Adult","Minor"].includes(i.category)?u:o)),m=F(0),d=F(null),p=E((()=>null!=c.value[m.value]?c.value[m.value].component:d.value));return(e,i)=>{const r=t,u=a;return V(l)?(N(),q(u,{key:0,color:V(s)?void 0:"danger"},{default:H((()=>[L("div",Ie,[L(r,{picture:`${V(D)}storage/${V(l).photo}`,size:"xl"},null,8,["picture"]),L("div",Te,[L("h2",Ae,R(V(l).name)+" "+R(V(l).second_name)+" "+R(V(l).last_name),1)])]),L("div",Ee,[L("ul",null,[(N(!0),q(B,null,U(V(c),((e,t)=>(N(),q("li",{key:`item-${t}`},[L(u,{class:["\n              mb-3\n              item_menu\n              d-flex\n              justify-content-between\n              align-items-center\n            ",m.value==t?"active":""],color:m.value==t?"warning":void 0,elevated:m.value==t,onClick:e=>(e=>{m.value=e,n("changeMenu",p)})(t)},{default:H((()=>[L("p",null,R(e.name),1),Fe])),_:2},1032,["class","color","elevated","onClick"])])))),128))])])])),_:1},8,["color"])):z("",!0)}}});const Ne=L("div",{id:"payment-element"},null,-1),qe=K(" Pay now "),ze=L("div",{id:"payment-message",class:"hidden"},null,-1);var We=I({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},setup(t){const l=t,s=Stripe(P.value);T((()=>l.id),(e=>{console.log("cambio"),n.value=!0,m()}));const n=F(!0);F({id:l.id,amount:l.amount});const i=F(),r=E((()=>"stripe"!=l.url?{payment_type_id:3,amount:l.amount}:{id:l.id,member_mermship_id:l.member_membership,amount:l.amount,payment_type_id:1})),u=F(null),o=F(null),c=F(!1),m=async()=>{let e=await $.post(l.url,r.value).then((e=>{u.value=e.data.clientSecret,i.value=s.elements({clientSecret:u.value}),o.value=i.value.create("payment"),o.value.mount("#payment-element")})).catch((e=>{}));return n.value=!1,e},d=async e=>{e.preventDefault(),c.value=!0,await s.confirmPayment({elements:i.value,confirmParams:{return_url:`${Y.value}members/process?payment_type=3&id=`+l.id+`&membership=${l.member_membership}`}}),c.value=!1};return A((()=>{m()})),(t,l)=>{const s=e,i=ee,r=te,u=a;return N(),q(B,null,[n.value?(N(),q(s,{key:0,height:"500px"})):z("",!0),O(L(u,{class:"mt-6"},{default:H((()=>[L("form",{onSubmit:J(d,["prevent"]),id:"payment-form"},[Ne,L(r,{size:"small",active:c.value},{default:H((()=>[L(i,{id:"submit",class:"mt-4",color:"success"},{default:H((()=>[qe])),_:1})])),_:1},8,["active"]),ze],40,["onSubmit"])])),_:1},512),[[G,!n.value]])],64)}}});const He={class:"table is-hoverable is-striped is-fullwidth"},Le=L("th",{scope:"col"},"Members",-1),Re=L("th",{scope:"col"},"Membership Name",-1),Be=L("th",{scope:"col"},"Recurrence",-1),Ue=L("th",{scope:"col"},"Prorated",-1),Oe=L("th",{scope:"col"},"Membership Cost",-1),Ge=L("th",{scope:"col"},"Initiation Fee",-1),Je=L("th",{scope:"col"},"Discount",-1),Ke=L("th",{scope:"col"},"Taxes",-1),Qe={key:0,scope:"col"},Xe=L("th",{scope:"col"},"Sub Total",-1),Ze={key:0},et={key:0},tt={key:1},at={key:2},lt={key:0},st=L("br",null,null,-1),nt={key:1},it={key:0},rt={key:1},ut={key:0},ot={key:0},ct={key:1},mt={key:1},dt={key:3},pt={class:"is-end"},vt={class:"d-flex justify-content-between"},ht=K(" Card Payment "),bt=K(" Cash Payment "),yt={class:"d-flex mb-4 justify-content-between"},_t={class:"title is-5"},ft=K(" Total: "),gt={class:"title is-5"},xt=K(" Cash Total: "),kt={class:"\n            d-flex\n            justify-content-center\n            align-items-center\n            flex-column\n            mb-4\n          "},Mt=L("p",{class:"title is-5 mb-4"},"Change Back:",-1),jt={class:"title is-3 mb-0"},Ct={class:"d-flex justify-content-center flex-wrap mb-4"},St=L("div",{class:"w-100"},null,-1),wt={class:"d-flex justify-content-center"},Dt=K("Reset"),Pt=K("Confirm");var $t=I({expose:[],setup(e){F(!1);const t=F(!1);A((()=>{console.log("se monto el payment")}));const s=E((()=>{let e=ne(i.value,"memberships_id");return null!=e?e:[]})),u=E((()=>{let e=ne(i.value,"recurrences_id");return null!=e?e:[]})),o=E((()=>{let e=ie(i.value,"initiation_fee");return null!=e?e:[]})),c=E((()=>{let e=re(i.value,"discount");return null!=e?e:[]})),m=E((()=>{let e=parseFloat(ve().format("DD")),t=0,a=0;return u.value.days>=30&&(a=e-u.value.payday,t=u.value.amount/u.value.days*a),{days:a,amount:Math.abs(Math.round(t))}})),d=E((()=>(e=>{if(""!=ie(i.value,"memberships_id"))return"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:ue(e.tax.value),value:e.tax.value}})(s))),p=F(null),v=E((()=>{let e=0;return e+=u.value.amount,ie(i.value,"is_initiation_fee").length||(e+=o.value),e-=m.value.amount,c.value.data&&("dolar"==c.value.data.type?e-=c.value.data.value:"percentaje"==c.value.data.type&&(e-=e/100*c.value.data.value)),e+=e/100*d.value.value,l.value.penalty&&(p.value=s.value.penalty,e+=p.value),l.value.leo_vet_fr&&(e-=e/100*s.value.descuento_vet),e})),h=E((()=>{let e=0;return e+=v.value,e})),b=F(!1),y=F(0),_=E((()=>{const e=parseFloat(y.value)-parseFloat(h.value);return e>0?e:0}));F(1);const f=async()=>{await r(n.value.id,{total:h.value,payment_type_id:1,cash:y.value,cash_back:_.value}).then((e=>{oe.success("Payment Success"),window.location.reload()})).catch((e=>{}))};return(e,r)=>{const g=ee,x=a,k=We,M=ae,j=le,C=se;return N(),q("div",null,[L(x,{class:""},{default:H((()=>{return[L("table",He,[L("thead",null,[L("tr",null,[Le,Re,Be,Ue,Oe,Ge,Je,Ke,p.value?(N(),q("th",Qe,"Penalty")):z("",!0),Xe])]),0!=V(s).length?(N(),q("tbody",Ze,[L("tr",null,[L("td",null,[L("p",null,[L("b",null,R(V(l).name)+" "+R(V(l).second_name)+" "+R(V(l).last_name),1)])]),0!=V(s).legnth?(N(),q("td",et,R(V(s).name),1)):z("",!0),0!=V(u).length?(N(),q("td",tt,R(V(u).descriptions),1)):z("",!0),0!=V(u).length?(N(),q("td",at,[V(u).days>=30?(N(),q("span",lt,[K(R(V(m).days)+" days : ",1),st,K(" - "+R(V(ue)(V(m).amount)),1)])):(N(),q("span",nt,"-"))])):z("",!0),L("td",null,R(V(ue)((e=V(u),e.amount))),1),L("td",null,[V(ie)(V(i),"is_initiation_fee").length?(N(),q("span",rt,R(V(ue)(0)),1)):(N(),q("span",it,R(V(ue)(V(o))),1))]),L("td",null,[null!=V(c).data?(N(),q("span",ut,["dolar"==V(c).data.type?(N(),q("span",ot," - "+R(V(ue)(V(c).data.value)),1)):z("",!0),"percentaje"==V(c).data.type?(N(),q("span",ct,R(V(c).data.value)+"%",1)):z("",!0)])):(N(),q("span",mt,"-"))]),L("td",null,R(V(d).text),1),p.value?(N(),q("td",dt,R(V(ue)(p.value)),1)):z("",!0),L("td",null,R(V(ue)(V(v))),1)]),L("tr",null,[L("td",{style:{"text-align":"right"},colspan:p.value?"9":"8"}," Total ",8,["colspan"]),L("td",pt,R(V(ue)(V(h))),1)])])):z("",!0)]),L("div",vt,[L(g,{color:"success",disabled:0==V(s).length||isNaN(V(h)),onClick:r[1]||(r[1]=e=>t.value=!0)},{default:H((()=>[ht])),_:1},8,["disabled"]),L(g,{disabled:0==V(s).length||isNaN(V(h)),color:"warning",onClick:r[2]||(r[2]=e=>b.value=!0)},{default:H((()=>[bt])),_:1},8,["disabled"])])];var e})),_:1}),t.value?(N(),q(k,{key:0,class:"",url:`new_payment/${V(n).id}`,amount:V(h),id:V(l).id,member_membership:V(n).id},null,8,["url","amount","id","member_membership"])):z("",!0),L(C,{open:b.value,actions:"center",onClose:r[6]||(r[6]=e=>b.value=!1)},{content:H((()=>[L("div",yt,[L("p",_t,[ft,L("b",null,R(V(ue)(V(h))),1)]),L("p",gt,[xt,L("b",null,R(V(ue)(y.value)),1)])]),L("div",kt,[Mt,L("p",jt,[L("b",null,R(V(ue)(V(_))),1)])]),L("div",Ct,[L(g,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:r[3]||(r[3]=e=>y.value=V(h))},{default:H((()=>[K(" Full Payment "+R(V(ue)(V(h))),1)])),_:1}),St,(N(),q(B,null,U([5,10,20,50,100],((e,t)=>L(g,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>y.value+=e},{default:H((()=>[K(" $"+R(e),1)])),_:2},1032,["onClick"]))),64))]),L("div",wt,[L(j,null,{default:H((()=>[L(M,null,{default:H((()=>[O(L("input",{"onUpdate:modelValue":r[4]||(r[4]=e=>y.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[Q,y.value]])])),_:1})])),_:1})])])),action:H((()=>[L(g,{onClick:r[5]||(r[5]=e=>y.value=0),class:"d-flex justify-content-center",raised:""},{default:H((()=>[Dt])),_:1}),L(g,{color:"success",onClick:f,disabled:V(h)>y.value,class:"d-flex justify-content-center",raised:""},{default:H((()=>[Pt])),_:1},8,["disabled"])])),_:1},8,["open"])])}}});const Yt=L("div",null,[L("h1",{class:"title is-4 mb-0"},"Personal Information"),L("p",null,"Edit member's personal information")],-1),It=K(" Save Changes "),Tt=K(" Convert to Members ");var At=I({expose:[],props:{category:{type:String,default:"Adult"}},setup(e){const t=e;E((()=>"Prospect"==t.category));const a=()=>{let e=ce(u.value),t=new FormData;for(var a in e)"id_leo_vet_fr"==a?null==e[a]&&t.append(a,0):t.append(a,e[a]);o(t).then((e=>{oe.success("Edit Success")}))};return(e,l)=>{const s=ee,n=he,i=_e;return N(),q(i,null,{"header-left":H((()=>[Yt])),"header-right":H((()=>[L(s,{onClick:a,color:"primary"},{default:H((()=>[It])),_:1}),"Prospect"==t.category?(N(),q(s,{key:0,color:"info",class:"ml-3"},{default:H((()=>[Tt])),_:1})):z("",!0)])),content:H((()=>[L(n,{"inputs-step":V(u)},null,8,["inputs-step"])])),_:1})}}});const Et=L("div",{id:"payment-element"},null,-1),Ft=K("Pay now "),Vt=L("div",{id:"payment-message",class:"hidden"},null,-1);var Nt=I({expose:[],props:{clientSecret:{type:String,required:!0},membership_member_id:{type:Number,required:!0}},emits:["PaymentAction"],setup(t,{emit:l}){const s=t,n=Stripe(P.value);T((()=>s.clientSecret),(e=>{m()}));const i=F(),r=F(null),u=F(null),o=F(!1),c=F(!0),m=async()=>(c.value=!0,i.value=await n.elements({clientSecret:s.clientSecret,appearance:{theme:"night",labels:"floating"}}),u.value=i.value.create("card",{classes:{base:"base_card"}}),u.value.mount("#payment-element"),c.value=!1,i.value),d=async e=>{e.preventDefault(),o.value=!0;const{setupIntent:t,error:a}=await n.confirmCardSetup(s.clientSecret,{payment_method:{card:u.value,billing_details:{name:r.value}}});if(a)o.value=!1,oe.error(a.message);else{const{payment_method:e}=t,{data:a}=await $.post("paymentStripe",{payment_method:e,membership_member_id:s.membership_member_id}).catch((e=>{o.value=!1}));a&&(l("PaymentAction",a),oe.success("Success Payment"))}o.value=!1};return A((()=>{o.value=!1,m()})),(t,l)=>{const s=e,n=ee,i=te,u=a;return N(),q(B,null,[c.value?(N(),q(s,{key:0,height:"500px"})):z("",!0),O(L(u,{class:"mt-6"},{default:H((()=>[L("form",{onSubmit:J(d,["prevent"]),id:"payment-form"},[O(L("input",{id:"card-holder-name",class:"input mb-3","onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),placeholder:"Name",type:"text"},null,512),[[Q,r.value]]),Et,L(i,{size:"small",active:o.value},{default:H((()=>[L(n,{id:"submit",class:"mt-4",color:"info"},{default:H((()=>[Ft])),_:1})])),_:1},8,["active"]),Vt],40,["onSubmit"])])),_:1},512),[[G,!c.value]])],64)}}});const qt={class:"table is-hoverable is-striped is-fullwidth"},zt=L("thead",null,[L("tr",null,[L("th",{scope:"col"},"Membership Name"),L("th",{scope:"col"},"Plan"),L("th",{scope:"col"},"Cost"),L("th",{scope:"col"},"Import")])],-1),Wt={style:{"text-align":"right"}},Ht={key:0},Lt=L("td",null,"Initiation Fee",-1),Rt={style:{"text-align":"right"}},Bt={style:{"text-align":"right"}},Ut=L("td",{colspan:"3",style:{"text-align":"right"}},[L("b",null,"Subtotal")],-1),Ot={style:{"text-align":"right"}},Gt={colspan:"3",style:{"text-align":"right"}},Jt={style:{"text-align":"right"}},Kt=L("td",{colspan:"3",style:{"text-align":"right"}},[L("b",null,"Total")],-1),Qt={style:{"text-align":"right"}},Xt=L("td",{colspan:"3",style:{"text-align":"right"}},"Total recurrente",-1);var Zt=I({expose:[],props:{presupuesto:{type:Object,required:!0}},setup:e=>(t,l)=>{const s=a;return e.presupuesto?(N(),q(s,{key:0,class:"mb-4"},{default:H((()=>[L("table",qt,[zt,L("tbody",null,[L("tr",null,[L("td",null,R(e.presupuesto.name),1),L("td",null,R(e.presupuesto.interval),1),L("td",null,R(V(me)(10*e.presupuesto.membership.amount_subtotal)),1),L("td",Wt,R(V(me)(10*e.presupuesto.membership.amount_subtotal)),1)]),e.presupuesto.is_initiation_fee?(N(),q("tr",Ht,[L("td",null,R(e.presupuesto.name),1),Lt,L("td",null,R(V(me)(e.presupuesto.initiation_fee)),1),L("td",Rt,R(V(me)(e.presupuesto.initiation_fee)),1)])):z("",!0),L("tr",Bt,[Ut,L("td",null,R(V(me)(10*e.presupuesto.amount_subtotal)),1)]),L("tr",Ot,[L("td",Gt," Tax "+R(e.presupuesto.percentage)+"% ",1),L("td",null,R(V(me)(10*e.presupuesto.amount_tax)),1)]),L("tr",Jt,[Kt,L("td",null,R(V(me)(10*e.presupuesto.amount_total)),1)]),L("tr",Qt,[Xt,L("td",null,R(V(me)(10*e.presupuesto.membership.amount_total)),1)])])]),X(t.$slots,"k")])),_:3})):z("",!0)}});const ea=L("div",null,[L("h1",{class:"title is-4 mb-0"},"Membership / Contract"),L("p",null,"Edit member's membership and contract information")],-1),ta=K(" Cancel Membership "),aa=K(" Save Changes "),la=K(" New Membership "),sa=L("h1",{class:"title is-6"},null,-1),na={class:"table is-hoverable is-striped is-fullwidth"},ia=L("thead",null,[L("tr",null,[L("th",{scope:"col"},"Membership Name"),L("th",{scope:"col"},"Plan"),L("th",{scope:"col"},"Cost"),L("th",{scope:"col"},"Import")])],-1),ra={style:{"text-align":"right"}},ua={key:0},oa=L("td",null,"Initiation Fee",-1),ca={style:{"text-align":"right"}},ma={style:{"text-align":"right"}},da={colspan:"3",style:{"text-align":"right"}},pa={style:{"text-align":"right"}},va=L("td",{colspan:"3",style:{"text-align":"right"}},[L("b",null,"Subtotal")],-1),ha={style:{"text-align":"right"}},ba=L("td",{colspan:"3",style:{"text-align":"right"}},[L("b",null,"Total")],-1),ya={style:{"text-align":"right"}},_a=L("td",{colspan:"3",style:{"text-align":"right"}},"Total recurrente",-1),fa=K(" Payment Card "),ga=L("h1",{class:"title is-6"},"Active Contract Information",-1),xa={class:"columns is-multiline"},ka={class:"column is-12"},Ma={key:0,class:"columns is-multiline column mt-4 is-12"},ja=L("b",null,"Contract Date:",-1),Ca={class:"column is-12"},Sa=L("h1",{class:"title is-6"},"Inactive Contract Information",-1),wa={class:"table is-hoverable is-fullwidth"},Da=L("thead",null,[L("tr",null,[L("th",{scope:"col"},"Contract"),L("th",{scope:"col"},"Agreement Date"),L("th",{scope:"col"},"Sold By"),L("th",{scope:"col"},"Membership Type"),L("th",{scope:"col"},"Decipline"),L("th",{scope:"col"},"Start Date"),L("th",{scope:"col"},"End Date"),L("th",{scope:"col"},"Auto Renew"),L("th",{scope:"col"},"Discount Type")])],-1),Pa=L("img",{src:ge,width:"40",alt:""},null,-1),$a={key:0},Ya={key:1},Ia={key:0},Ta=L("td",null,"N/A",-1),Aa=L("h1",{class:"title is-6"},"Active Waiver Information",-1),Ea={class:"text-center"},Fa=L("img",{src:ge,width:"40",alt:""},null,-1),Va=K(" View PDF ");var Na=I({expose:[],props:{},setup(e){A((()=>{c(i.value),k()}));const t=F(null),s=F(null),r=F(null),u=F(null),o=()=>{const e=ce(i.value);d(e).then((e=>{"none"!=e.data.cargo_automatico&&("no_method"==e.data.cargo_automatico?(s.value=e.data.membership_member,t.value=e.data.quote,r.value=e.data.tax,u.value=e.data.clientSecret):"ok"==e.data.cargo_automatico&&oe.success("Payment")),oe.success("Success")}))},y=()=>{p().then((e=>{oe.success("Memberships Cancel"),window.location.reload()}))},_=F(null),f=()=>{const e=ce(i.value);console.log(e);let t={memberships_id:e.memberships_id,recurrences_id:e.recurrences_id,is_initiation_fee:0==e.is_initiation_fee.length,member_id:l.value.id};v(t).then((e=>{_.value={name:e.data.membership.name,interval:e.data.quote.computed.recurring.interval,membership:{amount_subtotal:e.data.quote.computed.recurring.amount_subtotal,amount_total:e.data.quote.computed.recurring.amount_total},initiation_fee:e.data.membership.initiation_fee,percentage:e.data.tax.percentage,amount_tax:e.data.quote.total_details.amount_tax,amount_subtotal:e.data.quote.amount_subtotal,amount_total:e.data.quote.amount_total,is_initiation_fee:t.is_initiation_fee}}))},g=F(null),x=()=>{const e=ce(i.value);e.members_id=l.value.id,h(e).then((e=>{console.log(e.data),g.value=e.data.membership_member.id,u.value=e.data.clientSecret})).catch((e=>{for(var t in e.response.data.errores)e.response.data.errores[t].forEach((e=>{oe.error(`${t}: ${e}`)}))}))},k=()=>{n.value&&(re(i.value,"is_initiation_fee").disabled=!0,re(i.value,"recurrences_id").disabled=!0,re(i.value,"amount").disabled=!0,re(i.value,"memberships_id").disabled=!0)},M=e=>{b(e,n.value.id).then((e=>{if(e.data.status)oe.success("Sign Success");else for(var t in oe.error(e.data.mensaje),e.data.errores)e.data.errores[t].forEach((e=>{oe.error(`${t} : ${e}`)}))})).catch((e=>{}))},j=e=>{window.location.reload()};return(e,c)=>{const d=ee,p=Nt,v=a,h=ee,b=Zt,k=he,C=fe,S=_e;return N(),q("div",null,[L(S,null,{"header-left":H((()=>[ea])),"header-right":H((()=>[V(n)?(N(),q(d,{key:0,onClick:y,class:"mr-4"},{default:H((()=>[ta])),_:1})):z("",!0),V(n)?(N(),q(d,{key:1,onClick:o,color:"primary"},{default:H((()=>[aa])),_:1})):z("",!0),V(n)?z("",!0):(N(),q(d,{key:2,onClick:f,color:"primary"},{default:H((()=>[la])),_:1}))])),content:H((()=>[t.value?(N(),q(v,{key:0,class:"mb-4"},{default:H((()=>[sa,L("table",na,[ia,L("tbody",null,[L("tr",null,[L("td",null,R(s.value.membership.name),1),L("td",null,R(t.value.computed.recurring.interval),1),L("td",null,R(V(me)(10*t.value.computed.recurring.amount_subtotal)),1),L("td",ra,R(V(me)(10*t.value.computed.recurring.amount_subtotal)),1)]),1==s.value.is_initiation_fee?(N(),q("tr",ua,[L("td",null,R(s.value.membership.name),1),oa,L("td",null,R(V(me)(s.value.initiation_fee)),1),L("td",ca,R(s.value.initiation_fee),1)])):z("",!0),L("tr",ma,[L("td",da," Tax "+R(r.value.percentage)+"% ",1),L("td",null,R(t.value.total_details.amount_tax),1)]),L("tr",pa,[va,L("td",null,R(V(me)(10*t.value.amount_subtotal)),1)]),L("tr",ha,[ba,L("td",null,R(V(me)(10*t.value.amount_total)),1)]),L("tr",ya,[_a,L("td",null,R(V(me)(10*t.value.computed.recurring.amount_total)),1)])])]),L(p,{"client-secret":u.value,membership_member_id:s.value.id,onPaymentAction:j},null,8,["client-secret","membership_member_id"])])),_:1})):z("",!0),_.value?(N(),q(b,{key:1,presupuesto:_.value},{k:H((()=>[L(h,{color:"info",onClick:x,class:"mt-4 py-1"},{default:H((()=>[fa])),_:1}),u.value?(N(),q(p,{key:0,"client-secret":u.value,membership_member_id:g.value,onPaymentAction:j},null,8,["client-secret","membership_member_id"])):z("",!0)])),_:1},8,["presupuesto"])):z("",!0),L(v,{class:"mb-4"},{default:H((()=>[ga,L("div",xa,[L("div",ka,[L(k,{"inputs-step":V(i)},null,8,["inputs-step"])]),V(l)&&V(n)?(N(),q("div",Ma,[L("div",null,[L("p",null,[ja,K(" "+R(V(ve)(V(l).membership_members.created_at).format("ddd - DD MMM yyyy")),1)])]),L("div",Ca,[L(C,{onOnSign:M,"is-sign":!V(n).sign,contract:`contract_${V(l).id}_${V(l).membership_members.id}_${V(l).personal_identifications}.pdf`,"url-contract":`generateContract/${V(l).id}`},null,8,["is-sign","contract","url-contract"])])])):z("",!0)])])),_:1}),V(l)?(N(),q(v,{key:2,class:"mb-4"},{default:H((()=>[Sa,L("table",wa,[Da,L("tbody",null,[(N(!0),q(B,null,U(V(m),((e,t)=>(N(),q("tr",{key:`item-${t}`},[L("td",null,[L("a",{href:e.contract},[Pa],8,["href"])]),L("td",null,R(V(ve)(e.created_at).format("dd - DD MMM YYYY")),1),L("td",null,R(e.user.name),1),L("td",null,R(e.membership.name),1),L("td",null,[""!=e.diciplines||null!=e.diciplines||null!=e.diciplines?(N(),q("span",$a,[(N(!0),q(B,null,U(e.diciplines,((e,t)=>(N(),q("span",{key:`dicipline-${t}`},[L("span",null,R(e.dicipline.name),1)])))),128))])):(N(),q("span",Ya,"N/A"))]),L("td",null,R(V(ve)(e.created_at).format("dd - DD MMM YYYY")),1),L("td",null,R(V(ve)(e.cacelation_date).format("dd - DD MMM YYYY")),1),L("td",null,[L("span",null,R(e.is_recurrence?"Recurrence":"Not Recurrence"),1),e.is_recurrence?(N(),q("span",Ia,R(e.recurrence.recurrence),1)):z("",!0)]),Ta])))),128))])])])),_:1})):z("",!0),V(l)&&V(n)?(N(),q(v,{key:3,class:"mb-4"},{default:H((()=>[Aa,L("div",Ea,[L("a",{target:"_blank",href:`${V(D)}generateWeiver/${V(l).id}`},[Fa,L("p",null," weiver_"+R(V(l).id)+"_"+R(V(l).membership_members.id)+"_"+R(V(l).personal_identifications)+".pdf ",1),L(h,{color:"success",outlined:"",class:"mt-4 py-1"},{default:H((()=>[Va])),_:1})],8,["href"])])])),_:1})):z("",!0)])),_:1})])}}});const qa=L("div",null,[L("h1",{class:"title is-4 mb-0"},"Family Members"),L("p",null,"Edit member's family members")],-1),za={class:"columns is-multiline"},Wa={key:0,class:"column is-4 mb-4"},Ha=L("div",null,[L("h1",{class:"title is-4 mb-0"},"Parent"),L("p",null,"Edit parent contact")],-1),La=K(" Save Changes "),Ra={class:""},Ba=L("h1",{class:"title is-5"},"Parent Contact Information",-1),Ua={class:"d-flex justify-content-end mr-6"};var Oa=I({expose:[],setup(e){F([{id:1,name:"Wonder Woman",subtitle:"Mother/Adult",img:"https://picsum.photos/150/150"},{id:2,name:"Lionel Messi",subtitle:"Father/Minor",img:"https://picsum.photos/150/151"}]);const a=()=>{const e=perpareDataInputs(f.value);g(e).then((e=>{oe.success("Success")}))};return(e,s)=>{const n=t,i=xe,r=ke,u=_e,o=ee,c=he;return N(),q("div",null,[V(l)&&"Adult"==V(l).category?(N(),q(u,{key:0},{"header-left":H((()=>[qa])),"header-right":H((()=>[])),content:H((()=>[L("div",za,[V(y)?(N(),q("div",Wa,[L(r,{title:`${V(y).name} ${V(y).second_name} ${V(y).last_name}`,class:"border-1 p-4 radius-small"},{icon:H((()=>[L(n,{size:"medium",picture:`${V(D)}storage/${V(y).photo}`,subtitle:"Principal Family"},null,8,["picture"])])),action:H((()=>[L(i,{"id-member":V(y).id},null,8,["id-member"])])),_:1},8,["title"])])):z("",!0),(N(!0),q(B,null,U(V(_),((e,t)=>(N(),q("div",{class:"column is-4 mb-4",key:`family-${t}`},[L(r,{title:`${e.member.name} ${e.member.second_name} ${V(l).last_name}`,subtitle:e.member.relationships,class:"border-1 p-4 radius-small"},{icon:H((()=>[L(n,{size:"medium",picture:`${V(D)}storage/${e.member.photo}`},null,8,["picture"])])),action:H((()=>[L(i,{"id-member":e.members_id},null,8,["id-member"])])),_:2},1032,["title","subtitle"])])))),128))])])),_:1})):z("",!0),V(l)&&"Minor"==V(l).category?(N(),q(u,{key:1},{"header-left":H((()=>[Ha])),"header-right":H((()=>[L(o,{onClick:a,color:"primary"},{default:H((()=>[La])),_:1})])),content:H((()=>[L("div",Ra,[Ba,L("div",Ua,[L(n,{picture:`${V(D)}storage/${V(ie)(V(f),"parent_photo")}`,size:"large"},null,8,["picture"])]),L(c,{"inputs-step":V(f)},null,8,["inputs-step"])])])),_:1})):z("",!0)])}}});const Ga=L("div",null,[L("h1",{class:"title is-4 mb-0"},"Emergency Contact"),L("p",null,"Edit member's emergency contact")],-1),Ja=K(" Save Changes "),Ka={class:""},Qa=L("h1",{class:"title is-5"},"Emergency Contact Information",-1);var Xa=I({expose:[],setup(e){const t=()=>{const e=ce(x.value);console.log(e),k(e).then((e=>{oe.success("Success")}))};return(e,a)=>{const l=ee,s=he,n=_e;return N(),q(n,null,{"header-left":H((()=>[Ga])),"header-right":H((()=>[L(l,{onClick:t,color:"primary"},{default:H((()=>[Ja])),_:1})])),content:H((()=>[L("div",Ka,[Qa,L(s,{"inputs-step":V(x)},null,8,["inputs-step"])])])),_:1})}}});const Za=L("div",null,[L("h1",{class:"title is-4 mb-0"},"Check-ins History"),L("p",null,"Edit member's check-ins history")],-1),el={class:"p-6"},tl={class:"d-flex"},al=L("input",{type:"date",class:"input",placeholder:"input.placeholder"},null,-1),ll=L("input",{type:"date",class:"input",placeholder:"input.placeholder"},null,-1),sl=K(" Export "),nl={class:"mt-4"},il={class:"table is-hoverable is-fullwidth"},rl=L("thead",null,[L("tr",null,[L("th",{scope:"col"},"DATE"),L("th",{scope:"col"},"TIME"),L("th",{scope:"col"},"STAFF")])],-1);var ul=I({expose:[],setup:e=>(e,t)=>{const a=ae,s=le,n=ee,i=_e;return V(l)?(N(),q(i,{key:0},{"header-left":H((()=>[Za])),"header-right":H((()=>[])),content:H((()=>[L("div",el,[L("div",tl,[L(s,{class:"field mr-3"},{default:H((()=>[L(a,null,{default:H((()=>[al])),_:1})])),_:1}),L(s,{class:"field mr-3"},{default:H((()=>[L(a,null,{default:H((()=>[ll])),_:1})])),_:1}),L(n,{color:"primary"},{default:H((()=>[sl])),_:1})]),L("div",nl,[L("table",il,[rl,L("tbody",null,[(N(!0),q(B,null,U(V(M),((e,t)=>(N(),q("tr",{key:`access-${t}`},[L("td",null,R(V(ve)(e.created_at).format("DD/MM/YYYY")),1),L("td",null,R(V(ve)(e.created_at).format("HH:mm:ss")),1),L("td",null,R(e.user.name),1)])))),128))])])])])])),_:1})):z("",!0)}});const ol=L("div",null,[L("h1",{class:"title is-4 mb-0"},"Purchases History"),L("p",null,"Edit member's purchases history")],-1),cl={class:"p-6"},ml={class:"mt-4"},dl={class:"table is-hoverable is-fullwidth"},pl=L("thead",null,[L("tr",null,[L("th",{scope:"col"},"DATE"),L("th",{scope:"col"},"TIME"),L("th",{scope:"col"},"AMOUNT"),L("th",{scope:"col"},"PAYMENT TYPE"),L("th",{scope:"col"},"ITEMS"),L("th",{scope:"col"},"STATUS")])],-1),vl={key:0};var hl=I({expose:[],setup(e){const t=E((()=>n.value.payments)),a=E((()=>{let e=[];return m.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e}));return A((()=>{})),(e,s)=>{const i=_e;return V(l)?(N(),q(i,{key:0},{"header-left":H((()=>[ol])),"header-right":H((()=>[])),content:H((()=>[L("div",cl,[L("div",ml,[L("table",dl,[pl,V(n)?(N(),q("tbody",vl,[(N(!0),q(B,null,U(V(t),((e,t)=>(N(),q("tr",{key:`payment-${t}`},[L("td",null,R(V(ve)(e.created_at).format("DD/MM/YYYY")),1),L("td",null,R(V(ve)(e.created_at).format("HH:mm:ss")),1),L("td",null,R(V(ue)(e.amount)),1),L("td",null,R(e.payment_type.name),1),L("td",null,R(V(n).membership.name),1),L("td",null,R(e.status?"succedded":"error"),1)])))),128))])):z("",!0),(N(!0),q(B,null,U(V(a),((e,t)=>(N(),q("tbody",{key:`paymentHistory-${t}`},[(N(!0),q(B,null,U(e.payments,((t,a)=>(N(),q("tr",{key:`pay-${a}`},[L("td",null,R(V(ve)(t.created_at).format("DD/MM/YYYY")),1),L("td",null,R(V(ve)(t.created_at).format("HH:mm:ss")),1),L("td",null,R(V(ue)(t.amount)),1),L("td",null,R(t.payment_type.name),1),L("td",null,R(e.membership),1),L("td",null,R(t.status?"succeded":"error"),1)])))),128))])))),128))])])])])),_:1})):z("",!0)}}});const bl=L("div",null,[L("h1",{class:"title is-4 mb-0"}," Waiver "),L("p",null,"Edit member's waiver information")],-1),yl=K(" Convert to Members "),_l={class:"columns is-multiline"},fl={class:"border-1 document_box p-4 d-flex justify-content-center radius-small"},gl={href:"234",class:"text-center"},xl=L("img",{style:{width:"70px"},src:ge,alt:""},null,-1);var kl=I({expose:[],setup(e){const t=F([{name:"Waiver_010221.pdf",url:""},{name:"Waiver_010221.pdf",url:""}]);return(e,a)=>{const l=ee,s=_e;return N(),q(s,null,{"header-left":H((()=>[bl])),"header-right":H((()=>[L(l,{color:"info"},{default:H((()=>[yl])),_:1})])),content:H((()=>[L("div",_l,[(N(!0),q(B,null,U(t.value,((e,t)=>(N(),q("div",{class:"column is-2 mb-4",key:`family-${t}`},[L("div",fl,[L("a",gl,[xl,L("p",null,R(e.name),1)])])])))),128))])])),_:1})}}});const Ml={key:1,class:"columns is-multiline"},jl={class:"column is-3"},Cl={class:"column is-9"},Sl={class:"title is-5 mb-0"},wl=K(" Process Payment "),Dl=L("b",null,"Member since.",-1),Pl=L("b",null,"Membership Active:",-1),$l=L("b",null,"Due Date: ",-1),Yl={key:0},Il=L("b",null,"Last payment attempt: ",-1);var Tl=I({expose:[],setup(t){const r=W();je.value="Member Profile",Z({title:"Members"});const o=F(!1),c=F("personalInformation"),m=e=>{c.value=e.value};T((()=>r.query),((e,t)=>{Object.keys(e).length>0&&(b(),h())}));const d=F("Filed Payment"),p=F("");T((()=>r.hash),(e=>{c.value=r.hash.slice(1)})),T((()=>r.query.id),(e=>{c.value="personalInformation"}));const v=F(!0),h=()=>{v.value=!0,setTimeout((()=>{v.value=!1}),500)};A((()=>{""!=r.hash&&(c.value=r.hash.slice(1)),be().then((e=>{de(i,"locations_id",ye.value)})),Ye().then((e=>{de(u,"country_id",e.contries),de(u,"city_id",e.cities),de(u,"state_id",e.states),de(j,"city_id",e.cities),de(j,"state_id",e.states),de(j,"country_id",e.contries)})),Se().then((e=>{de(i,"memberships_id",e.data.memberships)})),Ce().then((e=>{de(i,"discount",e.data.discounts)})),we().then((e=>{de(i,"recurrences_id",e.data)})),Pe().then((e=>{de(i,"staff_id",e.data)})),b()}));const b=async()=>{await C(r.query.id).then((e=>{for(var t in e.data)if("select_type"==t)"Individual"==e.data[t]?re(u.value,"select_type").model=!1:re(u.value,"select_type").model=!0;else if("membership_members"==t)for(var a in e.data[t]||(d.value="Does not have a membership",p.value="Does not have a membership go to the Membership/Contract section and create a new membership and press New Membership",console.error("no posee una membresia :(")),e.data[t])if("memberships_location"==a){if(!e.data[t][a])return void console.error("no posee una locacion :(");re(i.value,"locations_id").model=e.data[t][a].companies_locations_id,$e([e.data[t][a].companies_locations_id]).then((e=>{de(i,"diciplines",e.data)}))}else if("recurrence"==a){let a=[];if(e.data[t].membership.amounts.forEach((e=>{let t=De.value.find((t=>t.id==e.recurrences_id));t.amount=e.amount,a.push(t)})),re(i.value,"recurrences_id").model=e.data[t].recurrences_id,!a.find((a=>a.id==e.data[t].recurrences_id)))return void console.error("no tiene un plan de membresia :( recurrences");re(i.value,"amount").model=a.find((a=>a.id==e.data[t].recurrences_id)).amount}else"is_recurrence"==a?re(i.value,"recurrence").model=1==e.data[t][a]:"diciplines"==a?(re(i.value,"diciplines").model=[],e.data[t][a].forEach((e=>{re(i.value,"diciplines").model.push(e.diciplines_id)}))):"membership"==a?re(i.value,"initiation_fee").model=e.data[t][a].initiation_fee:"is_initiation_fee"==a?re(i.value,"is_initiation_fee").model=0==e.data[t][a]?[a]:[]:"discount"==a?(re(i.value,"discount").disabled=!0,null!=e.data[t][a]&&(re(i.value,"discount").model=e.data[t][a].id)):pe(i,a,e.data[t][a]);else if("staff_id"==t)pe(i,t,e.data[t]);else if("emergency"==t)for(a in e.data[t])pe(x,a,e.data[t][a]);else if("guardian"==t)for(a in e.data[t])pe(f,a,e.data[t][a]);else pe(u,t,"leo_vet_fr"==t?1==e.data[t]?t:[]:e.data[t]);v.value=!1}))};return(t,u)=>{const h=e,b=Ve,y=ee,_=a,f=$t,g=At,x=Na,k=Oa,M=Xa,j=ul,C=hl,D=kl,P=Me;return N(),q(P,null,{default:H((()=>[v.value?(N(),q(h,{key:0,height:"500px"})):z("",!0),!v.value&&V(l)?(N(),q("div",Ml,[L("div",jl,[L(b,{category:V(r).query.category,onChangeMenu:m},null,8,["category"])]),L("div",Cl,[V(s)?z("",!0):(N(),q(_,{key:0,class:"mb-4 d-flex justify-content-between align-items-center",color:"danger"},{default:H((()=>[L("div",null,[L("h3",Sl,R(d.value),1),L("p",null,R(p.value),1)]),L("div",null,[V(ne)(V(i),"memberships_id")&&!V(S)?(N(),q(y,{key:0,color:"success",onClick:u[1]||(u[1]=e=>o.value=!0)},{default:H((()=>[wl])),_:1})):z("",!0)])])),_:1})),o.value?(N(),q(f,{key:1,class:"mb-4"})):z("",!0),null!=V(l).membership_members?(N(),q(_,{key:2,class:"mb-4"},{default:H((()=>[L("div",null,[L("p",null,[L("b",null,"Member #"+R(V(l).id),1)]),L("p",null,[L("small",null,[Dl,K(" "+R(V(ve)(V(l).created_at).format("ddd - DD MMM YYYY")),1)])]),L("p",null,[Pl,K(" "+R(V(n).membership.name),1)]),L("p",null,[$l,K(" "+R(V(w).format("ddd - DD MMM YYYY")),1)]),V(n).payments?(N(),q("p",Yl,[Il,K(R(V(ve)(V(n).payments[0].created_at).format("ddd - DD MMM YYYY")),1)])):z("",!0)])])),_:1})):z("",!0),O(L(g,{category:V(r).query.category},null,8,["category"]),[[G,"personalInformation"==c.value]]),O(L(x,null,null,512),[[G,"memberMembership"==c.value]]),O(L(k,null,null,512),[[G,"memberFamily"==c.value]]),O(L(M,null,null,512),[[G,"memberEmergency"==c.value]]),O(L(j,null,null,512),[[G,"memberCheckins"==c.value]]),O(L(C,null,null,512),[[G,"memberPurchases"==c.value]]),O(L(D,null,null,512),[[G,"memberWaiver"==c.value]])])])):z("",!0)])),_:1})}}});export default Tl;
