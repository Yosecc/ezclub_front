var e=Object.defineProperty,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a;import{_ as n}from"./inputsLayaut.vue_vue&type=style&index=0&lang.3e623726.js";import{_ as i}from"./V-Control.cd7a7d2f.js";import{_ as c}from"./V-Card.vue_vue&type=script&setup=true&lang.60616536.js";import{_ as u}from"./V-Avatar.vue_vue&type=script&setup=true&lang.2afd81f7.js";import{_ as r}from"./V-PlaceholderPage.vue_vue&type=script&setup=true&lang.7014f44e.js";import{_ as o}from"./V-Button.vue_vue&type=script&setup=true&lang.56502a24.js";import{d,O as v,I as p,o as m,i as f,k as y,E as h,G as b,j as _,a9 as g,F as k,L as x,S as j,U as w,w as C,r as S,R as V,H as P,W as $,_ as A,Q as z,X as O,a6 as T,b as I,u as R,P as N,ab as U}from"./vendor.31bd1321.js";import{b as E,m as q,A as D,n as L,P as B,g as M,F,a as G}from"./index.70a15384.js";import{a as W,c as K,b as H,s as J,t as Q,d as X,e as Y,f as Z,g as ee,h as te,p as le,o as ae,m as se,i as ne,j as ie,k as ce,l as ue,n as re,q as oe,r as de,u as ve,v as pe,w as me,x as fe,y as ye,z as he,A as be,B as _e,C as ge}from"./Store.cbe98d04.js";import{_ as ke}from"./V-Tag.vue_vue&type=script&setup=true&lang.066a51f7.js";import{_ as xe}from"./V-Placeload.2d2b5eff.js";import{_ as je}from"./V-Field.vue_vue&type=script&setup=true&lang.68f25869.js";import{_ as we}from"./V-Modal.vue_vue&type=script&setup=true&lang.2998ade1.js";import{_ as Ce}from"./V-Loader.vue_vue&type=script&setup=true&lang.660cd49f.js";import{l as Se,t as Ve,d as Pe,c as $e}from"./Companies.c0591eaf.js";import{g as Ae}from"./Discounts.bfbb050b.js";import{_ as ze}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.99a7640b.js";import{_ as Oe,a as Te}from"./search-4-dark.12f0bf0d.js";import{p as Ie}from"./sidebarLayoutState.84c66d08.js";import{l as Re,g as Ne,i as Ue}from"./Inventory.6cb38928.js";import{p as Ee,h as qe,g as De,a as Le}from"./Products.06794350.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.6b5ea757.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.f2aa4bec.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.afa394cc.js";import"./useDropdown.2c966c6c.js";import"./V-Dropdown.02630225.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.638b6cad.js";import"./activePanelState.8ba1e377.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.2f301f1e.js";import"./V-Message.vue_vue&type=script&setup=true&lang.ce2db110.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.de8ffe27.js";import"./navbarLayoutState.7a8cae93.js";import"./video.63a3162f.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.ed33a128.js";import"./darkModeState.5ece07d2.js";import"./AnimatedLogo.bb3010e4.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.c17fb773.js";import"./V-Block.vue_vue&type=script&setup=true&lang.aed64b1f.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.830ef7c4.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.d198dce8.js";const Be={class:"card-grid-item-content"},Me={class:"dark-inverted text-center"},Fe={class:"title is-6"},Ge={class:"title is-5"},We={key:0,class:"is-7 title"},Ke={key:1,class:"is-7 title"},He={class:"card-grid-item-footer"},Je=k(" ADD ");var Qe=d({expose:[],props:{product:{type:Object,default:{}}},setup:e=>(v(),p((()=>{})),(t,l)=>{const a=o;return m(),f("a",{href:"#",onClick:l[2]||(l[2]=g((t=>h(W)(e.product)),["prevent"])),class:"card-grid-item"},[y("img",{src:`${h(E)}storage/${e.product.photo}`,alt:"",onErrorOnce:l[1]||(l[1]=e=>e.target.src="https://via.placeholder.com/400x300")},null,40,["src"]),y("div",Be,[y("h3",Me,[y("h2",Fe,b(e.product.name),1),y("h2",Ge,b(h(q)(e.product.price)),1),e.product.stock?(m(),f("p",We," Stock: "+b(e.product.stock.current_stock),1)):(m(),f("p",Ke,"Stock: 0")),y("p",null,b(e.product.category.name),1)])]),y("div",He,[y(a,{color:"white",class:"w-100 justify-content-center"},{default:_((()=>[Je])),_:1})])])})});const Xe={class:"table is-striped is-fullwidth"},Ye=y("thead",null,[y("tr",null,[y("th",{scope:"col"},"Description"),y("th",{scope:"col"},"Cuantity"),y("th",{scope:"col"},"Value")])],-1),Ze={class:"d-flex"},et={class:""},tt=y("hr",null,null,-1),lt={class:"table is-striped is-fullwidth"},at=y("td",null,"SubTotal",-1),st={class:"text-right"},nt=y("td",null,"Tax",-1),it={class:"text-right"},ct=y("td",null,[y("b",null,"Total")],-1),ut={class:"text-right"},rt={class:"title is-4"},ot=k(" Checkout ");var dt=d({expose:[],props:{},emits:["proccessCheckout"],setup:(e,{emit:t})=>(v(),p((()=>{})),(e,t)=>{const l=ke,a=o,s=c;return m(),f(s,{class:"d-flex flex-column justify-content-between",style:{"min-height":"500px"}},{default:_((()=>[y("div",null,[x(e.$slots,"default"),y("table",Xe,[Ye,y("tbody",null,[(m(!0),f(j,null,w(h(H),((e,t)=>(m(),f("tr",{key:`cart-${t}`},[y("td",null,b(e.name),1),y("td",null,[y("div",Ze,[y(l,{color:"white",onClick:l=>h(K)("minus",e,t),label:"-",style:{cursor:"pointer"}},null,8,["onClick"]),y(l,{color:"white",label:e.count},null,8,["label"]),y(l,{color:"white",onClick:l=>h(K)("plus",e,t),label:"+",style:{cursor:"pointer"}},null,8,["onClick"])])]),y("td",null,b(h(q)(e.products_amount*e.count)),1)])))),128))])])]),y("div",et,[tt,y("table",lt,[y("tbody",null,[y("tr",null,[at,y("td",st,b(h(q)(h(J))),1)]),y("tr",null,[nt,y("td",it,b(h(q)(h(Q))),1)]),y("tr",null,[ct,y("td",ut,[y("p",rt,b(h(q)(h(X))),1)])])])]),y(a,{color:"success",disabled:0==h(H).length,onClick:t[1]||(t[1]=t=>e.$emit("proccessCheckout")),class:"w-100 justify-content-center"},{default:_((()=>[ot])),_:1},8,["disabled"])])])),_:3})})});const vt={key:0,class:"mt-4 box-table-scroll w-100",style:{"overflow-y":"scroll"}},pt={class:"table is-hoverable is-fullwidth"},mt={key:1,class:"d-flex align-items-center mt-5 w-100"},ft={class:"ml-4 w-100"},yt={class:"table is-hoverable is-fullwidth"},ht=y("td",null,[y("b",null,"Name:")],-1),bt=y("td",null,[y("b",null,"Email:")],-1),_t={key:0},gt=y("td",null,[y("b",null,"Payment Method: ")],-1),kt={key:0,colspan:"2"},xt={key:1},jt={key:2};var wt=d({expose:[],props:{modelValue:{default:null},dato:{type:String,default:"name"},valor:{default:null}},emits:["update:modelValue","update:valor"],setup(e,{emit:t}){const l=e;C(l.valor,(()=>{console.log("cambia"),a.value=l.valor})),p((()=>{l.valor?a.value=l.valor:a.value="",s.value=[],n.value=!1,i.value=null}));const a=S(""),s=S([]),n=S(!1),i=S(null),r=S(!1),o=async()=>{s.value=[],i.value=null,t("update:modelValue",null);const e=await D.get(`search_member?value=${a.value}`);n.value=!0,s.value=e.data},d=async e=>await D.get(`orders/get_payment_methods/${e}`);return(e,v)=>{const p=u,g=xe,k=c,x=V("focus");return m(),f(k,{class:"\r\n      d-flex\r\n      justify-content-center\r\n      align-items-center\r\n      flex-column\r\n      position-relative\r\n    "},{default:_((()=>[P(' <p class="title is-6">Search Member</p> '),$(y("input",{"onUpdate:modelValue":v[1]||(v[1]=e=>a.value=e),type:"text",class:"input custom-text-filter",placeholder:"Search",onKeyup:o,onChange:v[2]||(v[2]=t=>e.$emit("update:valor",a.value))},null,544),[[x],[A,a.value]]),n.value?(m(),f("div",vt,[y("table",pt,[P('  <thead>\r\n          <tr>\r\n            <th scope="col" class="text-center">Photo</th>\r\n            <th scope="col" class="text-">Name</th>\r\n            <th scope="col" class="text-">Email</th>\r\n          </tr>\r\n        </thead> '),y("tbody",null,[(m(!0),f(j,null,w(s.value,((e,s)=>(m(),f("tr",{onClick:s=>(e=>{n.value=!1,r.value=!0,d(e.id).then((s=>{i.value=e,i.value.cards=s.data,r.value=!1,"name"==l.dato?a.value=i.value.name+" "+i.value.last_name:a.value=i.value[l.dato],t("update:modelValue",i.value),t("update:valor",a.value)})).catch((e=>{r.value=!1,L.error(e.response.data)}))})(e),key:`member-${s}`},[y("td",null,[y(p,{picture:`${h(E)}storage/${e.photo}`,size:"medium"},null,8,["picture"])]),y("td",null,b(e.name)+" "+b(e.second_name)+" "+b(e.last_name),1),y("td",null,b(e.email),1)],8,["onClick"])))),128))])])])):P("v-if",!0),i.value?(m(),f("div",mt,[y(p,{picture:`${h(E)}storage/${i.value.photo}`,size:"large"},null,8,["picture"]),y("div",ft,[y("table",yt,[y("tbody",null,[y("tr",null,[ht,y("td",null,b(i.value.name)+" "+b(i.value.second_name)+" "+b(i.value.last_name),1)]),y("tr",null,[bt,y("td",null,b(i.value.email),1)]),i.value.user?(m(),f("tr",_t,[gt,i.value.user.stripe_id?P("v-if",!0):(m(),f("td",kt)),i.value.user.pm_type?(m(),f("td",xt,b(i.value.user.pm_type)+" **** "+b(i.value.user.pm_last_four),1)):(m(),f("td",jt,"It does not have a default payment method"))])):P("v-if",!0)])])])])):P("v-if",!0),r.value?(m(),f(g,{key:2,height:"100px",width:"100%",class:"mt-4"})):P("v-if",!0)])),_:1})}}});const Ct={class:"d-flex mb-4 justify-content-between"},St={class:"title is-5"},Vt=k(" Total: "),Pt={class:"title is-5"},$t=k(" Cash Total: "),At={class:"\r\n          d-flex\r\n          justify-content-center\r\n          align-items-center\r\n          flex-column\r\n          mb-4\r\n        "},zt=y("p",{class:"title is-5 mb-4"},"Change Back:",-1),Ot={class:"title is-3 mb-0"},Tt={class:"d-flex justify-content-center flex-wrap mb-4"},It=y("div",{class:"w-100"},null,-1),Rt={class:"d-flex justify-content-center"},Nt=k("Reset"),Ut=k("Confirm");var Et=d({expose:[],setup:e=>(e,t)=>{const l=o,a=i,s=je,n=we;return m(),f(n,{title:"",open:h(Y),actions:"center",onClose:t[4]||(t[4]=e=>Y.value=!1)},{content:_((()=>[y("div",Ct,[y("p",St,[Vt,y("b",null,b(h(q)(h(X))),1)]),y("p",Pt,[$t,y("b",null,b(h(q)(h(Z))),1)])]),y("div",At,[zt,y("p",Ot,[y("b",null,b(h(q)(h(ee))),1)])]),y("div",Tt,[y(l,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t[1]||(t[1]=e=>Z.value=h(X))},{default:_((()=>[k(" Full Payment "+b(h(q)(h(X))),1)])),_:1}),It,(m(),f(j,null,w([5,10,20,50,100],((e,t)=>y(l,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>h(te)(e)},{default:_((()=>[k(" $"+b(e),1)])),_:2},1032,["onClick"]))),64))]),y("div",Rt,[y(s,null,{default:_((()=>[y(a,null,{default:_((()=>[$(y("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>z(Z)?Z.value=e:null),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[A,h(Z)]])])),_:1})])),_:1})])])),action:_((()=>[y(l,{onClick:t[3]||(t[3]=e=>Z.value=0),class:"d-flex justify-content-center",raised:""},{default:_((()=>[Nt])),_:1}),y(l,{color:"success",onClick:h(le),disabled:h(X)>h(Z),class:"d-flex justify-content-center",raised:""},{default:_((()=>[Ut])),_:1},8,["onClick","disabled"])])),_:1},8,["open"])}});const qt=y("div",{id:"payment-element"},[P("Stripe.js injects the Payment Element")],-1),Dt=k("Pay now "),Lt=y("div",{id:"payment-message",class:"hidden"},null,-1);var Bt=d({expose:[],props:{url_payment:{type:String,required:!0},member_id:{type:Number,required:!0},new_setup_intent:{type:String,required:!0},data:{type:Object,required:!0}},emits:["PaymentAction"],setup(e,{emit:n}){const i=e,u=Stripe(B.value);C((()=>i.id),(e=>{console.log("cambio"),r.value=!0,k()}));const r=S(!0);S({id:i.id,amount:i.amount});const d=S(),v=S(null),h=S(null),b=S(!1);S(null);const k=async()=>{let e=await D.post(i.new_setup_intent).then((e=>{v.value=e.data.client_secret,d.value=u.elements({clientSecret:v.value,appearance:{theme:"night",rules:{".Input":{boxShadow:"none"}}}}),h.value=d.value.create("card",{classes:{base:"base_card"}}),h.value.mount("#payment-element")})).catch((e=>{r.value=!1}));return r.value=!1,e},x=S(null),w=async e=>{e.preventDefault(),b.value=!0;const{setupIntent:c,error:r}=await u.confirmCardSetup(v.value,{payment_method:{card:h.value,billing_details:{name:x.value}}});if(r)b.value=!1,L.error(r.message),k();else{const{payment_method:e}=c,u=((e,n)=>{for(var i in n||(n={}))l.call(n,i)&&s(e,i,n[i]);if(t)for(var i of t(n))a.call(n,i)&&s(e,i,n[i]);return e})({payment_method:e},i.data);console.log(u);const{data:r}=await D.post(i.url_payment,u).catch((e=>{b.value=!1}));r&&(n("PaymentAction",r),L.success("Success Payment"))}b.value=!1};return p((()=>{b.value=!1,k()})),(e,t)=>{const l=xe,a=o,s=Ce,n=c;return m(),f(j,null,[r.value?(m(),f(l,{key:0,height:"500px"})):P("v-if",!0),$(y(n,{class:"mt-6"},{default:_((()=>[y("form",{onSubmit:g(w,["prevent"]),id:"payment-form"},[$(y("input",{id:"card-holder-name",class:"input mb-3","onUpdate:modelValue":t[1]||(t[1]=e=>x.value=e),placeholder:"Name",type:"text"},null,512),[[A,x.value]]),qt,y(s,{size:"small",active:b.value},{default:_((()=>[y(a,{id:"submit",class:"mt-4",color:"info"},{default:_((()=>[Dt])),_:1})])),_:1},8,["active"]),Lt],40,["onSubmit"])])),_:1},512),[[O,!r.value]])],64)}}});const Mt={key:0,class:"mt-4 mx-2"},Ft={key:0,class:"columns is-multiline w-100"},Gt={class:"d-flex align-items-center"},Wt=y("p",{class:"title is-6 mb-0"},[y("i",{class:"fas fa-credit-card","aria-hidden":"true"})],-1),Kt={class:"ml-4"},Ht=y("p",{class:"title is-6 mb-2"},"Select Payment Method",-1),Jt={class:"title is-6 mb-0"},Qt={class:"column is-12"},Xt=y("div",{class:"d-flex align-items-center"},[y("p",{class:"title is-1 mb-0"},[y("i",{class:"fas fa-plus-circle","aria-hidden":"true"})]),y("div",{class:"ml-4"},[y("p",{class:"title is-4 mb-2"},"Add new card")])],-1);var Yt=d({expose:[],setup(e){const t=S(!1),l=S(!1),a=()=>{H.value.length?X.value?se.value?l.value=!0:L.error("No hay miembro seleccionado"):L.error("No existe el total"):L.error("No hay productos en el carro")},s=e=>{ne({invoice_pdf:e.invoice_pdf,order:e.order})};return(e,n)=>{const i=c,u=Ce,r=Bt;return h(ae)?P("v-if",!0):(m(),f("div",Mt,[y(u,{size:"large",active:t.value},{default:_((()=>[h(ae)?P("v-if",!0):(m(),f("div",Ft,[(m(!0),f(j,null,w(h(se).cards,((e,a)=>(m(),f("div",{key:`card-${a}`,class:"column is-6"},[l.value?P("v-if",!0):(m(),f(i,{key:0,onClick:l=>{return a={payment_method:e.id},se.value.payment_method=a.payment_method,void(H.value.length?X.value?se.value?confirm("Confirm Payment")&&(t.value=!0,ie({cart:H.value,total:X.value,member_id:se.value.id,locations_id:M(Se.value,"locations_id").model,payment_method:se.value.payment_method,discount:M(ce,"discount").model}).then((e=>{t.value=!1,L.success("Success Payment"),ne({invoice_pdf:e.data.invoice_pdf,order:e.data.order})})).catch((e=>{t.value=!1,L.error(e.response.data)}))):L.error("No hay miembro seleccionado"):L.error("No existe el total"):L.error("No hay productos en el carro"));var a},color:h(se).payment_method==e.id?"success":void 0,class:"btn-card"},{default:_((()=>[y("div",Gt,[Wt,y("div",Kt,[Ht,y("p",Jt,b(e.card.brand)+" **** "+b(e.card.last4),1)])])])),_:2},1032,["onClick","color"]))])))),128)),y("div",Qt,[$(y(i,{onClick:a,color:"success",class:"btn-card"},{default:_((()=>[Xt])),_:1},512),[[O,!l.value]])])]))])),_:1},8,["active"]),l.value?(m(),f(r,{key:0,new_setup_intent:`orders/new_setup_intent/${h(se).id}`,member_id:h(se).id,url_payment:"orders/store_new_card_and_payment",data:{cart:h(H),total:h(X),member_id:h(se).id,locations_id:h(M)(h(Se),"locations_id").model},onPaymentAction:s},null,8,["new_setup_intent","member_id","data"])):P("v-if",!0)]))}}});const Zt=y("h1",{class:"title text-center is-4 success"}," Good Job! Success Payment ",-1),el=y("div",{class:"text-center mt-6"},[y("p",{class:"title is-5"},"What do you want to do with the receipt?")],-1),tl={class:"columns is-multiline"},ll={class:"column is-6 mt-6"},al={class:"d-flex justify-content-between align-items-center"},sl=y("div",{class:"d-flex align-items-center"},[y("p",{class:"title mb-0 mr-3 is-3"},[y("i",{class:"fas fa-print","aria-hidden":"true"})]),y("p",{class:"title text-center is-5"},"Print Receipt")],-1),nl={key:0,class:"title is-6"},il=y("i",{class:"fas fa-check","aria-hidden":"true"},null,-1),cl={class:"column is-6 mt-6"},ul={class:"d-flex justify-content-between align-items-center"},rl=y("div",{class:"d-flex align-items-center"},[y("p",{class:"title mb-0 mr-3 is-3"},[y("i",{class:"iconify","data-icon":"feather:send","aria-hidden":"true"})]),y("p",{class:"title text-center is-5"},"Send Receipt Mail")],-1),ol={key:0,class:"title is-6"},dl=y("i",{class:"fas fa-check","aria-hidden":"true"},null,-1),vl={key:0,class:"column is-6 mx-auto"},pl={class:"d-flex justify-content-between align-items-center"},ml=y("div",{class:"d-flex align-items-center"},[y("p",{class:"title mb-0 mr-3 is-3"},[y("i",{class:"iconify","data-icon":"feather:send","aria-hidden":"true"})]),y("p",{class:"title text-center is-5"},"Send Invoice Mail")],-1),fl={key:0,class:"title is-6"},yl=y("i",{class:"fas fa-check","aria-hidden":"true"},null,-1),hl={key:1,class:"column is-12 text-center"},bl=y("i",{class:"iconify","data-icon":"feather:send","aria-hidden":"true"},null,-1),_l=k(" Send "),gl=y("i",{class:"iconify","data-icon":"feather:send","aria-hidden":"true"},null,-1),kl=k(" Send Invoice "),xl={key:2,class:"column is-12"};var jl=d({expose:[],props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){T(),p((()=>{}));const l=S("receipt"),a=S(!1),s=()=>{a.value=!a.value},n=S(!1),i=S(null),u=S(!1),r=()=>{u.value=!0,re(ae.value.id,i.value).then((e=>{L.success("Send Success"),u.value=!1})).catch((e=>{for(var t in u.value=!1,L.error(e.response.data),e.response.data)L.error(`${t}: ${e.response.data[t]}`)}))},d=()=>{i.value=null,n.value=!1,t("update:modelValue",!1)},v=e=>{n.value=!0,l.value=e,"invoice"==l.value?i.value=se.value.email:i.value=""},b=()=>{u.value=!0,oe(ae.value.id,i.value,ue.value).then((e=>{L.success("Send Success"),u.value=!1})).catch((e=>{for(var t in u.value=!1,L.error(e.response.data),e.response.data)L.error(`${t}: ${e.response.data[t]}`)}))};return(t,p)=>{const g=c,k=wt,x=o,j=Ce,w=we;return m(),f(w,{noclose:"",title:"",open:e.modelValue,actions:"center",onClose:d},{content:_((()=>[y(g,{color:"success",class:"outlined"},{default:_((()=>[Zt])),_:1}),el,y("div",tl,[y("div",ll,[y(g,{color:"info",class:"btn-card",onClick:s},{default:_((()=>[y("div",al,[sl,a.value?(m(),f("p",nl,[il])):P("v-if",!0)])])),_:1})]),y("div",cl,[y(g,{color:"warning",class:"btn-card",onClick:p[1]||(p[1]=e=>v("receipt"))},{default:_((()=>[y("div",ul,[rl,"receipt"==l.value?(m(),f("p",ol,[dl])):P("v-if",!0)])])),_:1})]),h(se)&&h(ue)?(m(),f("div",vl,[y(g,{style:{background:"#673ab7"},class:"btn-card",onClick:p[2]||(p[2]=e=>v("invoice"))},{default:_((()=>[y("div",pl,[ml,"invoice"==l.value?(m(),f("p",fl,[yl])):P("v-if",!0)])])),_:1})])):P("v-if",!0),n.value?(m(),f("div",hl,[y(k,{dato:"email",valor:i.value,"onUpdate:valor":p[3]||(p[3]=e=>i.value=e),modelValue:h(se),"onUpdate:modelValue":p[4]||(p[4]=e=>z(se)?se.value=e:null)},null,8,["valor","modelValue"]),y(j,{size:"large",active:u.value},{default:_((()=>["receipt"==l.value?(m(),f(x,{key:0,onClick:r,color:"success",class:"mt-4"},{default:_((()=>[bl,_l])),_:1})):P("v-if",!0)])),_:1},8,["active"]),y(j,{size:"large",active:u.value},{default:_((()=>["invoice"==l.value?(m(),f(x,{key:0,onClick:b,style:{background:"#673ab7"},class:"mt-4"},{default:_((()=>[gl,kl])),_:1})):P("v-if",!0)])),_:1},8,["active"])])):P("v-if",!0),a.value?(m(),f("div",xl,[y("iframe",{style:{width:"100%"},height:"400px",src:`${h(F)}store/recibo?order=${h(ae).id}`,frameborder:"0"},null,8,["src"])])):P("v-if",!0)])])),action:_((()=>[])),_:1},8,["open"])}}});const wl={class:"columns is-multiline",style:{"min-height":"350px"}},Cl={class:"column is-3"},Sl=y("p",{class:"title is-6 mb-1"},[y("b",null,"Total")],-1),Vl={key:0,class:"title is-3 mb-0"},Pl={key:1,class:"title is-3 mb-0"},$l={key:2,class:"mb-0"},Al={key:0},zl={key:1},Ol=k(") "),Tl={class:"column is-9"},Il={class:"column is-12 mb-4"},Rl={class:"d-flex"},Nl={class:"d-flex justify-content-between align-items-start"},Ul=y("div",null,[y("p",{class:"title is-3"},[y("i",{class:"fas fa-credit-card","aria-hidden":"true"})]),y("p",{class:"title is-5"},"Debit Automatic")],-1),El={key:0,class:"title is-6"},ql=y("i",{class:"fas fa-check","aria-hidden":"true"},null,-1),Dl=y("p",{class:"title is-3"},[y("i",{class:"fas fa-money-bill","aria-hidden":"true"})],-1),Ll=y("p",{class:"title is-5"},"Cash",-1),Bl={class:"d-flex justify-content-between align-items-start"},Ml=y("div",null,[y("p",{class:"title is-3"},[y("i",{class:"fas fa-money-check-alt","aria-hidden":"true"})]),y("p",{class:"title is-5"},"Swipe Card")],-1),Fl={key:0,class:"title is-6"},Gl=y("i",{class:"fas fa-check","aria-hidden":"true"},null,-1),Wl={class:"is-4 column mx-auto"},Kl={class:"d-flex justify-content-between align-items-start"},Hl=y("div",null,[y("p",{class:"title is-3"},[y("i",{class:"fas fa-receipt",style:{color:"white !important"},"aria-hidden":"true"})]),y("p",{class:"title is-5",style:{color:"white !important"}}," View Order ")],-1),Jl={key:0,class:"title is-6"},Ql=y("i",{class:"fas fa-check","aria-hidden":"true"},null,-1),Xl={key:0,class:"mt-4 mx-2"},Yl={class:"column"},Zl=y("p",{class:"title is-1"},[y("i",{class:"lnir lnir-postcard","aria-hidden":"true"})],-1),ea={class:"title is-5"},ta={key:0,class:"column flex-column d-flex justify-content-between is-3"},la=y("p",{class:"title is-5"},"Cancel Payment",-1),aa=y("p",{class:"title is-5"},"Retry Payment",-1),sa={key:1,class:"column is-5"},na=y("p",{class:"title is-3"},"Finish payment",-1),ia={class:"mb-4 column is-12"};var ca=d({expose:[],props:{},emits:["proccessCheckout"],setup(e,{emit:t}){v();const l=S(!1);C((()=>se.value),(()=>{l.value=!1})),p((()=>{M(ce,"discount").model="",Ae(1,"product").then((e=>{M(ce,"discount").values=e.data.discounts})),ae.value=null}));const a=S(!1),s=S(null),i=S(null),u=I((()=>!(!l.value&&Ve.value.length&&!i.value&&!ae.value))),r=I((()=>!!(l.value||a.value.length||ae.value))),o=I((()=>!(se.value&&!ae.value))),d=()=>{u.value||(Ve.value.length?a.value=!a.value:a.value=!1,i.value&&(a.value=!0))},g=()=>{i.value=null,s.value=null,a.value=!1};return(e,t)=>{const v=c,p=wt,C=Et,S=Yt,A=n,O=jl,T=V("tooltip");return m(),f("div",wl,[y("div",Cl,[y(v,{class:"mb-4"},{default:_((()=>[x(e.$slots,"default"),y("div",null,[Sl,h(ae)?(m(),f("p",Vl,b(h(q)(h(ae).total/100)),1)):(m(),f("p",Pl,b(h(q)(h(X))),1)),h(pe)?(m(),f("p",$l,[k(" Discount: "+b(h(pe).name)+" ( ",1),"percentaje"==h(pe).type?(m(),f("span",Al,b(h(pe).value)+"% off",1)):(m(),f("span",zl,"-"+b(h(pe).value)+"$",1)),Ol])):P("v-if",!0)])])),_:3})]),y("div",Tl,[y(p,{class:"",modelValue:h(se),"onUpdate:modelValue":t[1]||(t[1]=e=>z(se)?se.value=e:null)},null,8,["modelValue"])]),y("div",Il,[y("div",Rl,[$(y(v,{color:"success",disabled:h(o),onClick:t[2]||(t[2]=e=>h(o)?l.value=!1:l.value=!l.value),class:"mx-2 btn-card w-100"},{default:_((()=>[y("div",Nl,[Ul,l.value?(m(),f("p",El,[ql])):P("v-if",!0)])])),_:1},8,["disabled"]),[[T,h(se)?"":"You must select a member"]]),y(v,{color:"warning",disabled:h(r),onClick:t[3]||(t[3]=e=>{de.value=1,Y.value=!0,h(le)}),class:"mx-2 btn-card w-100 justify-content-center"},{default:_((()=>[Dl,Ll])),_:1},8,["disabled"]),$(y(v,{color:"info",disabled:h(u),class:"mx-2 btn-card w-100 justify-content-center",onClick:d},{default:_((()=>[y("div",Bl,[Ml,a.value?(m(),f("p",Fl,[Gl])):P("v-if",!0)])])),_:1},8,["disabled"]),[[T,h(Ve).length?"":"No posee terminales"]])]),y("div",Wl,[h(ae)?(m(),f(v,{key:0,style:{background:"#388e3c"},class:"mx-2 mx-auto btn-card justify-content-center",onClick:t[4]||(t[4]=e=>ve.value=!0)},{default:_((()=>[y("div",Kl,[Hl,h(ve)?(m(),f("p",Jl,[Ql])):P("v-if",!0)])])),_:1})):P("v-if",!0)]),P(" Terminales "),a.value?(m(),f("div",Xl,[(m(!0),f(j,null,w(h(Ve),((e,l)=>(m(),f("div",{key:`terminal-${l}`,class:"columns is-multiline"},[y("div",Yl,[y(v,{class:["p-4 btn-card",i.value&&s.value==e.id?"is-3":""],disabled:i.value&&s.value==e.id,color:s.value==e.id?"info":"",onClick:t=>{return l=e.id,void(null==i.value?(s.value=l,confirm("Send Terminal")&&(L.success("Enviando...."),me({cart:H.value,total:X.value,locations_id:M(Se.value,"locations_id").model,terminal_id:s.value,discount:pe.value?pe.value.id:null}).then((e=>{i.value=e.data,console.log("soy el paymentIntent",e.data),L.success("Recibido en el terminal")})).catch((e=>{L.error(e.response.data)})))):L.error("A payment Intent already exists, Select one of the following actions"));var l}},{default:_((()=>[Zl,y("p",ea,b(e.label),1),y("p",null,"Serial number: "+b(e.serial_number),1),y("p",null,"Status: "+b(e.status),1)])),_:2},1032,["class","disabled","color","onClick"])]),i.value&&s.value==e.id?(m(),f("div",ta,[y(v,{color:"danger",class:"mb-2 btn-card d-flex justify-content-center",onClick:t[5]||(t[5]=e=>{fe(i.value).then((e=>{g(),L.success("payment canceled")})).catch((e=>{L.error(e.response),e.response.data&&L.error(e.response.data)}))})},{default:_((()=>[la])),_:1}),y(v,{color:"warning",class:"btn-card d-flex justify-content-center",onClick:t[6]||(t[6]=e=>(L.success("Retry..."),void ye(i.value,s.value).then((e=>{i.value=e.data,L.success("Received at the terminal")})).catch((e=>{L.error(e.response),e.response.data&&L.error(e.response.data)}))))},{default:_((()=>[aa])),_:1})])):P("v-if",!0),i.value&&s.value==e.id?(m(),f("div",sa,[y(v,{color:"success",class:"\r\n                btn-card\r\n                h-100\r\n                d-flex\r\n                justify-content-center\r\n                align-items-center\r\n              ",onClick:t[7]||(t[7]=e=>{he(i.value).then((e=>{g(),finishPaymentOrder({invoice_pdf:e.data.invoice_pdf,order:e.data.order})})).catch((e=>{L.error(e.response),e.response.data&&L.error(e.response.data)}))})},{default:_((()=>[na])),_:1})])):P("v-if",!0)])))),128))])):P("v-if",!0),y(C),l.value?(m(),f(S,{key:1})):P("v-if",!0)]),y("div",ia,[y(A,{slo:!1,class:"w-100","inputs-step":h(ce)},null,8,["inputs-step"])]),y(O,{modelValue:h(ve),"onUpdate:modelValue":t[8]||(t[8]=e=>z(ve)?ve.value=e:null)},null,8,["modelValue"])])}}});const ua={style:{"min-height":"400px"}},ra={class:"d-flex justify-content-between mb-4"},oa=y("h3",{class:"title is-5 mb-2"},"Order",-1);var da=d({expose:[],props:{},setup(e){v(),p((()=>{})),S([{step:1,name:"Shopping",icon:"fa-shopping-cart"},{step:2,name:"Receipt",icon:"fa-money-check"},{step:3,name:"Receipt",icon:"fa-receipt"}]);const t=()=>{ae.value=null,be.value=!1,l.value=null,H.value=[]},l=S(null);return(e,l)=>{const a=ke,s=dt,n=ca,i=we;return m(),f("div",ua,[P(' <VCard class="mb-4 d-flex justify-content-around">\r\n      <p\r\n        v-for="(i, key) in steps"\r\n        :key="`sterpmenu-${key}`"\r\n        style="font-size: 20px"\r\n        :title="i.name"\r\n        :class="i.step == stepActive ? \'text-primary\' : \'\'"\r\n        @click="stepActive = i.step"\r\n      >\r\n        <i class="fas" :class="i.icon" aria-hidden="true"></i>\r\n      </p>\r\n    </VCard> '),y(s,{onProccessCheckout:l[1]||(l[1]=e=>be.value=!0)},{default:_((()=>[y("div",ra,[oa,h(H)?(m(),f(a,{key:0,color:"info",label:`${h(H).length} products`,rounded:"",elevated:""},null,8,["label"])):P("v-if",!0)])])),_:1}),y(i,{open:h(be),actions:"center",size:"big",noscroll:"",noclose:"",onClose:t},{header:_((()=>[])),content:_((()=>[h(be)?(m(),f(n,{key:0})):P("v-if",!0)])),action:_((()=>[P(' <VButton color="primary" raised>Confirm</VButton> ')])),_:1},8,["open"]),P(' <sendFactura v-if="stepActive == 3" /> ')])}}});const va={key:0,class:"page-content-inner columns is-multiline"},pa={class:"column is-8 columns"},ma={class:"column is-8 is-multiline"},fa={class:"column is-4 is-multiline"},ya={class:"column is-9 columns"},ha={class:"column is-2"},ba={class:"card-grid-toolbar"},_a={key:0,class:"columns is-multiline w-100"},ga=y("p",{class:"title is-7"},"View All",-1),ka={class:"title is-7 mt-4"},xa={class:"column is-10"},ja={class:"card-grid card-grid-v4"},wa=y("img",{class:"light-image",src:Oe,alt:""},null,-1),Ca=y("img",{class:"dark-image",src:Te,alt:""},null,-1),Sa={class:"column is-3 card_counte"},Va={key:1},Pa=y("h3",{class:"title is-5 mb-2"},"Sorry",-1),$a=y("p",null,"Sale not available: an inventory is open",-1);var Aa=d({expose:[],setup(e){Ie.value="Store";const{cookies:t}=R();N({title:"Store"});const l=function(e){"object"==typeof e&&(e=this.model),Re.value=e,Ne(e).then((e=>{Ue.value.length>0&&(1==Ue.value[0].status?ge.value=!0:ge.value=!1)})),De(e,"active"),Le()};C((()=>$e.value),(()=>{G(Se,"locations_id",Pe.value),M(Se.value,"locations_id").change=l,null!=t.get("locations_id")&&(M(Se.value,"locations_id").model=t.get("locations_id"),l(t.get("locations_id")))}));const a=v(),s=T();p((()=>{null!=a.query.payment_intent_client_secret&&"succeeded"==a.query.redirect_status&&_e(a.query.payment_intent_client_secret).then((e=>{L.success("Payment"),s.replace({query:{}})}))}));const o=S("");S(null);const d=I((()=>o.value?Ee.value.filter((e=>e.name.match(new RegExp(o.value,"i"))||e.category.name.match(new RegExp(o.value,"i"))||e.var_code==o.value)):Ee.value));S(0);const g=S(null),k=()=>{if(g.value&&g.value.length>=9){o.value=g.value;let e=Ee.value.find((e=>e.var_code==g.value));console.log(e),e&&(W(e),g.value=null,o.value=null,L.success("Product success"))}};return(e,t)=>{const l=n,a=i,s=c,v=u,p=r,x=Qe,C=da,S=ze,z=V("focus");return m(),f(S,{container:"px-5"},{default:_((()=>[y(l,{"inputs-step":h(Se)},null,8,["inputs-step"]),h(ge)?(m(),f("div",Va,[y(s,{radius:"large",color:"danger"},{default:_((()=>[Pa,$a])),_:1})])):(m(),f("div",va,[y("div",pa,[y("div",ma,[y(a,{icon:"feather:search"},{default:_((()=>[$(y("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[A,o.value]])])),_:1})]),y("div",fa,[y(a,{icon:"feather:search"},{default:_((()=>[$(y("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e),class:"input custom-text-filter",placeholder:"Barcode...",onKeyup:k},null,544),[[z],[A,g.value]])])),_:1})])]),y("div",ya,[y("div",ha,[y("div",ba,[h(qe)?(m(),f("div",_a,[y(s,{onClick:t[3]||(t[3]=e=>o.value=""),class:"\n                  column\n                  p-1\n                  mb-3\n                  py-5\n                  is-12\n                  d-flex\n                  flex-column\n                  align-items-center\n                  justify-content-center\n                  text-center\n                  cursor-pointer\n                "},{default:_((()=>[ga])),_:1}),(m(!0),f(j,null,w(h(qe),((e,t)=>(m(),f(s,{onClick:t=>o.value=e.name,key:`categorie-${t}`,class:"\n                  column\n                  p-1\n                  mb-3\n                  py-4\n                  is-12\n                  d-flex\n                  flex-column\n                  align-items-center\n                  justify-content-center\n                  text-center\n                  cursor-pointer\n                "},{default:_((()=>[y(v,{size:"small",picture:`${h(E)}storage/${e.image}`},null,8,["picture"]),y("p",ka,b(e.name),1)])),_:2},1032,["onClick"])))),128))])):P("v-if",!0)])]),y("div",xa,[y("div",ja,[P("List Empty Search Placeholder "),y(p,{class:[0!==h(d).length&&"is-hidden"],title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n                search terms you've entered. Please try different search terms or\n                criteria.",larger:""},{image:_((()=>[wa,Ca])),_:1},8,["class"]),y(U,{name:"list",tag:"div",class:"columns is-multiline"},{default:_((()=>[P("Grid item"),(m(!0),f(j,null,w(h(d),(e=>(m(),f("div",{key:e.id,class:"column is-2 d-flex"},[y(x,{product:e},null,8,["product"])])))),128))])),_:1})])])]),y("div",Sa,[y(C)])]))])),_:1})}}});export default Aa;
