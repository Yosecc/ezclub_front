import{_ as C}from"./V-Button.vue_vue_type_script_setup_true_lang.72d178c7.js";import{_ as R}from"./inputsLayaut.vue_vue_type_style_index_0_lang.bc2ca8d6.js";import{s as f,t as T,h as B}from"./Reports.4712ad31.js";import{d as y,o as d,e as _,f as t,w as h,u as w,F as b,k as $,i as v,r as g,j as D,n as x,t as a,G as S,h as j,y as I,B as L}from"./index.4457215e.js";import{_ as V}from"./V-Card.vue_vue_type_script_setup_true_lang.f80f1beb.js";import{_ as M}from"./V-Loader.vue_vue_type_script_setup_true_lang.f82321d3.js";import{_ as N}from"./SidebarLayout.vue_vue_type_script_setup_true_lang.a7af6f4a.js";import{p as Y}from"./sidebarLayoutState.d2b676a9.js";import"./V-Placeload.9684d098.js";import"./V-Control.92200beb.js";import"./V-Field.vue_vue_type_script_setup_true_lang.33752939.js";import"./V-SwitchSegment.vue_vue_type_script_setup_true_lang.96e64ac9.js";import"./V-Modal.vue_vue_type_script_setup_true_lang.f0368080.js";import"./V-Checkbox.vue_vue_type_script_setup_true_lang.70a8d51f.js";import"./ActivityPanel.vue_vue_type_style_index_0_lang.8acd0baa.js";import"./useDropdown.d2881c63.js";import"./V-Avatar.vue_vue_type_script_setup_true_lang.b4183814.js";import"./V-Dropdown.c58eb584.js";import"./V-Icon.vue_vue_type_script_setup_true_lang.a0e27302.js";import"./Companies.4f645ec0.js";import"./activePanelState.d3359fb3.js";import"./fastpizza.70124fcb.js";import"./TaskPanel.vue_vue_type_style_index_0_lang.50493a6a.js";import"./V-Tag.vue_vue_type_script_setup_true_lang.0d8ff65f.js";import"./video.d6dbc99d.js";import"./SearchPanel.vue_vue_type_style_index_0_lang.63cec0b9.js";import"./darkModeState.1f6503fc.js";import"./AnimatedLogo.d670690a.js";import"./V-IconBox.vue_vue_type_script_setup_true_lang.772b752f.js";import"./V-Block.vue_vue_type_script_setup_true_lang.00657afe.js";import"./UserPopoverContent.vue_vue_type_script_setup_true_lang.5fb53f85.js";import"./userPopovers.f4b9fc60.js";const A={class:"is-12 d-flex justify-content-end"},E=v("Download Excel"),F={class:"is-12 d-flex justify-content-end"},P=v(" Search ");var U=y({expose:[],props:{loading:{type:Boolean}},emits:{search(r){return r},download(r){return r}},setup(r,{emit:n}){const e=r,u=()=>{const i=$(f.value);n("download",i)},c=()=>{const i=$(f.value);n("search",i)};return(i,l)=>{const o=C,m=R;return d(),_(b,null,[t("div",A,[t(o,{color:"primary",onClick:u,loading:e.loading},{default:h(()=>[E]),_:1},8,["loading"])]),t(m,{"inputs-step":w(f)},null,8,["inputs-step"]),t("div",F,[t(o,{color:"primary",loading:e.loading,onClick:c},{default:h(()=>[P]),_:1},8,["loading"])])],64)}}});const z={class:"is-12 d-flex justify-content-end mt-5"},G=t("strong",null,"Total:",-1),H={class:"mt-1"},O={class:"table is-hoverable is-fullwidth"},q=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"ID"),t("th",{scope:"col"},"Name"),t("th",{scope:"col"},"Member Card ID"),t("th",{scope:"col"},"Description"),t("th",{scope:"col"},"Date"),t("th",{scope:"col"},"Payment Type"),t("th",{scope:"col"},"Invoice Type"),t("th",{scope:"col"},"Amount")])],-1),J={key:0};var K=y({expose:[],setup(r){const n=g([]),e=g(!1);D(async()=>{c()});const u=async l=>{c(l)},c=async(l={})=>{e.value=!0;try{const o=await T(l);n.value=o.data}catch(o){x.error(o.message)}finally{e.value=!1}},i=async(l={})=>{e.value=!0;try{const o=await B({...l,report_export_type:l.report_type=="Products"?"products":"memberships"}),m=window.URL.createObjectURL(new Blob([o.data])),p=document.createElement("a");p.href=m,p.setAttribute("download","reports.xlsx"),document.body.appendChild(p),p.click()}catch(o){x.error(o.message)}finally{e.value=!1}};return(l,o)=>{const m=U,p=V;return d(),_(p,null,{default:h(()=>[t("div",null,[t(m,{onSearch:u,loading:e.value,onDownload:i},null,8,["loading"])]),t("div",z,[t("p",null,[G,v(" "+a(n.value.total_amount),1)])]),t("div",H,[t(M,{class:"is-12",center:"",size:"small",active:e.value},{default:h(()=>[t("table",O,[q,n.value&&!e.value?(d(),_("tbody",J,[(d(!0),_(b,null,S(n.value.data,(s,k)=>(d(),_("tr",{key:`report-${k}`},[t("td",null,a(s.id),1),t("td",null,a(`${s.first_name} ${s.last_name}`),1),t("td",null,a(`${s.bar_code}`),1),t("td",null,a(`${s.description}`),1),t("td",null,a(w(j)(s.created_at).format("MM/DD/YYYY")),1),t("td",null,a(s.payment_type),1),t("td",null,a(s.invoice_type),1),t("td",null,a(`$ ${s.amount}`),1)]))),128))])):I("",!0)])]),_:1},8,["active"])])]),_:1})}}});const Q={class:"page-content-inner"},W={class:"columns is-multiline"};var St=y({expose:[],setup(r){return Y.value="Reports",L({title:"Reports"}),D(()=>{}),(n,e)=>{const u=K,c=N;return d(),_(c,null,{default:h(()=>[t("div",Q,[t("div",W,[t(u)])])]),_:1})}}});export{St as default};
