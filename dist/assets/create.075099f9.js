import{_ as e}from"./V-Card.vue_vue&type=script&setup=true&lang.d3d76712.js";import{_ as t}from"./V-Loader.vue_vue&type=script&setup=true&lang.72c1da57.js";import{_ as s}from"./inputsLayaut.vue_vue&type=style&index=0&lang.082bb801.js";import{_ as a}from"./V-SwitchBlock.vue_vue&type=script&setup=true&lang.3ea5d316.js";import{_ as l}from"./V-Control.9f6b030b.js";import{_ as i}from"./V-Field.vue_vue&type=script&setup=true&lang.9839f63b.js";import{_ as n}from"./V-Button.vue_vue&type=script&setup=true&lang.940c9f5e.js";import{_ as o}from"./Presupuesto.vue_vue&type=script&setup=true&lang.b327c847.js";import{_ as u}from"./SearchBar.vue_vue&type=style&index=0&lang.1f2b0883.js";import{d as r,e as c,i as d,f as p,s as m,j as v,w as f,o as y,_,b}from"./subscription-method-stripe-checkout.vue_vue&type=script&setup=true&lang.5775c1e6.js";import{_ as h}from"./V-Tag.vue_vue&type=script&setup=true&lang.42120ae5.js";import{_ as g}from"./V-Modal.vue_vue&type=script&setup=true&lang.793fc7c9.js";import{d as j,u as x,r as w,A as V,w as k,c as C,i as S,j as z,l as P,k as T,S as O,L,I as B,W as I,X as N,U as A,F as J,H as M,P as Y,O as D,ab as E,o as U,R as $,G as R}from"./vendor.b96c0b62.js";import{s as H,b as q,p as F,c as G,d as W,e as X,f as K}from"./ManualPayment.54c21bb5.js";import{c as Q}from"./Companies.4841fe3c.js";import{n as Z,m as ee,a as te,g as se,e as ae,s as le}from"./index.bef7346d.js";import{_ as ie}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.de9f295f.js";import{p as ne}from"./sidebarLayoutState.a7097173.js";import{e as oe,c as ue,s as re,d as ce}from"./config.b46cb09c.js";import{i as de}from"./Members.38e25697.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.55f1942d.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.7d0df25a.js";import"./V-Placeload.43c61814.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.78d7227b.js";import"./Discounts.dfa1474b.js";import"./MemberCards.2b4d68e1.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.aee52074.js";import"./useDropdown.51b21268.js";import"./V-Dropdown.5a213405.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.0b7fcd84.js";import"./activePanelState.a3a15c4d.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.cf9fc2aa.js";import"./video.19485659.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.3bd9126b.js";import"./darkModeState.1cad08fb.js";import"./AnimatedLogo.3baf4ecb.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.31d8f19f.js";import"./V-Block.vue_vue&type=script&setup=true&lang.96a9aa0d.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.0dc1dec1.js";import"./userPopovers.f4b9fc60.js";import"./Diciplines.8669d652.js";import"./Memberships.4dd1104d.js";const pe={class:"d-flex justify-content-between align-items-start"},me=P("div",null,[P("p",{class:"title is-3"},[P("i",{class:"fas fa-mobile","aria-hidden":"true"})]),P("p",{class:"title is-5"},"Terminal")],-1),ve={class:"title is-6"},fe={key:0,class:"mt-4 mx-2"},ye={class:"column is-8"},_e=P("p",{class:"title is-1"},[P("i",{class:"lnir lnir-postcard","aria-hidden":"true"})],-1),be={class:"title is-5 mb-0"},he={style:{"font-size":"10px"},class:"is-7 mb-0"},ge={style:{"font-size":"10px"},class:"is-7 mb-0"},je={style:{"font-size":"10px"},class:"is-7 mb-0"},xe={style:{"font-size":"10px"},class:"is-7 mb-0"},we={style:{"font-size":"10px"},class:"is-7 mb-0"},Ve={key:0},ke=P("p",{class:"title is-7 text-capitalize m-0"},"retry",-1),Ce=P("p",{class:"title is-6"},[P("i",{class:"lnil lnil-reload"})],-1),Se={class:"column is-4"},ze=P("div",null,[P("p",{class:"title is-6 mb-0"},"Terminal status")],-1),Pe=P("p",{class:"title is-5"},[P("i",{class:"lnil lnil-reload"})],-1),Te=P("div",null,[P("p",{class:"title is-6 mb-0"},"Cancel payment")],-1),Oe=P("p",{class:"title is-5"},[P("i",{class:"lnil lnil-trash-can"})],-1);var Le=j({expose:[],props:{total:{type:Number,required:!0},define_status:{type:Boolean,default:!0}},emits:["onPayment"],setup(s,{emit:a}){const l=s,{cookies:i}=x(),n=w(!1),o=w([]),u=()=>{n.value=!0;let e=Q.value.locations;if(e.length&&i.get("locations_id")){let t=e.find((e=>e.id==i.get("locations_id")));if(null!=t){let e=t.terminales;e.length&&(o.value=e)}}},r=V(JSON.parse(JSON.stringify({id:null,label:"",status:!1,amount:0}))),c=w(!1);k((()=>n.value),(e=>{r.id=null,r.label="",r.status=!1,r.amount=0,c.value=!1,m.value=!1,H.value=JSON.parse(JSON.stringify(q)),F.value=JSON.parse(JSON.stringify(G))})),k((()=>H.value.status),(e=>{"succeeded"==e?(Z.success("Payment Success"),n.value=!1):"failed"==e?Z.error(H.value.failure_message):"in_progress"==e&&Z.success("Payment in progress")}));const d=C((()=>{let e={status:"",message:"",color:""};return e.status=H.value.status,"succeeded"==e.status&&(e.color="success"),"failed"==e.status&&(e.color="danger"),"in_progress"==e.status&&(e.color="info"),e})),p=()=>{"in_progress"!=H.value.status?"succeeded"!=H.value.status?null!=r.id?(y(),c.value=!0,W(r).then((e=>{c.value=!1,Z.success(e.data.message)})).catch((e=>{c.value=!1}))):console.log("alert. no selecciono el terminal de pago"):Z.error("Payment processed"):Z.error("Terminal busy")},m=w(!1),v=C((()=>null!=r.id)),f=()=>{v.value||(n.value=!1)},y=()=>{new Pusher("2cd5b586808b2f41f8e6",{cluster:"us2"}).subscribe("terminal_channel").bind("terminal_event",(function(e){null==e.terminal?H.value=JSON.parse(JSON.stringify(q)):H.value=e.terminal,null==e.payment_intent?F.value=JSON.parse(JSON.stringify(G)):F.value=e.payment_intent}))};return(s,a)=>{const i=e,v=t,y=g;return S(),z(O,null,[P(i,{onClick:u,color:l.define_status?"info":void 0,class:"btn-card w-100 justify-content-center"},{default:T((()=>[P("div",pe,[me,P("p",ve,[L(s.$slots,"righttop"),B(' <i class="fas fa-check" aria-hidden="true"></i> ')])])])),_:3},8,["color"]),P(y,{title:"",open:n.value,actions:"center",size:"big",noscroll:"",noclose:"",onClose:f},{content:T((()=>[I(P("div",null,[L(s.$slots,"modalprev")],512),[[N,!l.define_status]]),B(" <p>{{ props.define_status }}</p> "),B(' <div v-show="props.define_status"> '),o.value.length?(S(),z("div",fe,[P(v,{size:"small",active:c.value},{default:T((()=>[(S(!0),z(O,null,A(o.value,((e,t)=>(S(),z(i,{key:`terminal-${t}`,class:"columns is-multiline mb-4"},{default:T((()=>[B(" <p>{{ terminal }}</p> "),P("div",ye,[P(i,{class:"p-4 btn-card d-flex justify-content-between",color:J(r).id==e.id?J(d).color:void 0,onClick:t=>(e=>{r.id=e.id,r.label=e.label,r.status=e.status,r.amount=l.total,p()})(e)},{default:T((()=>[P("div",null,[_e,P("p",be,M(e.label),1),P("p",null,"Status: "+M(e.status),1)]),P("div",null,[P("p",he," ID: "+M(J(F).id),1),P("p",ge," Amount: "+M(J(ee)(J(F).amount/100)),1),P("p",je," Date: "+M(J(F).created),1),P("p",xe," PI. Status: "+M(J(F).status),1),P("p",we," Status: "+M(J(H).status),1),"failed"==J(H).status?(S(),z("div",Ve,[P(i,{class:"d-flex justify-content-between mt-4 p-2 align-items-center"},{default:T((()=>[ke,Ce])),_:1})])):B("v-if",!0)])])),_:2},1032,["color","onClick"])]),P("div",Se,[P(v,{size:"small",active:m.value},{default:T((()=>[P(i,{color:"warning",outlined:"",onClick:t=>(e=>{"succeeded"!=H.value.status&&(m.value=!0,X({id:e.id}).then((()=>{m.value=!1})).catch((()=>{m.value=!1})))})(e),class:"d-flex justify-content-between mb-4"},{default:T((()=>[ze,Pe])),_:2},1032,["onClick"])])),_:2},1032,["active"]),P(v,{size:"small",active:m.value},{default:T((()=>[P(i,{color:"danger",outlined:"",onClick:t=>(e=>{"succeeded"!=H.value.status&&(m.value=!0,K({id:e.id,payment_type_id:F.value.id}).then((()=>{n.value=!1,m.value=!1})).catch((()=>{m.value=!1})))})(e),class:"d-flex justify-content-between"},{default:T((()=>[Te,Oe])),_:2},1032,["onClick"])])),_:2},1032,["active"])]),B("")])),_:2},1024)))),128))])),_:1},8,["active"])])):B("v-if",!0),B(" </div> ")])),action:T((()=>[B(' <VButton @click="cash = 0" class="d-flex justify-content-center" raised\r\n        >Reset</VButton\r\n      >\r\n      <VButton\r\n        color="success"\r\n        @click="payment"\r\n        :disabled="total > cash"\r\n        class="d-flex justify-content-center"\r\n        raised\r\n        >Confirm</VButton\r\n      > ')])),_:1},8,["open"])],64)}}});const Be={class:"columns is-multiline"},Ie={class:"column is-9"},Ne=P("h1",{class:"title is-4"},"1. Select a membership",-1),Ae={class:"columns is-multiline"},Je={class:"title is-4"},Me={class:"column is-3"},Ye={class:"title is-5 text-left mt-2"},De={key:0},Ee={key:1},Ue={key:0,class:"column is-12"},$e=P("h1",{class:"title is-4"},"2. Approve the budget",-1),Re=R("Accept and continue "),He={key:1,class:"column is-12"},qe=P("h1",{class:"title is-4"},[R(" 3. Enter the member's email. "),B(' <br />\n          <small style="font-size: 12px"\n            >* Then select a match if possible...otherwise press ENTER</small\n          >\n          <br />\n          <small style="font-size: 12px"\n            >* If you want to register a minor, please enter the email of the\n            family member to register</small\n          > ')],-1),Fe={class:"columns is-multiline"},Ge={class:"column is-3"},We=P("p",{class:"title is-6 mb-1"},[P("b",null,"Total")],-1),Xe={class:"title is-3 mb-0"},Ke={class:"is-3 column"},Qe=P("p",{class:"title is-6"}," You must load a card to continue. If you do not have a card, define the paymentType option as cash ",-1),Ze={class:"column is-3"},et=P("p",{class:"title is-6"}," You must load a card to continue. If you do not have a card, define the paymentType option as cash ",-1);var tt=j({expose:[],setup(g){ne.value="Subscriptions",Y({title:"Subscriptions"}),D(),E();const j=w([]),x=w(!0),L=w(!1),N=w(null),R=w(null);V({number:5,status:!1,time:5e3});const H=C((()=>{const e=j.value.find((e=>e.id==m.memberships_id));return null==e?void 0:e.amounts.filter((e=>e.is_recurrence==x.value&&null!=e.recurrencia))})),q=C((()=>{for(var e in m)null!=se(d.value,e)&&(m[e]=se(d.value,e).model);return m}));k((()=>m.memberships_id),(e=>{m.recurrences_id=null,p.value=null,L.value=!1})),U((()=>{Q(),r().then((e=>{j.value=e.data})),c(1,"membership").then((e=>{te(d,"discount",e.data.discounts)})),se(d,"payment_type_id").model=3,oe().then((e=>{te(de,"city_id",ue.value),te(de,"state_id",re.value),te(de,"country_id",ce.value),se(de.value,"country_id").model=34}))}));const F=()=>{L.value=!0,setTimeout((()=>{window.scrollTo(0,window.scrollY+500)}),300)},G=()=>{p.value=null,L.value=!1,W.value=!0,v(q.value).then((e=>{p.value=e.data,setTimeout((()=>{window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight),W.value=!1}),300)})).catch((e=>{W.value=!1}))},W=w(!1),X=async e=>{R.value?(W.value=!0,m.email=R.value,m.subscription_payment_type_id=se(d,"payment_type_id").model,Object.assign(m,e),console.log(m),await f(m).then((e=>{window.location.href=e.data.url})).catch((e=>{Z.error("Error"),W.value=!1}))):Z.error("Email is required")},K=()=>{setTimeout((()=>{if(N.value)for(var e in console.log(N.value),N.value)"photo"!=e&&le(de,e,N.value[e]);else le(de,"email",R.value);let t=window.scrollY+window.scrollY/4;window.scrollTo(0,t)}),300)},Q=async()=>{ae(d.value),ae(de.value),p.value=null,m.memberships_id=null,m.recurrences_id=null,m.is_initiation_fee=!1,m.is_card_price=!1,m.discount=null,m.is_last_month=!1,m.prorrateo=!0,m.schedules="",m.leo_vet_fr=!1,m.multigym=!1},pe=C((()=>se(d,"payment_type_id").model));C((()=>!se(de.value,"category").model));const me=w(!1),ve=C((()=>!(3!=pe.value||!me.value)||1==pe.value)),fe=(e=null)=>{console.log("sjs",e),e&&e.payment_method_id&&(me.value=!0)};return(r,c)=>{const v=e,f=t,g=s,w=a,V=l,k=i,C=n,Y=o,D=u,E=y,U=h,q=_,Q=b,Z=Le,te=ie,se=$("tooltip");return S(),z(te,null,{default:T((()=>[P("div",Be,[P("div",Ie,[Ne,P(v,{class:"mb-4"},{default:T((()=>[P(f,{size:"large",active:!j.value.length},{default:T((()=>[P("div",Ae,[(S(!0),z(O,null,A(j.value,((e,t)=>(S(),z("div",{key:`membership-${t}`,class:"column is-4 btn btn-card",onClick:t=>J(m).memberships_id=e.id},[P(v,{color:J(m).memberships_id==e.id?"primary":void 0,class:"h-100"},{default:T((()=>[P("div",null,[P("h1",Je,M(e.name),1),B(" <p>{{ item }}</p> ")])])),_:2},1032,["color"])],8,["onClick"])))),128))])])),_:1},8,["active"])])),_:1}),P(v,{class:""},{default:T((()=>[P(g,{"inputs-step":J(d)},null,8,["inputs-step"])])),_:1})]),P("div",Me,[P(v,{class:"h-100 d-flex flex-column justify-content-between"},{default:T((()=>[P("div",null,[P(k,null,{default:T((()=>[P(V,null,{default:T((()=>[P(w,{modelValue:x.value,"onUpdate:modelValue":c[1]||(c[1]=e=>x.value=e),label:"Recurring Subscription",color:"primary"},null,8,["modelValue"])])),_:1})])),_:1}),(S(!0),z(O,null,A(J(H),((e,t)=>(S(),z("div",{key:`membership-precios-${t}`,class:"btn btn-card",onClick:t=>J(m).recurrences_id=e.id},[P(v,{color:J(m).recurrences_id==e.id?"primary":void 0,class:"mb-3 py-4"},{default:T((()=>[P("p",null,M(e.recurrencia.descriptions),1),P("p",Ye,M(J(ee)(e.amount)),1)])),_:2},1032,["color"])],8,["onClick"])))),128))]),P("div",null,[P(f,{size:"large",active:W.value},{default:T((()=>[P(C,{onClick:G,color:J(p)?void 0:"primary",class:"d-flex justify-content-center mt-6 py-5 w-100",style:{"text-align":"center","text-transform":"uppercase","font-size":"20px","font-weight":"900"}},{default:T((()=>[J(p)?(S(),z("span",Ee," restart")):(S(),z("span",De,"start subscription"))])),_:1},8,["color"])])),_:1},8,["active"])])])),_:1})]),J(p)?(S(),z("div",Ue,[$e,P(v,null,{default:T((()=>[P(Y,{presupuesto:J(p)},null,8,["presupuesto"]),L.value?B("v-if",!0):(S(),z(C,{key:0,onClick:F,color:"primary",class:"d-flex justify-content-center py-5 px-6 ml-auto",style:{"text-align":"center","text-transform":"uppercase","font-size":"20px","font-weight":"900"}},{default:T((()=>[Re])),_:1}))])),_:1})])):B("v-if",!0),J(p)&&L.value?(S(),z("div",He,[qe,P(v,{style:{"margin-bottom":"24px"}},{default:T((()=>[P(D,{dato:"email",valor:R.value,"onUpdate:valor":c[2]||(c[2]=e=>R.value=e),modelValue:N.value,"onUpdate:modelValue":c[3]||(c[3]=e=>N.value=e),"not-payment-methods":!0,"not-search":!0,onOnSubmit:K},null,8,["valor","modelValue"])])),_:1}),P(v,{style:{"margin-bottom":"24px"}},{default:T((()=>[P("div",Fe,[P("div",Ge,[P(f,{size:"small",class:"h-100",active:W.value},{default:T((()=>[P(v,{class:"mb-4 h-100"},{default:T((()=>[P("div",null,[We,P("p",Xe,M(J(ee)(J(p).total)),1)])])),_:1})])),_:1},8,["active"])]),P("div",Ke,[P(f,{size:"small",active:W.value},{default:T((()=>[P(E,{total:J(p).total,onOnPayment:X},null,8,["total"])])),_:1},8,["active"])]),B(' <div class="column is-2"> '),B(' <VLoader size="small" class="h-100 mr-0" :active="isLoaderActive">\n                <subscription-method-payment-debit-automatic\n                  :total="20"\n                  :card="false"\n                  :user="{ email: dato, id: null }"\n                  :new-user="true"\n                  :text-card="\'Cards\'"\n                  :outline="true"\n                  @onPayment="onActionCard"\n                >\n                  <template #righttop>\n                    <VTag\n                      v-tooltip="\n                        \'This option does not generate any charge to the card\'\n                      "\n                      color="solid"\n                      label="?"\n                    />\n                  </template>\n                </subscription-method-payment-debit-automatic>\n              </VLoader> '),B(" </div> "),P("div",{class:["column",(J(pe),"is-3")]},[P(f,{size:"small",active:W.value},{default:T((()=>[P(Q,{total:J(p).total,onOnPayment:X,define_status:J(ve)},{righttop:T((()=>[3!=J(pe)||me.value?B("v-if",!0):I((S(),z(U,{key:0,color:"solid",label:"?"},null,512)),[[se,"You must load a card to continue. If you do not have a card, define the paymentType option as cash "]])])),modalprev:T((()=>[Qe,P(f,{size:"small",class:"h-100 mr-0",active:W.value},{default:T((()=>[P(q,{total:20,card:!1,user:{email:R.value,id:null},"new-user":!0,"text-card":"Cards (+)",outline:!0,onOnPayment:fe},{righttop:T((()=>[I(P(U,{color:"solid",label:"?"},null,512),[[se,"This option does not generate any charge to the card"]])])),_:1},8,["user","text-card"])])),_:1},8,["active"])])),_:1},8,["total","define_status"])])),_:1},8,["active"])],2),P("div",Ze,[P(f,{size:"small",active:W.value},{default:T((()=>[P(Z,{total:J(p).total,onOnPayment:X,define_status:!(3==J(pe)&&!me.value)},{righttop:T((()=>[me.value?B("v-if",!0):I((S(),z(U,{key:0,color:"solid",label:"?"},null,512)),[[se,"You must load a card to continue. If you do not have a card, define the paymentType option as cash "]])])),modalprev:T((()=>[et,P(f,{size:"small",class:"h-100 mr-0",active:W.value},{default:T((()=>[P(q,{total:20,card:!1,user:{email:R.value,id:null},"new-user":!0,"text-card":"Cards (+)",outline:!0,onOnPayment:fe},{righttop:T((()=>[I(P(U,{color:"solid",label:"?"},null,512),[[se,"This option does not generate any charge to the card"]])])),_:1},8,["user","text-card"])])),_:1},8,["active"])])),_:1},8,["total","define_status"])])),_:1},8,["active"])])])])),_:1}),B(' <VLoader :active="isLoaderActive">\n          <VButton\n            @click="proccessSuscripcion"\n            color="info"\n            class="d-flex justify-content-center py-5 px-6 ml-auto"\n            style="\n              text-align: \'center\';\n              text-transform: uppercase;\n              font-size: 20px;\n              font-weight: 900;\n            "\n          >\n            Process\n          </VButton>\n        </VLoader> '),B(' <VCard v-if="dato">\n          <inputsLayaut :inputs-step="inputsInformation" />\n          <div v-if="isMinor">\n            <VCard>\n              <p class="title is-5">Guardian Information</p>\n              <inputsLayaut :inputs-step="parentInsputs" />\n            </VCard>\n          </div>\n          <div class="mt-3">\n            <p v-if="tiempo.status">\n              You will be redirected, please wait a moment ...\n              {{ tiempo.number }}\n            </p>\n            <VLoader size="large" :active="isLoaderActive">\n              <VButton\n                @click="proccessMember"\n                color="info"\n                class="d-flex justify-content-center py-5 px-6 ml-auto"\n                style="\n                  text-align: center;\n                  text-transform: uppercase;\n                  font-size: 20px;\n                  font-weight: 900;\n                "\n              >\n                Continue\n              </VButton>\n            </VLoader>\n          </div>\n        </VCard> ')])):B("v-if",!0)])])),_:1})}}});export default tt;
