import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.56502a24.js";import{_ as t}from"./V-Control.cd7a7d2f.js";import{_ as a}from"./V-Field.vue_vue&type=script&setup=true&lang.68f25869.js";import{_ as s}from"./inputsLayaut.vue_vue&type=style&index=0&lang.3e623726.js";import{_ as i}from"./formLayaut.vue_vue&type=style&index=0&lang.1816d407.js";import{d as l,r,w as u,b as n,o,i as p,j as m,k as c,E as d,S as v,U as f,H as y,W as b,_ as g,F as h,z as _,A as S,G as j,I as x,B as C,D as M,P as A,X as k}from"./vendor.31bd1321.js";import{p as P,h as D,g as V,s as N,v as w,n as E,a as I,e as J}from"./index.70a15384.js";import{W as O,y as T,e as B,X as F,Y as L,Z as R,c as $,_ as q,f as z,$ as G,k as U,q as W,a0 as X,a1 as H,M as Y,a2 as Z,a3 as K,a4 as Q}from"./Members.010c6b86.js";import{_ as ee}from"./V-Card.vue_vue&type=script&setup=true&lang.60616536.js";import{_ as te}from"./V-Placeload.2d2b5eff.js";import{a as ae,b as se}from"./Presupuesto.vue_vue&type=script&setup=true&lang.2f3b8c53.js";import{_ as ie}from"./V-Progress.vue_vue&type=script&setup=true&lang.767dab4b.js";import{_ as le}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.99a7640b.js";import{a as re,m as ue}from"./Memberships.5d50d966.js";import{g as ne}from"./Recurrences.53489503.js";import{g as oe}from"./Discounts.bfbb050b.js";import{e as pe,c as me,s as ce,d as de}from"./config.6ddbaa05.js";import{h as ve}from"./Staffs.5770a669.js";import{p as fe}from"./sidebarLayoutState.84c66d08.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.6b5ea757.js";import"./V-Modal.vue_vue&type=script&setup=true&lang.2998ade1.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.f2aa4bec.js";import"./V-Loader.vue_vue&type=script&setup=true&lang.660cd49f.js";import"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.76655821.js";import"./Diciplines.4130ab03.js";import"./Companies.c0591eaf.js";import"./MemberCards.vue_vue&type=script&setup=true&lang.b93110a7.js";import"./signComponent.vue_vue&type=script&setup=true&lang.1798f7b3.js";import"./pdf_icon.488660a5.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.afa394cc.js";import"./useDropdown.2c966c6c.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.2afd81f7.js";import"./V-Dropdown.02630225.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.638b6cad.js";import"./activePanelState.8ba1e377.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.2f301f1e.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.066a51f7.js";import"./V-Message.vue_vue&type=script&setup=true&lang.ce2db110.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.de8ffe27.js";import"./navbarLayoutState.7a8cae93.js";import"./video.63a3162f.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.ed33a128.js";import"./darkModeState.5ece07d2.js";import"./AnimatedLogo.bb3010e4.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.c17fb773.js";import"./V-Block.vue_vue&type=script&setup=true&lang.aed64b1f.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.830ef7c4.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.d198dce8.js";var ye=l({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e,l=r(!1);u((()=>a.inputs),((e,t)=>{v()}));const v=()=>{l.value=!0,setTimeout((()=>{l.value=!1}),500)},f=n((()=>y.value?a.inputs.filter((e=>e.typeMember.includes("Company"))):a.inputs.filter((e=>e.typeMember.includes("Individual"))))),y=r(!1),b=e=>{y.value=!e.input.model,v()},g=e=>{let a=P(f.value);D.value||(a.select_type=a.select_type?"Company":"Individual",O.value=a,t("returData",a),t("changeStep",e))};return(t,a)=>{const r=s,u=i;return o(),p(u,{titles:{title:e.title},"is-loading":l.value,buttons:["next","back"],step:1,onChangeStep:g},{default:m((()=>[c(r,{"inputs-step":d(f),onChangeSwitch:b},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}}),be=l({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e=>{t("changeStep",e)};return(t,l)=>{const r=s,u=i;return o(),p(u,{titles:{title:e.title},buttons:["next","prev"],step:2,onChangeStep:a},{default:m((()=>[c(r,{"inputs-step":d(T)},null,8,["inputs-step"])])),_:1},8,["titles"])}}});const ge={key:0},he=h(" Remove Family Member "),_e={key:1,class:"column d-flex justify-content-center flex-column is-4 mx-auto"},Se=h(" Add Another Family Member ");var je=l({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(l,{emit:h}){const j=l,x=r(!1);u((()=>j.inputs),((e,t)=>{C()}));const C=()=>{x.value=!0,setTimeout((()=>{x.value=!1}),500)},M=r([]);n((()=>(C(),M.value.forEach(((e,t)=>{k.value.includes(t)?M.value[t]=e.filter((e=>e.category.includes("Minor"))):M.value[t]=JSON.parse(JSON.stringify(j.inputs))})),M.value)));const A=e=>{h("returData",M),h("changeStep",e)},k=r([]),P=n((()=>M.value.length>0)),D=r(0),E=()=>{if(D.value>0)for(var e=0;e<D.value;++e){const e=_(JSON.parse(JSON.stringify(j.inputs)));V(e,"misma_direccion").change=O,V(e,"category").change=I,M.value.push(e)}},I=function(e){console.log(e),e.forEach((e=>{this.model?e.category.includes("Adult")&&(e.typeInput=e.typeInputDefault):e.category.includes("Minor")||(e.typeInput="hidden")})),this.model||(J(e),N(e,"email",`family_${S().format("hms")}_${w(B.value,"email")}`),N(e,"phone",w(B.value,"phone"))),console.log(this.model)},J=e=>{N(e,"address",w(B.value,"address")),N(e,"postal_code",w(B.value,"postal_code")),N(e,"country_id",w(B.value,"country_id")),N(e,"city_id",w(B.value,"city_id")),N(e,"state_id",w(B.value,"state_id"))},O=function(e){console.log("llejay"),this.model?(N(e,"postal_code",""),N(e,"country_id",""),N(e,"city_id",""),N(e,"state_id","")):J(e)};return(r,u)=>{const n=s,h=e,_=ee,S=t,j=a,C=i;return o(),p(C,{titles:{title:l.title},"is-loading":x.value,buttons:["next","prev"],step:2,onChangeStep:A},{default:m((()=>[d(P)?(o(),p("div",ge,[(o(!0),p(v,null,f(M.value,((e,t)=>(o(),p(_,{key:t,class:"mb-4"},{default:m((()=>[c(n,{"inputs-step":e,onChangeSwitch:e=>{return a=t,void k.value.findIndex((e=>e==a));var a}},null,8,["inputs-step","onChangeSwitch"]),c(h,{onClick:e=>M.value.splice(t,1),color:"danger",class:"mx-auto",icon:"fas fa-times"},{default:m((()=>[he])),_:2},1032,["onClick"])])),_:2},1024)))),128))])):y("v-if",!0),d(P)?y("v-if",!0):(o(),p("div",_e,[c(j,{class:"mb-4"},{default:m((()=>[c(S,null,{default:m((()=>[b(c("input",{type:"number","onUpdate:modelValue":u[1]||(u[1]=e=>D.value=e),class:"input text-center",placeholder:"Family quantity"},null,512),[[g,D.value]])])),_:1})])),_:1}),c(h,{onClick:E,color:"info",icon:"fas fa-check",raised:""},{default:m((()=>[Se])),_:1})]))])),_:1},8,["titles","is-loading"])}}}),xe=l({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep"],setup(e,{emit:t}){const a=e,l=r(!1);u((()=>a.inputs),((e,t)=>{f()}));const v=e=>{let a=[];y.value.forEach((e=>{e.values.forEach((e=>{let t=e.values.find((e=>"sms"==e.name)).model.length,s=e.values.find((e=>"email"==e.name)).model.length;a.push({[e.name]:e.value,sms:t>0,email:s>0})}))})),F.value=a,t("returnData",a),t("changeStep",e)},f=()=>{l.value=!0,setTimeout((()=>{l.value=!1}),500)},y=n((()=>a.inputs)),b=r(!1),g=e=>{b.value=!e.input.model,f()};return(t,a)=>{const r=s,u=i;return o(),p(u,{titles:{title:e.title},"is-loading":l.value,buttons:["next","prev"],step:3,onChangeStep:v},{default:m((()=>[c(r,{"inputs-step":d(y),onChangeSwitch:g},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}});const Ce={class:""};var Me=l({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberships:{type:Array,default:[]},notes:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(e,{emit:t}){const a=e,l=r(!1),y=r([]);u((()=>a.inputs),((e,t)=>{b()}));const b=()=>{l.value=!0,setTimeout((()=>{l.value=!1}),500)},g=e=>{let a=null;L.forEach(((e,t)=>{0==t?a=e.inputs:y.value.push(e)})),D.value||(R.value=a,t("returnData",{memberMembership:a,familyMembership:y}),t("changeStep",e))},h=n((()=>{const e=_([]);L.value=[];let t=[];$.forEach((e=>{t.push(JSON.parse(JSON.stringify(e)))})),e.push(S(a.member,JSON.parse(JSON.stringify(t))));for(var s=0;s<a.familiares.length;++s)e.push(S(a.familiares[s],JSON.parse(JSON.stringify(t))));return L.value=e,e})),S=(e,t,a)=>{const s={member:null,membresia:null};return"Prospect"==q.value?(V(t,"recurrence").model=!1,V(t,"recurrence").display=!1,V(t,"is_initiation_fee").model=!0,V(t,"is_card_price").model=!0):(V(t,"recurrence").model=!0,V(t,"recurrence").display=!0,V(t,"is_initiation_fee").model=!1,V(t,"is_card_price").model=!1),s.member=e,s.membresia=t,z(s.membresia,s.member),s};return(t,a)=>{const r=s,u=ee,n=i;return o(),p(n,{titles:{title:e.title},isloading:l.value,buttons:["next","prev"],step:4,onChangeStep:g},{default:m((()=>[(o(!0),p(v,null,f(d(h),((e,t)=>(o(),p(u,{key:`ss${t}`,class:"mb-4"},{default:m((()=>[c("p",Ce,[c("b",null,j(d(w)(e.member,"name"))+" "+j(d(w)(e.member,"second_name"))+" "+j(d(w)(e.member,"last_name")),1)]),c(r,{"inputs-step":e.membresia},null,8,["inputs-step"])])),_:2},1024)))),128)),c(u,{class:"mb-4"},{default:m((()=>[c(r,{"inputs-step":e.notes},null,8,["inputs-step"])])),_:1})])),_:1},8,["titles","isloading"])}}});const Ae={key:1},ke={class:"d-flex justify-content-end w-100"},Pe={class:"d-flex justify-content-between w-100"},De=h(" Finish "),Ve=h(" Cancel "),Ne=h(" Register another member ");var we=l({expose:[],props:{type:{type:String,default:"create"},title:{type:String,default:""}},emits:["changeStep","returnData"],setup(t,{emit:a}){r(!1);const s=r(!1),l=n((()=>L.value[0])),u=n((()=>{let e=[];return L.value.forEach(((t,a)=>{a>0&&e.push(t)})),e}));x((()=>{V(G.value,"mismatarjeta").change=b,U.value=[],l.value?(W(l.value.membresia,l.value.member),u.value.length&&u.value.forEach((e=>{W(e.membresia,e.member)}))):(console.error("No tiene membresia"),E.error("Membership is required"))}));const b=function(){this.model},g=(e,t=3,s)=>{a("returnData",{total:s}),a("changeStep",e,t,{})},h=n((()=>{let e=[];return U.value.forEach((t=>{0==V(t.member,"is_family").model&&e.push(t)})),U.value.forEach((t=>{1==V(t.member,"is_family").model&&e.push(t)})),e}));r([]);const _=()=>{window.location.reload()},S=r([]),j=e=>{S.value.push(e)};return(a,l)=>{const r=te,u=ae,n=se,b=e,x=i;return o(),p(x,{titles:{title:t.title},"is-loading":s.value,buttons:["prev"],step:5,onChangeStep:g},{default:m((()=>[y(' <div class="d-flex justify-content-end align-items-center mb-4">\n\n      <VButton @click="PaymentAllMembership" color="primary"\n        >Pay all memberships</VButton\n      >\n\n      <div v-if="miembrosNuevos.length">\n        <stripeAddCard\n          :amount="props.total"\n          :id="miembrosNuevos[0].idMember"\n          :member_membership="miembrosNuevos[0].idMemberMembership"\n          :variosMiembros="true"\n          :miembros="miembrosNuevos"\n          @PaymentAction="PaymentAction"\n        />\n      </div>\n      \n    </div> '),d(U).length?y("v-if",!0):(o(),p(r,{key:0,height:"300px",class:"mb-4"})),d(U)?(o(),p("div",Ae,[(o(!0),p(v,null,f(d(h),((e,t)=>(o(),p(n,{key:`presupuesto-${t}`,class:"mb-4",presupuesto:e},{default:m((()=>[c("div",ke,[c(u,{member:e.member,membresia:e.membresia,contact:d(F),presupuesto_id:e.presupuesto_id,"categories-members":d(X),"notas-input":d(H),total:e.totales.upfront.amount_total,onPaymentAction:j},null,8,["member","membresia","contact","presupuesto_id","categories-members","notas-input","total"])])])),_:2},1032,["presupuesto"])))),128))])):y("v-if",!0),c("div",Pe,[d(h).length>0&&S.value.length==d(h).length?(o(),p(b,{key:0,color:"danger",to:{name:"index"}},{default:m((()=>[De])),_:1})):(o(),p(b,{key:1,color:"danger",to:{name:"index"}},{default:m((()=>[Ve])),_:1})),d(h).length>0&&S.value.length==d(h).length?(o(),p(b,{key:2,color:"success",onClick:_},{default:m((()=>[Ne])),_:1})):y("v-if",!0)])])),_:1},8,["titles","is-loading"])}}});C("data-v-5a5e3b40");const Ee={class:"content"},Ie={class:"content-text"};M();var Je=l({expose:[],props:{active:{type:Boolean,default:!1,required:!0},step:{type:Number,default:0,required:!0},text:{type:String,default:""}},setup(e){const t=e,a=n((()=>t.active?100:0));return(t,s)=>{const i=ie;return o(),p("div",Ee,[c("div",{class:["circle",e.active?"active":""]},null,2),c(i,{class:"progressbar",value:d(a),size:"smaller"},null,8,["value"]),c("div",Ie,[c("p",null,"STEP "+j(e.step),1),c("p",null,[c("b",null,j(e.text),1)])])])}}});Je.__scopeId="data-v-5a5e3b40";const Oe={class:"columns is-multiline"},Te={class:"column is-12"},Be={class:"column is-9"},Fe={class:"column is-3"};var Le=l({expose:[],setup(s){fe.value="Add New members",A({title:"Members"}),x((()=>{q(),re().then((e=>{I($,"memberships_id",e.data.memberships)})),V($,"memberships_id").disabled=!1,V($,"recurrences_id").disabled=!1,V($,"is_initiation_fee").disabled=!1,V($,"discount").disabled=!1,oe(1,"membership").then((e=>{I($,"discount",e.data.discounts)})),ne(),pe().then((e=>{I(B,"city_id",me.value),I(Y,"city_id",me.value),I(T,"city_id",me.value),I(B,"state_id",ce.value),I(Y,"state_id",ce.value),I(T,"state_id",ce.value),I(B,"country_id",de.value),I(Y,"country_id",de.value),I(T,"country_id",de.value)})),ve().then((e=>{I($,"staff_id",e.data)}))}));const i=r(1),l=r([{step:1,text:"Member Information",categories:["Adult","Minor","Prospect"]},{step:2,text:"Add Family Member",categories:["Adult"]},{step:2,text:"Parent / Guardian",categories:["Minor"]},{step:2,text:"Contact Preference",categories:["Prospect"]},{step:3,text:"Contact Preference",categories:["Adult","Minor"]},{step:4,text:"Select membership",categories:["Adult","Minor","Prospect"]},{step:5,text:"Add Payment Method",categories:["Adult","Minor","Prospect"]}]),u=n((()=>B.value.filter((e=>e.categories.includes(X.value.model))))),g=n((()=>l.value.find((e=>e.step==i.value&&e.categories.includes(X.value.model))))),_=n((()=>l.value.filter((e=>e.categories.includes(X.value.model)))));n((()=>P(T.value)));const S=(e,t=3,a={})=>{X.value.model,6==e?sendData(t,a):i.value=e},C=r(null),M=e=>{C.value=e},D=r(null),N=e=>{D.value=e},w=r([]),E=e=>{w.value=e.value},O=r([]),F=e=>{O.value=e.familyMembership.value,R.value=e.memberMembership};r(null),r(null),r(null);const q=()=>{Z.value=null,K.value=null;let e=["is_family","principal_family"];J(B.value.filter((t=>!e.includes(t.name)))),e=["recurrence"],J($.filter((t=>!e.includes(t.name)))),J(H.value),J(T.value)};return(s,l)=>{const r=e,n=t,x=a,C=ye,A=be,P=je,D=xe,V=Me,I=we,J=Je,T=le;return o(),p(T,null,{default:m((()=>[y(" Display a payment form "),c("div",Oe,[c("div",Te,[1==i.value?(o(),p(x,{key:0,class:"w-100",addons:""},{default:m((()=>[(o(!0),p(v,null,f(d(X).values,((e,t)=>(o(),p(n,{key:`categoymember-${t}`},{default:m((()=>[c(r,{onClick:t=>d(X).model=e,color:d(X).model==e?"primary":void 0,rounded:""},{default:m((()=>[h(j(e),1)])),_:2},1032,["onClick","color"])])),_:2},1024)))),128))])),_:1})):y("v-if",!0)]),c("div",Be,[y(" memberInformation "),b(c(C,{type:"create",title:d(g).text,inputs:d(u),onChangeStep:S,onReturData:M},null,8,["title","inputs"]),[[k,1==i.value]]),y(" parentGuardian "),b(c(A,{title:d(g).text,onChangeStep:S},null,8,["title"]),[[k,2==i.value&&"Minor"==d(X).model]]),y(" familyMembers "),b(c(P,{type:"create",title:d(g).text,inputs:d(Y),onChangeStep:S,onReturData:E},null,8,["title","inputs"]),[[k,2==i.value&&"Adult"==d(X).model]]),y(" contactPreference "),b(c(D,{type:"create",title:d(g).text,inputs:d(Q),onChangeStep:S,onReturnData:N},null,8,["title","inputs"]),[[k,3==i.value||2==i.value&&"Prospect"==d(X).model]]),y(" selectMembership "),b(c(V,{type:"create",member:d(u),familiares:w.value,title:d(g).text,inputs:d(L),memberships:d(ue),notes:d(H),onChangeStep:S,onReturnData:F},null,8,["member","familiares","title","inputs","memberships","notes"]),[[k,4==i.value]]),y(" paymentMethod "),5==i.value?(o(),p(I,{key:0,type:"create",title:d(g).text,member:d(u),familiares:w.value,inputs:d(L),"member-membership":d(R),"family-membership":O.value,onChangeStep:S},null,8,["title","member","familiares","inputs","member-membership","family-membership"])):y("v-if",!0)]),c("div",Fe,[(o(!0),p(v,null,f(d(_),((e,t)=>(o(),p(J,{key:t,active:e.step<=i.value,step:e.step,text:e.text},null,8,["active","step","text"])))),128))])])])),_:1})}}});export default Le;
