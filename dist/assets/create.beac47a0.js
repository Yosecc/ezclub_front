import{_ as e}from"./V-Card.vue_vue&type=script&setup=true&lang.b57414a9.js";import{_ as t}from"./V-Loader.vue_vue&type=script&setup=true&lang.a67ef8b7.js";import{_ as a}from"./inputsLayaut.vue_vue&type=style&index=0&lang.9a5f1b2d.js";import{_ as s}from"./V-SwitchBlock.vue_vue&type=script&setup=true&lang.f9906d24.js";import{_ as l}from"./V-Control.b8a16a92.js";import{_ as r}from"./V-Field.vue_vue&type=script&setup=true&lang.5a5e683f.js";import{_ as i}from"./V-Button.vue_vue&type=script&setup=true&lang.115c9f56.js";import{_ as o}from"./Presupuesto.vue_vue&type=script&setup=true&lang.62b6c743.js";import{_ as n}from"./SearchBar.vue_vue&type=style&index=0&lang.93b7db3b.js";import{c as u,_ as c,a as d,b as p}from"./subscription-method-stripe-checkout.vue_vue&type=script&setup=true&lang.d74c28b1.js";import{_ as m}from"./V-Tag.vue_vue&type=script&setup=true&lang.43768b74.js";import{_ as v}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.3986f79d.js";import{d as f,P as y,O as _,ad as b,r as h,A as g,b as j,w as x,o as V,R as w,i as k,j as C,k as z,l as T,S,U as L,F as P,H as I,I as A,W as B,G as O}from"./vendor.84e48f7c.js";import{p as Y}from"./sidebarLayoutState.bceb862d.js";import{b as M,d as E,i as U,e as D,s as H,f as R,z as F}from"./Subscriptions.7c3f121a.js";import{e as G,c as $,s as q,d as N}from"./config.493d9cee.js";import{a as W,g as J,e as K,m as Q,n as X,s as Z}from"./index.20ca533a.js";import{i as ee}from"./Members.b911dd8b.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.8a41fb82.js";import"./V-Modal.vue_vue&type=script&setup=true&lang.f91cc122.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.3090aa96.js";import"./V-Placeload.8fe4e440.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.b74dc949.js";import"./MemberCards.ab62d3bd.js";import"./Companies.f4a22d58.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.63046089.js";import"./useDropdown.3858e0aa.js";import"./V-Dropdown.7cdac118.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.1503437d.js";import"./activePanelState.de92bd5f.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.1c78e14a.js";import"./video.f5cea5d5.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.f7104d79.js";import"./darkModeState.0452d175.js";import"./AnimatedLogo.2dcbd823.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.051c3ce8.js";import"./V-Block.vue_vue&type=script&setup=true&lang.d16ae397.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.e7d23443.js";import"./userPopovers.f4b9fc60.js";import"./Discounts.a686643d.js";import"./Diciplines.37ccd2ec.js";import"./Memberships.107fc9b6.js";const te={class:"columns is-multiline"},ae={class:"column is-9"},se=T("h1",{class:"title is-4"},"1. Select a membership",-1),le={class:"columns is-multiline"},re={class:"title is-4"},ie={class:"column is-3"},oe={class:"title is-5 text-left mt-2"},ne={key:0},ue={key:1},ce={key:0,class:"column is-12"},de=T("h1",{class:"title is-4"},"2. Approve the budget",-1),pe=O("Accept and continue "),me={key:1,class:"column is-12"},ve=T("h1",{class:"title is-4"},[O(" 3. Enter the member's email. "),A(' \r\n          <br />\r\n            <small style="font-size: 12px"\r\n              >* Then select a match if possible...otherwise press ENTER</small\r\n            >\r\n          <br />\r\n            <small style="font-size: 12px"\r\n              >* If you want to register a minor, please enter the email of the\r\n              family member to register</small\r\n            > \r\n        ')],-1),fe={class:"columns is-multiline"},ye={class:"column is-3"},_e=T("p",{class:"title is-6 mb-1"},[T("b",null,"Total")],-1),be={class:"title is-3 mb-0"},he={class:"is-3 column"},ge=T("p",{class:"title is-6"}," You must load a card to continue. If you do not have a card, define the paymentType option as cash ",-1),je={class:"column is-3"},xe=T("p",{class:"title is-6"}," You must load a card to continue. If you do not have a card, define the paymentType option as cash ",-1);var Ve=f({expose:[],setup(f){Y.value="Subscriptions",y({title:"Subscriptions"}),_(),b();const O=h([]),Ve=h(!0),we=h(!1),ke=h(null),Ce=h(null);g({number:5,status:!1,time:5e3});const ze=j((()=>{const e=O.value.find((e=>e.id==H.memberships_id));return null==e?void 0:e.amounts.filter((e=>e.is_recurrence==Ve.value&&null!=e.recurrencia))})),Te=j((()=>{for(var e in H)null!=J(U.value,e)&&(H[e]=J(U.value,e).model);return H}));x((()=>H.memberships_id),(e=>{H.recurrences_id=null,D.value=null,we.value=!1})),V((()=>{Be(),M().then((e=>{O.value=e.data})),E(1,"membership").then((e=>{W(U,"discount",e.data.discounts)})),J(U,"payment_type_id").model=3,G().then((e=>{W(ee,"city_id",$.value),W(ee,"state_id",q.value),W(ee,"country_id",N.value),J(ee.value,"country_id").model=34}))}));const Se=()=>{we.value=!0,setTimeout((()=>{window.scrollTo(0,window.scrollY+500)}),300)},Le=()=>{D.value=null,we.value=!1,Pe.value=!0,R(Te.value).then((e=>{D.value=e.data,setTimeout((()=>{window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight),Pe.value=!1}),300)})).catch((e=>{Pe.value=!1}))},Pe=h(!1),Ie=async e=>{Ce.value?(Pe.value=!0,H.email=Ce.value,H.subscription_payment_type_id=J(U,"payment_type_id").model,Object.assign(H,e),console.log("solicitud",H),await F(H).then((e=>{window.location.href=e.data.url})).catch((e=>{X.error("Error"),Pe.value=!1}))):X.error("Email is required")},Ae=()=>{setTimeout((()=>{if(console.log("member",ke),ke.value)for(var e in ke.value&&ke.value.user&&(Ye.value=!0),ke.value)"photo"!=e&&Z(ee,e,ke.value[e]);else Z(ee,"email",Ce.value);let t=window.scrollY+window.scrollY/4;window.scrollTo(0,t)}),300)},Be=async()=>{K(U.value),K(ee.value),D.value=null,H.memberships_id=null,H.recurrences_id=null,H.is_initiation_fee=!1,H.is_card_price=!1,H.discount=null,H.is_last_month=!1,H.prorrateo=!0,H.schedules="",H.leo_vet_fr=!1,H.multigym=!1},Oe=j((()=>J(U,"payment_type_id").model));j((()=>!J(ee.value,"category").model));const Ye=h(!1),Me=j((()=>!(3!=Oe.value||!Ye.value)||1==Oe.value)),Ee=(e=null)=>{e&&e.payment_method_id&&(Ye.value=!0)};return(f,y)=>{const _=e,b=t,h=a,g=s,j=l,x=r,V=i,Y=o,M=n,E=u,R=m,F=c,G=d,$=p,q=v,N=w("tooltip");return k(),C(q,null,{default:z((()=>[T("div",te,[T("div",ae,[se,T(_,{class:"mb-4"},{default:z((()=>[T(b,{size:"large",active:!O.value.length},{default:z((()=>[T("div",le,[(k(!0),C(S,null,L(O.value,((e,t)=>(k(),C("div",{key:`membership-${t}`,class:"column is-4 btn btn-card",onClick:t=>P(H).memberships_id=e.id},[T(_,{color:P(H).memberships_id==e.id?"primary":void 0,class:"h-100"},{default:z((()=>[T("div",null,[T("h1",re,I(e.name),1),A(" <p>{{ item }}</p> ")])])),_:2},1032,["color"])],8,["onClick"])))),128))])])),_:1},8,["active"])])),_:1}),T(_,{class:""},{default:z((()=>[T(h,{"inputs-step":P(U)},null,8,["inputs-step"])])),_:1})]),T("div",ie,[T(_,{class:"h-100 d-flex flex-column justify-content-between"},{default:z((()=>[T("div",null,[T(x,null,{default:z((()=>[T(j,null,{default:z((()=>[T(g,{modelValue:Ve.value,"onUpdate:modelValue":y[1]||(y[1]=e=>Ve.value=e),label:"Recurring Subscription",color:"primary"},null,8,["modelValue"])])),_:1})])),_:1}),(k(!0),C(S,null,L(P(ze),((e,t)=>(k(),C("div",{key:`membership-precios-${t}`,class:"btn btn-card",onClick:t=>P(H).recurrences_id=e.id},[T(_,{color:P(H).recurrences_id==e.id?"primary":void 0,class:"mb-3 py-4"},{default:z((()=>[T("p",null,I(e.recurrencia.descriptions),1),T("p",oe,I(P(Q)(e.amount)),1)])),_:2},1032,["color"])],8,["onClick"])))),128))]),T("div",null,[T(b,{size:"large",active:Pe.value},{default:z((()=>[T(V,{onClick:Le,color:P(D)?void 0:"primary",class:"d-flex justify-content-center mt-6 py-5 w-100",style:{"text-align":"center","text-transform":"uppercase","font-size":"20px","font-weight":"900"}},{default:z((()=>[P(D)?(k(),C("span",ue," restart")):(k(),C("span",ne,"start subscription"))])),_:1},8,["color"])])),_:1},8,["active"])])])),_:1})]),P(D)?(k(),C("div",ce,[de,T(_,null,{default:z((()=>[T(Y,{presupuesto:P(D)},null,8,["presupuesto"]),we.value?A("v-if",!0):(k(),C(V,{key:0,onClick:Se,color:"primary",class:"d-flex justify-content-center py-5 px-6 ml-auto",style:{"text-align":"center","text-transform":"uppercase","font-size":"20px","font-weight":"900"}},{default:z((()=>[pe])),_:1}))])),_:1})])):A("v-if",!0),P(D)&&we.value?(k(),C("div",me,[ve,T(_,{style:{"margin-bottom":"24px"}},{default:z((()=>[T(M,{dato:"email",valor:Ce.value,"onUpdate:valor":y[2]||(y[2]=e=>Ce.value=e),modelValue:ke.value,"onUpdate:modelValue":y[3]||(y[3]=e=>ke.value=e),"not-payment-methods":!1,"not-search":!1,onOnSubmit:Ae},null,8,["valor","modelValue"])])),_:1}),T(_,{style:{"margin-bottom":"24px"}},{default:z((()=>[T("div",fe,[T("div",ye,[T(b,{size:"small",class:"h-100",active:Pe.value},{default:z((()=>[T(_,{class:"mb-4 h-100"},{default:z((()=>[T("div",null,[_e,T("p",be,I(P(Q)(P(D).total)),1)])])),_:1})])),_:1},8,["active"])]),T("div",he,[T(b,{size:"small",active:Pe.value},{default:z((()=>[T(E,{total:P(D).total,onOnPayment:Ie},null,8,["total"])])),_:1},8,["active"])]),A(' <div class="column is-2"> '),A(' <VLoader size="small" class="h-100 mr-0" :active="isLoaderActive">\r\n                <subscription-method-payment-debit-automatic\r\n                  :total="20"\r\n                  :card="false"\r\n                  :user="{ email: dato, id: null }"\r\n                  :new-user="true"\r\n                  :text-card="\'Cards\'"\r\n                  :outline="true"\r\n                  @onPayment="onActionCard"\r\n                >\r\n                  <template #righttop>\r\n                    <VTag\r\n                      v-tooltip="\r\n                        \'This option does not generate any charge to the card\'\r\n                      "\r\n                      color="solid"\r\n                      label="?"\r\n                    />\r\n                  </template>\r\n                </subscription-method-payment-debit-automatic>\r\n              </VLoader> '),A(" </div> "),T("div",{class:["column",(P(Oe),"is-3")]},[T(b,{size:"small",active:Pe.value},{default:z((()=>[T(G,{total:P(D).total,onOnPayment:Ie,define_status:P(Me)},{righttop:z((()=>[3!=P(Oe)||Ye.value?A("v-if",!0):B((k(),C(R,{key:0,color:"solid",label:"?"},null,512)),[[N,"You must load a card to continue. If you do not have a card, define the paymentType option as cash "]])])),modalprev:z((()=>[ge,T(b,{size:"small",class:"h-100 mr-0",active:Pe.value},{default:z((()=>[T(F,{total:20,card:!1,user:{email:Ce.value,id:ke.value&&ke.value.user?ke.value.user.id:null},"new-user":!ke.value||!ke.value.user,"text-card":"Cards (+)",outline:!0,onOnPayment:Ee},{righttop:z((()=>[B(T(R,{color:"solid",label:"?"},null,512),[[N,"This option does not generate any charge to the card"]])])),_:1},8,["user","new-user","text-card"])])),_:1},8,["active"])])),_:1},8,["total","define_status"])])),_:1},8,["active"])],2),T("div",je,[T(b,{size:"small",active:Pe.value},{default:z((()=>[T($,{total:P(D).total,onOnPayment:Ie,define_status:!(3==P(Oe)&&!Ye.value)},{righttop:z((()=>[Ye.value?A("v-if",!0):B((k(),C(R,{key:0,color:"solid",label:"?"},null,512)),[[N,"You must load a card to continue. If you do not have a card, define the paymentType option as cash "]])])),modalprev:z((()=>[xe,T(b,{size:"small",class:"h-100 mr-0",active:Pe.value},{default:z((()=>[T(F,{total:0,card:!1,user:{email:Ce.value,id:ke.value&&ke.value.user?ke.value.user.id:null},"new-user":!ke.value||!ke.value.user,"text-card":"Cards (+)",outline:!0,onOnPayment:Ee},{righttop:z((()=>[B(T(R,{color:"solid",label:"?"},null,512),[[N,"This option does not generate any charge to the card"]])])),_:1},8,["user","new-user","text-card"])])),_:1},8,["active"])])),_:1},8,["total","define_status"])])),_:1},8,["active"])])])])),_:1}),A(' <VLoader :active="isLoaderActive">\r\n          <VButton\r\n            @click="proccessSuscripcion"\r\n            color="info"\r\n            class="d-flex justify-content-center py-5 px-6 ml-auto"\r\n            style="\r\n              text-align: \'center\';\r\n              text-transform: uppercase;\r\n              font-size: 20px;\r\n              font-weight: 900;\r\n            "\r\n          >\r\n            Process\r\n          </VButton>\r\n        </VLoader> '),A(' <VCard v-if="dato">\r\n          <inputsLayaut :inputs-step="inputsInformation" />\r\n          <div v-if="isMinor">\r\n            <VCard>\r\n              <p class="title is-5">Guardian Information</p>\r\n              <inputsLayaut :inputs-step="parentInsputs" />\r\n            </VCard>\r\n          </div>\r\n          <div class="mt-3">\r\n            <p v-if="tiempo.status">\r\n              You will be redirected, please wait a moment ...\r\n              {{ tiempo.number }}\r\n            </p>\r\n            <VLoader size="large" :active="isLoaderActive">\r\n              <VButton\r\n                @click="proccessMember"\r\n                color="info"\r\n                class="d-flex justify-content-center py-5 px-6 ml-auto"\r\n                style="\r\n                  text-align: center;\r\n                  text-transform: uppercase;\r\n                  font-size: 20px;\r\n                  font-weight: 900;\r\n                "\r\n              >\r\n                Continue\r\n              </VButton>\r\n            </VLoader>\r\n          </div>\r\n        </VCard> ')])):A("v-if",!0)])])),_:1})}}});export default Ve;
