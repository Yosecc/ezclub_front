import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.e4f3f19e.js";import{_ as t}from"./V-Control.2f65f00c.js";import{_ as a}from"./V-Field.vue_vue&type=script&setup=true&lang.c6cf6183.js";import{_ as l}from"./Companies.f10d73e6.js";import{_ as s}from"./formLayaut.vue_vue&type=style&index=0&lang.efe54a19.js";import{p as n,h as u,i,a as r,v as o,n as p,k as c,m,s as d,c as v}from"./ActivityPanel.vue_vue&type=style&index=0&lang.73e0ff3f.js";import{d as f,r as y,w as _,b,o as h,h as g,j as x,k as S,D as j,L as k,N as C,K as M,F as A,R as P,G as $,J as D,z as w,Q as V,a3 as T,X as N,Y as F,y as E}from"./vendor.685e53b0.js";import{l as I,c as R,x as z,b as J,d as O,y as B,z as L,h as q,t as U,A as G,B as K,C as Q,E as W,m as X}from"./Members.6debc1eb.js";import{_ as Y}from"./V-Card.vue_vue&type=script&setup=true&lang.e9093fe9.js";import{_ as H}from"./signComponent.vue_vue&type=script&setup=true&lang.9f6d5041.js";import{_ as Z}from"./V-Loader.vue_vue&type=script&setup=true&lang.bfc6d522.js";import{_ as ee}from"./V-Placeload.e1b5c41e.js";import{P as te,A as ae,a as le}from"./index.7534d22c.js";import{_ as se}from"./V-Modal.vue_vue&type=script&setup=true&lang.146bedbc.js";import{h as ne}from"./moment.08a7f518.js";import{_ as ue}from"./V-Progress.vue_vue&type=script&setup=true&lang.2d046d86.js";import{_ as ie}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.79f3fcb2.js";import{g as re,m as oe}from"./Memberships.74df47d6.js";import{g as pe}from"./Recurrences.eb295250.js";import{g as ce}from"./Discounts.4aa1a7e6.js";import{g as me,c as de,s as ve,a as fe}from"./config.6f037bc6.js";import{h as ye}from"./Staffs.d2e83008.js";import{o as _e}from"./PaymentMethodsData.1d9bd489.js";import{p as be}from"./sidebarLayoutState.b1e70c1b.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.0ae318bf.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.fbfe4d00.js";import"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.fc314ba9.js";import"./useDropdown.0a27f828.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.119fc4d3.js";import"./V-Dropdown.4b56e22f.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.a7327817.js";import"./notyf.es.f84e4201.js";import"./activePanelState.618a6e66.js";import"./fastpizza.1e58d0ec.js";import"./pdf_icon.4b8e9b3e.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.87188a55.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.62f4b657.js";import"./V-Message.vue_vue&type=script&setup=true&lang.8a404c76.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.5d7a09f8.js";import"./navbarLayoutState.77e8f928.js";import"./video.89824664.js";import"./darkModeState.ac572066.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.7abfdf0e.js";import"./AnimatedLogo.77bc3feb.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.0d63a362.js";import"./V-Block.vue_vue&type=script&setup=true&lang.218e9dd3.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.9f34b4f7.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.0749519e.js";var he=f({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e,i=y(!1);_((()=>a.inputs),((e,t)=>{r()}));const r=()=>{i.value=!0,setTimeout((()=>{i.value=!1}),500)},o=b((()=>p.value?a.inputs.filter((e=>e.typeMember.includes("Company"))):a.inputs.filter((e=>e.typeMember.includes("Individual"))))),p=y(!1),c=e=>{p.value=!e.input.model,r()},m=e=>{let a=n(o.value);u.value||(a.select_type=a.select_type?"Company":"Individual",t("returData",a),t("changeStep",e))};return(t,a)=>{const n=l,u=s;return h(),g(u,{titles:{title:e.title},"is-loading":i.value,buttons:["next","back"],step:1,onChangeStep:m},{default:x((()=>[S(n,{"inputs-step":j(o),onChangeSwitch:c},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}}),ge=f({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e=>{t("changeStep",e)};return(t,n)=>{const u=l,i=s;return h(),g(i,{titles:{title:e.title},buttons:["next","prev"],step:2,onChangeStep:a},{default:x((()=>[S(u,{"inputs-step":j(I)},null,8,["inputs-step"])])),_:1},8,["titles"])}}});const xe={key:0},Se=$(" Remove Family Member "),je={key:1,class:"column d-flex justify-content-center flex-column is-4 mx-auto"},ke=$(" Add Another Family Member ");var Ce=f({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(n,{emit:u}){const p=n,c=y(!1);_((()=>p.inputs),((e,t)=>{m()}));const m=()=>{c.value=!0,setTimeout((()=>{c.value=!1}),500)},d=y([]);b((()=>(m(),d.value.forEach(((e,t)=>{f.value.includes(t)?d.value[t]=e.filter((e=>e.category.includes("Minor"))):d.value[t]=JSON.parse(JSON.stringify(p.inputs))})),d.value)));const v=e=>{u("returData",d),u("changeStep",e)},f=y([]),$=b((()=>d.value.length>0)),D=y(0),w=()=>{if(D.value>0)for(var e=0;e<D.value;++e){const e=y(JSON.parse(JSON.stringify(p.inputs)));i(e.value,"misma_direccion").change=V,d.value.push(e.value)}},V=function(e){this.model?(r(e,"postal_code",""),r(e,"country_id",""),r(e,"city_id",""),r(e,"state_id","")):(r(e,"postal_code",o(R.value,"postal_code")),r(e,"country_id",o(R.value,"country_id")),r(e,"city_id",o(R.value,"city_id")),r(e,"state_id",o(R.value,"state_id")))};return(u,i)=>{const r=l,o=e,p=Y,m=t,y=a,_=s;return h(),g(_,{titles:{title:n.title},"is-loading":c.value,buttons:["next","prev"],step:2,onChangeStep:v},{default:x((()=>[j($)?(h(),g("div",xe,[(h(!0),g(k,null,C(d.value,((e,t)=>(h(),g(p,{key:t,class:"mb-4"},{default:x((()=>[S(r,{"inputs-step":e,onChangeSwitch:e=>{return a=t,void f.value.findIndex((e=>e==a));var a}},null,8,["inputs-step","onChangeSwitch"]),S(o,{onClick:e=>d.value.splice(t,1),color:"danger",class:"mx-auto",icon:"fas fa-times"},{default:x((()=>[Se])),_:2},1032,["onClick"])])),_:2},1024)))),128))])):M("",!0),j($)?M("",!0):(h(),g("div",je,[S(y,{class:"mb-4"},{default:x((()=>[S(m,null,{default:x((()=>[A(S("input",{type:"number","onUpdate:modelValue":i[1]||(i[1]=e=>D.value=e),class:"input text-center",placeholder:"Family quantity"},null,512),[[P,D.value]])])),_:1})])),_:1}),S(o,{onClick:w,color:"info",icon:"fas fa-check",raised:""},{default:x((()=>[ke])),_:1})]))])),_:1},8,["titles","is-loading"])}}}),Me=f({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep"],setup(e,{emit:t}){const a=e,n=y(!1);_((()=>a.inputs),((e,t)=>{i()}));const u=e=>{let a=[];r.value.forEach((e=>{e.values.forEach((e=>{let t=e.values.find((e=>"sms"==e.name)).model.length,l=e.values.find((e=>"email"==e.name)).model.length;a.push({[e.name]:e.value,sms:t>0,email:l>0})}))})),t("returnData",a),t("changeStep",e)},i=()=>{n.value=!0,setTimeout((()=>{n.value=!1}),500)},r=b((()=>a.inputs)),o=y(!1),p=e=>{o.value=!e.input.model,i()};return(t,a)=>{const i=l,o=s;return h(),g(o,{titles:{title:e.title},"is-loading":n.value,buttons:["next","prev"],step:3,onChangeStep:u},{default:x((()=>[S(i,{"inputs-step":j(r),onChangeSwitch:p},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}});const Ae={class:""};var Pe=f({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberships:{type:Array,default:[]},notes:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(e,{emit:t}){const a=e,n=y(!1),i=y([]);_((()=>a.inputs),((e,t)=>{r()}));const r=()=>{n.value=!0,setTimeout((()=>{n.value=!1}),500)},p=e=>{let a=null;z.value.forEach(((e,t)=>{0==t?a=e.inputs:i.value.push(e)})),u.value||(t("returnData",{memberMembership:a,familyMembership:i}),t("changeStep",e))},c=b((()=>{z.value=[];const e=y(JSON.parse(JSON.stringify(J.value)));O(e.value),z.value.push({member:a.member,inputs:e.value});for(var t=0;t<a.familiares.length;++t){const e=y(JSON.parse(JSON.stringify(J.value)));O(e.value),z.value.push({member:a.familiares[t],inputs:e.value})}return z.value}));return(t,a)=>{const u=l,i=Y,r=s;return h(),g(r,{titles:{title:e.title},isloading:n.value,buttons:["next","prev"],step:4,onChangeStep:p},{default:x((()=>[(h(!0),g(k,null,C(j(c),((e,t)=>(h(),g(i,{key:`ss${t}`,class:"mb-4"},{default:x((()=>[S("p",Ae,[S("b",null,D(j(o)(e.member,"name"))+" "+D(j(o)(e.member,"second_name"))+" "+D(j(o)(e.member,"last_name")),1)]),S(u,{"inputs-step":e.inputs},null,8,["inputs-step"])])),_:2},1024)))),128)),S(i,{class:"mb-4"},{default:x((()=>[S(u,{"inputs-step":e.notes},null,8,["inputs-step"])])),_:1})])),_:1},8,["titles","isloading"])}}});const $e=S("div",{id:"payment-element"},null,-1),De=$("Pay now "),we=S("div",{id:"payment-message",class:"hidden"},null,-1);var Ve=f({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},emits:["PaymentAction"],setup(t,{emit:a}){const l=t,s=Stripe(te.value);_((()=>l.id),(e=>{console.log("cambio"),n.value=!0,d()}));const n=y(!0);y({id:l.id,amount:l.amount});const u=y(),i=b((()=>"stripe"!=l.url?{payment_type_id:3,amount:l.amount}:{id:l.id,member_mermship_id:l.member_membership,amount:l.amount,payment_type_id:1}));y(null);const r=y(null),o=y(null),c=y(!1),m=y(null),d=async()=>{let e=await ae.post(l.url,i.value).then((e=>{r.value=e.data.clientSecret,m.value=e.data.user_id,u.value=s.elements({clientSecret:r.value,appearance:{theme:"night",rules:{".Input":{boxShadow:"none"}}}}),o.value=u.value.create("card"),o.value.mount("#payment-element")})).catch((e=>{}));return n.value=!1,e},v=y(null),f=async e=>{e.preventDefault();const{setupIntent:t,error:n}=await s.confirmCardSetup(r.value,{payment_method:{card:o.value,billing_details:{name:v.value}}});if(n)console.log(),p.error(n.message);else{const{payment_method:e}=t,{data:s}=await ae.post("paymentStripe",{payment_method:e,amount:l.amount,user_id:m.value,membership_member_id:l.member_membership});s&&(a("PaymentAction",s),p.success("Success Payment"))}c.value=!1};return w((()=>{c.value=!1,d()})),(t,a)=>{const l=ee,s=e,u=Z,i=Y;return h(),g(k,null,[n.value?(h(),g(l,{key:0,height:"500px"})):M("",!0),A(S(i,{class:"mt-6"},{default:x((()=>[S("form",{onSubmit:T(f,["prevent"]),id:"payment-form"},[A(S("input",{id:"card-holder-name",class:"input mb-3","onUpdate:modelValue":a[1]||(a[1]=e=>v.value=e),placeholder:"Name",type:"text"},null,512),[[P,v.value]]),$e,S(u,{size:"small",active:c.value},{default:x((()=>[S(s,{id:"submit",class:"mt-4",color:"info"},{default:x((()=>[De])),_:1})])),_:1},8,["active"]),we],40,["onSubmit"])])),_:1},512),[[V,!n.value]])],64)}}});const Te=S("p",{class:"title is-3"},"Payment Success",-1),Ne={class:"table is-hoverable is-striped is-fullwidth"},Fe=S("thead",null,[S("tr",null,[S("th",{scope:"col"},"Members"),S("th",{scope:"col"},"Membership Name"),S("th",{scope:"col"},"Recurrence"),S("th",{scope:"col"},"Prorated"),S("th",{scope:"col"},"Membership Cost"),S("th",{scope:"col"},"Initiation Fee"),S("th",{scope:"col"},"Discount"),S("th",{scope:"col"},"Taxes"),S("th",{scope:"col"},"Sub Total")])],-1),Ee={key:0},Ie={key:1},Re={key:2},ze={key:0},Je=S("br",null,null,-1),Oe={key:1},Be={key:0},Le={key:1},qe={key:0},Ue={key:0},Ge={key:1},Ke={key:1},Qe={colspan:"9"},We={key:0},Xe={key:0},Ye=S("br",null,null,-1),He={key:1},Ze={key:0},et={key:1},tt={key:0},at={key:0},lt={key:1},st={key:1},nt=S("td",{style:{"text-align":"right"},colspan:"8"},"Total",-1),ut={class:"is-end"},it={key:1,class:"d-flex justify-content-between"},rt=$(" Card Payment "),ot=$(" Cash Payment "),pt={class:"d-flex mb-4 justify-content-between"},ct={class:"title is-5"},mt=$(" Total: "),dt={class:"title is-5"},vt=$(" Cash Total: "),ft={class:"\n            d-flex\n            justify-content-center\n            align-items-center\n            flex-column\n            mb-4\n          "},yt=S("p",{class:"title is-5 mb-4"},"Change Back:",-1),_t={class:"title is-3 mb-0"},bt={class:"d-flex justify-content-center flex-wrap mb-4"},ht=S("div",{class:"w-100"},null,-1),gt={class:"d-flex justify-content-center"},xt=$("Reset"),St=$("Confirm");var jt=f({expose:[],props:{type:{type:String,default:"create"},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberMembership:{type:Array,default:[]},familyMembership:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(l,{emit:n}){const u=y(!1),r=(e,t=3)=>{n("returnData",{total:J}),n("changeStep",e,t,{cash:W.value,changeBack:X.value})},d=b((()=>z.value[0])),v=b((()=>{let e=c(d.value.inputs,"memberships_id");return null!=e?e:[]})),f=b((()=>{let e=c(d.value.inputs,"recurrences_id");return null!=e?e:[]})),w=b((()=>{let e=o(d.value.inputs,"initiation_fee");return null!=e?e:[]})),V=b((()=>{let e=i(d.value.inputs,"discount");return null!=e?e:[]})),T=b((()=>{let e=parseFloat(ne().format("DD")),t=0,a=0;return f.value.days>=30&&(a=e-f.value.payday,t=f.value.amount/f.value.days*a),{days:a,amount:Math.abs(Math.round(t))}})),N=e=>{let t=parseFloat(ne().format("DD")),a=0,l=0;return e.days>=30&&(l=t-e.payday,a=e.amount/e.days*l),{days:l,amount:Math.abs(Math.round(a))}},F=e=>{if(""!=o(d.value.inputs,"memberships_id"))return"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:m(e.tax.value),value:e.tax.value}},E=b((()=>F(v))),I=e=>e.amount,R=b((()=>{let e=0;return e+=f.value.amount,o(d.value.inputs,"is_initiation_fee").length||(e+=w.value),e-=T.value.amount,V.value.data&&("dolar"==V.value.data.type?e-=V.value.data.value:"percentaje"==V.value.data.type&&(e-=e/100*V.value.data.value)),e+=e/100*E.value.value,o(d.value.member,"leo_vet_fr").length&&(e-=e/100*v.value.descuento_vet),e})),J=b((()=>{let e=0;return e+=R.value,e+=G.value,e})),O=b((()=>{let e=[];return z.value.forEach(((t,a)=>{a>0&&(console.log(t),e.push(t))})),e})),U=e=>{let t=0;return t+=e.membershipCost,e.is_initiation_fee.length||(t+=e.initiation_fee),t-=e.prorated,null!=e.discount&&("dolar"==e.discount.type?t-=e.discount.value:"percentaje"==e.discount.type&&(t-=t/100*e.discount.value)),t+=t/100*e.objTax.value,e.is_vet&&(t-=t/100*e.discount_vet),t},G=b((()=>{let e=0;return O.value.forEach((t=>{if(""!=o(t.inputs,"memberships_id")&&""!=o(t.inputs,"recurrences_id")){let a=U({membershipCost:I(c(t.inputs,"recurrences_id")),is_initiation_fee:o(t.inputs,"is_initiation_fee"),initiation_fee:o(t.inputs,"initiation_fee"),objTax:F(c(t.inputs,"memberships_id")),prorated:N(c(t.inputs,"recurrences_id")).amount,discount:i(t.inputs,"discount").data,is_vet:i(t.member,"leo_vet_fr").model.length,discount_vet:c(t.inputs,"memberships_id").descuento_vet});e+=a}})),e})),K=y(!1);_((()=>B),((e,t)=>{K.value=!0,oe.value=!1}));const Q=y(!1),W=y(0),X=b((()=>{const e=parseFloat(W.value)-parseFloat(J.value);return e>0?e:0})),ee=y(3),te=b((()=>null!=B.value&&null!=L.value&&3==ee.value)),ae=y(!0),ue=e=>{ee.value=0,ae.value=!1},ie=y(!1),re=e=>{q(e,L.value).then((e=>{p.success("Sign Success")}))},oe=y(!1);return y(!1),(n,p)=>{const y=Y,_=H,b=e,z=Z,q=Ve,G=t,K=a,ne=se,pe=s;return""!=j(o)(j(d).inputs,"memberships_id")?(h(),g(pe,{key:0,titles:{title:l.title},"is-loading":u.value,buttons:["prev"],step:5,onChangeStep:r},{default:x((()=>[ae.value?M("",!0):(h(),g(y,{key:0,color:"success",class:"mb-3"},{default:x((()=>[Te])),_:1})),S("table",Ne,[Fe,S("tbody",null,[S("tr",null,[S("td",null,[S("p",null,[S("b",null,D(j(o)(j(d).member,"name"))+" "+D(j(o)(j(d).member,"second_name"))+" "+D(j(o)(j(d).member,"last_name")),1)])]),0!=j(v).legnth?(h(),g("td",Ee,D(j(v).name),1)):M("",!0),0!=j(f).length?(h(),g("td",Ie,D(j(f).descriptions),1)):M("",!0),0!=j(f).length?(h(),g("td",Re,[j(f).days>=30?(h(),g("span",ze,[$(D(j(T).days)+" days : ",1),Je,$(" - "+D(j(m)(j(T).amount)),1)])):(h(),g("span",Oe,"-"))])):M("",!0),S("td",null,D(j(m)(I(j(f)))),1),S("td",null,[j(o)(j(d).inputs,"is_initiation_fee").length?(h(),g("span",Le,D(j(m)(0)),1)):(h(),g("span",Be,D(j(m)(j(w))),1))]),S("td",null,[null!=j(V).data?(h(),g("span",qe,["dolar"==j(V).data.type?(h(),g("span",Ue," - "+D(j(m)(j(V).data.value)),1)):M("",!0),"percentaje"==j(V).data.type?(h(),g("span",Ge,D(j(V).data.value)+"%",1)):M("",!0)])):(h(),g("span",Ke,"-"))]),S("td",null,D(j(E).text),1),S("td",null,D(j(m)(j(R))),1)]),S("tr",null,[S("td",Qe,[ae.value?M("",!0):(h(),g(_,{key:0,onOnSign:re,"is-sign":!ie.value,contract:`contract_${j(B)}_${j(L)}_${j(B)}.pdf`,"url-contract":`${j(le)}generateContract/${j(B)}`},null,8,["is-sign","contract","url-contract"]))])])]),(h(!0),g(k,null,C(j(O),((e,t)=>(h(),g("tbody",{key:`familiar${t}`},[""!=j(o)(e.inputs,"memberships_id")&&""!=j(o)(e.inputs,"recurrences_id")?(h(),g("tr",We,[S("td",null,[S("p",null,[S("b",null,D(j(o)(e.member,"name"))+" "+D(j(o)(e.member,"second_name"))+" "+D(j(o)(e.member,"last_name")),1)])]),S("td",null,D(j(c)(e.inputs,"memberships_id").name),1),S("td",null,D(j(c)(e.inputs,"recurrences_id").descriptions),1),S("td",null,[j(c)(e.inputs,"recurrences_id").days>=30?(h(),g("span",Xe,[$(D(N(j(c)(e.inputs,"recurrences_id")).days)+" days : ",1),Ye,$(" - "+D(j(m)(N(j(c)(e.inputs,"recurrences_id")).amount)),1)])):(h(),g("span",He,"-"))]),S("td",null,D(j(m)(I(j(c)(e.inputs,"recurrences_id")))),1),S("td",null,[j(o)(e.inputs,"is_initiation_fee").length?(h(),g("span",et,D(j(m)(0)),1)):(h(),g("span",Ze,D(j(m)(j(o)(e.inputs,"initiation_fee"))),1))]),S("td",null,[null!=j(i)(e.inputs,"discount").data?(h(),g("span",tt,["dolar"==j(i)(e.inputs,"discount").data.type?(h(),g("span",at," - "+D(j(m)(j(i)(e.inputs,"discount").data.value)),1)):M("",!0),"percentaje"==j(i)(e.inputs,"discount").data.type?(h(),g("span",lt,D(j(i)(e.inputs,"discount").data.value)+"%",1)):M("",!0)])):(h(),g("span",st,"-"))]),S("td",null,D(F(j(c)(e.inputs,"memberships_id")).text),1),S("td",null,D(j(m)(U({membershipCost:I(j(c)(e.inputs,"recurrences_id")),is_initiation_fee:j(o)(e.inputs,"is_initiation_fee"),initiation_fee:j(o)(e.inputs,"initiation_fee"),objTax:F(j(c)(e.inputs,"memberships_id")),prorated:N(j(c)(e.inputs,"recurrences_id")).amount,discount:j(i)(e.inputs,"discount").data,is_vet:j(i)(e.member,"leo_vet_fr").model.length,discount_vet:j(c)(e.inputs,"memberships_id").descuento_vet}))),1)])):M("",!0)])))),128)),S("tbody",null,[S("tr",null,[nt,S("td",ut,D(j(m)(j(J))),1)])])]),ae.value?(h(),g("div",it,[S(z,{size:"small",active:oe.value},{default:x((()=>[S(b,{color:"success",onClick:p[1]||(p[1]=e=>(r(6,3),ee.value=3,oe.value=!1))},{default:x((()=>[rt])),_:1})])),_:1},8,["active"]),S(b,{color:"warning",onClick:p[2]||(p[2]=e=>Q.value=!0)},{default:x((()=>[ot])),_:1})])):M("",!0),j(te)?(h(),g(q,{key:2,amount:j(J),id:j(B),member_membership:j(L),onPaymentAction:ue},null,8,["amount","id","member_membership"])):M("",!0),S(ne,{open:Q.value,actions:"center",onClose:p[7]||(p[7]=e=>Q.value=!1)},{content:x((()=>[S("div",pt,[S("p",ct,[mt,S("b",null,D(j(m)(j(J))),1)]),S("p",dt,[vt,S("b",null,D(j(m)(W.value)),1)])]),S("div",ft,[yt,S("p",_t,[S("b",null,D(j(m)(j(X))),1)])]),S("div",bt,[S(b,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:p[3]||(p[3]=e=>W.value=j(J))},{default:x((()=>[$(" Full Payment "+D(j(m)(j(J))),1)])),_:1}),ht,(h(),g(k,null,C([5,10,20,50,100],((e,t)=>S(b,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>W.value+=e},{default:x((()=>[$(" $"+D(e),1)])),_:2},1032,["onClick"]))),64))]),S("div",gt,[S(K,null,{default:x((()=>[S(G,null,{default:x((()=>[A(S("input",{"onUpdate:modelValue":p[4]||(p[4]=e=>W.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[P,W.value]])])),_:1})])),_:1})])])),action:x((()=>[S(b,{color:void 0,onClick:p[5]||(p[5]=e=>W.value=0),class:"d-flex justify-content-center",raised:""},{default:x((()=>[xt])),_:1}),S(b,{color:"success",onClick:p[6]||(p[6]=e=>(r(6,1),ee.value=1)),disabled:j(J)>W.value,class:"d-flex justify-content-center",raised:""},{default:x((()=>[St])),_:1},8,["disabled"])])),_:1},8,["open"])])),_:1},8,["titles","is-loading"])):M("",!0)}}});N("data-v-915b2888");const kt={class:"content"},Ct={class:"content-text"};F();var Mt=f({expose:[],props:{active:{type:Boolean,default:!1,required:!0},step:{type:Number,default:0,required:!0},text:{type:String,default:""}},setup(e){const t=e,a=b((()=>t.active?100:0));return(t,l)=>{const s=ue;return h(),g("div",kt,[S("div",{class:["circle",e.active?"active":""]},null,2),S(s,{class:"progressbar",value:j(a),size:"smaller"},null,8,["value"]),S("div",Ct,[S("p",null,"STEP "+D(e.step),1),S("p",null,[S("b",null,D(e.text),1)])])])}}});Mt.__scopeId="data-v-915b2888";const At={class:"columns is-multiline"},Pt={class:"column is-12"},$t={class:"column is-9"},Dt={class:"column is-3"};var wt=f({expose:[],setup(l){be.value="Add New members",E({title:"Members"}),w((()=>{te(),re().then((e=>{d(J,"memberships_id",e.data.memberships)})),ce(1,"membership").then((e=>{d(J,"discount",e.data.discounts)})),pe().then((e=>{})),me().then((e=>{d(R,"city_id",de.value),d(U,"city_id",de.value),d(R,"state_id",ve.value),d(U,"state_id",ve.value),d(R,"country_id",fe.value),d(U,"country_id",fe.value)})),ye().then((e=>{d(J,"staff_id",e.data)}))}));const s=y(1),u=y([{step:1,text:"Member Information",categories:["Adult","Minor","Prospect"]},{step:2,text:"Add Family Member",categories:["Adult","Prospect"]},{step:2,text:"Parent / Guardian",categories:["Minor"]},{step:3,text:"Contact Preference",categories:["Adult","Minor","Prospect"]},{step:4,text:"Select membership",categories:["Adult","Minor","Prospect"]},{step:5,text:"Add Payment Method",categories:["Adult","Minor","Prospect"]},{step:6,text:"Sing Contract & Waiver",categories:["Adult","Minor","Prospect"]}]),i=b((()=>R.value.filter((e=>e.categories.includes(K.value.model))))),r=b((()=>u.value.find((e=>e.step==s.value&&e.categories.includes(K.value.model))))),o=b((()=>u.value.filter((e=>e.categories.includes(K.value.model))))),c=b((()=>n(I.value))),m=(e,t=3,a={})=>{K.value.model,6==e?ee(t,a):s.value=e},f=y(null),_=e=>{f.value=e},P=y(null),T=e=>{P.value=e},N=y([]),F=e=>{N.value=e.value},O=y([]),q=y([]),Y=e=>{q.value=e.familyMembership.value,O.value=e.memberMembership};y(null),y(null);const H=y(null),Z=e=>{H.value=e.total.value},ee=(e,t)=>{const a=new FormData;((e,t)=>{for(var a in t)e.append(a,t[a])})(a,f.value);let l=P.value;for(var s=0;s<l.length;s++){var u=l[s];for(var i in u)a.append(`notifications[${s}][${i}]`,u[i])}let r=n(O.value);for(var s in r)if("diciplines"==s){let e=r[s];for(var o=0;o<e.length;++o)a.append("diciplines[]",e[o])}else a.append(s,r[s]);a.append("total",H.value),a.append("payment_type_id",e),1==e&&(a.append("cash",t.cash),a.append("cash_back",t.changeBack));let m=n(K.value,{array:!1});for(var s in m)a.append(s,m[s]);let d=n(G.value);for(var s in d)a.append(s,d[s]);let v=n(_e.value);for(var s in v)a.append(s,v[s]);for(var s in q.value.forEach(((e,t)=>{let l=n(e.member);for(var s in l)"category"==s&&(l[s]?l[s]="Minor":l[s]="Adult"),a.append(`familiares[${t}][${s}]`,l[s]);let u=P.value;for(s=0;s<u.length;s++){var i=u[s];for(var r in i)a.append(`familiares[${t}][notifications][${s}][${r}]`,i[r])}let o=n(e.inputs);for(var s in o)if("diciplines"==s){let e=o[s];for(var p=0;p<e.length;++p)a.append(`familiares[${t}][diciplines][]`,e[p])}else a.append(`familiares[${t}][${s}]`,o[s]);a.append(`familiares[${t}][total]`,H.value);let c=n(G.value);for(var s in c)a.append(`familiares[${t}][${s}]`,c[s]);let m=n(_e.value);for(var s in m)a.append(`familiares[${t}][${s}]`,m[s])})),c.value)a.append(s,c.value[s]);W(a).then((e=>{console.log(e),B.value=e.data.member.id,L.value=e.data.member.membership_members.id,X.value=e.data.member,console.log(X.value)})).catch((e=>{for(var t in console.log(e),e.response.data.errores)e.response.data.errores[t].forEach((e=>{p.error(`${t}: ${e}`)}))}))},te=()=>{let e=["is_family","principal_family"];v(R.value.filter((t=>!e.includes(t.name)))),e=["recurrence"],v(J.value.filter((t=>!e.includes(t.name)))),v(G.value),v(I.value)};return(l,n)=>{const u=e,p=t,c=a,d=he,v=ge,f=Ce,y=Me,b=Pe,P=jt,w=Mt,E=ie;return h(),g(E,null,{default:x((()=>[S("div",At,[S("div",Pt,[1==s.value?(h(),g(c,{key:0,class:"w-100",addons:""},{default:x((()=>[(h(!0),g(k,null,C(j(K).values,((e,t)=>(h(),g(p,{key:`categoymember-${t}`},{default:x((()=>[S(u,{onClick:t=>j(K).model=e,color:j(K).model==e?"primary":void 0,rounded:""},{default:x((()=>[$(D(e),1)])),_:2},1032,["onClick","color"])])),_:2},1024)))),128))])),_:1})):M("",!0)]),S("div",$t,[A(S(d,{type:"create",title:j(r).text,inputs:j(i),onChangeStep:m,onReturData:_},null,8,["title","inputs"]),[[V,1==s.value]]),A(S(v,{title:j(r).text,onChangeStep:m},null,8,["title"]),[[V,2==s.value&&"Minor"==j(K).model]]),A(S(f,{type:"create",title:j(r).text,inputs:j(U),onChangeStep:m,onReturData:F},null,8,["title","inputs"]),[[V,2==s.value&&("Adult"==j(K).model||"Prospect"==j(K).model)]]),A(S(y,{type:"create",title:j(r).text,inputs:j(Q),onChangeStep:m,onReturnData:T},null,8,["title","inputs"]),[[V,3==s.value]]),A(S(b,{type:"create",member:j(i),familiares:N.value,title:j(r).text,inputs:j(z),memberships:j(oe),notes:j(G),onChangeStep:m,onReturnData:Y},null,8,["member","familiares","title","inputs","memberships","notes"]),[[V,4==s.value]]),A(S(P,{type:"create",title:j(r).text,member:j(i),familiares:N.value,inputs:j(z),"member-membership":O.value,"family-membership":q.value,onChangeStep:m,onReturnData:Z},null,8,["title","member","familiares","inputs","member-membership","family-membership"]),[[V,5==s.value]])]),S("div",Dt,[(h(!0),g(k,null,C(j(o),((e,t)=>(h(),g(w,{key:t,active:e.step<=s.value,step:e.step,text:e.text},null,8,["active","step","text"])))),128))])])])),_:1})}}});export default wt;
