import{_ as e}from"./V-Placeload.43c61814.js";import{_ as t}from"./V-Avatar.vue_vue&type=script&setup=true&lang.78d7227b.js";import{_ as a}from"./V-Card.vue_vue&type=script&setup=true&lang.d3d76712.js";import{d as s,O as n,w as l,o as i,c as r,r as o,F as c,i as u,j as m,I as d,k as p,l as v,H as f,S as b,U as h,W as y,X as _,a2 as g,G as k,B as x,_ as C,ab as M,A as w,P as j}from"./vendor.b96c0b62.js";import{m as Y,f as D,b as S,h as P,i as I,j as V,k as $,u as E,l as z,n as A,o as T,q as B,r as F,p as q,t as H,v as N,w as L,x as O,y as R,z as W,A as U,B as G,C as J,D as K,E as Q,F as X,d as Z,G as ee,H as te,I as ae,J as se,K as ne,L as le,M as ie,N as re,O as oe,P as ce,Q as ue,R as me,S as de,T as pe,c as ve,U as fe,V as be}from"./Members.8f5f7ff9.js";import{b as he,P as ye,A as _e,F as ge,c as ke,v as xe,g as Ce,m as Me,n as we,p as je,a as Ye,h as De,e as Se,s as Pe}from"./index.91b9a95b.js";import{_ as Ie}from"./V-Button.vue_vue&type=script&setup=true&lang.940c9f5e.js";import{_ as Ve}from"./V-Loader.vue_vue&type=script&setup=true&lang.72c1da57.js";import{_ as $e}from"./V-Control.9f6b030b.js";import{_ as Ee}from"./V-Field.vue_vue&type=script&setup=true&lang.9839f63b.js";import{_ as ze}from"./V-Modal.vue_vue&type=script&setup=true&lang.793fc7c9.js";import{_ as Ae}from"./V-Tag.vue_vue&type=script&setup=true&lang.42120ae5.js";import{_ as Te}from"./subscriptionIndex.vue_vue&type=script&setup=true&lang.91ea6f22.js";import{_ as Be}from"./inputsLayaut.vue_vue&type=style&index=0&lang.082bb801.js";import{_ as Fe}from"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.905c9e6e.js";import{m as qe,_ as He}from"./MemberCards.48f6817a.js";import{_ as Ne,a as Le}from"./generateMember.vue_vue&type=script&setup=true&lang.b7bf66a8.js";import{_ as Oe}from"./V-AvatarStack.vue_vue&type=script&setup=true&lang.541b424a.js";import{_ as Re}from"./Presupuesto.vue_vue&type=script&setup=true&lang.21cb3b08.js";import{a as We,h as Ue}from"./Memberships.9cf94ff4.js";import{_ as Ge}from"./signComponent.vue_vue&type=script&setup=true&lang.df008166.js";import{_ as Je}from"./pdf_icon.3fcaa627.js";import{o as Ke,a as Qe,f as Xe}from"./Companies.bc4f6887.js";import{_ as Ze}from"./FlexTableDropdown.vue_vue&type=script&setup=true&lang.08a2a6ca.js";import{_ as et}from"./V-Block.vue_vue&type=script&setup=true&lang.96a9aa0d.js";import{_ as tt}from"./V-Tabs.vue_vue&type=script&setup=true&lang.3343c3d5.js";import{_ as at}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.e5760cf1.js";import{p as st}from"./sidebarLayoutState.a7097173.js";import{g as nt}from"./Discounts.1bbc894e.js";import{g as lt}from"./Recurrences.7dbce8cd.js";import{g as it}from"./Staffs.e739b9e5.js";import{g as rt}from"./Diciplines.7c6ff6a4.js";import{e as ot}from"./config.5855a188.js";import{g as ct}from"./subscription-method-stripe-checkout.vue_vue&type=script&setup=true&lang.2c18c4c3.js";import"./V-SwitchBlock.vue_vue&type=script&setup=true&lang.3ea5d316.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.55f1942d.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.7d0df25a.js";import"./V-Dropdown.5a213405.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.0b7fcd84.js";import"./useDropdown.51b21268.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.43133d8a.js";import"./activePanelState.a3a15c4d.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.cf9fc2aa.js";import"./video.19485659.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.3bd9126b.js";import"./darkModeState.1cad08fb.js";import"./AnimatedLogo.3baf4ecb.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.31d8f19f.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.0dc1dec1.js";import"./userPopovers.f4b9fc60.js";const ut={class:"d-flex justify-content-center align-items-center flex-column mb-4"},mt={class:"mt-5 text-center"},dt={class:"title is-5 is-narrow"},pt={class:"w-100 mt-5"},vt=v("i",{class:"iconify",style:{"font-size":"20px",color:"white"},"data-icon":"feather:arrow-right","aria-hidden":"true"},null,-1);var ft=s({expose:[],props:{category:{type:String,default:"Adult"}},emits:["changeMenu"],setup(e,{emit:s}){const y=e,_=n();l((()=>_.hash),(e=>{M.value=g.findIndex((e=>e.component==_.hash.slice(1)))})),i((()=>{""!=_.hash&&(M.value=g.findIndex((e=>e.component==_.hash.slice(1))))}));const g=[{name:"Personal Information",component:"personalInformation"},{name:"Subscription",component:"susbcriptionIndex"},{name:"Membership/Contract",component:"memberMembership"},{name:"Family Members",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"},{name:"Invoices",component:"memberInvoices"},{name:"Credit",component:"memberCredit"}],k=[{name:"Personal Information",component:"personalInformation"},{name:"Subscription",component:"susbcriptionIndex"},{name:"Membership/Contract",component:"memberMembership"},{name:"Parent / Guardian",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"},{name:"Credit",component:"memberCredit"},{name:"Invoices",component:"memberInvoices"}],x=[{name:"Personal Information",component:"personalInformation"},{name:"Subscription",component:"susbcriptionIndex"},{name:"Membership/Contract",component:"memberMembership"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"},{name:"Invoices",component:"memberInvoices"},{name:"Credit",component:"memberCredit"}],C=r((()=>"Adult"==y.category?g:"Minor"==y.category?k:x)),M=o(0),w=o(null),j=r((()=>null!=C.value[M.value]?C.value[M.value].component:w.value));return(e,n)=>{const l=t,i=a;return c(Y)?(u(),m(i,{key:0,class:"cardprofile"},{default:p((()=>[v("div",ut,[v(l,{picture:c(Y).photo?`${c(he)}storage/${c(Y).photo}`:"",size:"xl"},null,8,["picture"]),v("div",mt,[d(" <p>{{ member }}</p> "),v("h2",dt,f(c(Y).name)+" "+f(c(Y).second_name)+" "+f(c(Y).last_name),1)])]),v("div",pt,[v("ul",null,[(u(!0),m(b,null,h(c(C),((e,t)=>(u(),m("li",{key:`item-${t}`},[v(i,{class:["\r\n              mb-3\r\n              item_menu\r\n              d-flex\r\n              justify-content-between\r\n              align-items-center\r\n            ",M.value==t?"active":""],color:M.value==t?"warning":void 0,elevated:M.value==t,onClick:e=>(e=>{M.value=e,s("changeMenu",j)})(t)},{default:p((()=>[v("p",null,f(e.name),1),vt])),_:2},1032,["class","color","elevated","onClick"])])))),128))])])])),_:1})):d("v-if",!0)}}});const bt=v("div",{id:"payment-element"},[d("Stripe.js injects the Payment Element")],-1),ht=k(" Pay now "),yt=v("div",{id:"payment-message",class:"hidden"},null,-1);var _t=s({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},setup(t){const s=t,n=Stripe(ye.value);l((()=>s.id),(e=>{console.log("cambio"),c.value=!0,M()}));const c=o(!0);o({id:s.id,amount:s.amount});const f=o(),h=r((()=>"stripe"!=s.url?{payment_type_id:3,amount:s.amount}:{id:s.id,member_mermship_id:s.member_membership,amount:s.amount,payment_type_id:1})),k=o(null),x=o(null),C=o(!1),M=async()=>{let e=await _e.post(s.url,h.value).then((e=>{k.value=e.data.clientSecret,f.value=n.elements({clientSecret:k.value}),x.value=f.value.create("payment"),x.value.mount("#payment-element")})).catch((e=>{}));return c.value=!1,e},w=async e=>{e.preventDefault(),C.value=!0,await n.confirmPayment({elements:f.value,confirmParams:{return_url:`${ge.value}members/process?payment_type=3&id=`+s.id+`&membership=${s.member_membership}`}}),C.value=!1};return i((()=>{M()})),(t,s)=>{const n=e,l=Ie,i=Ve,r=a;return u(),m(b,null,[c.value?(u(),m(n,{key:0,height:"500px"})):d("v-if",!0),y(v(r,{class:"mt-6"},{default:p((()=>[d(" <p>{{ memberMermship }}</p> "),v("form",{onSubmit:g(w,["prevent"]),id:"payment-form"},[d(' <input id="card-holder-name" type="text"> '),bt,d(' <button id="submit">\r\n        <div class="spinner hidden" id="spinner"></div>\r\n        <span id="button-text">Pay now</span>\r\n      </button> '),v(i,{size:"small",active:C.value},{default:p((()=>[v(l,{id:"submit",class:"mt-4",color:"success"},{default:p((()=>[ht])),_:1})])),_:1},8,["active"]),yt],40,["onSubmit"])])),_:1},512),[[_,!c.value]])],64)}}});const gt={class:"table is-hoverable is-striped is-fullwidth"},kt=v("th",{scope:"col"},"Members",-1),xt=v("th",{scope:"col"},"Membership Name",-1),Ct=v("th",{scope:"col"},"Recurrence",-1),Mt=v("th",{scope:"col"},"Prorated",-1),wt=v("th",{scope:"col"},"Membership Cost",-1),jt=v("th",{scope:"col"},"Initiation Fee",-1),Yt=v("th",{scope:"col"},"Discount",-1),Dt=v("th",{scope:"col"},"Taxes",-1),St={key:0,scope:"col"},Pt=v("th",{scope:"col"},"Sub Total",-1),It={key:0},Vt={key:0},$t={key:1},Et={key:2},zt={key:0},At=v("br",null,null,-1),Tt={key:1},Bt={key:0},Ft={key:1},qt={key:0},Ht={key:0},Nt={key:1},Lt={key:1},Ot={key:3},Rt={class:"is-end"},Wt={class:"d-flex justify-content-between"},Ut=k(" Card Payment "),Gt=k(" Cash Payment "),Jt={class:"d-flex mb-4 justify-content-between"},Kt={class:"title is-5"},Qt=k(" Total: "),Xt={class:"title is-5"},Zt=k(" Cash Total: "),ea={class:"\r\n            d-flex\r\n            justify-content-center\r\n            align-items-center\r\n            flex-column\r\n            mb-4\r\n          "},ta=v("p",{class:"title is-5 mb-4"},"Change Back:",-1),aa={class:"title is-3 mb-0"},sa={class:"d-flex justify-content-center flex-wrap mb-4"},na=v("div",{class:"w-100"},null,-1),la={class:"d-flex justify-content-center"},ia=k("Reset"),ra=k("Confirm");var oa=s({expose:[],setup(e){o(!1);const t=o(!1);i((()=>{console.log("se monto el payment")}));const s=r((()=>{let e=ke(S,"memberships_id");return null!=e?e:[]})),n=r((()=>{let e=ke(S,"recurrences_id");return null!=e?e:[]})),l=r((()=>{let e=xe(S,"initiation_fee");return null!=e?e:[]})),_=r((()=>{let e=Ce(S,"discount");return null!=e?e:[]})),g=r((()=>{let e=parseFloat(x().format("DD")),t=0,a=0;return n.value.days>=30&&(a=e-n.value.payday,t=n.value.amount/n.value.days*a),{days:a,amount:Math.abs(Math.round(t))}})),M=r((()=>(e=>{if(""!=xe(S,"memberships_id"))return"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:Me(e.tax.value),value:e.tax.value}})(s))),w=o(null),j=r((()=>{let e=0;return e+=n.value.amount,xe(S,"is_initiation_fee").length||(e+=l.value),e-=g.value.amount,_.value.data&&("dolar"==_.value.data.type?e-=_.value.data.value:"percentaje"==_.value.data.type&&(e-=e/100*_.value.data.value)),e+=e/100*M.value.value,Y.value.penalty&&(w.value=s.value.penalty,e+=w.value),Y.value.leo_vet_fr&&(e-=e/100*s.value.descuento_vet),e})),I=r((()=>{let e=0;return e+=j.value,e})),V=o(!1),$=o(0),E=r((()=>{const e=parseFloat($.value)-parseFloat(I.value);return e>0?e:0}));o(1);const z=async()=>{await P(D.value.id,{total:I.value,payment_type_id:1,cash:$.value,cash_back:E.value}).then((e=>{we.success("Payment Success"),window.location.reload()})).catch((e=>{}))};return(e,i)=>{const r=Ie,o=a,x=_t,P=$e,A=Ee,T=ze;return u(),m("div",null,[v(o,{class:""},{default:p((()=>{return[v("table",gt,[v("thead",null,[v("tr",null,[kt,xt,Ct,Mt,wt,jt,Yt,Dt,w.value?(u(),m("th",St,"Penalty")):d("v-if",!0),Pt])]),0!=c(s).length?(u(),m("tbody",It,[v("tr",null,[v("td",null,[v("p",null,[v("b",null,f(c(Y).name)+" "+f(c(Y).second_name)+" "+f(c(Y).last_name),1)])]),0!=c(s).legnth?(u(),m("td",Vt,f(c(s).name),1)):d("v-if",!0),0!=c(n).length?(u(),m("td",$t,f(c(n).descriptions),1)):d("v-if",!0),0!=c(n).length?(u(),m("td",Et,[c(n).days>=30?(u(),m("span",zt,[k(f(c(g).days)+" days : ",1),At,k(" - "+f(c(Me)(c(g).amount)),1)])):(u(),m("span",Tt,"-"))])):d("v-if",!0),v("td",null,f(c(Me)((e=c(n),e.amount))),1),v("td",null,[c(xe)(c(S),"is_initiation_fee").length?(u(),m("span",Ft,f(c(Me)(0)),1)):(u(),m("span",Bt,f(c(Me)(c(l))),1))]),v("td",null,[null!=c(_).data?(u(),m("span",qt,["dolar"==c(_).data.type?(u(),m("span",Ht," - "+f(c(Me)(c(_).data.value)),1)):d("v-if",!0),"percentaje"==c(_).data.type?(u(),m("span",Nt,f(c(_).data.value)+"%",1)):d("v-if",!0)])):(u(),m("span",Lt,"-"))]),v("td",null,f(c(M).text),1),w.value?(u(),m("td",Ot,f(c(Me)(w.value)),1)):d("v-if",!0),v("td",null,f(c(Me)(c(j))),1)]),v("tr",null,[v("td",{style:{"text-align":"right"},colspan:w.value?"9":"8"}," Total ",8,["colspan"]),v("td",Rt,f(c(Me)(c(I))),1)])])):d("v-if",!0)]),v("div",Wt,[v(r,{color:"success",disabled:0==c(s).length||isNaN(c(I)),onClick:i[1]||(i[1]=e=>t.value=!0)},{default:p((()=>[Ut])),_:1},8,["disabled"]),v(r,{disabled:0==c(s).length||isNaN(c(I)),color:"warning",onClick:i[2]||(i[2]=e=>V.value=!0)},{default:p((()=>[Gt])),_:1},8,["disabled"])])];var e})),_:1}),t.value?(u(),m(x,{key:0,class:"",url:`new_payment/${c(D).id}`,amount:c(I),id:c(Y).id,member_membership:c(D).id},null,8,["url","amount","id","member_membership"])):d("v-if",!0),v(T,{open:V.value,actions:"center",onClose:i[6]||(i[6]=e=>V.value=!1)},{content:p((()=>[v("div",Jt,[v("p",Kt,[Qt,v("b",null,f(c(Me)(c(I))),1)]),v("p",Xt,[Zt,v("b",null,f(c(Me)($.value)),1)])]),v("div",ea,[ta,v("p",aa,[v("b",null,f(c(Me)(c(E))),1)])]),v("div",sa,[v(r,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:i[3]||(i[3]=e=>$.value=c(I))},{default:p((()=>[k(" Full Payment "+f(c(Me)(c(I))),1)])),_:1}),na,(u(),m(b,null,h([5,10,20,50,100],((e,t)=>v(r,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>$.value+=e},{default:p((()=>[k(" $"+f(e),1)])),_:2},1032,["onClick"]))),64))]),v("div",la,[v(A,null,{default:p((()=>[v(P,null,{default:p((()=>[y(v("input",{"onUpdate:modelValue":i[4]||(i[4]=e=>$.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[C,$.value]])])),_:1})])),_:1})])])),action:p((()=>[v(r,{onClick:i[5]||(i[5]=e=>$.value=0),class:"d-flex justify-content-center",raised:""},{default:p((()=>[ia])),_:1}),v(r,{color:"success",onClick:z,disabled:c(I)>$.value,class:"d-flex justify-content-center",raised:""},{default:p((()=>[ra])),_:1},8,["disabled"])])),_:1},8,["open"])])}}});const ca=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Personal Information"),v("p",null,"Edit member's personal information")],-1),ua=k(" Save Changes "),ma=k(" Convert to Members ");var da=s({expose:[],props:{category:{type:String,default:"Adult"},suscripcion:{type:Object,default:null},user:{type:Object,default:null}},setup(e){const t=e,a=M();i((()=>{t.suscripcion&&t.user&&(Ce(I.value,"email").model=t.user.email,Ce(I.value,"email").disabled=!0,Ce(I.value,"country_id").model=34)})),r((()=>"Prospect"==t.category));const s=o(!1),n=()=>{s.value=!0;let e=je(I.value),n=new FormData;for(var l in e)n.append(l,e[l]);Y.value?V(n).then((e=>{we.success("Edit Success"),s.value=!1})).catch((e=>{s.value=!1})):(t.suscripcion&&n.append("suscripcion_id",t.suscripcion.id),qe(n).then((e=>{we.success("Success"),s.value=!1,console.log(e.data.member.id),a.push({name:"members-profile",query:{id:e.data.member.id},hash:"#susbcriptionIndex"})})).catch((e=>{s.value=!1})))},l=r((()=>(console.log("personal",I.value),I.value.filter((e=>e.categories.includes(t.category))))));return(e,a)=>{const i=Ie,r=Ve,o=Be,f=Fe;return u(),m(f,null,{"header-left":p((()=>[ca])),"header-right":p((()=>[v(r,{size:"small",active:s.value},{default:p((()=>[v(i,{onClick:n,color:"primary"},{default:p((()=>[ua])),_:1}),"Prospect"==t.category?(u(),m(i,{key:0,color:"info",class:"ml-3"},{default:p((()=>[ma])),_:1})):d("v-if",!0)])),_:1},8,["active"])])),content:p((()=>["Minor"==t.category?(u(),m(o,{key:0,"inputs-step":c(l)},null,8,["inputs-step"])):(u(),m(o,{key:1,"inputs-step":c(I)},null,8,["inputs-step"]))])),_:1})}}});const pa=k("Confirm");var va=s({expose:[],props:{open:Boolean},emits:["closeModal"],setup(e,{emit:t}){const a=()=>{t("closeModal")},s=async()=>{const e=je(Ue);console.log(e);const t=Y.value.membership_members.id;try{await E(t,e),a(),we.success("Success")}catch(s){we.error("Error")}},n=e=>{const t=e.filter((e=>"memberships_id"===e.name))[0].model;$(t,!0).then((e=>{Ce(Ue,"recurrences_id").values=e.data.filter((e=>e.id!==Y.value.membership_members.recurrences_id))}))};return i((async()=>{const{data:e}=await We();Ye(Ue,"memberships_id",e.memberships),Ce(Ue,"memberships_id").change=n})),(t,n)=>{const l=Be,i=Ie,r=ze;return u(),m(r,{open:e.open,size:"small",actions:"center",onClose:a},{content:p((()=>[v(l,{"inputs-step":c(Ue)},null,8,["inputs-step"])])),action:p((()=>[v(i,{color:"primary",onClick:s,raised:""},{default:p((()=>[pa])),_:1})])),_:1},8,["open"])}}});const fa=v("p",null,[v("b",null,"Upgrade Subscription")],-1);var ba=s({expose:[],props:{isLoaderActive:Boolean},setup(e){const t=o(!1),s=()=>{t.value=!t.value};return(n,l)=>{const i=a,r=va,o=Ve;return u(),m(o,{class:"h-100 w-100",size:"small",active:e.isLoaderActive},{default:p((()=>[v(i,{color:void 0,outlined:"",onClick:s,class:"\r\n        mr-4\r\n        btn-card\r\n        text-center\r\n        px-2\r\n        h-100\r\n        d-flex\r\n        align-items-center\r\n        justify-content-center\r\n      ",style:{"font-size":"12px"}},{default:p((()=>[fa])),_:1}),v(r,{open:t.value,onCloseModal:l[1]||(l[1]=e=>s())},null,8,["open"])])),_:1},8,["active"])}}});const ha=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Membership / Contract"),v("p",null,"Edit member's membership and contract information")],-1),ya={class:"columns is-multiline justify-content-center"},_a={key:0,class:"column is-12"},ga=k("Membership: "),ka={key:0},xa=k("Current billing location: "),Ca={class:"title is-4 mb-0"},Ma={class:"text-right"},wa=v("b",null,"Payment Method:",-1),ja={key:0},Ya={class:"title is-4"},Da=v("br",null,null,-1),Sa={key:0,class:"mr-1 mb-1"},Pa={key:0,class:"mb-4 column is-12"},Ia=k("Save Changes"),Va=k(" New Membership "),$a={key:2,class:"column is-12 mb-6 mt-4"},Ea={key:1},za={class:"d-flex justify-content-end w-100"},Aa=k("Cancel"),Ta={key:1,class:"column is-4"},Ba={key:0},Fa={style:{position:"sticky",top:"10px"},class:"columns is-multiline"},qa={key:0,class:"column is-6"},Ha=v("p",null,[v("b",null,"HOLD Membership")],-1),Na={key:0},La=v("p",null," Hold end date last day of the month prior to the end of the hold ",-1),Oa=k("Confirm"),Ra=v("p",null," Do you want to create an invoice with the prorated amount? ",-1),Wa={key:0,class:"table w-100"},Ua=v("td",null,"Tax",-1),Ga=v("td",null,"Total",-1),Ja=k("Confirm"),Ka={key:1,class:"column is-6"},Qa=v("p",null,[v("b",null,"Pause Payment")],-1),Xa={key:0},Za=k("Confirm"),es={key:2,class:"column is-6"},ts=v("p",null,[v("b",null,"Cancel Membership")],-1),as={key:3,class:"column is-6"},ss=v("p",null,[v("b",null,"Payment Now")],-1),ns={key:4,class:"column is-6"},ls=v("p",null,[v("b",null,"Pay Late Fee")],-1),is={key:5,class:"column is-6"},rs=v("p",null,[v("b",null,"Sync Subscription")],-1),os={class:"column is-6"},cs=v("p",null,[v("b",null,"Send Email: Contract and Waiver")],-1),us={class:"column is-6"},ms=v("p",null,[v("b",null,"Subscribe Debit Automatic")],-1),ds={class:"column is-6 mb-6"},ps={class:"column is-12"},vs=v("h1",{class:"title is-6"},"Active Waiver Information",-1),fs={class:"text-center"},bs=v("img",{src:Je,class:"mr-3",width:"40",alt:""},null,-1),hs={class:"column is-12"},ys=v("h1",{class:"title is-6"},"Active Contract Information",-1),_s={class:"text-center"},gs=v("img",{src:Je,class:"mr-3",width:"40",alt:""},null,-1),ks={key:2,class:"column is-4 text-center"},xs=v("p",{class:"title is-4"},"Change the location to perform actions",-1),Cs={key:3,class:"columns is-multiline column mt-4 is-12"},Ms={class:"column is-12"};var ws=s({expose:[],props:{},emits:["reload"],setup(t,{emit:s}){i((()=>{z(S)})),o(null),o(null),o(null),o(null),o(null);const l=o(!1);o(null);const _=o(!1),g=o(!1),w=o({total:null}),j=o([{typeInput:"switchEventChangeInput",name:"prorrateo",values:["NO","Yes"],model:!0,required:!1,class:"is-12",isLabel:!0}]);M();const P=n(),V=r((()=>{if(P.fullPath.includes("/members/profile")){let e=S.findIndex((e=>"prorrateo"==e.name)),t=S.findIndex((e=>"schedules"==e.name));-1==e&&(S.unshift(A.value[0]),Ce(S,"recurrence").class="is-4"),-1==t&&(S.push(T.value[0]),Ce(S,"prorrateo").change=function(e){this.model?Ce(e,"schedules").disabled=!0:Ce(e,"schedules").disabled=!1})}if(Y.value&&D.value&&1==D.value.status){let e=["locations_id","diciplines","staff_id","discount","is_last_month"];return fe.value&&Ke.value==fe.value.id&&e.push("discount"),S.filter((t=>e.includes(t.name)))}return S})),$=()=>{Ce(S,"amount").required=!1,Ce(S,"initiation_fee").required=!1,Ce(S,"diciplines").required=!1;const e=je(S);H(e).then((e=>{we.success("Success"),l.value=!1,Ce(S,"amount").required=!0,Ce(S,"initiation_fee").required=!0,Ce(S,"diciplines").required=!0}))},E=async()=>{l.value=!0,await N(V.value,I.value),l.value=!1},Z=()=>{confirm("Are you sure you want to perform this action?")&&(l.value=!0,L().then((e=>{we.success("Memberships Cancel"),window.location.reload(),l.value=!1})))},ee=e=>{O(e,D.value.id).then((e=>{if(e.data.status)we.success("Sign Success");else for(var t in we.error(e.data.mensaje),e.data.errores)e.data.errores[t].forEach((e=>{we.error(`${t} : ${e}`)}))})).catch((e=>{}))},te=e=>{},ae=o(!1),se=o(null),ne=()=>{confirm("Are you sure you want to perform this action?")&&(l.value=!0,R(D.value.id,se.value).then((e=>{we.success("Success Pause"),l.value=!1,s("reload")})).catch((e=>{for(var t in l.value=!1,e.response.data)e.response.data.errores[t].forEach((e=>{we.error(`${t}: ${e}`)}))})))},le=()=>{confirm("Are you sure you want to perform this action?")&&(l.value=!0,W(D.value.id,se.value,Ce(j.value,"prorrateo").model).then((e=>{we.success("Success Hold"),l.value=!1,se.value=null,s("reload")})).catch((e=>{for(var t in l.value=!1,e.response.data)e.response.data[t].forEach((e=>{we.error(`${t}: ${e}`)}))})))},ie=o(!1),re=(e,t=3,a={})=>{if(!confirm("Do you want to try the payment?"))return;let s={payment_type_id:t,payment_method:e,total:Y.value.subscription.total_invoice};1==t&&(s.changeBack=a.changeBack,s.cash=a.cash),l.value=!0,U(D.value.id,s).then((e=>{we.success("success"),window.location.reload()})).catch((e=>{if("object"==typeof e.response.data)for(var t in e.response.data)"array"==typeof e.response.data[t]||we.error(e.response.data[t]);else we.error(e.response.data)})).finally((()=>{l.value=!1}))},oe=e=>{re(null,1,e)},ce=()=>{confirm("Are you sure you want to perform this action?")&&(l.value=!0,G().then((e=>{l.value=!1,we.success("Success"),s("reload")})).catch((e=>{l.value=!1})))},ue=()=>{l.value=!0,J().then((e=>{l.value=!1,we.success("Success"),s("reload")})).catch((e=>{we.error(e.response.data),l.value=!1}))},me=()=>{if(null==D.value.hold_date_finish&&null==D.value.date_finish_pause)_.value=!0;else{if(null!=D.value.date_finish_pause)return void we.error("This membership is on pause. Activation is required to continue");K(D.value.id).then((e=>{console.log(e.data),w.value=e.data,g.value=!0})).catch((e=>{console.log(e.response.data)}))}},de=()=>{if(null==Y.value.subscription.pause_collection)ae.value=!0;else{if(null!=D.value.hold_date_finish)return void we.error("This membership is on pause.");ne()}},pe=()=>{l.value=!0,Q(D.value.id).then((e=>{l.value=!1,we.success("Send Email")}))},ve=()=>{l.value=!0,X(Y.value.id).then((e=>{l.value=!1,we.success("Success"),s("reload")})).catch((e=>{l.value=!1,s("reload")}))},fe=r((()=>Y.value.user&&Y.value.user.location_facturacion?Y.value.user.location_facturacion:D.value&&1==D.value.payment_type_id?{id:D.value.locations_id}:null));return(t,s)=>{const n=a,i=Ne,r=He,o=Be,M=Oe,S=Ie,P=Ve,I=e,z=Le,A=Re,T=Ie,H=ze,N=ba,L=Ge,O=Fe;return u(),m(O,null,{"header-left":p((()=>[ha])),content:p((()=>[d(" <p>{{ locationSistemID }}/ {{ locationFacturacion }}</p> "),v("div",ya,[c(Y)&&c(D)&&1==c(D).status?(u(),m("div",_a,[v(n,{class:"d-flex justify-content-between",color:null!=c(D).hold_date_finish?"warning":"info",style:null==c(Y).subscription.pause_collection?{}:{backgroundColor:"#404046 !important"}},{default:p((()=>[v("span",null,[v("p",null,[v("small",null,[ga,c(Y).user&&c(Y).user.location_facturacion?(u(),m("small",ka,[xa,v("b",null,f(c(Y).user.location_facturacion.name),1)])):d("v-if",!0)])]),v("p",Ca,f(c(D).membership.name),1),v("p",null,f(c(D).recurrence.descriptions),1)]),v("span",Ma,[v("p",null,[v("small",null,[wa,k(" "+f(c(D).payment_type.name),1)])]),c(D)?(u(),m("p",ja,[v("small",null,f(c(D).recurrence.is_recurrence?"Recurrence":"no recurrence"),1)])):d("v-if",!0),v("p",Ya,[k(f(c(Me)(c(Y).subscription.total_invoice)),1),Da,c(Y).subscription&&c(Y).subscription.subscription&&!c(Y).subscription.subscription.upcoming_total?(u(),m("small",Sa,"No upcoming bill")):d("v-if",!0)])])])),_:1},8,["color","style"])])):d("v-if",!0),v("div",{class:["column is-8",c(Y).membership_members?"is-8":"is-12"]},[ie.value?(u(),m("div",Pa,[c(Y).user?(u(),m(r,{key:0,onOnMethodPayment:re,memberid:c(Y).id,method_default:c(Y).user.pm_last_four,"show-new-card":!1,class:"mb-4",ancho:"is-6"},{default:p((()=>[v(i,{total:c(Y).subscription.total_invoice,margin:"mx-0",class:"is-4",onOnPaymentCash:oe},null,8,["total"])])),_:1},8,["memberid","method_default"])):d("v-if",!0)])):d("v-if",!0),c(B).length?d("v-if",!0):(u(),m(n,{key:1,style:{position:"sticky",top:"10px"},class:"mb-4 column is-12"},{default:p((()=>[v(o,{"inputs-step":c(V)},null,8,["inputs-step"]),c(Y)&&c(Y).trainers?(u(),m(M,{key:0,avatars:c(F)(c(Y).trainers),size:"small"},null,8,["avatars"])):d("v-if",!0),c(Y)&&c(D)&&1==c(D).status?(u(),m(P,{key:1,size:"small",active:l.value},{default:p((()=>[v(S,{class:"mt-5",onClick:$,color:"primary"},{default:p((()=>[Ia])),_:1})])),_:1},8,["active"])):d("v-if",!0),c(q)?d("v-if",!0):(u(),m(P,{key:2,size:"small",active:l.value},{default:p((()=>[c(D)&&2!=c(D).status?d("v-if",!0):(u(),m(S,{key:0,class:"mt-5",onClick:E,color:"primary"},{default:p((()=>[Va])),_:1}))])),_:1},8,["active"]))])),_:1})),d(" Presupuesto "),c(D)&&2!=c(D).status?d("v-if",!0):(u(),m("div",$a,[l.value?(u(),m(I,{key:0,height:"300px",class:"mb-4"})):d("v-if",!0),c(B).length?(u(),m("div",Ea,[(u(!0),m(b,null,h(c(B),((e,a)=>(u(),m(A,{key:`presupuesto-${a}`,class:"mb-4",presupuesto:e},{default:p((()=>[v("div",za,[v(z,{member:e.member,member_id:c(Y).id,membresia:e.membresia,contact:t.dataContact,presupuesto:e,presupuesto_id:e.presupuesto_id,"categories-members":t.categoriesMembers,"notas-input":t.notasInput,total:e.total,onPaymentAction:te,type:"edit"},null,8,["member","member_id","membresia","contact","presupuesto","presupuesto_id","categories-members","notas-input","total"])])])),_:2},1032,["presupuesto"])))),128)),v(S,{onClick:s[1]||(s[1]=e=>B.value=[]),color:"danger"},{default:p((()=>[Aa])),_:1})])):d("v-if",!0)]))],2),c(fe)&&c(Ke)==c(fe).id?(u(),m("div",Ta,[c(Y).membership_members?(u(),m("div",Ba,[v("div",Fa,[c(Y)&&c(D)&&1==c(D).status?(u(),m("div",qa,[c(Y).membership_members&&c(Y).membership_members.is_recurrence?(u(),m(P,{key:0,size:"small",class:"h-100",active:l.value},{default:p((()=>[c(D)&&c(Y).subscription?(u(),m(n,{key:0,color:"warning",outlined:null==c(D).hold_date_finish,onClick:me,class:"\r\n                      mr-4\r\n                      btn-card\r\n                      text-center\r\n                      h-100\r\n                      px-2\r\n                      d-flex\r\n                      align-items-center\r\n                      justify-content-center\r\n                    ",style:{"font-size":"12px"}},{default:p((()=>[Ha,v("p",null,[null!=c(D).hold_date_finish?(u(),m("span",Na,"Active until: "+f(c(x)(c(D).hold_date_finish).format("MM/DD/YYYY")),1)):d("v-if",!0)])])),_:1},8,["outlined"])):d("v-if",!0)])),_:1},8,["active"])):d("v-if",!0),v(H,{open:_.value,actions:"center",onClose:s[3]||(s[3]=e=>_.value=!1)},{content:p((()=>[La,y(v("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=e=>se.value=e),class:"input mt-4"},null,512),[[C,se.value]])])),action:p((()=>[v(T,{onClick:le,color:"primary",raised:""},{default:p((()=>[Oa])),_:1})])),_:1},8,["open"]),v(H,{open:g.value,actions:"center",onClose:s[4]||(s[4]=e=>g.value=!1)},{content:p((()=>[Ra,v(o,{"inputs-step":j.value},null,8,["inputs-step"]),w.value.total?(u(),m("table",Wa,[v("tr",null,[v("td",null," Subtotal ("+f(w.value.dias_restantes)+" days) ",1),v("td",null,f(c(Me)(w.value.subtotal)),1)]),v("tr",null,[Ua,v("td",null,f(c(Me)(w.value.tax)),1)]),v("tr",null,[Ga,v("td",null,f(c(Me)(w.value.total)),1)])])):d("v-if",!0)])),action:p((()=>[v(T,{onClick:le,color:"primary",raised:""},{default:p((()=>[Ja])),_:1})])),_:1},8,["open"])])):d("v-if",!0),c(Y)&&c(D)&&1==c(D).status?(u(),m("div",Ka,[c(Y).membership_members&&c(Y).membership_members.is_recurrence?(u(),m(P,{key:0,size:"small",class:"h-100",active:l.value},{default:p((()=>[c(D)&&c(Y).subscription?(u(),m(n,{key:0,color:"undefined",style:[{"font-size":"12px"},null==c(Y).subscription.pause_collection?{}:{backgroundColor:"#404046"}],outlined:null==c(Y).subscription.pause_collection,onClick:de,class:"\r\n                      mr-4\r\n                      btn-card\r\n                      text-center\r\n                      px-2\r\n                      h-100\r\n                      d-flex\r\n                      align-items-center\r\n                      justify-content-center\r\n                    "},{default:p((()=>[Qa,v("p",null,[null!=c(Y).subscription.pause_collection?(u(),m("span",Xa,"Active until: "+f(c(x)(c(Y).subscription.pause_collection).format("MM-DD-YYYY")),1)):d("v-if",!0)])])),_:1},8,["style","outlined"])):d("v-if",!0)])),_:1},8,["active"])):d("v-if",!0),v(H,{open:ae.value,actions:"center",onClose:s[6]||(s[6]=e=>ae.value=!1)},{content:p((()=>[y(v("input",{type:"date","onUpdate:modelValue":s[5]||(s[5]=e=>se.value=e),class:"input"},null,512),[[C,se.value]])])),action:p((()=>[v(T,{onClick:ne,color:"primary",raised:""},{default:p((()=>[Za])),_:1})])),_:1},8,["open"])])):d("v-if",!0),c(Y)&&c(D)&&1==c(D).status?(u(),m("div",es,[v(P,{class:"h-100",size:"small",active:l.value},{default:p((()=>[c(D)?(u(),m(n,{key:0,color:"danger",outlined:"",onClick:Z,class:"\r\n                      mr-4\r\n                      btn-card\r\n                      text-center\r\n                      px-2\r\n                      h-100\r\n                      d-flex\r\n                      align-items-center\r\n                      justify-content-center\r\n                    ",style:{"font-size":"12px"}},{default:p((()=>[ts])),_:1})):d("v-if",!0)])),_:1},8,["active"])])):d("v-if",!0),c(Y)&&c(D)&&1==c(D).status?(u(),m("div",as,[v(P,{size:"small",class:"h-100",active:l.value},{default:p((()=>[c(D)?(u(),m(n,{key:0,color:"success",outlined:"",onClick:s[7]||(s[7]=e=>ie.value=!ie.value),class:"\r\n                      mr-4\r\n                      btn-card\r\n                      text-center\r\n                      px-2\r\n                      h-100\r\n                      d-flex\r\n                      align-items-center\r\n                      justify-content-center\r\n                    ",style:{"font-size":"12px"}},{default:p((()=>[ss])),_:1})):d("v-if",!0)])),_:1},8,["active"])])):d("v-if",!0),c(Y)&&c(D)?(u(),m("div",ns,[c(Y).membership_members&&c(Y).membership_members.is_recurrence?(u(),m(P,{key:0,size:"small",active:l.value,class:"h-100"},{default:p((()=>[c(D)?(u(),m(n,{key:0,color:"secondary",outlined:"",onClick:ce,class:"\r\n                      mr-4\r\n                      btn-card\r\n                      text-center\r\n                      px-2\r\n                      h-100\r\n                      d-flex\r\n                      align-items-center\r\n                      justify-content-center\r\n                    ",style:{"font-size":"12px"}},{default:p((()=>[ls])),_:1})):d("v-if",!0)])),_:1},8,["active"])):d("v-if",!0)])):d("v-if",!0),c(Y)&&c(D)?(u(),m("div",is,[c(Y).membership_members&&c(Y).membership_members.is_recurrence?(u(),m(P,{key:0,size:"small",active:l.value,class:"h-100"},{default:p((()=>[c(D)?(u(),m(n,{key:0,color:void 0,outlined:"",onClick:ue,class:"\r\n                      mr-4\r\n                      btn-card\r\n                      text-center\r\n                      px-2\r\n                      h-100\r\n                      d-flex\r\n                      align-items-center\r\n                      justify-content-center\r\n                    ",style:{"font-size":"12px"}},{default:p((()=>[rs])),_:1})):d("v-if",!0)])),_:1},8,["active"])):d("v-if",!0)])):d("v-if",!0),v("div",os,[c(Y).membership_members&&c(Y).membership_members.is_recurrence?(u(),m(P,{key:0,class:"w-100 h-100",size:"small",active:l.value},{default:p((()=>[c(D)&&c(Y).subscription?(u(),m(n,{key:0,color:"info",outlined:!0,onClick:pe,class:"\r\n                      mr-4\r\n                      btn-card\r\n                      text-center\r\n                      px-2\r\n                      h-100\r\n                      d-flex\r\n                      align-items-center\r\n                      justify-content-center\r\n                    ",style:{"font-size":"12px"}},{default:p((()=>[cs])),_:1})):d("v-if",!0)])),_:1},8,["active"])):d("v-if",!0)]),v("div",us,[c(Y).membership_members&&c(Y).membership_members.is_recurrence?(u(),m(P,{key:0,class:"w-100 h-100",size:"small",active:l.value},{default:p((()=>[c(D)&&c(Y).subscription?(u(),m(n,{key:0,color:"success",outlined:!0,onClick:ve,class:"\r\n                      mr-4\r\n                      btn-card\r\n                      text-center\r\n                      px-2\r\n                      h-100\r\n                      d-flex\r\n                      align-items-center\r\n                      justify-content-center\r\n                    ",style:{"font-size":"12px"}},{default:p((()=>[ms])),_:1})):d("v-if",!0)])),_:1},8,["active"])):d("v-if",!0)]),v("div",ds,[c(Y)&&c(D)?(u(),m(N,{key:0,member:c(Y),"member-mermship":c(D),"is-loader-active":l.value},null,8,["member","member-mermship","is-loader-active"])):d("v-if",!0)]),d(" WAIVER "),v("div",ps,[c(Y)&&c(D)?(u(),m(n,{key:0,class:"mb-4 w-100"},{default:p((()=>[vs,v("div",fs,[v("a",{target:"_blank",href:`${c(he)}generateWeiver/${c(Y).id}`,class:"d-flex justify-content-start align-items-center"},[bs,v("p",null," weiver_"+f(c(Y).id)+"_"+f(c(Y).membership_members.id)+"_"+f(c(Y).personal_identifications)+".pdf ",1),d(' <V-Button color="success" outlined class="mt-4 py-1">\r\n                        View PDF\r\n                      </V-Button> ')],8,["href"])])])),_:1})):d("v-if",!0)]),d(" Contract "),v("div",hs,[c(Y)&&c(D)?(u(),m(n,{key:0,class:"mb-4 w-100"},{default:p((()=>[ys,v("div",_s,[v("a",{target:"_blank",href:`${c(he)}generateContract/${c(Y).id}`,class:"d-flex justify-content-start align-items-center"},[gs,v("p",null," contract_"+f(c(Y).id)+"_"+f(c(Y).membership_members.id)+"_"+f(c(Y).personal_identifications)+".pdf ",1),d('  <V-Button color="success" outlined class="mt-4 py-1">\r\n                        View PDF\r\n                      </V-Button> ')],8,["href"])])])),_:1})):d("v-if",!0)])])])):d("v-if",!0)])):(u(),m("div",ks,[xs])),d(" Contract "),c(Y)&&c(D)&&!c(D).sign?(u(),m("div",Cs,[v("div",Ms,[v(L,{onOnSign:ee,"is-sign":!c(D).sign,contract:`contract_${c(Y).id}_${c(Y).membership_members.id}_${c(Y).personal_identifications}.pdf`,"url-contract":`generateContract/${c(Y).id}`},null,8,["is-sign","contract","url-contract"])])])):d("v-if",!0)])])),_:1})}}});const js=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Family Members"),v("p",null,"Edit member's family members")],-1),Ys={class:"columns is-multiline"},Ds={key:0,class:"column is-4 mb-4"},Ss=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Parent"),v("p",null,"Edit parent contact")],-1),Ps=k(" Save Changes "),Is={class:""},Vs=v("h1",{class:"title is-5"},"Parent Contact Information",-1),$s={class:"d-flex justify-content-end mr-6"};var Es=s({expose:[],setup(e){o([{id:1,name:"Wonder Woman",subtitle:"Mother/Adult",img:"https://picsum.photos/150/150"},{id:2,name:"Lionel Messi",subtitle:"Father/Minor",img:"https://picsum.photos/150/151"}]);const a=()=>{const e=je(Z.value),t=new FormData;for(var a in e)t.append(a,e[a]);De.value||ae(t).then((e=>{we.success("Success")}))},s=r((()=>(console.log("info",I.value),Ce(Z.value,"city_id").model=Ce(I.value,"city_id").model,Ce(Z.value,"state_id").model=Ce(I.value,"state_id").model,Ce(Z.value,"postal_code").model=Ce(I.value,"postal_code").model,Ce(Z.value,"country_id").model=Ce(I.value,"country_id").model,Z.value)));return(e,n)=>{const l=t,i=Ze,r=et,o=Fe,f=Ie,y=Be;return u(),m("div",null,[c(Y)&&"Adult"==c(Y).category?(u(),m(o,{key:0},{"header-left":p((()=>[js])),"header-right":p((()=>[d(' <VButton color="primary"> Save Changes </VButton> ')])),content:p((()=>[v("div",Ys,[d(" <p>{{ memberParent.photo }}</p> "),c(ee)?(u(),m("div",Ds,[v(r,{title:`${c(ee).name} ${c(ee).second_name} ${c(ee).last_name}`,class:"border-1 p-4 radius-small"},{icon:p((()=>[v(l,{size:"medium",picture:`${c(he)}storage/${c(ee).photo}`,subtitle:"Principal Family"},null,8,["picture"])])),action:p((()=>[v(i,{"id-member":c(ee).id},null,8,["id-member"])])),_:1},8,["title"])])):d("v-if",!0),(u(!0),m(b,null,h(c(te),((e,t)=>(u(),m("div",{class:"column is-4 mb-4",key:`family-${t}`},[v(r,{title:`${e.member.name} ${e.member.second_name} ${c(Y).last_name}`,subtitle:e.member.relationships,class:"border-1 p-4 radius-small"},{icon:p((()=>[v(l,{size:"medium",picture:`${c(he)}storage/${e.member.photo}`},null,8,["picture"])])),action:p((()=>[v(i,{"id-member":e.members_id},null,8,["id-member"])])),_:2},1032,["title","subtitle"])])))),128))])])),_:1})):d("v-if",!0),c(Y)&&"Minor"==c(Y).category?(u(),m(o,{key:1},{"header-left":p((()=>[Ss])),"header-right":p((()=>[v(f,{onClick:a,color:"primary"},{default:p((()=>[Ps])),_:1})])),content:p((()=>[v("div",Is,[Vs,v("div",$s,[v(l,{picture:`${c(he)}storage/${c(Ce)(c(Z),"parent_photo").data}`,size:"large"},null,8,["picture"])]),v(y,{"inputs-step":c(s)},null,8,["inputs-step"])])])),_:1})):d("v-if",!0)])}}});const zs=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Emergency Contact"),v("p",null,"Edit member's emergency contact")],-1),As=k(" Save Changes "),Ts={class:""},Bs=v("h1",{class:"title is-5"},"Emergency Contact Information",-1);var Fs=s({expose:[],setup(e){const t=()=>{const e=je(se.value);console.log(e),ne(e).then((e=>{we.success("Success")}))};return(e,a)=>{const s=Ie,n=Be,l=Fe;return u(),m(l,null,{"header-left":p((()=>[zs])),"header-right":p((()=>[v(s,{onClick:t,color:"primary"},{default:p((()=>[As])),_:1})])),content:p((()=>[v("div",Ts,[Bs,v(n,{"inputs-step":c(se)},null,8,["inputs-step"])])])),_:1})}}});const qs=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Check-ins History"),v("p",null,"Edit member's check-ins history")],-1),Hs={class:"p-6"},Ns={class:"mt-4"},Ls={class:"table is-hoverable is-fullwidth"},Os=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"DATE"),v("th",{scope:"col"},"TIME"),d(' <th scope="col">STAFF</th> ')])],-1);var Rs=s({expose:[],setup:e=>(e,t)=>{const a=Fe;return c(Y)?(u(),m(a,{key:0},{"header-left":p((()=>[qs])),"header-right":p((()=>[])),content:p((()=>[v("div",Hs,[d(' <div class="d-flex">\n          <V-Field class="field mr-3">\n            <V-Control>\n              <input\n                type="date"\n                class="input"\n                placeholder="input.placeholder"\n              />\n            </V-Control>\n          </V-Field>\n          <V-Field class="field mr-3">\n            <V-Control>\n              <input\n                type="date"\n                class="input"\n                placeholder="input.placeholder"\n              />\n            </V-Control>\n          </V-Field>\n          <VButton color="primary"> Export </VButton>\n        </div> '),v("div",Ns,[v("table",Ls,[Os,v("tbody",null,[(u(!0),m(b,null,h(c(le),((e,t)=>(u(),m("tr",{key:`access-${t}`},[v("td",null,f(c(x)(e.created_at).format("MM/DD/YYYY")),1),v("td",null,f(c(x)(e.created_at).format("HH:mm:ss")),1),d(" <td>{{ access.user.name }}</td> ")])))),128))])])])])])),_:1})):d("v-if",!0)}});const Ws=o([{typeInput:"text",name:"description",placeholder:"Description",model:"",class:"is-12",isLabel:!0,required:!0},{typeInput:"text",name:"amount",placeholder:"Amount",model:"",class:"is-12",isLabel:!0,required:!0}]),Us=k("Confirm");var Gs=s({expose:[],props:{openModal:{type:Boolean,default:!1},paymentMethodId:{type:String,default:""},paymentGateway:{type:Number,default:1}},emits:["closeModal","refreshTransactions"],setup(e,{emit:t}){const a=e,s=o(!1),n=async()=>{const e=je(Ws.value);await Y.value;const n={amount:e.amount,description:e.description,payment_method_id:a.paymentGateway,payment_method_stripe_id:a.paymentMethodId,member_id:Y.value.id};s.value=!0;try{await(async(e={})=>await _e.post("make-manual-payment",e))(n),Se(Ws.value),we.success("Success"),t("closeModal")}catch(l){"string"==typeof l.response.data.message?we.error(l.response.data.message):we.error(l)}finally{s.value=!1}},l=()=>{Se(Ws.value),t("closeModal")};return(e,t)=>{const i=Be,r=Ie,o=ze;return u(),m(o,{open:a.openModal,title:"Create a new payment",size:"small",actions:"right",onClose:l},{content:p((()=>[v(i,{"inputs-step":c(Ws)},null,8,["inputs-step"])])),action:p((()=>[v(r,{color:"primary",raised:"",onClick:n,loading:s.value},{default:p((()=>[Us])),_:1},8,["loading"])])),_:1},8,["open"])}}});const Js=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Purchases History"),v("p",null,"Edit member's purchases history")],-1),Ks=v("p",{class:"title is-5"},"Card List",-1),Qs=v("div",{class:"d-flex align-items-center"},[v("p",{class:"title is-1 mb-0"},[v("i",{class:"fas fa-shopping-bag","aria-hidden":"true"})]),v("div",{class:"ml-4"},[v("p",{class:"title is-4 mb-2"},"Make a new payment with cash")])],-1);var Xs=s({expose:[],setup(e){const t=o(null),s=o(!1),n=o(1),l=()=>{},i=e=>{t.value=e,n.value=1,s.value=!0},r=()=>{s.value=!0,n.value=2},f=()=>{s.value=!1};return(e,o)=>{const b=Gs,h=He,y=a,_=Fe;return c(Y)?(u(),m(_,{key:0},{"header-left":p((()=>[Js])),"header-right":p((()=>[])),content:p((()=>[Ks,v(b,{"payment-method-id":t.value,"open-modal":s.value,"payment-gateway":n.value,onCloseModal:f},null,8,["payment-method-id","open-modal","payment-gateway"]),c(Y).user?(u(),m(h,{key:0,"show-option":!0,class:"mb-6",onMakePayment:i,onOnMethodPayment:l,method_default:c(Y).user.pm_last_four,"show-new-card":!0,memberid:c(Y).id},null,8,["method_default","memberid"])):d("v-if",!0),v(y,{onClick:r,color:"success",class:"btn-card"},{default:p((()=>[Qs])),_:1})])),_:1})):d("v-if",!0)}}});const Zs=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Subscription Invoice History"),v("p")],-1),en=v("p",null,"Invoices",-1),tn={class:"table is-hoverable is-fullwidth"},an=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Description"),v("th",{scope:"col"},"Created"),v("th",{scope:"col"},"Amount"),v("th",{scope:"col"},"Method"),v("th",{scope:"col"},"Download"),v("th",{scope:"col"},"Status")])],-1),sn={key:0},nn={key:0},ln={key:1},rn=v("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),on={key:1},cn=v("td",null,"Subscription",-1),un={key:0},mn={key:1},dn={key:0},pn={key:1},vn=v("td",null,"Cash",-1),fn=v("td",null,[d(' <a :href="invoice.invoice_pdf" target="_blank">\r\n                  <VButton>\r\n                    <i class="fas fa-download" aria-hidden="true"></i>\r\n                  </VButton>\r\n                </a> ')],-1);var bn=s({expose:[],setup(e){const t=w({data:[]});return r((()=>D.value.payments)),r((()=>{let e=[];return re.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),i((async()=>{await ie(Y.value.id,{invoice_type:1}).then((e=>{t.data=e.data.invoices})).catch((e=>{}))})),(e,s)=>{const n=Ie,l=Ae,i=a,r=Fe;return c(Y)?(u(),m(r,{key:0},{"header-left":p((()=>[Zs])),"header-right":p((()=>[])),content:p((()=>[d(" <memberCreditCard /> "),v(i,{class:"my-4"},{default:p((()=>[en,v("table",tn,[an,c(Y).subscription&&c(t).data?(u(),m("tbody",sn,[(u(!0),m(b,null,h(c(t).data,((e,t)=>(u(),m("tr",{key:`invoice-${t}`},[v("td",null,[v("p",null,f(e.description),1),d(' <span\r\n                  v-for="(item, keyy) in JSON.parse(invoice.billing_reason)"\r\n                  :key="`invo-${keyy}`"\r\n                >\r\n                  <VTag v-if="item" class="mr-1 mb-1" :label="item" />\r\n                </span> ')]),d(" <td> "),d(' <VTag class="mr-2" :label="invoice.billing_reason" /> '),d(" </td> "),v("td",null,[d(" <p>{{ invoice.created }}</p> "),k(f(c(x)(e.created).format("MM/DD/YYYY")),1)]),"Cash"==e.collection_method?(u(),m("td",nn,f(c(Me)(e.total)),1)):(u(),m("td",ln,f(c(Me)(e.total/100)),1)),v("td",null,f(e.collection_method),1),v("td",null,[v("a",{href:e.invoice_pdf,target:"_blank"},[v(n,null,{default:p((()=>[rn])),_:1})],8,["href"])]),v("td",null,[v(l,{class:"mr-1 mb-1",label:e.status},null,8,["label"]),d(' <VTag\r\n                  class="mr-1 mb-1"\r\n                  :label="invoice.payments_intents[0].status"\r\n                /> ')])])))),128))])):c(Y).membership_members&&c(Y).membership_members.invoice_local?(u(),m("tbody",on,[(u(!0),m(b,null,h(c(Y).membership_members.invoice_local,((e,t)=>(u(),m("tr",{key:`invoice-${t}`},[cn,v("td",null,[d(" <p>{{ invoice.updated }}</p> "),k(f(c(x)(e.updated).format("MM/DD/YYYY")),1)]),v("td",null,[e.period_start?(u(),m("span",un,f(c(x)(e.period_start).format("MM/DD/YYYY")),1)):(u(),m("span",mn))]),v("td",null,[e.period_end?(u(),m("span",dn,f(c(x)(e.period_end).format("MM/DD/YYYY")),1)):(u(),m("span",pn))]),v("td",null,f(c(Me)(e.amount/100)),1),vn,fn,v("td",null,[k(f(e.status?"paid":"incomplete"),1),d(" <br /> "),d(" <small>{{ invoice.description_status }}</small> ")])])))),128))])):d("v-if",!0)])])),_:1}),d(' <VCard class="mb-4" v-if="false">\r\n        <p>Payment Attempts</p>\r\n        <table class="table is-hoverable is-fullwidth">\r\n          <thead>\r\n            <tr>\r\n              <th scope="col">Description</th>\r\n              <th scope="col">Created</th>\r\n              <th scope="col">Mount</th>\r\n              <th scope="col">Method</th>\r\n              <th scope="col">Download</th>\r\n              <th scope="col">Status</th>\r\n              <th scope="col">Status Description</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody v-if="memberMermship">\r\n            <tr v-for="(invoice, key) in member.pagos" :key="`pagos-${key}`">\r\n              <td>{{ invoice.description }}</td>\r\n              <td>\r\n                {{ moment(invoice.created).format(\'MM/DD/YYYY\') }}\r\n              </td>\r\n\r\n              <td>{{ moneda(invoice.total / 100) }}</td>\r\n              <td>{{ invoice.collection_method }}</td>\r\n              <td>\r\n                <a :href="invoice.invoice_pdf" target="_blank">\r\n                  <VButton>\r\n                    <i class="fas fa-download" aria-hidden="true"></i>\r\n                  </VButton>\r\n                </a>\r\n              </td>\r\n              <td>{{ invoice.status }}</td>\r\n              <td>{{ invoice.status_description }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </VCard> ')])),_:1})):d("v-if",!0)}}});const hn=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Product Invoice History"),v("p")],-1),yn=v("p",null,"Invoices",-1),_n={class:"table is-hoverable is-fullwidth"},gn=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Description"),v("th",{scope:"col"},"Created"),v("th",{scope:"col"},"Amount"),v("th",{scope:"col"},"Method"),v("th",{scope:"col"},"Download"),v("th",{scope:"col"},"Status")])],-1),kn={key:0},xn=v("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),Cn={key:1},Mn=v("td",null,"Subscription",-1),wn={key:0},jn={key:1},Yn={key:0},Dn={key:1},Sn=v("td",null,"Cash",-1),Pn=v("td",null,[d(' <a :href="invoice.invoice_pdf" target="_blank">\r\n                  <VButton>\r\n                    <i class="fas fa-download" aria-hidden="true"></i>\r\n                  </VButton>\r\n                </a> ')],-1);var In=s({expose:[],setup(e){const t=w({data:[]});return r((()=>D.value.payments)),r((()=>{let e=[];return re.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),i((async()=>{const{data:e}=await ie(Y.value.id,{invoice_type:2});t.data=e.invoices})),(e,s)=>{const n=Ie,l=Ae,i=a,r=Fe;return c(Y)?(u(),m(r,{key:0},{"header-left":p((()=>[hn])),"header-right":p((()=>[])),content:p((()=>[d(" <memberCreditCard /> "),v(i,{class:"my-4"},{default:p((()=>[yn,v("table",_n,[gn,c(Y).subscription&&c(t).data?(u(),m("tbody",kn,[(u(!0),m(b,null,h(c(t).data,((e,t)=>(u(),m("tr",{key:`invoice-${t}`},[v("td",null,[v("p",null,f(e.description),1),d(' <span\r\n                  v-for="(item, keyy) in JSON.parse(invoice.billing_reason)"\r\n                  :key="`invo-${keyy}`"\r\n                >\r\n                  <VTag v-if="item" class="mr-1 mb-1" :label="item" />\r\n                </span> ')]),d(" <td> "),d(' <VTag class="mr-2" :label="invoice.billing_reason" /> '),d(" </td> "),v("td",null,f(c(x)(e.created).format("MM/DD/YYYY")),1),v("td",null,f(c(Me)(e.total/100)),1),v("td",null,f(e.collection_method),1),v("td",null,[v("a",{href:e.invoice_pdf,target:"_blank"},[v(n,null,{default:p((()=>[xn])),_:1})],8,["href"])]),v("td",null,[v(l,{class:"mr-1 mb-1",label:e.status},null,8,["label"]),d(' <VTag\r\n                  class="mr-1 mb-1"\r\n                  :label="invoice.payments_intents[0].status"\r\n                /> ')])])))),128))])):c(Y).membership_members&&c(Y).membership_members.invoice_local?(u(),m("tbody",Cn,[(u(!0),m(b,null,h(c(Y).membership_members.invoice_local,((e,t)=>(u(),m("tr",{key:`invoice-${t}`},[Mn,v("td",null,f(c(x)(e.created).format("MM/DD/YYYY")),1),v("td",null,[e.period_start?(u(),m("span",wn,f(c(x)(e.period_start).format("MM/DD/YYYY")),1)):(u(),m("span",jn))]),v("td",null,[e.period_end?(u(),m("span",Yn,f(c(x)(e.period_end).format("MM/DD/YYYY")),1)):(u(),m("span",Dn))]),v("td",null,f(c(Me)(e.amount/100)),1),Sn,Pn,v("td",null,[k(f(e.status?"paid":"incomplete"),1),d(" <br /> "),d(" <small>{{ invoice.description_status }}</small> ")])])))),128))])):d("v-if",!0),d(" <tbody\r\n            v-for=\"(payment, key) in paymentsMemberchipsHistory\"\r\n            :key=\"`paymentHistory-${key}`\"\r\n          >\r\n            <tr v-for=\"(p, k) in payment.payments\" :key=\"`pay-${k}`\">\r\n              <td>{{ moment(p.created_at).format('DD/MM/YYYY') }}</td>\r\n              <td>{{ moment(p.created_at).format('HH:mm:ss') }}</td>\r\n              <td>{{ moneda(p.amount) }}</td>\r\n              <td>{{ p.payment_type.name }}</td>\r\n              <td>{{ payment.membership }}</td>\r\n              <td>{{ p.status ? 'succeded' : 'error' }}</td>\r\n            </tr>\r\n          </tbody> ")])])),_:1}),d("v-if",!0)])),_:1})):d("v-if",!0)}}});const Vn=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Charge Invoice History"),v("p")],-1),$n=v("p",null,"Invoices",-1),En={class:"table is-hoverable is-fullwidth"},zn=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Description"),v("th",{scope:"col"},"Created"),v("th",{scope:"col"},"Amount"),v("th",{scope:"col"},"Method"),v("th",{scope:"col"},"Download"),v("th",{scope:"col"},"Status")])],-1),An={key:0},Tn=v("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),Bn={key:1},Fn=v("td",null,"Subscription",-1),qn={key:0},Hn={key:1},Nn={key:0},Ln={key:1},On=v("td",null,"Cash",-1),Rn=v("td",null,[d(' <a :href="invoice.invoice_pdf" target="_blank">\n                  <VButton>\n                    <i class="fas fa-download" aria-hidden="true"></i>\n                  </VButton>\n                </a> ')],-1);var Wn=s({expose:[],setup(e){const t=w({data:[]});return r((()=>D.value.payments)),r((()=>{let e=[];return re.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),i((async()=>{const{data:e}=await ie(Y.value.id,{invoice_type:3});t.data=e.invoices})),(e,s)=>{const n=Ie,l=Ae,i=a,r=Fe;return c(Y)?(u(),m(r,{key:0},{"header-left":p((()=>[Vn])),"header-right":p((()=>[])),content:p((()=>[d(" <memberCreditCard /> "),v(i,{class:"my-4"},{default:p((()=>[$n,v("table",En,[zn,c(Y).subscription&&c(t).data?(u(),m("tbody",An,[(u(!0),m(b,null,h(c(t).data,((e,t)=>(u(),m("tr",{key:`invoice-${t}`},[v("td",null,[v("p",null,f(e.description),1),d(' <span\n                  v-for="(item, keyy) in JSON.parse(invoice.billing_reason)"\n                  :key="`invo-${keyy}`"\n                >\n                  <VTag v-if="item" class="mr-1 mb-1" :label="item" />\n                </span> ')]),d(" <td> "),d(' <VTag class="mr-2" :label="invoice.billing_reason" /> '),d(" </td> "),v("td",null,f(c(x)(e.created).format("MM/DD/YYYY")),1),v("td",null,f(c(Me)(e.total/100)),1),v("td",null,f(e.collection_method),1),v("td",null,[v("a",{href:e.invoice_pdf,target:"_blank"},[v(n,null,{default:p((()=>[Tn])),_:1})],8,["href"])]),v("td",null,[v(l,{class:"mr-1 mb-1",label:e.status},null,8,["label"]),d(' <VTag\n                  class="mr-1 mb-1"\n                  :label="invoice.payments_intents[0].status"\n                /> ')])])))),128))])):c(Y).membership_members&&c(Y).membership_members.invoice_local?(u(),m("tbody",Bn,[(u(!0),m(b,null,h(c(Y).membership_members.invoice_local,((e,t)=>(u(),m("tr",{key:`invoice-${t}`},[Fn,v("td",null,f(c(x)(e.created).format("MM/DD/YYYY")),1),v("td",null,[e.period_start?(u(),m("span",qn,f(c(x)(e.period_start).format("MM/DD/YYYY")),1)):(u(),m("span",Hn))]),v("td",null,[e.period_end?(u(),m("span",Nn,f(c(x)(e.period_end).format("MM/DD/YYYY")),1)):(u(),m("span",Ln))]),v("td",null,f(c(Me)(e.amount/100)),1),On,Rn,v("td",null,[k(f(e.status?"paid":"incomplete"),1),d(" <br /> "),d(" <small>{{ invoice.description_status }}</small> ")])])))),128))])):d("v-if",!0),d(" <tbody\n            v-for=\"(payment, key) in paymentsMemberchipsHistory\"\n            :key=\"`paymentHistory-${key}`\"\n          >\n            <tr v-for=\"(p, k) in payment.payments\" :key=\"`pay-${k}`\">\n              <td>{{ moment(p.created_at).format('DD/MM/YYYY') }}</td>\n              <td>{{ moment(p.created_at).format('HH:mm:ss') }}</td>\n              <td>{{ moneda(p.amount) }}</td>\n              <td>{{ p.payment_type.name }}</td>\n              <td>{{ payment.membership }}</td>\n              <td>{{ p.status ? 'succeded' : 'error' }}</td>\n            </tr>\n          </tbody> ")])])),_:1}),d("v-if",!0)])),_:1})):d("v-if",!0)}}});const Un={},Gn={key:0},Jn={key:1},Kn={key:2};Un.render=function(e,t){const a=bn,s=In,n=Wn,l=tt;return u(),m(l,{selected:"subscription",tabs:[{label:"Subscription Invoice",value:"subscription"},{label:"Product Invoice",value:"product"},{label:"Charge Invoice",value:"charge"}]},{tab:p((({activeValue:e})=>["subscription"===e?(u(),m("div",Gn,[v(a)])):"product"===e?(u(),m("div",Jn,[v(s)])):"charge"===e?(u(),m("div",Kn,[v(n)])):d("v-if",!0)])),_:1})};const Qn=v("div",null,[v("h1",{class:"title is-4 mb-0"}," Waiver "),v("p",null,"Edit member's waiver information")],-1),Xn=k(" Convert to Members "),Zn={class:"columns is-multiline"},el={class:"border-1 document_box p-4 d-flex justify-content-center radius-small"},tl={href:"234",class:"text-center"},al=v("img",{style:{width:"70px"},src:Je,alt:""},null,-1);var sl=s({expose:[],setup(e){const t=o([{name:"Waiver_010221.pdf",url:""},{name:"Waiver_010221.pdf",url:""}]);return(e,a)=>{const s=Ie,n=Fe;return u(),m(n,null,{"header-left":p((()=>[Qn])),"header-right":p((()=>[v(s,{color:"info"},{default:p((()=>[Xn])),_:1})])),content:p((()=>[v("div",Zn,[(u(!0),m(b,null,h(t.value,((e,t)=>(u(),m("div",{class:"column is-2 mb-4",key:`family-${t}`},[v("div",el,[v("a",tl,[al,v("p",null,f(e.name),1)])])])))),128))])])),_:1})}}});const nl=k("Confirm");var ll=s({expose:[],props:{openModal:{type:Boolean,default:!1}},emits:["closeModal","refreshTransactions"],setup(e,{emit:t}){const a=e,s=o(!1),n=async()=>{const e=je(oe.value),a={amount:e.amount,description:e.description};s.value=!0;try{"Add Credit"===e.transaction_type?await ce(Y.value.id,a):await ue(Y.value.id,a),Se(oe.value),we.success("Success"),t("closeModal"),t("refreshTransactions")}catch(n){"string"==typeof n.response.data.message?we.error(n.response.data.message):we.error(n)}finally{s.value=!1}},l=()=>{Se(oe.value),t("closeModal")};return(e,t)=>{const i=Be,r=Ie,o=ze;return u(),m(o,{open:a.openModal,title:"Create a new transaction",size:"small",actions:"right",onClose:l},{content:p((()=>[v(i,{"inputs-step":c(oe)},null,8,["inputs-step"])])),action:p((()=>[v(r,{color:"primary",raised:"",onClick:n,loading:s.value},{default:p((()=>[nl])),_:1},8,["loading"])])),_:1},8,["open"])}}});const il=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Credit History"),v("p",null,"Edit member's credit history")],-1),rl=k(" New Transaction "),ol={class:"title"},cl={class:"mt-4"},ul={class:"table is-hoverable is-fullwidth"},ml=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"ID"),v("th",{scope:"col"},"Description"),v("th",{scope:"col"},"Date"),v("th",{scope:"col"},"Type"),v("th",{scope:"col"},"Amount")])],-1),dl={key:0};var pl=s({expose:[],setup(e){const t=w({open:!1}),s=o(0);i((async()=>{n()}));const n=async()=>{await me(Y.value.id),(async()=>{const{data:e}=await de(Y.value.id);s.value=e.balance})()},l=()=>{t.open=!t.open},r=()=>{t.open=!1};return(e,i)=>{const o=Ie,y=ll,_=a,g=Fe;return c(Y)?(u(),m(g,{key:0},{"header-left":p((()=>[il])),"header-right":p((()=>[v(o,{onClick:l,color:"primary"},{default:p((()=>[rl])),_:1})])),content:p((()=>[v(y,{"open-modal":c(t).open,onCloseModal:r,onRefreshTransactions:n},null,8,["open-modal"]),v("p",ol,"Credit: "+f(s.value)+"$",1),v(_,{class:"p-"},{default:p((()=>[v("div",cl,[v("table",ul,[ml,c(pe)?(u(),m("tbody",dl,[(u(!0),m(b,null,h(c(pe).data,((e,t)=>(u(),m("tr",{key:`transaction-${t}`},[v("td",null,f(e.id),1),v("td",null,f(e.meta.description),1),v("td",null,f(c(x)(e.created_at).format("MM/DD/YYYY")),1),v("td",null,f(e.type),1),v("td",null,f(e.amount),1)])))),128))])):d("v-if",!0)])])])),_:1})])),_:1})):d("v-if",!0)}}});const vl={key:0,class:"columns is-multiline"},fl={class:"column is-3"},bl={class:"column is-9"},hl={class:"columns is-multiline column is-12"},yl={class:"columns is-multiline column is-12"},_l={key:1,class:"columns is-multiline"},gl={class:"column is-3"},kl={class:"column is-9"},xl={class:"d-flex justify-content-between"},Cl=v("b",null,"Member since.",-1),Ml=v("b",null,"Membership Active:",-1),wl={key:0},jl=v("b",null,"Schedules: ",-1),Yl={key:1},Dl=v("b",null,"Due Date: ",-1),Sl={key:2},Pl=v("b",null,"Discount: ",-1),Il={key:0},Vl={key:2},$l={class:"text-right"},El={class:"title is-6 mb-0"},zl={class:"title is-6"},Al={key:0};var Tl=s({expose:[],setup(s){const b=M(),h=n();st.value="Member Profile",j({title:"Members"});const g=o(!1),C=o("personalInformation"),w=e=>{C.value=e.value};l((()=>h.query),((e,t)=>{Object.keys(e).length>0&&(A(),E())}));const P=o("ERROR MEMBERSHIP"),V=o("");l(Y,(e=>{e.sinMembresia&&(P.value="NO MEMBERSHIP",V.value="Please, select a membership"),e.isSolvente||e.sinMembresia||!e.subscription||(P.value=`Membership ${e.subscription.status}`,V.value=e.subscription.latest_invoice&&e.subscription.latest_invoice.payments_intents&&e.subscription.latest_invoice.payments_intents.length>0?`Last payment status : ${e.subscription.latest_invoice.payments_intents[0].status}`:""),e.subscription&&e.subscription.subscription&&!e.subscription.latest_invoice&&(V.value=`Last payment status : ${e.subscription.subscription.status}`),e.membership_members&&e.membership_members.cacelation_date&&(V.value=`Cancel date : ${x(e.membership_members.cacelation_date).format("MM-DD-YYYY")}`)})),l((()=>h.hash),(e=>{C.value=h.hash.slice(1)})),l((()=>h.query.id),(e=>{C.value="personalInformation"}));const $=o(!0),E=()=>{$.value=!0,setTimeout((()=>{$.value=!1}),500)},z=o(null);i((()=>{""!=h.hash&&(C.value=h.hash.slice(1)),Qe().then((e=>{Ye(S,"locations_id",Xe.value),Ye(S,"locations",Xe.value)})),ot().then((e=>{Ye(I,"country_id",e.contries),Ye(I,"city_id",e.cities),Ye(I,"state_id",e.states),Ye(ve,"city_id",e.cities),Ye(ve,"state_id",e.states),Ye(ve,"country_id",e.contries),Ye(Z.value,"city_id",e.cities),Ye(Z.value,"state_id",e.states),Ye(Z.value,"country_id",e.contries)})),We(1).then((e=>{Ye(S,"memberships_id",e.data.memberships)})),nt().then((e=>{Ye(S,"discount",e.data.discounts)})),lt().then((e=>{Ye(S,"recurrences_id",e.data)})),it().then((e=>{Ye(S,"staff_id",e.data)})),null!=h.query.id&&A(),null!=h.query.code&&($.value=!1,ct(h.query.code).then((e=>{z.value=e.data.suscripcion,e.data.suscripcion.member&&(Y.value=e.data.suscripcion.member,b.push({name:"members-profile",query:{id:e.data.suscripcion.member.id},hash:"#susbcriptionIndex"}))})))}));const A=async()=>{await fe(h.query.id).then((e=>{for(var t in e.data)if("select_type"==t)"Individual"==e.data[t]?(Ce(I.value,"select_type").model=!1,Ce(I.value,"company_name").typeInput="hidden"):(Ce(I.value,"select_type").model=!0,Ce(I.value,"company_name").typeInput="text");else if("membership_members"==t)for(var a in e.data[t]||(P.value="Does not have a membership",V.value="Does not have a membership go to the Membership/Contract section and create a new membership and press New Membership",console.error("no posee una membresia :(")),e.data[t])if("memberships_location"==a)e.data[t][a]?(Ce(S,"locations_id").model=e.data[t][a].companies_locations_id,rt([e.data[t][a].companies_locations_id]).then((e=>{Ye(S,"diciplines",e.data)}))):console.error("no posee una locacion :(");else if("diciplines"==a)Ce(S,"diciplines").model=[],e.data[t][a].forEach((e=>{Ce(S,"diciplines").model.push(e.diciplines_id)}));else if("discount"==a)e.data[t][a]&&(Ce(S,"discount").model=e.data[t][a].id);else if("status"==a)2==e.data[t][a]&&(Ce(S,"memberships_id").model="");else if("locations"==a){let s=[];e.data[t][a].length&&e.data[t][a].forEach((e=>{s.push(e.companies_locations_id)})),Ce(S,"locations").model=s}else null!=Ce(S,a)&&Pe(S,a,e.data[t][a]);else if("trainers"==t){let a=[];e.data[t].forEach((e=>{a.push(e.id)})),Pe(S,"staff_id",a)}else if("emergency"==t)for(a in e.data[t])Pe(se,a,e.data[t][a]);else if("guardian"==t)for(a in e.data[t])"parent_address"==a?Ce(Z.value,"address").model=e.data[t][a]:"parent_photo"==a?(""!=e.data[t][a]||null!=e.data[t][a]?Ce(Z.value,"parent_photo").required=!1:Ce(Z.value,"parent_photo").required=!0,Ce(Z.value,"parent_photo").data=e.data[t][a]):Pe(Z,a,e.data[t][a]);else Pe(I,t,"leo_vet_fr"==t?1==e.data[t]:e.data[t]);$.value=!1}))},T=r((()=>{let e="";return Y.value.subscription?(e=Y.value.subscription.subscription&&"active"==Y.value.subscription.subscription.status?"active":Y.value.subscription.status,"active"==Y.value.subscription.status||Y.value.subscription.status,"canceled"==Y.value.subscription.status&&x()<=x(Y.value.membership_members.cacelation_date)&&(e="active")):Y.value.sinMembresia&&(e=Y.value.user&&Y.value.user.pm_last_four?"nomembershipcontarjeta":"nomembership"),e})),B=()=>{$.value=!0,A()};return(s,n)=>{const l=e,i=ft,r=a,o=oa,b=Ae,h=Te,M=da,j=ws,S=Es,P=Fs,I=Rs,E=Xs,A=Un,F=sl,q=pl,H=t,N=at;return u(),m(N,null,{default:p((()=>[$.value?(u(),m("div",vl,[v("div",fl,[v(l,{height:"700px"})]),v("div",bl,[v("div",hl,[v(l,{height:"150px"})]),v("div",yl,[v(l,{height:"530px"})])])])):d("v-if",!0),!$.value&&c(Y)?(u(),m("div",_l,[v("div",gl,[v(i,{style:{position:"sticky",top:"10px"},category:c(Y).category,onChangeMenu:w,class:c(T)},null,8,["category","class"])]),d(" <p>{{ isSolvente }}</p> "),v("div",kl,[c(be)?d("v-if",!0):(u(),m(r,{key:0,class:["\r\n            mb-4\r\n            d-flex\r\n            justify-content-between\r\n            align-items-center\r\n            cardprofile\r\n          ",c(T)]},{default:p((()=>[v("div",null,[v("p",null,f(V.value),1),d(' <small v-if="member.subscription">\r\n              <p>{{ member.subscription.status }}</p>\r\n            </small> ')])])),_:1},8,["class"])),g.value?(u(),m(o,{key:1,class:"mb-4"})):d("v-if",!0),null!=c(Y).membership_members?(u(),m(r,{key:2,class:"mb-4"},{default:p((()=>{var e;return[v("div",xl,[v("div",null,[v("p",null,[v("b",null,[k("Member #"+f(c(Y).id)+" - ",1),v("small",null,f(c(Y).category),1)])]),v("p",null,[v("small",null,[Cl,k(" "+f(c(x)(c(Y).created_at).format("ddd - DD MMM YYYY")),1)])]),v("p",null,[Ml,k(" "+f(c(D).membership.name),1)]),c(Y).subscription&&"schedules"==c(Y).subscription.status?(u(),m("p",wl,[jl,k(" "+f(c(x)(c(Y).membership_members.schedules).format("ddd - DD MMM YYYY")),1)])):(u(),m("p",Yl,[Dl,k(" "+f(c(x)(c(Y).subscription.proxima_factura).format("ddd - DD MMM YYYY")),1)])),(null==(e=c(Y).membership_members)?void 0:e.discount)?(u(),m("p",Sl,[Pl,k(" "+f(c(Y).membership_members.discount.name),1)])):d("v-if",!0)]),c(Y).subscription?(u(),m("div",Il,[v(b,{color:"info",label:c(Y).subscription.status,rounded:""},null,8,["label"])])):d("v-if",!0)])]})),_:1})):d("v-if",!0),"susbcriptionIndex"==C.value?(u(),m(h,{key:3})):d("v-if",!0),y(v(M,{category:c(Y).category},null,8,["category"]),[[_,"personalInformation"==C.value]]),y(v(j,{onReload:B},null,512),[[_,"memberMembership"==C.value]]),"memberFamily"==C.value?(u(),m(S,{key:4})):d("v-if",!0),"memberEmergency"==C.value?(u(),m(P,{key:5})):d("v-if",!0),"memberCheckins"==C.value?(u(),m(I,{key:6})):d("v-if",!0),"memberPurchases"==C.value?(u(),m(E,{key:7})):d("v-if",!0),"memberInvoices"==C.value?(u(),m(A,{key:8})):d("v-if",!0),"memberWaiver"==C.value?(u(),m(F,{key:9})):d("v-if",!0),"memberCredit"==C.value?(u(),m(q,{key:10})):d("v-if",!0)])])):d("v-if",!0),!$.value&&z.value?(u(),m("div",Vl,[v(r,{class:"\r\n          mb-4\r\n          d-flex\r\n          justify-content-between\r\n          align-items-center\r\n          cardprofile\r\n        "},{default:p((()=>[v("div",null,[v(H,{size:"big",initials:"CT"})]),v("div",$l,[v("p",El," Username: "+f(z.value.user.name),1),v("p",zl,"Email: "+f(z.value.user.email),1),v("p",null,f(z.value.memberships_members.paymenttype.name),1),z.value.user.cards.length?(u(),m("p",Al,f(z.value.user.cards[0].brand)+" ****"+f(z.value.user.cards[0].last4),1)):d("v-if",!0)])])),_:1}),v(h,{suscripcion:z.value},null,8,["suscripcion"]),z.value.estado.meses_pagados>0&&!c(Y)?(u(),m(M,{key:0,category:"",suscripcion:z.value,user:z.value.user},null,8,["suscripcion","user"])):d("v-if",!0)])):d("v-if",!0)])),_:1})}}});export default Tl;
