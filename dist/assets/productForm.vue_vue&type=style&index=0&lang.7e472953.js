import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.e4f3f19e.js";import{_ as s}from"./V-Avatar.vue_vue&type=script&setup=true&lang.119fc4d3.js";import{v as t,f as a,n as r,p as o,c as l,_ as c}from"./Companies.88a0ca09.js";import{_ as i}from"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.fc314ba9.js";import{_ as n}from"./V-Tag.vue_vue&type=script&setup=true&lang.62f4b657.js";import{_ as u}from"./V-Card.vue_vue&type=script&setup=true&lang.e9093fe9.js";import{d as p,b as d,o as m,h as f,k as v,j as h,K as b,B as y,J as _,D as g,L as j,N as k,G as w}from"./vendor.685e53b0.js";import{h as $}from"./moment.08a7f518.js";import{i as x,c as A,d as C,e as P,f as E,s as D}from"./Products.8b11034a.js";import{a as V}from"./index.e695d005.js";const Y={class:"title is-4 mb-0"},B=w(" Go Back "),S=w(" Save Changes "),G={class:"columns is-multiline mx-auto"},M={class:"p-6 column is-12"},T=v("h1",{class:"title is-5 mb-0"},"Product Picture",-1),q={class:"d-flex justify-content-center"},z={class:"text-center"},F={class:"column is-12"},J=v("h1",{class:"title is-5"},"Prices",-1),K={class:"table is-hoverable is-fullwidth"},L=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Status"),v("th",{scope:"col"},"Price"),v("th",{scope:"col"},"Create Date"),v("th",{scope:"col"},"User")])],-1),N={class:"w-100 justify-content-center d-flex"},U=w(" Add Price ");var H=p({expose:[],props:{type:{type:String,default:"create"}},setup(p){const w=p,H=y(),I=d((()=>"create"==w.type?{title:"Add a new product",subtitle:"Add information for a new product"}:{title:"Edit product",subtitle:"Edit information for a product"})),O=d((()=>`${V.value}storage/${t(x.value,"photo")}`)),Q=()=>{""!=a(A.value,"price").model?confirm("Are you sure you want to add a new price? This action will disable the previous price and it cannot be restored")&&P(a(A.value,"price").model).then((e=>{r.success("success save"),window.location.reload()})).catch((e=>{for(var s in e.response.data.errores)e.response.data.errores[s].forEach((e=>{r.error(`${s}: ${e}`)}))})):r.error("Price is required")},R=()=>{let e=o(x.value);e.price=a(A.value,"price").model;const s=new FormData;for(var t in e)"locations"==t?e[t].forEach((e=>{s.append("locations[]",e)})):s.append(t,e[t]);console.log(...s),"edit"==w.type&&E(s).then((e=>{r.success(e.data.message),l(x.value),H.back()})).catch((e=>{for(var s in e.response.data.errores)e.response.data.errores[s].forEach((e=>{r.error(`${s}: ${e}`)}))})),"create"==w.type&&D(s).then((e=>{r.success(e.data.message),l(x.value),H.back()})).catch((e=>{for(var s in e.response.data.errores)e.response.data.errores[s].forEach((e=>{r.error(`${s}: ${e}`)}))}))};return(t,a)=>{const r=e,o=s,l=c,d=i,y=n,w=u;return m(),f("div",null,[v(d,null,{"header-left":h((()=>[v("div",null,[v("h1",Y,_(g(I).title),1),v("p",null,_(g(I).subtitle),1)])])),"header-right":h((()=>[v(r,{onClick:a[1]||(a[1]=e=>g(H).back()),class:"mr-3"},{default:h((()=>[B])),_:1}),v(r,{onClick:R,color:"primary"},{default:h((()=>[S])),_:1})])),content:h((()=>[v("div",G,[v("div",M,[T,v("div",q,[v("div",z,[v(o,{picture:g(O),class:"mb-4",size:"xl"},null,8,["picture"]),v(l,{"inputs-step":t.input_image},null,8,["inputs-step"])])])]),v("div",F,[v(l,{"inputs-step":g(x)},null,8,["inputs-step"]),"create"==p.type?(m(),f(l,{key:0,"inputs-step":g(A)},null,8,["inputs-step"])):b("",!0)])])])),_:1}),"edit"==p.type?(m(),f(w,{key:0,class:"mt-4"},{default:h((()=>[J,v("table",K,[L,v("tbody",null,[(m(!0),f(j,null,k(g(C).prices,((e,s)=>(m(),f("tr",{key:`price-${s}`},[v("td",null,[v(y,{color:e.status?"success":"danger",label:e.status?"Active":"Archived",rounded:""},null,8,["color","label"])]),v("td",null,"$"+_(e.price),1),v("td",null,_(g($)(e.created_at).format("MM-DD-YYYY")),1),v("td",null,_(e.user.name),1)])))),128))])]),v("div",N,[v(l,{"inputs-step":g(A)},null,8,["inputs-step"]),v(r,{color:"info",onClick:Q,class:"mt-5 ml-3"},{default:h((()=>[U])),_:1})])])),_:1})):b("",!0)])}}});export{H as _};
