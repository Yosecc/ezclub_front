import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.115c9f56.js";import{_ as t}from"./V-PlaceholderPage.vue_vue&type=script&setup=true&lang.3f0a1890.js";import{_ as s}from"./V-Avatar.vue_vue&type=script&setup=true&lang.b74dc949.js";import{_ as a}from"./V-Checkbox.vue_vue&type=script&setup=true&lang.3090aa96.js";import{_ as i}from"./V-Control.b8a16a92.js";import{_ as l}from"./V-Field.vue_vue&type=script&setup=true&lang.5a5e683f.js";import{_ as n}from"./V-Card.vue_vue&type=script&setup=true&lang.b57414a9.js";import{_ as o}from"./V-Tag.vue_vue&type=script&setup=true&lang.43768b74.js";import{_ as r}from"./V-FlexPagination.vue_vue&type=script&setup=true&lang.8a37085a.js";import{_ as c}from"./subscriptionIndex.vue_vue&type=script&setup=true&lang.e8917920.js";import{_ as u}from"./V-Modal.vue_vue&type=script&setup=true&lang.f91cc122.js";import{d as m,u as p,r as d,b as f,w as v,i as y,j as g,l as b,H as _,k as h,S as k,F as x,I as j,G as Y,O as D,ad as V,A as C,ae as z,U as P,B as S}from"./vendor.84e48f7c.js";import{_ as M,a as w}from"./search-4-dark.12f0bf0d.js";import{b as O}from"./index.160bf48b.js";import{e as q}from"./Members.7ac69455.js";import{t as B,q as $}from"./Subscriptions.cd80af85.js";import{_ as I}from"./V-Loader.vue_vue&type=script&setup=true&lang.a67ef8b7.js";const T={class:"d-flex align-items-center"},A={class:"mb-0 mr-3"},L=Y("Payment Automatic"),E=b("p",{class:"title is-5"}," Please confirm the selection of the following subscriptions. ",-1),F=b("p",{class:"title is-7"}," When confirming, a work queue will be entered to carry out the automatic collections, keep in mind that the change of status or result of the payment attempt may take a few minutes to update. ",-1),R=b("p",{class:"title",style:{"font-size":"15px"}}," Click the confirm button to continue ",-1),U=Y("Confirm");var G=m({expose:[],props:{id_seleccionados:{type:Object,required:!0},suscripciones:{type:Object}},emits:["onPayment"],setup(t,{emit:s}){const a=t;p();const i=d(!1),l=f((()=>{if(Object.keys(a.suscripciones).length){return Object.keys(a.suscripciones).map((function(e){return a.suscripciones[e]})).filter((e=>a.id_seleccionados.data.includes(e.id)))}return[]}));d([]);const n=()=>{i.value=!0},o=d(!1);v((()=>i.value),(e=>{console.log("cambio,modal",e)}));const r=()=>{confirm("This action could result in charges to the member. do you wish to continue?")?(o.value=!0,B({data:a.id_seleccionados}).then((e=>{c(),s("onPayment",{}),o.value=!0})).catch((e=>{c(),s("onPayment",{}),o.value=!0}))):c()},c=()=>{i.value=!1};return(t,s)=>{const m=e,p=Ce,d=I,f=u;return y(),g(k,null,[b("div",T,[b("p",A,"Selected: "+_(a.id_seleccionados.data.length),1),b(m,{onClick:n,color:"primary"},{default:h((()=>[L])),_:1})]),b(f,{title:`Selected Subscription: ${a.id_seleccionados.data.length}`,open:i.value,actions:"center",size:"big",noclose:"",onClose:c},{content:h((()=>[E,F,R,x(l).length?(y(),g(p,{key:0,suscripciones:x(l),filters:"",isselectedmultiple:!1,ispaginator:!1,class:"mt-4"},null,8,["suscripciones"])):j("v-if",!0)])),action:h((()=>[j(' <VButton @click="cash = 0" class="d-flex justify-content-center" raised\r\n        >Reset</VButton\r\n      >'),b(d,{active:o.value},{default:h((()=>[b(m,{color:"success",onClick:r,class:"d-flex justify-content-center",raised:""},{default:h((()=>[U])),_:1})])),_:1},8,["active"])])),_:1},8,["title","open"])],64)}}});const N={key:0,class:"w-100 d-flex mb-4 justify-content-end align-items-center"},W={class:"page-content-inner"},H={class:"tile-grid tile-grid-v1"},J=b("img",{class:"light-image",src:M,alt:""},null,-1),K=b("img",{class:"dark-image",src:w,alt:""},null,-1),Q={class:"\r\n                  tile-grid-item-inner\r\n                  align-items-start\r\n                  justify-content-between\r\n                "},X={key:0},Z={key:0,class:"mb-4 user"},ee={style:{"font-size":"12px"}},te={style:{"font-size":"12px"}},se={key:1,class:"mb-4 member"},ae={style:{"font-size":"12px"}},ie={style:{"font-size":"12px"}},le={key:0},ne={class:"mb-4 description"},oe={key:0,style:{"font-size":"12px"}},re={key:1,class:"title is-5 mb-1"},ce={class:"title is-6"},ue={class:"pago"},me={key:0,style:{"font-size":"12px"}},pe={style:{"font-size":"12px"}},de={key:1,style:{"font-size":"12px"}},fe={key:2,style:{"font-size":"12px"},class:"mb-4"},ve={style:{"font-size":"10px"}},ye=b("b",null," Intent:",-1),ge={key:0,style:{"font-size":"10px"}},be={style:{"font-size":"10px"}},_e={key:4},he=b("p",null,null,-1),ke={class:"d-flex mt-2"},xe={key:0,class:"mr-1"},je={key:1,class:"mr-1"},Ye={key:2,class:"mr-1"},De={key:3,class:"mr-1"},Ve=Y("View member profile ");var Ce=m({expose:[],props:{suscripciones:{type:Array,required:!0,default:[]},name:{type:String,default:"Item"},paginationData:{type:Object,default:{itemPerPage:15,totalItems:1,currentPage:1,maxLinksDisplayed:7}},filters:{type:String},colgrid:{type:String,default:"is-4"},isselectedmultiple:{type:Boolean,default:!1},ispaginator:{type:Boolean,default:!0}},emits:["filterChange","onSearch","onReload"],setup(m,{emit:p}){const M=m;D(),V(),d(""),d("all"),d({});const w=f((()=>M.suscripciones));v((()=>w.value),(e=>{}));const B=d(!1),I=d(null),T=d(null),A=e=>{B.value=!0,e.member&&(I.value=e.member.id),e.member||(T.value=e.code)},L=()=>{B.value=!1,I.value=null};v((()=>M.suscripciones),(()=>{}));const E=d([]);v((()=>E.value),(e=>{0!=e.length?(membersSelected.value=[],w.value.forEach((e=>{membersSelected.value.push(e.id)}))):membersSelected.value=[]}));const F=C({data:[]}),R=()=>{F.data=[],p("onReload")};return(p,d)=>{var f,v;const D=G,V=t,C=s,E=a,U=i,Ce=l,ze=n,Pe=o,Se=r,Me=c,we=e,Oe=u;return y(),g("div",null,[x(F).data.length?(y(),g("div",N,[b(D,{id_seleccionados:x(F),suscripciones:M.suscripciones,onOnPayment:R},null,8,["id_seleccionados","suscripciones"])])):j("v-if",!0),b("div",W,[b("div",H,[b(V,{class:[0!==x(w).length&&"is-hidden"],title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\r\n          search terms you've entered. Please try different search terms or\r\n          criteria.",larger:""},{image:h((()=>[J,K])),_:1},8,["class"]),b(z,{name:"list",tag:"div",class:"columns is-multiline"},{default:h((()=>[j("Grid item"),(y(!0),g(k,null,P(x(w),(e=>(y(),g("div",{key:`${M.name}-${e?e.id:"e"}`,class:["column",m.colgrid],style:{cursor:"pointer"}},[e?(y(),g("div",{key:0,class:["tile-grid-item cardprofile h-100",""],style:{backgroundColor:e.estado.color,overflow:"hidden"}},[b("div",Q,[b("div",{onClick:t=>A(e),class:"tile-grid-item-inner align-items-start"},[e.member?(y(),g("div",X,[b(C,{picture:`${x(O)}storage/${e.member.photo}`,color:"primary",initials:x(q)(e.member.name,e.member.last_name),size:"medium",class:"mr-4 mb-4"},null,8,["picture","initials"])])):j("v-if",!0),b("div",null,[e.member?(y(),g("div",se,[b("p",ae,_(e.member.name)+" "+_(e.member.last_name),1),b("p",ie,_(e.member.email),1)])):(y(),g("div",Z,[b("p",ee," Username: "+_(e.user.name),1),b("p",te," Email: "+_(e.user.email),1)]))])],8,["onClick"]),M.isselectedmultiple?(y(),g("div",le,[b(Ce,{class:"is-flex"},{default:h((()=>[b(U,{raw:"",subcontrol:""},{default:h((()=>[b(E,{modelValue:x(F).data,"onUpdate:modelValue":d[1]||(d[1]=e=>x(F).data=e),value:e.id},null,8,["modelValue","value"])])),_:2},1024)])),_:2},1024)])):j("v-if",!0)]),b("div",{onClick:t=>A(e)},[j(" <p>{{ item.id }}</p> "),b("div",ne,[e.recurrence?(y(),g("p",oe,_(e.recurrence.recurrencia.descriptions),1)):j("v-if",!0),e.membership?(y(),g("p",re,_(e.membership.name),1)):j("v-if",!0),b("p",ce,_(e.estado.estado_pago),1)]),b("div",ue,[e.schedules_start?(y(),g("p",me," Next Schedules Start: "+_(x(S)(e.schedules_start,"YYYY-MM-DD").format("MM-DD-YYYY")),1)):j("v-if",!0),b("p",pe," Next Payment: "+_(x(S)(e.estado.fecha_vencimiento,"YYYY-MM-DD").format("MM-DD-YYYY")),1),e.fecha_suspencion?(y(),g("p",de," Canceled: "+_(x(S)(e.fecha_suspencion,"YYYY-MM-DD").format("MM-DD-YYYY")),1)):j("v-if",!0),e.payment_type?(y(),g("p",fe," Payment Type: "+_(e.payment_type.name),1)):j("v-if",!0),e.estado.ultimo_intento?(y(),g(ze,{key:3,class:"px-3 py-2"},{default:h((()=>[b("p",ve,[b("b",null,"Status: "+_(x($).find((t=>t.value==e.estado.ultimo_intento.estado)).name),1),ye,Y(" "+_(e.estado.ultimo_intento.intento),1)]),"pagado"!=e.estado.ultimo_intento.estado?(y(),g("p",ge,_(e.estado.ultimo_intento.pago_id),1)):j("v-if",!0),b("p",be," Date: "+_(e.estado.ultimo_intento.fecha),1)])),_:2},1024)):(y(),g("div",_e,[he])),b("div",ke,[e.member&&e.member.leo_vet_fr?(y(),g("div",xe,[b(Pe,{label:"LEO",class:"mr-1",color:"orange"})])):j("v-if",!0),e.discount?(y(),g("div",je,[b(Pe,{label:`${e.discount.name}`,class:"mr-1",color:"secondary"},null,8,["label"])])):j("v-if",!0),e.user.cards.length?(y(),g("div",Ye,[b(Pe,{label:"Cards",class:"mr-1",color:"purple"})])):j("v-if",!0),e.auditoria&&e.auditoria.length?(y(),g("div",De,[b(Pe,{label:"i",class:"mr-1"})])):j("v-if",!0)]),j(" <p>{{ item.discount }}</p> ")])],8,["onClick"])],6)):j("v-if",!0)],2)))),128))])),_:1}),j("Table Pagination"),x(w).length>0&&M.ispaginator?(y(),g(Se,{key:0,"item-per-page":null!=(f=M.paginationData.per_page)?f:15,"total-items":null!=(v=M.paginationData.total)?v:0,"current-page":M.paginationData.current_page},null,8,["item-per-page","total-items","current-page"])):j("v-if",!0)])]),j("  "),b(Oe,{open:B.value,size:"big",actions:"center",onClose:L},{content:h((()=>[B.value?(y(),g(Me,{key:0,member_id:I.value,code:T.value},null,8,["member_id","code"])):j("v-if",!0)])),action:h((()=>[I.value?(y(),g(we,{key:0,to:{name:"members-profile",query:{id:I.value}},color:"info",raised:""},{default:h((()=>[Y("View member profile "+_(T.value),1)])),_:1},8,["to"])):j("v-if",!0),T.value?(y(),g(we,{key:1,to:{name:"members-profile",query:{code:T.value}},color:"info",raised:""},{default:h((()=>[Ve])),_:1},8,["to"])):j("v-if",!0)])),_:1},8,["open"])])}}});export{Ce as _};
