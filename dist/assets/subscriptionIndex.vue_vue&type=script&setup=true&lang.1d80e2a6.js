import{_ as e}from"./V-Card.vue_vue&type=script&setup=true&lang.d3d76712.js";import{_ as t}from"./inputsLayaut.vue_vue&type=style&index=0&lang.082bb801.js";import{_ as s}from"./V-Button.vue_vue&type=script&setup=true&lang.940c9f5e.js";import{_ as n}from"./V-Loader.vue_vue&type=script&setup=true&lang.72c1da57.js";import{d as a,r as l,o as i,i as o,j as r,B as c,k as u,l as d,I as p,G as m,S as v,H as f,W as b,_ as y,O as h,c as _,F as k,U as x,L as C,w as g}from"./vendor.b96c0b62.js";import{g as D,a as j,p as Y,m as w,n as M}from"./index.767fa190.js";import{g as V}from"./Discounts.34037752.js";import{g as O}from"./Staffs.cd7a1ea4.js";import{a as P,f as A}from"./Companies.8caab400.js";import{g as S}from"./Diciplines.8c9d5677.js";import{u as L,c as z,h as q,a as N,b as I,i as R,p as E,s as H,r as T,d as U,e as B,g as G,f as $}from"./Subscriptions.891f6c95.js";import{_ as F}from"./V-Modal.vue_vue&type=script&setup=true&lang.793fc7c9.js";import{_ as X}from"./V-SwitchBlock.vue_vue&type=script&setup=true&lang.3ea5d316.js";import{_ as W}from"./V-Control.9f6b030b.js";import{_ as J}from"./V-Field.vue_vue&type=script&setup=true&lang.9839f63b.js";import{_ as K}from"./Presupuesto.vue_vue&type=script&setup=true&lang.89fa5fdd.js";import{s as Q,_ as Z}from"./MemberCards.d4bdc29b.js";import{_ as ee,a as te}from"./subscription-method-payment-cash.vue_vue&type=script&setup=true&lang.2b2a49b6.js";const se=m("Save");var ne=a({expose:[],props:{suscripcion:{type:Object,required:!0}},emits:["reload"],setup(a,{emit:m}){const v=a,f=l(!1),b=l(!1),y=l([{typeInput:"checkboxGroupSimpleEventInput",name:"locations",placeholder:"Locations access",text:"Locations access",required:!0,values:[],model:"",disabled:!1,class:"is-12",isLabel:!0,change:function(e,t){S(this.model).then((e=>{e.data.length&&j(t,"diciplines",e.data)}))},click:function(){}},{typeInput:"DropdownCheckbox",name:"diciplines",text:"Disciplines",placeholder:"Disciplines",required:!1,model:[],values:[],disabled:!1,class:"is-12",isLabel:!0,drop:!1},{typeInput:"selectDataActionChangeInput",name:"discount",placeholder:"Discount",values:[],data:null,model:"",disabled:!1,class:"is-12",isLabel:!0},{typeInput:"DropdownCheckbox",name:"staff_id",placeholder:"Trainer",values:[],model:[],disabled:!1,required:!1,class:"is-12",isLabel:!0,drop:!1},{typeInput:"date",typeInputDefault:"date",name:"fecha_vencimiento",placeholder:"Next payment date",model:"",class:"is-6",isLabel:!0,required:!0},{name:"payment_type_id",typeInput:"selectData",placeholder:"Payment Type",model:"",required:!0,values:[{id:1,name:"Cash"},{id:3,name:"Debit automatic"}],class:"is-6",isLabel:!0,filterOptionText:function(e){return e.name}}]);i((()=>{(async()=>{b.value=!0,D(y.value,"fecha_vencimiento").model=c(v.suscripcion.estado.fecha_vencimiento,"YYYY-MM-DD").format("YYYY-MM-DD"),D(y.value,"payment_type_id").model=v.suscripcion.payment_type_id,v.suscripcion.memberships_members&&v.suscripcion.memberships_members.diciplines.length&&(D(y.value,"diciplines").model=v.suscripcion.memberships_members.diciplines.map((e=>e.diciplines_id))),v.suscripcion.member&&v.suscripcion.member.trainers.length&&(D(y.value,"staff_id").model=v.suscripcion.member.trainers.map((e=>e.staffs_id))),v.suscripcion.discount&&(D(y.value,"discount").model=v.suscripcion.discount.id),await P().then((e=>{if(j(y,"locations",A.value),v.suscripcion&&v.suscripcion.memberships_members&&v.suscripcion.memberships_members.locaciones.length){const e=v.suscripcion.memberships_members.locaciones.map((e=>e.companies_locations_id));D(y.value,"locations").model=e,S(e).then((e=>{e.data.length&&j(y,"diciplines",e.data)}))}})),await V().then((e=>{j(y,"discount",e.data.discounts)})),await O().then((e=>{j(y,"staff_id",e.data)})),b.value=!1})()}));const h=async()=>{const e=Y(y.value);f.value=!0,await L(v.suscripcion.id,e).then((e=>{f.value=!1,m("reload")}))};return(a,l)=>{const i=t,c=s,m=n,v=e;return o(),r(m,{class:"h-100",size:"small",active:b.value},{default:u((()=>[d(v,{class:""},{default:u((()=>[p(" {{ props.suscripcion }} "),d(i,{"inputs-step":y.value},null,8,["inputs-step"]),d(m,{class:"h-100",size:"small",active:f.value},{default:u((()=>[d(c,{color:"primary",onClick:h,size:"small"},{default:u((()=>[se])),_:1})])),_:1},8,["active"])])),_:1})])),_:1},8,["active"])}}});const ae=d("p",null,[d("b",null,"Cancel Suscription")],-1);var le=a({expose:[],props:{suscripcion:{type:Object,required:!0}},emits:["reload"],setup(t,{emit:s}){const a=t,c=l(!1),p=()=>{c.value=!0,z(a.suscripcion.id,{}).then((e=>{c.value=!1,s("reload")})).catch((e=>{c.value=!1}))};return i((()=>{})),(t,s)=>{const a=e,l=n;return o(),r(l,{class:"h-100",size:"small",active:c.value},{default:u((()=>[d(a,{color:"danger",outlined:"",onClick:p,class:"\n        mr-4\n        btn-card\n        text-center\n        px-2\n        h-100\n        d-flex\n        align-items-center\n        justify-content-center\n      ",style:{"font-size":"14px"}},{default:u((()=>[ae])),_:1})])),_:1},8,["active"])}}});const ie=d("p",null,[d("b",null,"HOLD Membership")],-1),oe={key:0},re=m("Active until: "),ce=d("br",null,null,-1),ue=d("label",{for:"hold_date_start"},[d("p",null,"Hold date start")],-1),de=d("label",{for:"hold_date_end"},[d("p",null,"Hold date end")],-1),pe=m("Confirm");var me=a({expose:[],props:{suscripcion:{type:Object,required:!0}},emits:["reload"],setup(t,{emit:a}){const c=t,h=l(!1),_=l(!1),k=l(null),x=l(null),C=()=>{q(c.suscripcion.id,{hold_date_start:k.value,hold_date_end:x.value}).then((e=>{_.value=!1})).catch((e=>{_.value=!1}))};return i((()=>{})),(t,a)=>{const l=e,i=n,g=s,D=F;return o(),r(v,null,[d(i,{size:"small",class:"h-100",active:h.value},{default:u((()=>[d(l,{color:"warning",outlined:null==c.suscripcion.hold_date_end,onClick:a[1]||(a[1]=e=>_.value=!0),class:"\n        mr-4\n        btn-card\n        text-center\n        h-100\n        px-2\n        d-flex\n        align-items-center\n        justify-content-center\n      ",style:{"font-size":"14px"}},{default:u((()=>[ie,d("p",null,[null!=c.suscripcion.hold_date_end?(o(),r("span",oe,[re,ce,m(" "+f(t.moment(c.suscripcion.hold_date_start).format("MM/DD/YYYY"))+" - "+f(t.moment(c.suscripcion.hold_date_end).format("MM/DD/YYYY")),1)])):p("v-if",!0)])])),_:1},8,["outlined"])])),_:1},8,["active"]),d(D,{open:_.value,actions:"center",onClose:a[4]||(a[4]=e=>_.value=!1)},{content:u((()=>[p(" <p>\n                  Hold end date last day of the month prior to the end of the hold\n                </p> "),ue,b(d("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=e=>k.value=e),class:"input mt-2 mb-4"},null,512),[[y,k.value]]),de,b(d("input",{type:"date","onUpdate:modelValue":a[3]||(a[3]=e=>x.value=e),class:"input mt-2 mb-4"},null,512),[[y,x.value]])])),action:u((()=>[d(g,{onClick:C,color:"primary",raised:""},{default:u((()=>[pe])),_:1})])),_:1},8,["open"]),p(' <V-Modal\n              :open="modalShowProrratedHold"\n              actions="center"\n              @close="modalShowProrratedHold = false"\n            >\n              <template #content>\n                <p>Do you want to create an invoice with the prorated amount?</p>\n                <inputsLayaut :inputs-step="isProrrateoHold" />\n\n                <table class="table w-100" v-if="presupuestoProrrateo.total">\n                  <tr>\n                    <td>\n                      Subtotal ({{ presupuestoProrrateo.dias_restantes }}\n                      days)\n                    </td>\n                    <td>{{ moneda(presupuestoProrrateo.subtotal) }}</td>\n                  </tr>\n                  <tr>\n                    <td>Tax</td>\n                    <td>{{ moneda(presupuestoProrrateo.tax) }}</td>\n                  </tr>\n                  <tr>\n                    <td>Total</td>\n                    <td>{{ moneda(presupuestoProrrateo.total) }}</td>\n                  </tr>\n                </table>\n              </template>\n              <template #action>\n                <V-Button @click="onHold" color="primary" raised>Confirm</V-Button>\n              </template>\n            </V-Modal> ')],64)}}});const ve=d("p",null,[d("b",null,"Activate MultiGym")],-1);var fe=a({expose:[],props:{suscripcion:{type:Object,required:!0}},emits:["reload"],setup(t,{emit:s}){const a=t,c=l(!1),p=()=>{c.value=!0,z(a.suscripcion.id,{}).then((e=>{c.value=!1,s("reload")})).catch((e=>{c.value=!1}))};return i((()=>{})),(t,s)=>{const a=e,l=n;return o(),r(l,{class:"h-100",size:"small",active:c.value},{default:u((()=>[d(a,{color:"info",outlined:"",onClick:p,class:"\n        mr-4\n        btn-card\n        text-center\n        px-2\n        h-100\n        d-flex\n        align-items-center\n        justify-content-center\n      ",style:{"font-size":"14px"}},{default:u((()=>[ve])),_:1})])),_:1},8,["active"])}}});const be=d("p",null,[d("b",null,"Upgrade Subscription")],-1);var ye=a({expose:[],props:{suscripcion:{type:Object,required:!0}},emits:["reload"],setup(t,{emit:s}){const a=t,c=l(!1),p=()=>{c.value=!0,z(a.suscripcion.id,{}).then((e=>{c.value=!1,s("reload")})).catch((e=>{c.value=!1}))};return i((()=>{})),(t,s)=>{const a=e,l=n;return o(),r(l,{class:"h-100",size:"small",active:c.value},{default:u((()=>[d(a,{color:"primary",outlined:"",onClick:p,class:"\n        mr-4\n        btn-card\n        text-center\n        px-2\n        h-100\n        d-flex\n        align-items-center\n        justify-content-center\n      ",style:{"font-size":"14px"}},{default:u((()=>[be])),_:1})])),_:1},8,["active"])}}});const he={class:"columns is-multiline"},_e={class:"title is-4"},ke={class:"title is-5 text-left mt-2"},xe={class:"d-flex justify-content-end mb-4"},Ce={key:0},ge={key:1},De=m("Accept and continue ");var je=a({expose:[],props:{suscripcion:{type:Object,default:{}}},emits:["update:modelValue"],setup(a,{emit:c}){const m=a;h();const b=l([]),y=l(!0),C=l(!1),g=l(!1);i((()=>{N().then((e=>{b.value=e.data})),I(1,"membership").then((e=>{j(R,"discount",e.data.discounts)}))}));const Y=_((()=>{const e=b.value.find((e=>e.id==H.memberships_id));return null==e?void 0:e.amounts.filter((e=>e.is_recurrence==y.value&&null!=e.recurrencia))})),V=_((()=>{for(var e in H)null!=D(R.value,e)&&(H[e]=D(R.value,e).model);return H})),O=()=>{E.value=null,g.value=!1,C.value=!0,U(V.value).then((e=>{E.value=e.data,c("update:modelValue",E.value),setTimeout((()=>{window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight),C.value=!1}),300)})).catch((e=>{const t=e.response.data;for(var s in C.value=!1,t)if("object"==typeof t[s]&&"object"==typeof t[s])for(var n in t[s])M.error(t[s][n])}))},P=()=>{g.value=!0;let e=V.value;e.suscripcion_id=m.suscripcion.id,e.email=m.suscripcion.user.email,T(e).then((e=>{window.location.reload()})).catch((e=>{}))};return(a,l)=>{const i=e,c=n,m=X,h=W,_=J,g=t,D=s,j=K;return o(),r(v,null,[d(i,{class:"mb-4"},{default:u((()=>[d(c,{size:"large",active:!b.value.length},{default:u((()=>[d("div",he,[(o(!0),r(v,null,x(b.value,((e,t)=>(o(),r("div",{key:`membership-${t}`,class:"column is-4 btn btn-card",onClick:t=>k(H).memberships_id=e.id},[d(i,{color:k(H).memberships_id==e.id?"primary":void 0,class:"h-100"},{default:u((()=>[d("div",null,[d("h1",_e,f(e.name),1)])])),_:2},1032,["color"])],8,["onClick"])))),128))])])),_:1},8,["active"])])),_:1}),d(i,{class:"mb-4"},{default:u((()=>[d("div",null,[d(_,null,{default:u((()=>[d(h,null,{default:u((()=>[d(m,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=e=>y.value=e),label:"Recurring Subscription",color:"primary"},null,8,["modelValue"])])),_:1})])),_:1}),(o(!0),r(v,null,x(k(Y),((e,t)=>(o(),r("div",{key:`membership-precios-${t}`,class:"btn btn-card",onClick:t=>k(H).recurrences_id=e.id},[d(i,{color:k(H).recurrences_id==e.id?"primary":void 0,class:"mb-3 py-4"},{default:u((()=>[d("p",null,f(e.recurrencia.descriptions),1),d("p",ke,f(k(w)(e.amount)),1)])),_:2},1032,["color"])],8,["onClick"])))),128))])])),_:1}),d(i,{class:""},{default:u((()=>[d(g,{"inputs-step":k(R)},null,8,["inputs-step"])])),_:1}),d("div",xe,[d(c,{size:"large",active:C.value},{default:u((()=>[d(D,{onClick:O,color:k(E)?void 0:"primary",class:"d-flex justify-content-center mt-6 py-5 w-100",style:{"text-align":"center","text-transform":"uppercase","font-size":"20px","font-weight":"900"}},{default:u((()=>[k(E)?(o(),r("span",ge," restart")):(o(),r("span",Ce,"start subscription"))])),_:1},8,["color"])])),_:1},8,["active"])]),k(E)?(o(),r(i,{key:0,class:"mb-4"},{default:u((()=>[d(j,{presupuesto:k(E)},null,8,["presupuesto"])])),_:1})):p("v-if",!0),k(E)?(o(),r(D,{key:1,onClick:P,color:"primary",class:"d-flex justify-content-center py-5 px-6 ml-auto",style:{"text-align":"center","text-transform":"uppercase","font-size":"20px","font-weight":"900"}},{default:u((()=>[De])),_:1})):p("v-if",!0)],64)}}});const Ye={class:"d-flex justify-content-between align-items-start"},we=d("div",null,[d("p",{class:"title is-3"},[d("i",{class:"fas fa-credit-card","aria-hidden":"true"})]),d("p",{class:"title is-5"},"Debit Automatic")],-1),Me={key:0,class:"title is-6"},Ve=d("i",{class:"fas fa-check","aria-hidden":"true"},null,-1),Oe={class:"pb-3 mb-5"},Pe=m(" Sync Cards "),Ae=m("Confirm");var Se=a({expose:[],props:{total:{type:Number,required:!0},user:{type:Object,required:!0}},emits:["onPayment"],setup(t,{emit:a}){const i=t,c=l(!1),m=()=>{null!=h.value?(c.value=!1,a("onPayment",{amount:i.total,payment_type_id:3,payment_method_id:h.value})):M.error("Select card")},f=l(!1),b=l(!0),y=()=>{Q(i.user.id).then((e=>{b.value=!1,setTimeout((()=>{b.value=!0}),100)}))},h=l(null);return(t,a)=>{const l=e,_=s,k=n,x=Z,C=F;return o(),r(v,null,[d(l,{onClick:a[1]||(a[1]=e=>c.value=!0),color:"success",class:"mx-2 btn-card w-100 justify-content-center"},{default:u((()=>[d("div",Ye,[we,(o(),r("p",Me,[Ve]))])])),_:1}),p("  "),d(C,{title:"",size:"big",open:c.value,actions:"center",onClose:a[3]||(a[3]=e=>c.value=!1)},{content:u((()=>[d("div",Oe,[d(k,{size:"large",active:f.value},{default:u((()=>[d(_,{color:"undefined",onClick:y,class:"d-flex justify-content-center",raised:""},{default:u((()=>[Pe])),_:1})])),_:1},8,["active"])]),i.user&&c.value&&b.value?(o(),r(x,{key:0,"show-option":!0,class:"mb-6",modelValue:h.value,"onUpdate:modelValue":a[2]||(a[2]=e=>h.value=e),method_default:i.user.pm_last_four,"show-new-card":!0,user:i.user,"on-new-card-u-r-l":"v2/stripe/setup","add-card-stripe-u-r-l":"v2/stripe/addCard",v2:!0,actions:[]},null,8,["modelValue","method_default","user"])):p("v-if",!0)])),action:u((()=>[d(_,{color:"success",onClick:m,disabled:!h.value,class:"d-flex justify-content-center",raised:""},{default:u((()=>[Ae])),_:1},8,["disabled"])])),_:1},8,["open"])],64)}}});const Le={class:"columns is-multiline",style:{"min-height":"350px"}},ze={class:"column is-3"},qe=d("p",{class:"title is-6 mb-1"},[d("b",null,"Total")],-1),Ne={key:0,class:"title is-3 mb-0"},Ie={key:1,class:"title is-3 mb-0"},Re=d("div",{class:"column is-9"},[p(' <SearchBar class="" v-model="member" /> ')],-1),Ee=m("] "),He={key:0,class:"is-4 column mx-auto"},Te={key:1,class:"is-4 column mx-auto"},Ue={key:2,class:"is-4 column mx-auto"},Be=d("div",{class:"mb-4 column is-12"},[p(' <inputsLayaut :slo="false" class="w-100" :inputs-step="discountInput" /> ')],-1);var Ge=a({expose:[],props:{total:{type:Number,default:0,required:!0},user:{type:Object,default:{},required:!0},suscripcion_id:{type:Number,required:!0},metodos:{type:Array,default:["stripe-debit","cash"]}},emits:["proccessCheckout","reload"],setup(t,{emit:s}){const a=t;h();const i=l(!1),c=e=>{i.value=!0,B(a.suscripcion_id,e).then((e=>{i.value=!1,s("proccessCheckout")})).catch((e=>{if(i.value=!1,s("reload"),"object"==typeof e.response.data)for(var t in e.response.data)if("object"==typeof e.response.data[t])for(var n in e.response.data[t])if("object"==typeof e.response.data[t][n])for(var a in e.response.data[t][n])M.error(e.response.data[t][n][a])}))};return(s,l)=>{const m=e,v=n,b=Se,y=ee,h=te;return o(),r("div",Le,[d("div",ze,[d(v,{size:"small",active:i.value},{default:u((()=>[d(m,{class:"mb-4"},{default:u((()=>[C(s.$slots,"default"),d("div",null,[qe,s.order?(o(),r("p",Ne,f(k(w)(t.total)),1)):(o(),r("p",Ie,f(k(w)(t.total)),1))])])),_:3})])),_:1},8,["active"])]),Re,p(' <div class="column is-12 mb-4">\n      <h1 class="title is-5">Payment methods</h1>\n       <div class="d-flex"> '),Ee,a.metodos.includes("stripe-debit")?(o(),r("div",He,[d(v,{size:"small",active:i.value},{default:u((()=>[d(b,{total:a.total,user:a.user,onOnPayment:c},null,8,["total","user"])])),_:1},8,["active"])])):p("v-if",!0),p('\n        <VCard\n          color="warning"\n          :disabled="cashStatus"\n          @click=";(typePayment = 1), (openModalCash = true), payment"\n          class="mx-2 btn-card w-100 justify-content-center"\n        >\n          <p class="title is-3">\n            <i class="fas fa-money-bill" aria-hidden="true"></i>\n          </p>\n          <p class="title is-5">Cash</p>\n        </VCard>\n\n        <VCard\n          color="info"\n          :disabled="swipeCardStatus"\n          class="mx-2 btn-card w-100 justify-content-center"\n          @click="changeSwipwCard"\n          v-tooltip="!terminales.length ? \'No posee terminales\' : \'\'"\n        >\n          <div class="d-flex justify-content-between align-items-start">\n            <div>\n              <p class="title is-3">\n                <i class="fas fa-money-check-alt" aria-hidden="true"></i>\n              </p>\n              <p class="title is-5">Swipe Card</p>\n            </div>\n            <p v-if="terminalesOoptions" class="title is-6">\n              <i class="fas fa-check" aria-hidden="true"></i>\n            </p>\n          </div>\n        </VCard>\n      </div> '),p(' <div class="is-4 column mx-auto">\n        <VCard\n          style="background: #388e3c"\n          v-if="order"\n          class="mx-2 mx-auto btn-card justify-content-center"\n          @click="openModalRecibo = true"\n        >\n          <div class="d-flex justify-content-between align-items-start">\n            <div>\n              <p class="title is-3">\n                <i\n                  class="fas fa-receipt"\n                  style="color: white !important"\n                  aria-hidden="true"\n                ></i>\n              </p>\n              <p class="title is-5" style="color: white !important">\n                View Order\n              </p>\n            </div>\n            <p v-if="openModalRecibo" class="title is-6">\n              <i class="fas fa-check" aria-hidden="true"></i>\n            </p>\n          </div>\n        </VCard>\n      </div> '),p(" Terminales "),p(' <div class="mt-4 mx-2" v-if="terminalesOoptions">\n        <div\n          v-for="(terminal, key) in terminales"\n          :key="`terminal-${key}`"\n          class="columns is-multiline"\n        >\n          <div class="column">\n            <VCard\n              class="p-4 btn-card"\n              :class="paymentIntent && terminal_id == terminal.id ? \'is-3\' : \'\'"\n              :disabled="paymentIntent && terminal_id == terminal.id"\n              :color="terminal_id == terminal.id ? \'info\' : \'\'"\n              @click="paymentSwipeCard(terminal.id)"\n            >\n              <p class="title is-1">\n                <i class="lnir lnir-postcard" aria-hidden="true"></i>\n              </p>\n              <p class="title is-5">{{ terminal.label }}</p>\n              <p>Serial number: {{ terminal.serial_number }}</p>\n              <p>Status: {{ terminal.status }}</p>\n            </VCard>\n          </div>\n\n          <div\n            v-if="paymentIntent && terminal_id == terminal.id"\n            class="column flex-column d-flex justify-content-between is-3"\n          >\n            <VCard\n              color="danger"\n              class="mb-2 btn-card d-flex justify-content-center"\n              @click="oncancelPayment()"\n            >\n              <p class="title is-5">Cancel Payment</p>\n            </VCard>\n            <VCard\n              color="warning"\n              class="btn-card d-flex justify-content-center"\n              @click="onretryPayment()"\n            >\n              <p class="title is-5">Retry Payment</p>\n            </VCard>\n          </div>\n\n          <div\n            v-if="paymentIntent && terminal_id == terminal.id"\n            class="column is-5"\n          >\n            <VCard\n              color="success"\n              class="\n                btn-card\n                h-100\n                d-flex\n                justify-content-center\n                align-items-center\n              "\n              @click="onfinishPayment()"\n            >\n              <p class="title is-3">Finish payment</p>\n            </VCard>\n          </div>\n        </div>\n      </div> '),p("  "),a.metodos.includes("stripe-checkout")?(o(),r("div",Te,[d(v,{size:"small",active:i.value},{default:u((()=>[d(y,{total:a.total,onOnPayment:c},null,8,["total"])])),_:1},8,["active"])])):p("v-if",!0),a.metodos.includes("cash")?(o(),r("div",Ue,[d(v,{size:"small",active:i.value},{default:u((()=>[d(h,{total:a.total,onOnPayment:c},null,8,["total"])])),_:1},8,["active"])])):p("v-if",!0),p(" // "),p(' <shopping-checkout-debit-automatic v-if="showOptionsDebit" /> '),p(" </div> "),Be,p(' <shopping-send-recibo v-model="openModalRecibo" /> ')])}}});const $e=d("p",{class:"title is-5"},"Payments",-1),Fe={class:"table is-hoverable is-fullwidth"},Xe=d("thead",null,[d("tr",null,[d("th",{scope:"col"},"Date"),d("th",{scope:"col"},"Type"),d("th",{scope:"col"},"Description"),d("th",{scope:"col"},"Status"),d("th",{scope:"col"},"Amount"),d("th",{scope:"col"},"Action")])],-1),We=d("td",null,"Suscription",-1);var Je=a({expose:[],props:{payments:{type:Number,required:!0}},setup:t=>(s,n)=>{const a=e;return o(),r("div",null,[d(a,{class:"mb-4 -flex justify-content-between align-items-center cardprofile"},{default:u((()=>[d("div",null,[$e,d("table",Fe,[Xe,d("tbody",null,[(o(!0),r(v,null,x(t.payments,((e,t)=>(o(),r("tr",{key:`payment-${t}`},[d("td",null,f(k(c)(e.created_at).format("MM-DD-Y")),1),d("td",null,f(e.payment_type.name),1),We,d("td",null,f(e.status_description)+" / "+f(e.status),1),d("td",null,f(e.amount),1),d("td",null,[d("a",{href:e.url_pdf,target:"_blank",rel:"noopener noreferrer"},"View Pdf",8,["href"])])])))),128))])])])])),_:1})])}});const Ke={key:0},Qe={class:"d-flex justify-content-between"},Ze={class:"title is-5 mb-0"},et=m("Membership: "),tt=m(" Current billing location: "),st={class:"title is-4 mb-0"},nt={class:"text-right"},at=d("b",null,"Payment Method:",-1),lt={key:0},it={key:0,class:"title is-4 mb-0"},ot=d("br",null,null,-1),rt={key:1,class:"title is-4 mb-0"},ct=d("br",null,null,-1),ut={key:2,class:"title is-6"},dt=d("br",null,null,-1),pt={key:1},mt=d("p",null,"no tiene presupuesto",-1),vt={class:"d-flex flex-row mt-4"},ft={class:"mr-3"},bt=d("b",null,"Consultation date: ",-1),yt={class:"mr-3"},ht=d("b",null,"Month: ",-1),_t={key:0,class:"mr-3"},kt=d("b",null,"Start: ",-1),xt={class:"mr-3"},Ct=d("b",null,"Next payment date: ",-1),gt={key:1,class:"mr-3"},Dt=d("b",null,"Cancellation Date: ",-1),jt={key:2,class:"mr-3"},Yt=d("b",null,"Last payment attempt: ",-1),wt={key:3,class:"mr-3"},Mt=d("b",null,"Status Last payment attempt: ",-1),Vt={key:4,class:"d-flex"},Ot={class:"mr-3"},Pt=d("b",null,"Months late: ",-1),At={class:"mr-3"},St=d("b",null,"Days late: ",-1),Lt={class:"mr-3"},zt=d("b",null,"Hours late: ",-1),qt={key:1,class:"columns"},Nt={class:"column is-8 pt-0"},It={class:"column is-4"},Rt={class:"column is-12"},Et={class:"column is-12"},Ht={class:"column is-12"},Tt={class:"column is-12"},Ut={key:3};var Bt=a({expose:[],props:{suscripcion:{type:Object,default:null},member_id:{type:Number,default:null},code:{type:String,default:null}},setup(t){const s=t,n=h(),a=l(null);l(!1);const v=()=>{let e=null;n.query.id&&(e=n.query.id),s.member_id&&(e=s.member_id),console.log(e,s.code),null==e&&s.code?G(s.code).then((e=>{a.value=e.data.suscripcion})):$(e).then((e=>{a.value=e.data.suscripcion}))},b=_((()=>s.suscripcion?s.suscripcion:a.value));i((()=>{v()})),g((()=>s.member_id),(()=>{v()}));const y=()=>{v()};return(t,s)=>{const n=e,a=ne,l=le,i=me,h=fe,_=ye,x=je,C=Ge,g=K,D=Je;return k(b)?(o(),r("div",Ke,[k(b)?(o(),r(n,{key:0,class:"mb-5",style:{background:k(b).estado.color}},{default:u((()=>[d("div",Qe,[d("span",null,[d("p",Ze," ESTADO : "+f(k(b).estado.estado_pago),1),d("p",null,[d("small",null,[et,d("small",null,[tt,d("b",null,f(k(b).memberships_members.location.name),1)])])]),d("p",st,f(k(b).membership.name),1),d("p",null,f(k(b).recurrence.recurrencia.descriptions),1)]),d("span",nt,[d("p",null,[d("small",null,[at,m(" "+f(k(b).memberships_members.paymenttype.name),1)])]),d("p",null,[d("small",null,f(k(b).recurrence.is_recurrence?"Recurrence":"no recurrence"),1)]),k(b).presupuesto?(o(),r("span",lt,[k(b).discount?(o(),r("p",rt,[m(f(k(w)(k(b).presupuesto.total)),1),ct])):(o(),r("p",it,[m(f(k(w)(k(b).presupuesto.recurrente)),1),ot])),k(b).discount?(o(),r("p",ut,[d("small",null,f(k(b).discount.name),1),m(" : "+f(k(w)(k(b).presupuesto.total)),1),dt])):p("v-if",!0)])):(o(),r("span",pt,[mt]))])]),d("div",vt,[d("p",ft,[bt,m(" "+f(k(c)(k(b).estado.fecha_validacion,"YYYY-MM-DD").format("MM-DD-YYYY")),1)]),d("p",yt,[ht,m(" "+f(k(b).estado.meses_pagados),1)]),k(b).schedules_start?(o(),r("p",_t,[kt,m(" "+f(k(c)(k(b).schedules_start,"YYYY-MM-DD").format("MM-DD-YYYY")),1)])):p("v-if",!0),d("p",xt,[Ct,m(" "+f(k(c)(k(b).estado.fecha_vencimiento,"YYYY-MM-DD").format("MM-DD-YYYY")),1)]),k(b).estado.fecha_suspencion?(o(),r("p",gt,[Dt,m(" "+f(k(c)(k(b).estado.fecha_suspencion,"YYYY-MM-DD").format("MM-DD-YYYY")),1)])):p("v-if",!0),k(b).memberships_members.payments.length?(o(),r("p",jt,[Yt,m(" "+f(k(c)(k(b).memberships_members.payments[0].created_at).format("MM-DD-YYYY")),1)])):p("v-if",!0),k(b).memberships_members.payments.length?(o(),r("p",wt,[Mt,m(" "+f(k(b).memberships_members.payments[0].status)+" / "+f(k(b).memberships_members.payments[0].status_description),1)])):p("v-if",!0),"VENCIDO"==k(b).estado.estado_pago?(o(),r("div",Vt,[d("p",Ot,[Pt,m(" "+f(k(b).estado.meses_retraso),1)]),d("p",At,[St,m(" "+f(k(b).estado.dias_retraso),1)]),d("p",Lt,[zt,m(" "+f(k(b).estado.horas_retraso),1)])])):p("v-if",!0)])])),_:1},8,["style"])):p("v-if",!0),["PROX. CANCELADO","CANCELADO"].includes(k(b).estado.estado_pago)?p("v-if",!0):(o(),r("div",qt,[d("div",Nt,[d(a,{suscripcion:k(b),onReload:v},null,8,["suscripcion"])]),d("div",It,["CANCELADO"!=k(b).estado.estado_pago?(o(),r(n,{key:0,class:"columns is-multiline p-1"},{default:u((()=>[d("div",Rt,[d(l,{suscripcion:k(b),onReload:v},null,8,["suscripcion"])]),d("div",Et,[d(i,{suscripcion:k(b),onReload:v},null,8,["suscripcion"])]),d("div",Ht,[d(h,{suscripcion:k(b),onReload:v},null,8,["suscripcion"])]),p(' <div class="column is-12">\n            <subscription-action-send-email\n              :suscripcion="suscripcionComputed"\n              @reload="onGetSuscripcion"\n            />\n          </div> '),d("div",Tt,[d(_,{suscripcion:k(b),onReload:v},null,8,["suscripcion"])])])),_:1})):p("v-if",!0)])])),k(b)&&["CANCELADO","PROX. CANCELADO"].includes(k(b).estado.estado_pago)?(o(),r(x,{key:2,modelValue:k(b).presupuesto,"onUpdate:modelValue":s[1]||(s[1]=e=>k(b).presupuesto=e),suscripcion:k(b)},null,8,["modelValue","suscripcion"])):p("v-if",!0),["CANCELADO","PROX. CANCELADO"].includes(k(b).estado.estado_pago)?p("v-if",!0):(o(),r("div",Ut,[k(b)&&k(b).presupuesto&&"PAGADO"!=k(b).estado.estado_pago?(o(),r(C,{key:0,total:k(b).presupuesto.total,user:k(b).user,suscripcion_id:k(b).id,onProccessCheckout:y,onReload:v},null,8,["total","user","suscripcion_id"])):p("v-if",!0),k(b)&&k(b).presupuesto&&"PAGADO"!=k(b).estado.estado_pago?(o(),r(n,{key:1},{default:u((()=>[d(g,{presupuesto:k(b).presupuesto},null,8,["presupuesto"])])),_:1})):p("v-if",!0)])),k(b)&&"CANCELADO"!=k(b).estado.estado_pago?(o(),r(D,{key:4,payments:k(b).memberships_members.payments},null,8,["payments"])):p("v-if",!0)])):p("v-if",!0)}}});export{Bt as _};
