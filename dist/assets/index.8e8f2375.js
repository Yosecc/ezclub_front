import{_ as e}from"./V-Placeload.982e0955.js";import{_ as t}from"./V-Avatar.vue_vue&type=script&setup=true&lang.471307b0.js";import{_ as a}from"./V-Card.vue_vue&type=script&setup=true&lang.1618d39e.js";import{d as l,L as s,w as n,H as i,c as r,r as o,D as u,o as c,i as m,G as d,j as p,k as v,F as h,Q as f,R as b,S as _,U as y,a9 as g,E as x,z as k,Y as M,K as j,O as C}from"./vendor.512b7acb.js";import{m as w,i as S,a as P,b as D,s as $,c as Y,p as V,d as I,e as E,f as F,h as T,j as A,k as q,l as N,n as z,o as L,q as B,r as H,t as W,u as O,v as R,w as U,x as G,y as K,z as Q}from"./Members.a418ea8a.js";import{b as J,P as X,A as Z,F as ee,c as te,v as ae,g as le,m as se,n as ne,p as ie,f as re,a as oe,s as ue}from"./index.fa2868cb.js";import{_ as ce}from"./V-Button.vue_vue&type=script&setup=true&lang.667d2417.js";import{_ as me}from"./V-Loader.vue_vue&type=script&setup=true&lang.82fbf6e3.js";import{_ as de}from"./V-Control.5136ae9f.js";import{_ as pe}from"./V-Field.vue_vue&type=script&setup=true&lang.5cc17432.js";import{_ as ve}from"./V-Modal.vue_vue&type=script&setup=true&lang.b069e1cd.js";import{_ as he}from"./inputsLayaut.vue_vue&type=style&index=0&lang.b5a3a3a2.js";import{_ as fe}from"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.2808a08d.js";import{_ as be}from"./MemberCards.vue_vue&type=script&setup=true&lang.c9e34979.js";import{_ as _e}from"./signComponent.vue_vue&type=script&setup=true&lang.dc933d90.js";import{_ as ye}from"./pdf_icon.3322afd7.js";import{_ as ge}from"./FlexTableDropdown.vue_vue&type=script&setup=true&lang.82c0c51e.js";import{_ as xe}from"./V-Block.vue_vue&type=script&setup=true&lang.7ac5b30d.js";import{_ as ke}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.89cc6b21.js";import{p as Me}from"./sidebarLayoutState.08ab8119.js";import{g as je}from"./Discounts.f5abcbf1.js";import{a as Ce}from"./Memberships.38ff175e.js";import{g as we,r as Se}from"./Recurrences.100a5bec.js";import{h as Pe}from"./Staffs.8d9da3eb.js";import{a as De}from"./Diciplines.39f84b46.js";import{e as $e}from"./config.ebd4e74b.js";import{b as Ye,d as Ve}from"./Companies.153102da.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.65c51667.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.ba945660.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.8ff326ca.js";import"./V-Dropdown.b805b674.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.f78f5288.js";import"./useDropdown.10df4d81.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.913acdcb.js";import"./activePanelState.53d13aa7.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.65aad7e6.js";import"./V-Message.vue_vue&type=script&setup=true&lang.4f410568.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.14f85ffe.js";import"./navbarLayoutState.a9abea7f.js";import"./video.81ca49e0.js";import"./darkModeState.8ae54720.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.c6af2930.js";import"./AnimatedLogo.afd186e6.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.33fcd2c5.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.9114be65.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.9d07b6d1.js";const Ie={class:"d-flex justify-content-center align-items-center flex-column mb-4"},Ee={class:"mt-5 text-center"},Fe={class:"title is-5 is-narrow"},Te={class:"w-100 mt-5"},Ae=v("i",{class:"iconify",style:{"font-size":"20px",color:"white"},"data-icon":"feather:arrow-right","aria-hidden":"true"},null,-1);var qe=l({expose:[],props:{category:{type:String,default:"Adult"}},emits:["changeMenu"],setup(e,{emit:l}){const _=e,y=s();n((()=>y.hash),(e=>{M.value=g.findIndex((e=>e.component==y.hash.slice(1)))})),i((()=>{""!=y.hash&&(M.value=g.findIndex((e=>e.component==y.hash.slice(1))))}));const g=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Family Members",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"}],x=[{name:"Personal Information",component:"personalInformation"},{name:"Waiver",component:"memberWaiver"}],k=r((()=>["Adult","Minor"].includes(_.category)?g:x)),M=o(0),j=o(null),C=r((()=>null!=k.value[M.value]?k.value[M.value].component:j.value));return(e,s)=>{const n=t,i=a;return u(w)?(c(),m(i,{key:0,color:u(S)?void 0:"danger"},{default:p((()=>[v("div",Ie,[v(n,{picture:`${u(J)}storage/${u(w).photo}`,size:"xl"},null,8,["picture"]),v("div",Ee,[d(" <p>{{ member }}</p> "),v("h2",Fe,h(u(w).name)+" "+h(u(w).second_name)+" "+h(u(w).last_name),1)])]),v("div",Te,[v("ul",null,[(c(!0),m(f,null,b(u(k),((e,t)=>(c(),m("li",{key:`item-${t}`},[v(i,{class:["\n              mb-3\n              item_menu\n              d-flex\n              justify-content-between\n              align-items-center\n            ",M.value==t?"active":""],color:M.value==t?"warning":void 0,elevated:M.value==t,onClick:e=>(e=>{M.value=e,l("changeMenu",C)})(t)},{default:p((()=>[v("p",null,h(e.name),1),Ae])),_:2},1032,["class","color","elevated","onClick"])])))),128))])])])),_:1},8,["color"])):d("v-if",!0)}}});const Ne=v("div",{id:"payment-element"},[d("Stripe.js injects the Payment Element")],-1),ze=x(" Pay now "),Le=v("div",{id:"payment-message",class:"hidden"},null,-1);var Be=l({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},setup(t){const l=t,s=Stripe(X.value);n((()=>l.id),(e=>{console.log("cambio"),u.value=!0,j()}));const u=o(!0);o({id:l.id,amount:l.amount});const h=o(),b=r((()=>"stripe"!=l.url?{payment_type_id:3,amount:l.amount}:{id:l.id,member_mermship_id:l.member_membership,amount:l.amount,payment_type_id:1})),x=o(null),k=o(null),M=o(!1),j=async()=>{let e=await Z.post(l.url,b.value).then((e=>{x.value=e.data.clientSecret,h.value=s.elements({clientSecret:x.value}),k.value=h.value.create("payment"),k.value.mount("#payment-element")})).catch((e=>{}));return u.value=!1,e},C=async e=>{e.preventDefault(),M.value=!0,await s.confirmPayment({elements:h.value,confirmParams:{return_url:`${ee.value}members/process?payment_type=3&id=`+l.id+`&membership=${l.member_membership}`}}),M.value=!1};return i((()=>{j()})),(t,l)=>{const s=e,n=ce,i=me,r=a;return c(),m(f,null,[u.value?(c(),m(s,{key:0,height:"500px"})):d("v-if",!0),_(v(r,{class:"mt-6"},{default:p((()=>[d(" <p>{{ memberMermship }}</p> "),v("form",{onSubmit:g(C,["prevent"]),id:"payment-form"},[d(' <input id="card-holder-name" type="text"> '),Ne,d(' <button id="submit">\n        <div class="spinner hidden" id="spinner"></div>\n        <span id="button-text">Pay now</span>\n      </button> '),v(i,{size:"small",active:M.value},{default:p((()=>[v(n,{id:"submit",class:"mt-4",color:"success"},{default:p((()=>[ze])),_:1})])),_:1},8,["active"]),Le],40,["onSubmit"])])),_:1},512),[[y,!u.value]])],64)}}});const He={class:"table is-hoverable is-striped is-fullwidth"},We=v("th",{scope:"col"},"Members",-1),Oe=v("th",{scope:"col"},"Membership Name",-1),Re=v("th",{scope:"col"},"Recurrence",-1),Ue=v("th",{scope:"col"},"Prorated",-1),Ge=v("th",{scope:"col"},"Membership Cost",-1),Ke=v("th",{scope:"col"},"Initiation Fee",-1),Qe=v("th",{scope:"col"},"Discount",-1),Je=v("th",{scope:"col"},"Taxes",-1),Xe={key:0,scope:"col"},Ze=v("th",{scope:"col"},"Sub Total",-1),et={key:0},tt={key:0},at={key:1},lt={key:2},st={key:0},nt=v("br",null,null,-1),it={key:1},rt={key:0},ot={key:1},ut={key:0},ct={key:0},mt={key:1},dt={key:1},pt={key:3},vt={class:"is-end"},ht={class:"d-flex justify-content-between"},ft=x(" Card Payment "),bt=x(" Cash Payment "),_t={class:"d-flex mb-4 justify-content-between"},yt={class:"title is-5"},gt=x(" Total: "),xt={class:"title is-5"},kt=x(" Cash Total: "),Mt={class:"\n            d-flex\n            justify-content-center\n            align-items-center\n            flex-column\n            mb-4\n          "},jt=v("p",{class:"title is-5 mb-4"},"Change Back:",-1),Ct={class:"title is-3 mb-0"},wt={class:"d-flex justify-content-center flex-wrap mb-4"},St=v("div",{class:"w-100"},null,-1),Pt={class:"d-flex justify-content-center"},Dt=x("Reset"),$t=x("Confirm");var Yt=l({expose:[],setup(e){o(!1);const t=o(!1);i((()=>{console.log("se monto el payment")}));const l=r((()=>{let e=te(D.value,"memberships_id");return null!=e?e:[]})),s=r((()=>{let e=te(D.value,"recurrences_id");return null!=e?e:[]})),n=r((()=>{let e=ae(D.value,"initiation_fee");return null!=e?e:[]})),y=r((()=>{let e=le(D.value,"discount");return null!=e?e:[]})),g=r((()=>{let e=parseFloat(k().format("DD")),t=0,a=0;return s.value.days>=30&&(a=e-s.value.payday,t=s.value.amount/s.value.days*a),{days:a,amount:Math.abs(Math.round(t))}})),j=r((()=>(e=>{if(""!=ae(D.value,"memberships_id"))return"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:se(e.tax.value),value:e.tax.value}})(l))),C=o(null),S=r((()=>{let e=0;return e+=s.value.amount,ae(D.value,"is_initiation_fee").length||(e+=n.value),e-=g.value.amount,y.value.data&&("dolar"==y.value.data.type?e-=y.value.data.value:"percentaje"==y.value.data.type&&(e-=e/100*y.value.data.value)),e+=e/100*j.value.value,w.value.penalty&&(C.value=l.value.penalty,e+=C.value),w.value.leo_vet_fr&&(e-=e/100*l.value.descuento_vet),e})),Y=r((()=>{let e=0;return e+=S.value,e})),V=o(!1),I=o(0),E=r((()=>{const e=parseFloat(I.value)-parseFloat(Y.value);return e>0?e:0}));o(1);const F=async()=>{await $(P.value.id,{total:Y.value,payment_type_id:1,cash:I.value,cash_back:E.value}).then((e=>{ne.success("Payment Success"),window.location.reload()})).catch((e=>{}))};return(e,i)=>{const r=ce,o=a,k=Be,$=de,T=pe,A=ve;return c(),m("div",null,[v(o,{class:""},{default:p((()=>{return[v("table",He,[v("thead",null,[v("tr",null,[We,Oe,Re,Ue,Ge,Ke,Qe,Je,C.value?(c(),m("th",Xe,"Penalty")):d("v-if",!0),Ze])]),0!=u(l).length?(c(),m("tbody",et,[v("tr",null,[v("td",null,[v("p",null,[v("b",null,h(u(w).name)+" "+h(u(w).second_name)+" "+h(u(w).last_name),1)])]),0!=u(l).legnth?(c(),m("td",tt,h(u(l).name),1)):d("v-if",!0),0!=u(s).length?(c(),m("td",at,h(u(s).descriptions),1)):d("v-if",!0),0!=u(s).length?(c(),m("td",lt,[u(s).days>=30?(c(),m("span",st,[x(h(u(g).days)+" days : ",1),nt,x(" - "+h(u(se)(u(g).amount)),1)])):(c(),m("span",it,"-"))])):d("v-if",!0),v("td",null,h(u(se)((e=u(s),e.amount))),1),v("td",null,[u(ae)(u(D),"is_initiation_fee").length?(c(),m("span",ot,h(u(se)(0)),1)):(c(),m("span",rt,h(u(se)(u(n))),1))]),v("td",null,[null!=u(y).data?(c(),m("span",ut,["dolar"==u(y).data.type?(c(),m("span",ct," - "+h(u(se)(u(y).data.value)),1)):d("v-if",!0),"percentaje"==u(y).data.type?(c(),m("span",mt,h(u(y).data.value)+"%",1)):d("v-if",!0)])):(c(),m("span",dt,"-"))]),v("td",null,h(u(j).text),1),C.value?(c(),m("td",pt,h(u(se)(C.value)),1)):d("v-if",!0),v("td",null,h(u(se)(u(S))),1)]),v("tr",null,[v("td",{style:{"text-align":"right"},colspan:C.value?"9":"8"}," Total ",8,["colspan"]),v("td",vt,h(u(se)(u(Y))),1)])])):d("v-if",!0)]),v("div",ht,[v(r,{color:"success",disabled:0==u(l).length||isNaN(u(Y)),onClick:i[1]||(i[1]=e=>t.value=!0)},{default:p((()=>[ft])),_:1},8,["disabled"]),v(r,{disabled:0==u(l).length||isNaN(u(Y)),color:"warning",onClick:i[2]||(i[2]=e=>V.value=!0)},{default:p((()=>[bt])),_:1},8,["disabled"])])];var e})),_:1}),t.value?(c(),m(k,{key:0,class:"",url:`new_payment/${u(P).id}`,amount:u(Y),id:u(w).id,member_membership:u(P).id},null,8,["url","amount","id","member_membership"])):d("v-if",!0),v(A,{open:V.value,actions:"center",onClose:i[6]||(i[6]=e=>V.value=!1)},{content:p((()=>[v("div",_t,[v("p",yt,[gt,v("b",null,h(u(se)(u(Y))),1)]),v("p",xt,[kt,v("b",null,h(u(se)(I.value)),1)])]),v("div",Mt,[jt,v("p",Ct,[v("b",null,h(u(se)(u(E))),1)])]),v("div",wt,[v(r,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:i[3]||(i[3]=e=>I.value=u(Y))},{default:p((()=>[x(" Full Payment "+h(u(se)(u(Y))),1)])),_:1}),St,(c(),m(f,null,b([5,10,20,50,100],((e,t)=>v(r,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>I.value+=e},{default:p((()=>[x(" $"+h(e),1)])),_:2},1032,["onClick"]))),64))]),v("div",Pt,[v(T,null,{default:p((()=>[v($,null,{default:p((()=>[_(v("input",{"onUpdate:modelValue":i[4]||(i[4]=e=>I.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[M,I.value]])])),_:1})])),_:1})])])),action:p((()=>[v(r,{onClick:i[5]||(i[5]=e=>I.value=0),class:"d-flex justify-content-center",raised:""},{default:p((()=>[Dt])),_:1}),v(r,{color:"success",onClick:F,disabled:u(Y)>I.value,class:"d-flex justify-content-center",raised:""},{default:p((()=>[$t])),_:1},8,["disabled"])])),_:1},8,["open"])])}}});const Vt=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Personal Information"),v("p",null,"Edit member's personal information")],-1),It=x(" Save Changes "),Et=x(" Convert to Members ");var Ft=l({expose:[],props:{category:{type:String,default:"Adult"}},setup(e){const t=e;r((()=>"Prospect"==t.category));const a=()=>{let e=ie(Y.value),t=new FormData;for(var a in e)"id_leo_vet_fr"==a?null==e[a]&&t.append(a,0):t.append(a,e[a]);V(t).then((e=>{ne.success("Edit Success")}))};return(e,l)=>{const s=ce,n=he,i=fe;return c(),m(i,null,{"header-left":p((()=>[Vt])),"header-right":p((()=>[v(s,{onClick:a,color:"primary"},{default:p((()=>[It])),_:1}),"Prospect"==t.category?(c(),m(s,{key:0,color:"info",class:"ml-3"},{default:p((()=>[Et])),_:1})):d("v-if",!0)])),content:p((()=>[d(' <div class="p-6">\r\n        <h1 class="title is-5 mb-0">Profile Picture</h1>\r\n        <p>This is how other will recognize the member</p>\r\n        <div class="d-flex justify-content-center">\r\n          <div class="text-center">\r\n            <VAvatar picture="https://picsum.photos/150/151" class="mb-4" size="xl"/>\r\n            <inputsLayaut\r\n              :inputs-step="input_image"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div> '),v(n,{"inputs-step":u(Y)},null,8,["inputs-step"])])),_:1})}}});const Tt={class:"w-100 d-flex justify-content-end"},At=x("Back"),qt=v("div",{id:"payment-element"},[d("Stripe.js injects the Payment Element")],-1),Nt=x("Pay now "),zt=v("div",{id:"payment-message",class:"hidden"},null,-1);var Lt=l({expose:[],props:{clientSecret:{type:String,required:!0},membership_member_id:{type:Number,required:!0},pm_last_four:{type:String,required:""}},emits:["PaymentAction"],setup(t,{emit:l}){const s=t,r=Stripe(X.value);n((()=>s.clientSecret),(e=>{C()}));const u=o(),h=o(null),b=o(!1),x=o(null),k=o(!1),j=o(!0),C=async()=>(b.value=!0,u.value=await r.elements({clientSecret:s.clientSecret,appearance:{theme:"night",labels:"floating"}}),x.value=u.value.create("card",{classes:{base:"base_card"}}),x.value.mount("#payment-element"),u.value),w=async e=>{const{data:t}=await Z.post("paymentStripe",{payment_method:e,membership_member_id:s.membership_member_id}).catch((e=>{k.value=!1}));return t},S=async e=>{e.preventDefault(),k.value=!0;const{setupIntent:t,error:a}=await r.confirmCardSetup(s.clientSecret,{payment_method:{card:x.value,billing_details:{name:h.value}}});if(a)k.value=!1,ne.error(a.message);else{const{payment_method:e}=t,a=w(e);a&&(l("PaymentAction",a),ne.success("Success Payment"))}k.value=!1};i((()=>{k.value=!1,j.value=!1}));const P=e=>{console.log("hhegu"),w(e)};return(l,s)=>{const n=e,i=ce,r=me,o=be,u=a;return c(),m(f,null,[j.value?(c(),m(n,{key:0,height:"500px"})):d("v-if",!0),_(v(u,{class:"mt-6"},{default:p((()=>[b.value?(c(),m("form",{key:0,onSubmit:g(S,["prevent"]),id:"payment-form"},[v("div",Tt,[v(i,{onClick:s[1]||(s[1]=e=>b.value=!1),class:"mb-4"},{default:p((()=>[At])),_:1})]),_(v("input",{id:"card-holder-name",class:"input mb-3","onUpdate:modelValue":s[2]||(s[2]=e=>h.value=e),placeholder:"Name",type:"text"},null,512),[[M,h.value]]),qt,v(r,{size:"small",active:k.value},{default:p((()=>[v(i,{id:"submit",class:"mt-4",color:"info"},{default:p((()=>[Nt])),_:1})])),_:1},8,["active"]),zt],40,["onSubmit"])):(c(),m(o,{key:1,onOnMethodPayment:P,onOnNewCard:s[3]||(s[3]=e=>C()),method_default:t.pm_last_four},null,8,["method_default"]))])),_:1},512),[[y,!j.value]])],64)}}});const Bt={class:"table is-hoverable is-striped is-fullwidth"},Ht=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Membership Name"),v("th",{scope:"col"},"Plan"),v("th",{scope:"col"},"Cost"),d(' <th scope="col">Initiation Fee</th> '),d(' <th scope="col">Discount</th> '),d(' <th scope="col">Taxes</th> '),v("th",{scope:"col"},"Import")])],-1),Wt={style:{"text-align":"right"}},Ot={key:0},Rt=v("td",null,"Initiation Fee",-1),Ut={style:{"text-align":"right"}},Gt={style:{"text-align":"right"}},Kt=v("td",{colspan:"3",style:{"text-align":"right"}},[v("b",null,"Subtotal")],-1),Qt={style:{"text-align":"right"}},Jt={colspan:"3",style:{"text-align":"right"}},Xt={style:{"text-align":"right"}},Zt=v("td",{colspan:"3",style:{"text-align":"right"}},[v("b",null,"Total")],-1),ea={style:{"text-align":"right"}},ta=v("td",{colspan:"3",style:{"text-align":"right"}},"Total recurrente",-1);var aa=l({expose:[],props:{presupuesto:{type:Object,required:!0}},setup:e=>(t,l)=>{const s=a;return e.presupuesto?(c(),m(s,{key:0,class:"mb-4"},{default:p((()=>[v("table",Bt,[Ht,v("tbody",null,[v("tr",null,[v("td",null,h(e.presupuesto.name),1),v("td",null,h(e.presupuesto.interval),1),v("td",null,h(u(re)(10*e.presupuesto.membership.amount_subtotal)),1),v("td",Wt,h(u(re)(10*e.presupuesto.membership.amount_subtotal)),1)]),e.presupuesto.is_initiation_fee?(c(),m("tr",Ot,[v("td",null,h(e.presupuesto.name),1),Rt,v("td",null,h(u(re)(e.presupuesto.initiation_fee)),1),v("td",Ut,h(u(re)(e.presupuesto.initiation_fee)),1)])):d("v-if",!0),v("tr",Gt,[Kt,v("td",null,h(u(re)(10*e.presupuesto.amount_subtotal)),1)]),v("tr",Qt,[v("td",Jt," Tax "+h(e.presupuesto.percentage)+"% ",1),v("td",null,h(u(re)(10*e.presupuesto.amount_tax)),1)]),v("tr",Xt,[Zt,v("td",null,h(u(re)(10*e.presupuesto.amount_total)),1)]),v("tr",ea,[ta,v("td",null,h(u(re)(10*e.presupuesto.membership.amount_total)),1)])])]),j(t.$slots,"k"),d('  <stripeAddCardComponent\n      v-if="clientSecret"\n      :clientSecret="clientSecret"\n      :membership_member_id="membership_member.id"\n    /> ')])),_:3})):d("v-if",!0)}});const la=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Membership / Contract"),v("p",null,"Edit member's membership and contract information")],-1),sa=x(" HOLD Membership "),na={key:0},ia=x(" Cancel Membership "),ra=x(" New Membership "),oa=v("h1",{class:"title is-6"},null,-1),ua={class:"table is-hoverable is-striped is-fullwidth"},ca=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Membership Name"),v("th",{scope:"col"},"Plan"),v("th",{scope:"col"},"Cost"),d(' <th scope="col">Initiation Fee</th> '),d(' <th scope="col">Discount</th> '),d(' <th scope="col">Taxes</th> '),v("th",{scope:"col"},"Import")])],-1),ma={style:{"text-align":"right"}},da={key:0},pa=v("td",null,"Initiation Fee",-1),va={style:{"text-align":"right"}},ha={style:{"text-align":"right"}},fa={colspan:"3",style:{"text-align":"right"}},ba={style:{"text-align":"right"}},_a=v("td",{colspan:"3",style:{"text-align":"right"}},[v("b",null,"Subtotal")],-1),ya={style:{"text-align":"right"}},ga=v("td",{colspan:"3",style:{"text-align":"right"}},[v("b",null,"Total")],-1),xa={style:{"text-align":"right"}},ka=v("td",{colspan:"3",style:{"text-align":"right"}},"Total recurrente",-1),Ma=x(" Payment Card "),ja=v("h1",{class:"title is-6"},"Active Contract Information",-1),Ca={class:"columns is-multiline"},wa={class:"column is-12"},Sa={key:0,class:"columns is-multiline column mt-4 is-12"},Pa=v("b",null,"Contract Date:",-1),Da={class:"column is-12"},$a=v("h1",{class:"title is-6"},"Active Waiver Information",-1),Ya={class:"text-center"},Va=v("img",{src:ye,width:"40",alt:""},null,-1),Ia=x(" View PDF ");var Ea=l({expose:[],props:{},setup(e){i((()=>{I(D.value),g()}));const t=o(null),l=o(null),s=o(null),n=o(null),r=()=>{E().then((e=>{ne.success("Memberships Cancel"),window.location.reload()}))},f=o(null),b=()=>{const e=ie(D.value);console.log(e);let t={memberships_id:e.memberships_id,recurrences_id:e.recurrences_id,is_initiation_fee:0==e.is_initiation_fee.length,member_id:w.value.id};F(t).then((e=>{f.value={name:e.data.membership.name,interval:e.data.quote.computed.recurring.interval,membership:{amount_subtotal:e.data.quote.computed.recurring.amount_subtotal,amount_total:e.data.quote.computed.recurring.amount_total},initiation_fee:e.data.membership.initiation_fee,percentage:e.data.tax.percentage,amount_tax:e.data.quote.total_details.amount_tax,amount_subtotal:e.data.quote.amount_subtotal,amount_total:e.data.quote.amount_total,is_initiation_fee:t.is_initiation_fee}})).catch((e=>{for(var t in e.response.data)e.response.data[t].forEach((e=>{ne.error(`${t}  ${e}`)}))}))},_=o(null),y=()=>{const e=ie(D.value);e.members_id=w.value.id,T(e).then((e=>{console.log(e.data),_.value=e.data.membership_member.id,n.value=e.data.clientSecret})).catch((e=>{for(var t in e.response.data.errores)e.response.data.errores[t].forEach((e=>{ne.error(`${t}: ${e}`)}))}))},g=()=>{P.value&&(le(D.value,"is_initiation_fee").disabled=!0,le(D.value,"recurrences_id").disabled=!0,le(D.value,"amount").disabled=!0,le(D.value,"memberships_id").disabled=!0)},M=e=>{A(e,P.value.id).then((e=>{if(e.data.status)ne.success("Sign Success");else for(var t in ne.error(e.data.mensaje),e.data.errores)e.data.errores[t].forEach((e=>{ne.error(`${t} : ${e}`)}))})).catch((e=>{}))},j=e=>{console.log(e),window.location.reload()},C=()=>{q(P.value.id).then((e=>{ne.success("Success Pause"),window.location.reload()}))};return(e,i)=>{const o=ce,g=Lt,S=a,$=ce,Y=aa,V=he,I=_e,E=fe;return c(),m("div",null,[v(E,null,{"header-left":p((()=>[la])),"header-right":p((()=>[u(P)&&u(w).subscription?(c(),m(o,{key:0,color:"info",outlined:null==u(w).subscription.pause_collection,onClick:C,class:"mr-4"},{default:p((()=>[sa,null!=u(w).subscription.pause_collection?(c(),m("span",na,"Active until: "+h(u(w).subscription.pause_collection.resumes_at),1)):d("v-if",!0)])),_:1},8,["outlined"])):d("v-if",!0),u(P)?(c(),m(o,{key:1,color:"warning",outlined:"",onClick:r,class:"mr-4"},{default:p((()=>[ia])),_:1})):d("v-if",!0),d(' <VButton v-if="memberMermship" @click="onSave" color="primary">\n          Save Changes\n        </VButton> '),u(P)?d("v-if",!0):(c(),m(o,{key:2,onClick:b,color:"primary"},{default:p((()=>[ra])),_:1}))])),content:p((()=>[t.value?(c(),m(S,{key:0,class:"mb-4"},{default:p((()=>[oa,v("table",ua,[ca,v("tbody",null,[v("tr",null,[v("td",null,h(l.value.membership.name),1),v("td",null,h(t.value.computed.recurring.interval),1),v("td",null,h(u(re)(10*t.value.computed.recurring.amount_subtotal)),1),v("td",ma,h(u(re)(10*t.value.computed.recurring.amount_subtotal)),1)]),1==l.value.is_initiation_fee?(c(),m("tr",da,[v("td",null,h(l.value.membership.name),1),pa,v("td",null,h(u(re)(l.value.initiation_fee)),1),v("td",va,h(l.value.initiation_fee),1)])):d("v-if",!0),v("tr",ha,[v("td",fa," Tax "+h(s.value.percentage)+"% ",1),v("td",null,h(t.value.total_details.amount_tax),1)]),v("tr",ba,[_a,v("td",null,h(u(re)(10*t.value.amount_subtotal)),1)]),v("tr",ya,[ga,v("td",null,h(u(re)(10*t.value.amount_total)),1)]),v("tr",xa,[ka,v("td",null,h(u(re)(10*t.value.computed.recurring.amount_total)),1)])])]),v(g,{"client-secret":n.value,membership_member_id:l.value.id,onPaymentAction:j},null,8,["client-secret","membership_member_id"])])),_:1})):d("v-if",!0),f.value?(c(),m(Y,{key:1,presupuesto:f.value},{k:p((()=>[v($,{color:"info",onClick:y,class:"mt-4 py-1"},{default:p((()=>[Ma])),_:1}),d(' <MemberCards\n              @onMethodPayment="onMethodPayment"\n              :method_default="member.user.pm_last_four"\n            /> '),n.value?(c(),m(g,{key:0,"client-secret":n.value,membership_member_id:_.value,pm_last_four:u(w).user.pm_last_four,onPaymentAction:j},null,8,["client-secret","membership_member_id","pm_last_four"])):d("v-if",!0)])),_:1},8,["presupuesto"])):d("v-if",!0),v(S,{class:"mb-4"},{default:p((()=>[ja,v("div",Ca,[v("div",wa,[v(V,{"inputs-step":u(D)},null,8,["inputs-step"])]),u(w)&&u(P)?(c(),m("div",Sa,[v("div",null,[v("p",null,[Pa,x(" "+h(u(k)(u(w).membership_members.created_at).format("ddd - DD MMM yyyy")),1)])]),v("div",Da,[v(I,{onOnSign:M,"is-sign":!u(P).sign,contract:`contract_${u(w).id}_${u(w).membership_members.id}_${u(w).personal_identifications}.pdf`,"url-contract":`generateContract/${u(w).id}`},null,8,["is-sign","contract","url-contract"])])])):d("v-if",!0)])])),_:1}),d("v-if",!0),u(w)&&u(P)?(c(),m(S,{key:3,class:"mb-4"},{default:p((()=>[$a,v("div",Ya,[v("a",{target:"_blank",href:`${u(J)}generateWeiver/${u(w).id}`},[Va,v("p",null," weiver_"+h(u(w).id)+"_"+h(u(w).membership_members.id)+"_"+h(u(w).personal_identifications)+".pdf ",1),v($,{color:"success",outlined:"",class:"mt-4 py-1"},{default:p((()=>[Ia])),_:1})],8,["href"])])])),_:1})):d("v-if",!0)])),_:1})])}}});const Fa=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Family Members"),v("p",null,"Edit member's family members")],-1),Ta={class:"columns is-multiline"},Aa={key:0,class:"column is-4 mb-4"},qa=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Parent"),v("p",null,"Edit parent contact")],-1),Na=x(" Save Changes "),za={class:""},La=v("h1",{class:"title is-5"},"Parent Contact Information",-1),Ba={class:"d-flex justify-content-end mr-6"};var Ha=l({expose:[],setup(e){o([{id:1,name:"Wonder Woman",subtitle:"Mother/Adult",img:"https://picsum.photos/150/150"},{id:2,name:"Lionel Messi",subtitle:"Father/Minor",img:"https://picsum.photos/150/151"}]);const a=()=>{const e=perpareDataInputs(L.value);B(e).then((e=>{ne.success("Success")}))};return(e,l)=>{const s=t,n=ge,i=xe,r=fe,o=ce,h=he;return c(),m("div",null,[u(w)&&"Adult"==u(w).category?(c(),m(r,{key:0},{"header-left":p((()=>[Fa])),"header-right":p((()=>[d(' <VButton color="primary"> Save Changes </VButton> ')])),content:p((()=>[v("div",Ta,[d(" <p>{{ memberParent.photo }}</p> "),u(N)?(c(),m("div",Aa,[v(i,{title:`${u(N).name} ${u(N).second_name} ${u(N).last_name}`,class:"border-1 p-4 radius-small"},{icon:p((()=>[v(s,{size:"medium",picture:`${u(J)}storage/${u(N).photo}`,subtitle:"Principal Family"},null,8,["picture"])])),action:p((()=>[v(n,{"id-member":u(N).id},null,8,["id-member"])])),_:1},8,["title"])])):d("v-if",!0),(c(!0),m(f,null,b(u(z),((e,t)=>(c(),m("div",{class:"column is-4 mb-4",key:`family-${t}`},[v(i,{title:`${e.member.name} ${e.member.second_name} ${u(w).last_name}`,subtitle:e.member.relationships,class:"border-1 p-4 radius-small"},{icon:p((()=>[v(s,{size:"medium",picture:`${u(J)}storage/${e.member.photo}`},null,8,["picture"])])),action:p((()=>[v(n,{"id-member":e.members_id},null,8,["id-member"])])),_:2},1032,["title","subtitle"])])))),128))])])),_:1})):d("v-if",!0),u(w)&&"Minor"==u(w).category?(c(),m(r,{key:1},{"header-left":p((()=>[qa])),"header-right":p((()=>[v(o,{onClick:a,color:"primary"},{default:p((()=>[Na])),_:1})])),content:p((()=>[v("div",za,[La,v("div",Ba,[v(s,{picture:`${u(J)}storage/${u(ae)(u(L),"parent_photo")}`,size:"large"},null,8,["picture"])]),v(h,{"inputs-step":u(L)},null,8,["inputs-step"])])])),_:1})):d("v-if",!0)])}}});const Wa=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Emergency Contact"),v("p",null,"Edit member's emergency contact")],-1),Oa=x(" Save Changes "),Ra={class:""},Ua=v("h1",{class:"title is-5"},"Emergency Contact Information",-1);var Ga=l({expose:[],setup(e){const t=()=>{const e=ie(H.value);console.log(e),W(e).then((e=>{ne.success("Success")}))};return(e,a)=>{const l=ce,s=he,n=fe;return c(),m(n,null,{"header-left":p((()=>[Wa])),"header-right":p((()=>[v(l,{onClick:t,color:"primary"},{default:p((()=>[Oa])),_:1})])),content:p((()=>[v("div",Ra,[Ua,v(s,{"inputs-step":u(H)},null,8,["inputs-step"])])])),_:1})}}});const Ka=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Check-ins History"),v("p",null,"Edit member's check-ins history")],-1),Qa={class:"p-6"},Ja={class:"d-flex"},Xa=v("input",{type:"date",class:"input",placeholder:"input.placeholder"},null,-1),Za=v("input",{type:"date",class:"input",placeholder:"input.placeholder"},null,-1),el=x(" Export "),tl={class:"mt-4"},al={class:"table is-hoverable is-fullwidth"},ll=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"DATE"),v("th",{scope:"col"},"TIME"),v("th",{scope:"col"},"STAFF")])],-1);var sl=l({expose:[],setup:e=>(e,t)=>{const a=de,l=pe,s=ce,n=fe;return u(w)?(c(),m(n,{key:0},{"header-left":p((()=>[Ka])),"header-right":p((()=>[])),content:p((()=>[v("div",Qa,[v("div",Ja,[v(l,{class:"field mr-3"},{default:p((()=>[v(a,null,{default:p((()=>[Xa])),_:1})])),_:1}),v(l,{class:"field mr-3"},{default:p((()=>[v(a,null,{default:p((()=>[Za])),_:1})])),_:1}),v(s,{color:"primary"},{default:p((()=>[el])),_:1})]),v("div",tl,[v("table",al,[ll,v("tbody",null,[(c(!0),m(f,null,b(u(O),((e,t)=>(c(),m("tr",{key:`access-${t}`},[v("td",null,h(u(k)(e.created_at).format("DD/MM/YYYY")),1),v("td",null,h(u(k)(e.created_at).format("HH:mm:ss")),1),v("td",null,h(e.user.name),1)])))),128))])])])])])),_:1})):d("v-if",!0)}});const nl=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Purchases History"),v("p",null,"Edit member's purchases history")],-1),il=v("p",{class:"title is-5"},"Card List",-1),rl={class:"mt-4"},ol={class:"table is-hoverable is-fullwidth"},ul=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Description"),v("th",{scope:"col"},"Created"),v("th",{scope:"col"},"Start Period"),v("th",{scope:"col"},"End Period"),v("th",{scope:"col"},"Mount"),v("th",{scope:"col"},"Download"),v("th",{scope:"col"},"Status")])],-1),cl={key:0},ml=v("i",{class:"fas fa-download","aria-hidden":"true"},null,-1);var dl=l({expose:[],setup(e){r((()=>P.value.payments)),r((()=>{let e=[];return U.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),i((async()=>{await R(w.value.id)}));const t=e=>{};return(e,l)=>{const s=be,n=a,i=ce,r=fe;return u(w)?(c(),m(r,{key:0},{"header-left":p((()=>[nl])),"header-right":p((()=>[])),content:p((()=>[v(n,{class:"mb-4"},{default:p((()=>[il,u(w).user?(c(),m(s,{key:0,onOnMethodPayment:t,method_default:u(w).user.pm_last_four,"show-new-card":!1},null,8,["method_default"])):d("v-if",!0)])),_:1}),v(n,{class:"p-"},{default:p((()=>[v("div",rl,[v("table",ol,[ul,u(P)?(c(),m("tbody",cl,[(c(!0),m(f,null,b(u(w).invoices,((e,t)=>{var a;return c(),m("tr",{key:`invoice-${t}`},[v("td",null,h(null!=(a=e.subscription)?a:"Others"),1),v("td",null,h(u(k)(e.created).format("MM/DD/YYYY")),1),v("td",null,h(u(k)(e.period_start).format("MM/DD/YYYY")),1),v("td",null,h(u(k)(e.period_end).format("MM/DD/YYYY")),1),v("td",null,h(u(se)(e.total/100)),1),v("td",null,[v("a",{href:e.invoice_pdf,download:""},[v(i,null,{default:p((()=>[ml])),_:1})],8,["href"])]),v("td",null,h("paid"==e.status?"Paid":"error"),1)])})),128))])):d("v-if",!0),d(" <tbody\n              v-for=\"(payment, key) in paymentsMemberchipsHistory\"\n              :key=\"`paymentHistory-${key}`\"\n            >\n              <tr v-for=\"(p, k) in payment.payments\" :key=\"`pay-${k}`\">\n                <td>{{ moment(p.created_at).format('DD/MM/YYYY') }}</td>\n                <td>{{ moment(p.created_at).format('HH:mm:ss') }}</td>\n                <td>{{ moneda(p.amount) }}</td>\n                <td>{{ p.payment_type.name }}</td>\n                <td>{{ payment.membership }}</td>\n                <td>{{ p.status ? 'succeded' : 'error' }}</td>\n              </tr>\n            </tbody> ")])])])),_:1})])),_:1})):d("v-if",!0)}}});const pl=v("div",null,[v("h1",{class:"title is-4 mb-0"}," Waiver "),v("p",null,"Edit member's waiver information")],-1),vl=x(" Convert to Members "),hl={class:"columns is-multiline"},fl={class:"border-1 document_box p-4 d-flex justify-content-center radius-small"},bl={href:"234",class:"text-center"},_l=v("img",{style:{width:"70px"},src:ye,alt:""},null,-1);var yl=l({expose:[],setup(e){const t=o([{name:"Waiver_010221.pdf",url:""},{name:"Waiver_010221.pdf",url:""}]);return(e,a)=>{const l=ce,s=fe;return c(),m(s,null,{"header-left":p((()=>[pl])),"header-right":p((()=>[v(l,{color:"info"},{default:p((()=>[vl])),_:1})])),content:p((()=>[v("div",hl,[(c(!0),m(f,null,b(t.value,((e,t)=>(c(),m("div",{class:"column is-2 mb-4",key:`family-${t}`},[v("div",fl,[v("a",bl,[_l,v("p",null,h(e.name),1)])])])))),128))])])),_:1})}}});const gl={key:1,class:"columns is-multiline"},xl={class:"column is-3"},kl={class:"column is-9"},Ml={class:"title is-5 mb-0"},jl=x(" Process Payment "),Cl=v("b",null,"Member since.",-1),wl=v("b",null,"Membership Active:",-1),Sl={key:0},Pl=v("b",null,"Due Date: ",-1);var Dl=l({expose:[],setup(t){const l=s();Me.value="Member Profile",C({title:"Members"});const r=o(!1),f=o("personalInformation"),b=e=>{f.value=e.value};n((()=>l.query),((e,t)=>{Object.keys(e).length>0&&(V(),$())}));const g=o("Filed Payment"),M=o("");n((()=>l.hash),(e=>{f.value=l.hash.slice(1)})),n((()=>l.query.id),(e=>{f.value="personalInformation"}));const j=o(!0),$=()=>{j.value=!0,setTimeout((()=>{j.value=!1}),500)};i((()=>{""!=l.hash&&(f.value=l.hash.slice(1)),Ye().then((e=>{oe(D,"locations_id",Ve.value)})),$e().then((e=>{oe(Y,"country_id",e.contries),oe(Y,"city_id",e.cities),oe(Y,"state_id",e.states),oe(G,"city_id",e.cities),oe(G,"state_id",e.states),oe(G,"country_id",e.contries)})),Ce().then((e=>{oe(D,"memberships_id",e.data.memberships)})),je().then((e=>{oe(D,"discount",e.data.discounts)})),we().then((e=>{oe(D,"recurrences_id",e.data)})),Pe().then((e=>{oe(D,"staff_id",e.data)})),V()}));const V=async()=>{await K(l.query.id).then((e=>{for(var t in e.data)if("select_type"==t)"Individual"==e.data[t]?le(Y.value,"select_type").model=!1:le(Y.value,"select_type").model=!0;else if("membership_members"==t)for(var a in e.data[t]||(g.value="Does not have a membership",M.value="Does not have a membership go to the Membership/Contract section and create a new membership and press New Membership",console.error("no posee una membresia :(")),e.data[t])if("memberships_location"==a){if(!e.data[t][a])return void console.error("no posee una locacion :(");le(D.value,"locations_id").model=e.data[t][a].companies_locations_id,De([e.data[t][a].companies_locations_id]).then((e=>{oe(D,"diciplines",e.data)}))}else if("recurrence"==a){let a=[];if(e.data[t].membership.amounts.forEach((e=>{let t=Se.value.find((t=>t.id==e.recurrences_id));t.amount=e.amount,a.push(t)})),le(D.value,"recurrences_id").model=e.data[t].recurrences_id,!a.find((a=>a.id==e.data[t].recurrences_id)))return void console.error("no tiene un plan de membresia :( recurrences");le(D.value,"amount").model=a.find((a=>a.id==e.data[t].recurrences_id)).amount}else"is_recurrence"==a?le(D.value,"recurrence").model=1==e.data[t][a]:"diciplines"==a?(le(D.value,"diciplines").model=[],e.data[t][a].forEach((e=>{le(D.value,"diciplines").model.push(e.diciplines_id)}))):"membership"==a?le(D.value,"initiation_fee").model=e.data[t][a].initiation_fee:"is_initiation_fee"==a?le(D.value,"is_initiation_fee").model=0==e.data[t][a]?[a]:[]:"discount"==a?(le(D.value,"discount").disabled=!0,null!=e.data[t][a]&&(le(D.value,"discount").model=e.data[t][a].id)):ue(D,a,e.data[t][a]);else if("staff_id"==t)ue(D,t,e.data[t]);else if("emergency"==t)for(a in e.data[t])ue(H,a,e.data[t][a]);else if("guardian"==t)for(a in e.data[t])ue(L,a,e.data[t][a]);else ue(Y,t,"leo_vet_fr"==t?1==e.data[t]?t:[]:e.data[t]);j.value=!1}))};return(t,s)=>{const n=e,i=qe,o=ce,C=a,$=Yt,Y=Ft,V=Ea,I=Ha,E=Ga,F=sl,T=dl,A=yl,q=ke;return c(),m(q,null,{default:p((()=>[j.value?(c(),m(n,{key:0,height:"500px"})):d("v-if",!0),!j.value&&u(w)?(c(),m("div",gl,[v("div",xl,[v(i,{category:u(l).query.category,onChangeMenu:b},null,8,["category"])]),d(" <p>{{ isSolvente }}</p> "),v("div",kl,[u(S)?d("v-if",!0):(c(),m(C,{key:0,class:"mb-4 d-flex justify-content-between align-items-center",color:"danger"},{default:p((()=>[v("div",null,[v("h3",Ml,h(g.value),1),v("p",null,h(M.value),1)]),v("div",null,[u(te)(u(D),"memberships_id")&&!u(Q)?(c(),m(o,{key:0,color:"success",onClick:s[1]||(s[1]=e=>r.value=!0)},{default:p((()=>[jl])),_:1})):d("v-if",!0),d(' <VButton\n              v-if="sinMembresia"\n              :disabled="!getValueInput(membershipsData, \'memberships_id\')"\n              color="success"\n              @click="newMembership"\n            >\n              New membership\n            </VButton> ')])])),_:1})),r.value?(c(),m($,{key:1,class:"mb-4"})):d("v-if",!0),null!=u(w).membership_members?(c(),m(C,{key:2,class:"mb-4"},{default:p((()=>[v("div",null,[v("p",null,[v("b",null,"Member #"+h(u(w).id),1)]),v("p",null,[v("small",null,[Cl,x(" "+h(u(k)(u(w).created_at).format("ddd - DD MMM YYYY")),1)])]),v("p",null,[wl,x(" "+h(u(P).membership.name),1)]),u(w).subscription?(c(),m("p",Sl,[Pl,x(" "+h(u(k)(u(w).subscription.proxima_factura).format("ddd - DD MMM YYYY")),1)])):d("v-if",!0),d(" <p v-if=\"memberMermship.payments\">\n              <b>Last payment attempt: </b\n              >{{\n                moment(memberMermship.payments[0].created_at).format(\n                  'ddd - DD MMM YYYY'\n                )\n              }}\n            </p> ")])])),_:1})):d("v-if",!0),_(v(Y,{category:u(l).query.category},null,8,["category"]),[[y,"personalInformation"==f.value]]),_(v(V,null,null,512),[[y,"memberMembership"==f.value]]),_(v(I,null,null,512),[[y,"memberFamily"==f.value]]),_(v(E,null,null,512),[[y,"memberEmergency"==f.value]]),_(v(F,null,null,512),[[y,"memberCheckins"==f.value]]),_(v(T,null,null,512),[[y,"memberPurchases"==f.value]]),_(v(A,null,null,512),[[y,"memberWaiver"==f.value]])])])):d("v-if",!0)])),_:1})}}});export default Dl;
