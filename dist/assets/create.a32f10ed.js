import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.94a80eab.js";import{_ as t}from"./V-Control.4a6c84b4.js";import{_ as a}from"./V-Field.vue_vue&type=script&setup=true&lang.e3fe440b.js";import{_ as s}from"./inputsLayaut.vue_vue&type=style&index=0&lang.fe437b85.js";import{_ as r}from"./formLayaut.vue_vue&type=style&index=0&lang.055824c1.js";import{d as i,r as l,w as u,b as n,o,i as p,j as m,k as c,D as d,Q as v,R as f,G as y,S as b,Y as g,E as h,y as _,z as S,F as j,H as x,A as C,B as M,O as A,U as k}from"./vendor.1faf4f77.js";import{p as P,h as V,g as D,s as N,v as w,n as E,a as O,e as I}from"./index.6fffb7e6.js";import{O as J,w as T,e as R,P as B,Q as F,R as L,c as $,S as q,f as z,T as U,h as G,n as Q,U as Y,V as H,E as W,W as X,X as K,Y as Z}from"./Members.fd22ffdb.js";import{_ as ee}from"./V-Card.vue_vue&type=script&setup=true&lang.bff7be9b.js";import{_ as te}from"./V-Placeload.410731c2.js";import{a as ae,b as se}from"./Presupuesto.vue_vue&type=script&setup=true&lang.5c2288da.js";import{_ as re}from"./V-Progress.vue_vue&type=script&setup=true&lang.d2416cdd.js";import{_ as ie}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.a24fd0ff.js";import{a as le,m as ue}from"./Memberships.978d86c7.js";import{g as ne}from"./Recurrences.03f3df7f.js";import{g as oe}from"./Discounts.fc25d7f4.js";import{e as pe,c as me,s as ce,d as de}from"./config.ab652609.js";import{h as ve}from"./Staffs.8d5d37cf.js";import{p as fe}from"./sidebarLayoutState.8ddd6cce.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.1500d9d7.js";import"./V-Modal.vue_vue&type=script&setup=true&lang.ac2f5202.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.42dfc6e9.js";import"./V-Loader.vue_vue&type=script&setup=true&lang.cf9645bd.js";import"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.4ed7b4e8.js";import"./Diciplines.f4e9dfba.js";import"./Companies.6685ae15.js";import"./MemberCards.vue_vue&type=script&setup=true&lang.00c091fe.js";import"./signComponent.vue_vue&type=script&setup=true&lang.6b1de5b3.js";import"./pdf_icon.9f85fd04.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.3629d2a1.js";import"./useDropdown.105a6322.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.e1ab07d1.js";import"./V-Dropdown.1e9a7c40.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.a7e31a56.js";import"./activePanelState.c2741883.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.305eeb86.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.b4486146.js";import"./V-Message.vue_vue&type=script&setup=true&lang.78c2be1a.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.9823548d.js";import"./navbarLayoutState.3917eb04.js";import"./video.06d66946.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.c3ec473d.js";import"./darkModeState.b1f0037d.js";import"./AnimatedLogo.a3e359ee.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.9224d628.js";import"./V-Block.vue_vue&type=script&setup=true&lang.95c8f17c.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.c7cbfbbf.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.879bfb5b.js";var ye=i({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e,i=l(!1);u((()=>a.inputs),((e,t)=>{v()}));const v=()=>{i.value=!0,setTimeout((()=>{i.value=!1}),500)},f=n((()=>y.value?a.inputs.filter((e=>e.typeMember.includes("Company"))):a.inputs.filter((e=>e.typeMember.includes("Individual"))))),y=l(!1),b=e=>{y.value=!e.input.model,v()},g=e=>{let a=P(f.value);V.value||(a.select_type=a.select_type?"Company":"Individual",J.value=a,t("returData",a),t("changeStep",e))};return(t,a)=>{const l=s,u=r;return o(),p(u,{titles:{title:e.title},"is-loading":i.value,buttons:["next","back"],step:1,onChangeStep:g},{default:m((()=>[c(l,{"inputs-step":d(f),onChangeSwitch:b},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}}),be=i({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e=>{t("changeStep",e)};return(t,i)=>{const l=s,u=r;return o(),p(u,{titles:{title:e.title},buttons:["next","prev"],step:2,onChangeStep:a},{default:m((()=>[c(l,{"inputs-step":d(T)},null,8,["inputs-step"])])),_:1},8,["titles"])}}});const ge={key:0},he=h(" Remove Family Member "),_e={key:1,class:"column d-flex justify-content-center flex-column is-4 mx-auto"},Se=h(" Add Another Family Member ");var je=i({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(i,{emit:h}){const j=i,x=l(!1);u((()=>j.inputs),((e,t)=>{C()}));const C=()=>{x.value=!0,setTimeout((()=>{x.value=!1}),500)},M=l([]);n((()=>(C(),M.value.forEach(((e,t)=>{k.value.includes(t)?M.value[t]=e.filter((e=>e.category.includes("Minor"))):M.value[t]=JSON.parse(JSON.stringify(j.inputs))})),M.value)));const A=e=>{h("returData",M),h("changeStep",e)},k=l([]),P=n((()=>M.value.length>0)),V=l(0),E=()=>{if(V.value>0)for(var e=0;e<V.value;++e){const e=_(JSON.parse(JSON.stringify(j.inputs)));D(e,"misma_direccion").change=J,D(e,"category").change=O,M.value.push(e)}},O=function(e){console.log(e),e.forEach((e=>{this.model?e.category.includes("Adult")&&(e.typeInput=e.typeInputDefault):e.category.includes("Minor")||(e.typeInput="hidden")})),this.model||(I(e),N(e,"email",`family_${S().format("hms")}_${w(R.value,"email")}`),N(e,"phone",w(R.value,"phone"))),console.log(this.model)},I=e=>{N(e,"address",w(R.value,"address")),N(e,"postal_code",w(R.value,"postal_code")),N(e,"country_id",w(R.value,"country_id")),N(e,"city_id",w(R.value,"city_id")),N(e,"state_id",w(R.value,"state_id"))},J=function(e){console.log("llejay"),this.model?(N(e,"postal_code",""),N(e,"country_id",""),N(e,"city_id",""),N(e,"state_id","")):I(e)};return(l,u)=>{const n=s,h=e,_=ee,S=t,j=a,C=r;return o(),p(C,{titles:{title:i.title},"is-loading":x.value,buttons:["next","prev"],step:2,onChangeStep:A},{default:m((()=>[d(P)?(o(),p("div",ge,[(o(!0),p(v,null,f(M.value,((e,t)=>(o(),p(_,{key:t,class:"mb-4"},{default:m((()=>[c(n,{"inputs-step":e,onChangeSwitch:e=>{return a=t,void k.value.findIndex((e=>e==a));var a}},null,8,["inputs-step","onChangeSwitch"]),c(h,{onClick:e=>M.value.splice(t,1),color:"danger",class:"mx-auto",icon:"fas fa-times"},{default:m((()=>[he])),_:2},1032,["onClick"])])),_:2},1024)))),128))])):y("v-if",!0),d(P)?y("v-if",!0):(o(),p("div",_e,[c(j,{class:"mb-4"},{default:m((()=>[c(S,null,{default:m((()=>[b(c("input",{type:"number","onUpdate:modelValue":u[1]||(u[1]=e=>V.value=e),class:"input text-center",placeholder:"Family quantity"},null,512),[[g,V.value]])])),_:1})])),_:1}),c(h,{onClick:E,color:"info",icon:"fas fa-check",raised:""},{default:m((()=>[Se])),_:1})]))])),_:1},8,["titles","is-loading"])}}}),xe=i({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep"],setup(e,{emit:t}){const a=e,i=l(!1);u((()=>a.inputs),((e,t)=>{f()}));const v=e=>{let a=[];y.value.forEach((e=>{e.values.forEach((e=>{let t=e.values.find((e=>"sms"==e.name)).model.length,s=e.values.find((e=>"email"==e.name)).model.length;a.push({[e.name]:e.value,sms:t>0,email:s>0})}))})),B.value=a,t("returnData",a),t("changeStep",e)},f=()=>{i.value=!0,setTimeout((()=>{i.value=!1}),500)},y=n((()=>a.inputs)),b=l(!1),g=e=>{b.value=!e.input.model,f()};return(t,a)=>{const l=s,u=r;return o(),p(u,{titles:{title:e.title},"is-loading":i.value,buttons:["next","prev"],step:3,onChangeStep:v},{default:m((()=>[c(l,{"inputs-step":d(y),onChangeSwitch:g},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}});const Ce={class:""};var Me=i({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberships:{type:Array,default:[]},notes:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(e,{emit:t}){const a=e,i=l(!1),y=l([]);u((()=>a.inputs),((e,t)=>{b()}));const b=()=>{i.value=!0,setTimeout((()=>{i.value=!1}),500)},g=e=>{let a=null;F.forEach(((e,t)=>{0==t?a=e.inputs:y.value.push(e)})),V.value||(L.value=a,t("returnData",{memberMembership:a,familyMembership:y}),t("changeStep",e))},h=n((()=>{const e=_([]);F.value=[];let t=[];$.forEach((e=>{t.push(JSON.parse(JSON.stringify(e)))})),e.push(S(a.member,JSON.parse(JSON.stringify(t))));for(var s=0;s<a.familiares.length;++s)e.push(S(a.familiares[s],JSON.parse(JSON.stringify(t))));return F.value=e,e})),S=(e,t,a)=>{const s={member:null,membresia:null};return"Prospect"==q.value?(D(t,"recurrence").model=!1,D(t,"recurrence").display=!1,D(t,"is_initiation_fee").model=!0,D(t,"is_card_price").model=!0):(D(t,"recurrence").model=!0,D(t,"recurrence").display=!0,D(t,"is_initiation_fee").model=!1,D(t,"is_card_price").model=!1),s.member=e,s.membresia=t,z(s.membresia,s.member),s};return(t,a)=>{const l=s,u=ee,n=r;return o(),p(n,{titles:{title:e.title},isloading:i.value,buttons:["next","prev"],step:4,onChangeStep:g},{default:m((()=>[(o(!0),p(v,null,f(d(h),((e,t)=>(o(),p(u,{key:`ss${t}`,class:"mb-4"},{default:m((()=>[c("p",Ce,[c("b",null,j(d(w)(e.member,"name"))+" "+j(d(w)(e.member,"second_name"))+" "+j(d(w)(e.member,"last_name")),1)]),c(l,{"inputs-step":e.membresia},null,8,["inputs-step"])])),_:2},1024)))),128)),c(u,{class:"mb-4"},{default:m((()=>[c(l,{"inputs-step":e.notes},null,8,["inputs-step"])])),_:1})])),_:1},8,["titles","isloading"])}}});const Ae={key:1},ke={class:"d-flex justify-content-end w-100"},Pe={class:"d-flex justify-content-between w-100"},Ve=h(" Finish "),De=h(" Cancel "),Ne=h(" Register another member ");var we=i({expose:[],props:{type:{type:String,default:"create"},title:{type:String,default:""}},emits:["changeStep","returnData"],setup(t,{emit:a}){l(!1);const s=l(!1),i=n((()=>F.value[0])),u=n((()=>{let e=[];return F.value.forEach(((t,a)=>{a>0&&e.push(t)})),e}));x((()=>{D(U.value,"mismatarjeta").change=b,G.value=[],i.value?(Q(i.value.membresia,i.value.member),u.value.length&&u.value.forEach((e=>{Q(e.membresia,e.member)}))):(console.error("No tiene membresia"),E.error("Membership is required"))}));const b=function(){this.model},g=(e,t=3,s)=>{a("returnData",{total:s}),a("changeStep",e,t,{})},h=n((()=>{let e=[];return G.value.forEach((t=>{0==D(t.member,"is_family").model&&e.push(t)})),G.value.forEach((t=>{1==D(t.member,"is_family").model&&e.push(t)})),e}));l([]);const _=()=>{window.location.reload()},S=l([]),j=e=>{S.value.push(e)};return(a,i)=>{const l=te,u=ae,n=se,b=e,x=r;return o(),p(x,{titles:{title:t.title},"is-loading":s.value,buttons:["prev"],step:5,onChangeStep:g},{default:m((()=>[y(' <div class="d-flex justify-content-end align-items-center mb-4">\r\n\r\n      <VButton @click="PaymentAllMembership" color="primary"\r\n        >Pay all memberships</VButton\r\n      >\r\n\r\n      <div v-if="miembrosNuevos.length">\r\n        <stripeAddCard\r\n          :amount="props.total"\r\n          :id="miembrosNuevos[0].idMember"\r\n          :member_membership="miembrosNuevos[0].idMemberMembership"\r\n          :variosMiembros="true"\r\n          :miembros="miembrosNuevos"\r\n          @PaymentAction="PaymentAction"\r\n        />\r\n      </div>\r\n      \r\n    </div> '),d(G).length?y("v-if",!0):(o(),p(l,{key:0,height:"300px",class:"mb-4"})),d(G)?(o(),p("div",Ae,[(o(!0),p(v,null,f(d(h),((e,t)=>(o(),p(n,{key:`presupuesto-${t}`,class:"mb-4",presupuesto:e},{default:m((()=>[c("div",ke,[c(u,{member:e.member,membresia:e.membresia,contact:d(B),presupuesto_id:e.presupuesto_id,"categories-members":d(Y),"notas-input":d(H),total:e.totales.upfront.amount_total,onPaymentAction:j},null,8,["member","membresia","contact","presupuesto_id","categories-members","notas-input","total"])])])),_:2},1032,["presupuesto"])))),128))])):y("v-if",!0),c("div",Pe,[d(h).length>0&&S.value.length==d(h).length?(o(),p(b,{key:0,color:"danger",to:{name:"index"}},{default:m((()=>[Ve])),_:1})):(o(),p(b,{key:1,color:"danger",to:{name:"index"}},{default:m((()=>[De])),_:1})),d(h).length>0&&S.value.length==d(h).length?(o(),p(b,{key:2,color:"success",onClick:_},{default:m((()=>[Ne])),_:1})):y("v-if",!0)])])),_:1},8,["titles","is-loading"])}}});C("data-v-5a5e3b40");const Ee={class:"content"},Oe={class:"content-text"};M();var Ie=i({expose:[],props:{active:{type:Boolean,default:!1,required:!0},step:{type:Number,default:0,required:!0},text:{type:String,default:""}},setup(e){const t=e,a=n((()=>t.active?100:0));return(t,s)=>{const r=re;return o(),p("div",Ee,[c("div",{class:["circle",e.active?"active":""]},null,2),c(r,{class:"progressbar",value:d(a),size:"smaller"},null,8,["value"]),c("div",Oe,[c("p",null,"STEP "+j(e.step),1),c("p",null,[c("b",null,j(e.text),1)])])])}}});Ie.__scopeId="data-v-5a5e3b40";const Je={class:"columns is-multiline"},Te={class:"column is-12"},Re={class:"column is-9"},Be={class:"column is-3"};var Fe=i({expose:[],setup(s){fe.value="Add New members",A({title:"Members"}),x((()=>{q(),le().then((e=>{O($,"memberships_id",e.data.memberships)})),D($,"memberships_id").disabled=!1,D($,"recurrences_id").disabled=!1,D($,"is_initiation_fee").disabled=!1,D($,"discount").disabled=!1,oe(1,"membership").then((e=>{O($,"discount",e.data.discounts)})),ne(),pe().then((e=>{O(R,"city_id",me.value),O(W,"city_id",me.value),O(T,"city_id",me.value),O(R,"state_id",ce.value),O(W,"state_id",ce.value),O(T,"state_id",ce.value),O(R,"country_id",de.value),O(W,"country_id",de.value),O(T,"country_id",de.value)})),ve().then((e=>{O($,"staff_id",e.data)}))}));const r=l(1),i=l([{step:1,text:"Member Information",categories:["Adult","Minor","Prospect"]},{step:2,text:"Add Family Member",categories:["Adult"]},{step:2,text:"Parent / Guardian",categories:["Minor"]},{step:2,text:"Contact Preference",categories:["Prospect"]},{step:3,text:"Contact Preference",categories:["Adult","Minor"]},{step:4,text:"Select membership",categories:["Adult","Minor","Prospect"]},{step:5,text:"Add Payment Method",categories:["Adult","Minor","Prospect"]}]),u=n((()=>R.value.filter((e=>e.categories.includes(Y.value.model))))),g=n((()=>i.value.find((e=>e.step==r.value&&e.categories.includes(Y.value.model))))),_=n((()=>i.value.filter((e=>e.categories.includes(Y.value.model)))));n((()=>P(T.value)));const S=(e,t=3,a={})=>{Y.value.model,6==e?sendData(t,a):r.value=e},C=l(null),M=e=>{C.value=e},V=l(null),N=e=>{V.value=e},w=l([]),E=e=>{w.value=e.value},J=l([]),B=e=>{J.value=e.familyMembership.value,L.value=e.memberMembership};l(null),l(null),l(null);const q=()=>{X.value=null,K.value=null;let e=["is_family","principal_family"];I(R.value.filter((t=>!e.includes(t.name)))),e=["recurrence"],I($.filter((t=>!e.includes(t.name)))),I(H.value),I(T.value)};return(s,i)=>{const l=e,n=t,x=a,C=ye,A=be,P=je,V=xe,D=Me,O=we,I=Ie,T=ie;return o(),p(T,null,{default:m((()=>[y(" Display a payment form "),c("div",Je,[c("div",Te,[1==r.value?(o(),p(x,{key:0,class:"w-100",addons:""},{default:m((()=>[(o(!0),p(v,null,f(d(Y).values,((e,t)=>(o(),p(n,{key:`categoymember-${t}`},{default:m((()=>[c(l,{onClick:t=>d(Y).model=e,color:d(Y).model==e?"primary":void 0,rounded:""},{default:m((()=>[h(j(e),1)])),_:2},1032,["onClick","color"])])),_:2},1024)))),128))])),_:1})):y("v-if",!0)]),c("div",Re,[y(" memberInformation "),b(c(C,{type:"create",title:d(g).text,inputs:d(u),onChangeStep:S,onReturData:M},null,8,["title","inputs"]),[[k,1==r.value]]),y(" parentGuardian "),b(c(A,{title:d(g).text,onChangeStep:S},null,8,["title"]),[[k,2==r.value&&"Minor"==d(Y).model]]),y(" familyMembers "),b(c(P,{type:"create",title:d(g).text,inputs:d(W),onChangeStep:S,onReturData:E},null,8,["title","inputs"]),[[k,2==r.value&&"Adult"==d(Y).model]]),y(" contactPreference "),b(c(V,{type:"create",title:d(g).text,inputs:d(Z),onChangeStep:S,onReturnData:N},null,8,["title","inputs"]),[[k,3==r.value||2==r.value&&"Prospect"==d(Y).model]]),y(" selectMembership "),b(c(D,{type:"create",member:d(u),familiares:w.value,title:d(g).text,inputs:d(F),memberships:d(ue),notes:d(H),onChangeStep:S,onReturnData:B},null,8,["member","familiares","title","inputs","memberships","notes"]),[[k,4==r.value]]),y(" paymentMethod "),5==r.value?(o(),p(O,{key:0,type:"create",title:d(g).text,member:d(u),familiares:w.value,inputs:d(F),"member-membership":d(L),"family-membership":J.value,onChangeStep:S},null,8,["title","member","familiares","inputs","member-membership","family-membership"])):y("v-if",!0)]),c("div",Be,[(o(!0),p(v,null,f(d(_),((e,t)=>(o(),p(I,{key:t,active:e.step<=r.value,step:e.step,text:e.text},null,8,["active","step","text"])))),128))])])])),_:1})}}});export default Fe;
