var e=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,l=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,n=(e,n)=>{for(var i in n||(n={}))a.call(n,i)&&l(e,i,n[i]);if(s)for(var i of s(n))t.call(n,i)&&l(e,i,n[i]);return e};import{_ as i}from"./inputsLayaut.vue_vue&type=style&index=0&lang.fe67fad1.js";import{_ as o}from"./formLayaut.vue_vue&type=style&index=0&lang.26124ecb.js";import{d as r,b as p,w as c,r as u,h as d,i as m,F as f,P as v,ad as b,k as h,l as y}from"./vendor.4454b83d.js";import{i as g,s as j,f as _,c as E,d as O,b as w,n as A}from"./Memberships.e4c6b7ae.js";import{g as S}from"./Diciplines.7380e768.js";import{p as $,h as x,n as L,a as P,g as k}from"./index.b61c69e8.js";const D={class:"columns is-multiline"},q={class:"column is-12"},B={class:"column is-6"},F={class:"column is-6"},I={class:"column is-12"},M={class:"column is-12"};var z=r({expose:[],props:{type:{type:String,default:"create"},buttons:{type:Array,default:["save","back"]},isLoading:{type:Boolean,default:!1}},setup(e){const s=e,a=v(),t=b(),l=p((()=>"create"==s.type?{title:"Add a new membership",subtitle:"Add information for a new club membership"}:{title:"Edit membership",subtitle:"Edit information for a club membership"})),r=p((()=>g.find((e=>"locations_options"==e.name)))),z=p((()=>g.find((e=>"locations"==e.name))));c(z.value,(e=>{C(e)}));const C=e=>{let a=[];e.model.length>0&&(e.model.forEach((t=>{let l=e.values.find((e=>e.id==t));"create"==s.type&&a.push({name:"locationsSaleOrAccess",value:l.id,placeholder:l.name,values:[{placeholder:"Access",name:"access",model:["access"]},{placeholder:"Sale",name:"sale",model:["sale"]}]})})),P(g,"locations_options",a)),S(z.value.model).then((e=>{P(g,"diciplines",e.data),k(g,"diciplines").values.push({id:0,name:"All"})}))};p((()=>g.find((e=>"diciplines"==e.name))));const G=u(!1),H=()=>{G.value=!0;let e=n(n(n(n(n({},$(g)),$(E)),$(O)),$(A)),$(w)),l=[];"create"==s.type&&e.locations.length>0&&(e.locations.forEach((e=>{let s=r.value.values.find((s=>s.value==e));l.push({id:e,access:s.values.find((e=>"access"==e.name)).model.length?1:0,sale:s.values.find((e=>"sale"==e.name)).model.length?1:0})})),e.locations=l,delete e.locations_options),x.value||("create"==s.type?j(e).then((e=>{G.value=!1,t.back()})).catch((e=>{if(G.value=!1,"string"!=typeof e.response.data)for(var s in e.response.data)e.response.data[s].forEach((e=>{L.error(`${e}: ${s}`)}));else L.error(`${e.response.data}`)})):_(a.query.id,e).then((e=>{L.success("Success"),G.value=!1})).catch((e=>{if(G.value=!1,"string"!=typeof e.response.data)for(var s in e.response.data)e.response.data[s].forEach((e=>{L.error(`${e}: ${s}`)}));else L.error(`${e.response.data}`)})))};return(a,t)=>{const n=i,r=o;return d(),m(r,{buttons:s.buttons,titles:f(l),"is-loading":e.isLoading,"is-loader-active":G.value,onSaveData:H},{default:h((()=>[y("div",D,[y("div",q,[y(n,{"inputs-step":f(g)},null,8,["inputs-step"])]),y("div",B,[y(n,{"inputs-step":f(E)},null,8,["inputs-step"])]),y("div",F,[y(n,{"inputs-step":f(O)},null,8,["inputs-step"])]),y("div",I,[y(n,{"inputs-step":f(w)},null,8,["inputs-step"])]),y("div",M,[y(n,{"inputs-step":f(A)},null,8,["inputs-step"])])])])),_:1},8,["buttons","titles","is-loading","is-loader-active"])}}});export{z as _};
