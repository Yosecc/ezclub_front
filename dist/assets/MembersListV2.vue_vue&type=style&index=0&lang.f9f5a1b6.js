import{_ as e}from"./V-PlaceholderPage.vue_vue&type=script&setup=true&lang.c7dbe33c.js";import{_ as a}from"./V-Checkbox.vue_vue&type=script&setup=true&lang.b041b4d1.js";import{_ as s}from"./V-Control.237cc4d1.js";import{_ as l}from"./V-Loader.vue_vue&type=script&setup=true&lang.a4702afa.js";import{_ as t}from"./V-Dropdown.2bdf3018.js";import{d as r,r as i,G as n,w as m,o,h as c,a4 as u,j as d,k as p,a9 as b,D as v,c as g,J as f,ab as h,O as _,i as y,Q as x,R as k,E as j,F as w,P as V}from"./vendor.c636f33b.js";import{C as P,B as $,D}from"./Members.3f9f6616.js";import{n as S,b as C}from"./index.56773f49.js";import{_ as T}from"./V-Avatar.vue_vue&type=script&setup=true&lang.e8d66525.js";import{_ as A}from"./FlexTableDropdown.vue_vue&type=script&setup=true&lang.18a18086.js";import{_ as E}from"./V-FlexPagination.vue_vue&type=script&setup=true&lang.ba4b3a8f.js";import{_ as z,a as F}from"./search-4-dark.fb3880a5.js";const M=p("div",{class:"icon"},[p("i",{class:"lnir lnir-round-box-check","aria-hidden":"true"})],-1),I=p("div",{class:"meta"},[p("span",null,"Process Subscriptions"),p("span",null,"Subscriptions automatic")],-1);var L=r({expose:[],props:{},setup(e){u();const a=i(!1),s=i(!1);n((()=>{})),m((()=>s.value),(e=>{e&&new Pusher("2cd5b586808b2f41f8e6",{cluster:"us2"}).subscribe("process_subscription_channel").bind("process_subscription_event",(function(e){let a=`${e.message.member.id}: ${e.message.member.name} ${e.message.member.last_name} <br> ${e.message.message}`;e.message.status?($.value.find((a=>a.id==e.message.member.id)).isSolvente=!0,S.success(a)):S.error(a)}))}));const r=()=>{P.value.length&&(s.value=!0,a.value=!0,D().then((e=>{S.success("Finalizado"),a.value=!1})).catch((e=>{a.value=!1,S.error(e.response.data)})))};return(e,s)=>{const i=l,n=t;return o(),c(n,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:d((()=>[p(i,{size:"small",active:a.value},{default:d((()=>[p("a",{onClick:b(r,["prevent"]),role:"menuitem",class:"dropdown-item is-media",disabled:0==v(P).length},[M,I],8,["onClick","disabled"])])),_:1},8,["active"])])),_:1})}}});const R={class:"page-content-inner"},q={class:"flex-list-wrapper flex-list-v1"},O=p("img",{class:"light-image",src:z,alt:""},null,-1),U=p("img",{class:"dark-image",src:F,alt:""},null,-1),B={class:"flex-table"},G=p("span",{class:"is-grow"},"Member",-1),J=p("span",null,"Email",-1),Q=p("span",null,"Membership Type",-1),W=p("span",null,"Trainer",-1),H=p("span",null,"Phone #",-1),K=p("span",{class:"cell-end"},"Status",-1),N={class:"cell-end"},X={class:"d-flex justify-content-end align-items-center"},Y={class:"flex-list-inner"},Z={class:"item-name dark-inverted"},ee={class:"flex-table-cell","data-th":"member-id"},ae={class:"light-text"},se={class:"flex-table-cell","data-th":"Membership Type"},le={key:0,class:"light-text"},te={class:"flex-table-cell is-media is-grow","data-th":"Trainer"},re={key:1,class:"light-text dark-inverted ml-2"},ie={class:"flex-table-cell","data-th":"Phone"},ne={class:"light-text"},me={class:"flex-table-cell cell-end","data-th":"Status"},oe={class:"flex-table-cell cell-end","data-th":"Actions"};var ce=r({expose:[],props:{members:{type:Array,required:!0},name:{type:String,default:"Item"},paginationData:{type:Object,default:{itemPerPage:15,totalItems:1,currentPage:1,maxLinksDisplayed:7}},filters:{type:String}},emits:["filterChange","onSearch"],setup(l,{emit:t}){const r=l;_(),u(),i(""),i("all"),i({});const n=g((()=>r.filters?r.members.filter((e=>e.name.match(new RegExp(r.filters,"i"))||e.last_name.match(new RegExp(r.filters,"i"))||e.id==r.filters||e.phone==r.filters||e.personal_identifications==r.filters)):r.members));m((()=>n.value),(e=>{})),i({status:!1,member:null});const b=(e,a)=>e.substr(0,1)+a.substr(0,1);m((()=>r.members),(()=>{}));const $=i([]);return m((()=>$.value),(e=>{0!=e.length?(P.value=[],n.value.forEach((e=>{P.value.push(e.id)}))):P.value=[]})),(l,t)=>{var i,m;const u=e,g=a,_=s,D=L,S=T,z=y("router-link"),F=A,M=E;return o(),c("div",null,[p("div",R,[p("div",q,[p(u,{class:[0!==v(n).length&&"is-hidden"],title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:d((()=>[O,U])),_:1},8,["class"]),p("div",B,[0!==v(n).length?(o(),c("div",{key:0,class:["flex-table-header",[0===v(n).length&&"is-hidden"]]},[G,J,Q,W,H,K,p("span",N,[p("div",X,[p(_,{raw:"",subcontrol:""},{default:d((()=>[p(g,{modelValue:$.value,"onUpdate:modelValue":t[1]||(t[1]=e=>$.value=e),value:"all","is-label":!1,label:"All",color:"primary"},null,8,["modelValue"])])),_:1}),p(D)])])],2)):f("",!0),p("div",Y,[p(h,{name:"list",tag:"div"},{default:d((()=>[(o(!0),c(x,null,k(v(n),(e=>(o(),c("div",{key:`${r.name}-${e.id}`,class:["flex-table-item cursor-pointer",e.isSolvente?"":"bg-danger"]},[p("div",{onClick:e=>{},class:"flex-table-cell is-media is-grow"},[p(S,{picture:`${v(C)}storage/${e.photo}`,color:"primary",initials:b(e.name,e.last_name),size:"medium"},null,8,["picture","initials"]),p("div",null,[p("span",Z,[p("h3",null,[p(z,{to:{name:"members-profile",query:{id:e.id}},style:{color:"white"}},{default:d((()=>[j(w(e.id)+" "+w(e.name)+" "+w(e.second_name)+" "+w(e.last_name),1)])),_:2},1032,["to"])])])])],8,["onClick"]),p("div",ee,[p("span",ae,w(e.email),1)]),p("div",se,[e.membership_members?(o(),c("span",le,w(e.membership_members.membership.name),1)):f("",!0)]),p("div",te,[null!=e.trainer?(o(),c(S,{key:0,picture:`${v(C)}storage/${e.trainer.photo}`,color:"h-green",initials:b(e.trainer.name,e.trainer.last_name),size:"medium"},null,8,["picture","initials"])):f("",!0),null!=e.trainer?(o(),c("span",re,w(e.trainer.name)+" "+w(e.trainer.second_name)+" "+w(e.trainer.last_name),1)):f("",!0)]),p("div",ie,[p("span",ne,w(e.phone),1)]),p("div",me,[p("span",{class:["tag is-rounded",null!=e.membership_members?"is-success":""]},w(null!=e.membership_members?"Active":"Inactive"),3)]),p("div",oe,[p(_,{raw:"",subcontrol:""},{default:d((()=>[p(g,{modelValue:v(P),"onUpdate:modelValue":t[2]||(t[2]=e=>V(P)?P.value=e:null),value:e.id,"is-label":!1,color:"primary"},null,8,["modelValue","value"])])),_:2},1024),p(F,{"id-member":e.id,member:e},null,8,["id-member","member"])])],2)))),128))])),_:1})])]),v(n).length>0?(o(),c(M,{key:0,"item-per-page":null!=(i=r.paginationData.per_page)?i:15,"total-items":null!=(m=r.paginationData.total)?m:0,"current-page":r.paginationData.current_page},null,8,["item-per-page","total-items","current-page"])):f("",!0)])])])}}});export{ce as _};
