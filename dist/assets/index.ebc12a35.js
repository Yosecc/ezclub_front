import{_ as e}from"./V-Placeload.f8b8ec60.js";import{_ as t}from"./V-Avatar.vue_vue&type=script&setup=true&lang.00efb228.js";import{_ as a}from"./V-Card.vue_vue&type=script&setup=true&lang.11c3a205.js";import{m as s,b as l,c as n,d as o,i,e as r,f as u,h as c,j as m,k as d,l as p,p as v,n as b,o as h,q as y,r as f,t as _,u as g,v as k,w as M,x as C,y as x,z as w,A as Y,B as D,C as j,D as P,E as I,F as S,G as $,H as E,I as z,J as A,K as V,L as T,M as F,N as q,O as N,P as H,Q as L}from"./Members.bfe20765.js";import{b as R,P as B,A as O,F as W,c as G,v as U,g as K,m as J,n as Q,p as X,h as Z,e as ee,a as te,s as ae}from"./index.2913db7c.js";import{d as se,w as le,H as ne,b as oe,r as ie,E as re,o as ue,h as ce,K as me,P as de,j as pe,k as ve,G as be,R as he,S as ye,W as fe,X as _e,a2 as ge,F as ke,A as Me,_ as Ce,aa as xe,z as we,O as Ye}from"./vendor.41bfc188.js";import{_ as De}from"./V-Button.vue_vue&type=script&setup=true&lang.b71f832b.js";import{_ as je}from"./V-Loader.vue_vue&type=script&setup=true&lang.4e7db0f0.js";import{_ as Pe}from"./V-Control.1c77a766.js";import{_ as Ie}from"./V-Field.vue_vue&type=script&setup=true&lang.76856fac.js";import{_ as Se}from"./V-Modal.vue_vue&type=script&setup=true&lang.f8514cb3.js";import{_ as $e}from"./V-Tag.vue_vue&type=script&setup=true&lang.d1f062ed.js";import{_ as Ee}from"./inputsLayaut.vue_vue&type=style&index=0&lang.67d0f0f9.js";import{_ as ze}from"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.066d1ccf.js";import{_ as Ae,a as Ve,b as Te}from"./Presupuesto.vue_vue&type=script&setup=true&lang.a2ca9d56.js";import{_ as Fe}from"./MemberCards.vue_vue&type=script&setup=true&lang.73199d90.js";import{_ as qe}from"./V-AvatarStack.vue_vue&type=script&setup=true&lang.b3b15f6f.js";import{_ as Ne}from"./signComponent.vue_vue&type=script&setup=true&lang.559de044.js";import{_ as He}from"./pdf_icon.3572dcb1.js";import{_ as Le}from"./FlexTableDropdown.vue_vue&type=script&setup=true&lang.b4780617.js";import{_ as Re}from"./V-Block.vue_vue&type=script&setup=true&lang.2cd1d3e1.js";import{_ as Be}from"./V-Tabs.vue_vue&type=script&setup=true&lang.bd708bba.js";import{_ as Oe}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.6b95b7f0.js";import{p as We}from"./sidebarLayoutState.454c18d7.js";import{g as Ge}from"./Discounts.00712b06.js";import{a as Ue}from"./Memberships.ce9fbf71.js";import{g as Ke}from"./Recurrences.82cd332e.js";import{l as Je}from"./Staffs.b55e6071.js";import{g as Qe}from"./Diciplines.490b5ef7.js";import{e as Xe}from"./config.8770ea41.js";import{a as Ze,e as et}from"./Companies.b67d477c.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.705d779e.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.5c7c3de8.js";import"./V-Dropdown.badc33ca.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.3a9e98a1.js";import"./useDropdown.83054731.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.2b1ab525.js";import"./activePanelState.64e8f3f7.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.d68564b0.js";import"./video.97fb6e11.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.83e515e1.js";import"./darkModeState.fd1ad691.js";import"./AnimatedLogo.820f7b3b.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.d9ddefd6.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.c920d493.js";import"./userPopovers.f4b9fc60.js";const tt={class:"d-flex justify-content-center align-items-center flex-column mb-4"},at={class:"mt-5 text-center"},st={class:"title is-5 is-narrow"},lt={class:"w-100 mt-5"},nt=ve("i",{class:"iconify",style:{"font-size":"20px",color:"white"},"data-icon":"feather:arrow-right","aria-hidden":"true"},null,-1);var ot=se({expose:[],props:{category:{type:String,default:"Adult"}},emits:["changeMenu"],setup(e,{emit:l}){const n=e,o=de();le((()=>o.hash),(e=>{m.value=i.findIndex((e=>e.component==o.hash.slice(1)))})),ne((()=>{""!=o.hash&&(m.value=i.findIndex((e=>e.component==o.hash.slice(1))))}));const i=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Family Members",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"},{name:"Invoices",component:"memberInvoices"},{name:"Credit",component:"memberCredit"}],r=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Parent / Guardian",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"},{name:"Credit",component:"memberCredit"},{name:"Invoices",component:"memberInvoices"}],u=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"},{name:"Invoices",component:"memberInvoices"},{name:"Credit",component:"memberCredit"}],c=oe((()=>"Adult"==n.category?i:"Minor"==n.category?r:u)),m=ie(0),d=ie(null),p=oe((()=>null!=c.value[m.value]?c.value[m.value].component:d.value));return(e,n)=>{const o=t,i=a;return re(s)?(ue(),ce(i,{key:0,class:"cardprofile"},{default:pe((()=>[ve("div",tt,[ve(o,{picture:re(s).photo?`${re(R)}storage/${re(s).photo}`:"",size:"xl"},null,8,["picture"]),ve("div",at,[ve("h2",st,be(re(s).name)+" "+be(re(s).second_name)+" "+be(re(s).last_name),1)])]),ve("div",lt,[ve("ul",null,[(ue(!0),ce(he,null,ye(re(c),((e,t)=>(ue(),ce("li",{key:`item-${t}`},[ve(i,{class:["\n              mb-3\n              item_menu\n              d-flex\n              justify-content-between\n              align-items-center\n            ",m.value==t?"active":""],color:m.value==t?"warning":void 0,elevated:m.value==t,onClick:e=>(e=>{m.value=e,l("changeMenu",p)})(t)},{default:pe((()=>[ve("p",null,be(e.name),1),nt])),_:2},1032,["class","color","elevated","onClick"])])))),128))])])])),_:1})):me("",!0)}}});const it=ve("div",{id:"payment-element"},null,-1),rt=ke(" Pay now "),ut=ve("div",{id:"payment-message",class:"hidden"},null,-1);var ct=se({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},setup(t){const s=t,l=Stripe(B.value);le((()=>s.id),(e=>{console.log("cambio"),n.value=!0,m()}));const n=ie(!0);ie({id:s.id,amount:s.amount});const o=ie(),i=oe((()=>"stripe"!=s.url?{payment_type_id:3,amount:s.amount}:{id:s.id,member_mermship_id:s.member_membership,amount:s.amount,payment_type_id:1})),r=ie(null),u=ie(null),c=ie(!1),m=async()=>{let e=await O.post(s.url,i.value).then((e=>{r.value=e.data.clientSecret,o.value=l.elements({clientSecret:r.value}),u.value=o.value.create("payment"),u.value.mount("#payment-element")})).catch((e=>{}));return n.value=!1,e},d=async e=>{e.preventDefault(),c.value=!0,await l.confirmPayment({elements:o.value,confirmParams:{return_url:`${W.value}members/process?payment_type=3&id=`+s.id+`&membership=${s.member_membership}`}}),c.value=!1};return ne((()=>{m()})),(t,s)=>{const l=e,o=De,i=je,r=a;return ue(),ce(he,null,[n.value?(ue(),ce(l,{key:0,height:"500px"})):me("",!0),fe(ve(r,{class:"mt-6"},{default:pe((()=>[ve("form",{onSubmit:ge(d,["prevent"]),id:"payment-form"},[it,ve(i,{size:"small",active:c.value},{default:pe((()=>[ve(o,{id:"submit",class:"mt-4",color:"success"},{default:pe((()=>[rt])),_:1})])),_:1},8,["active"]),ut],40,["onSubmit"])])),_:1},512),[[_e,!n.value]])],64)}}});const mt={class:"table is-hoverable is-striped is-fullwidth"},dt=ve("th",{scope:"col"},"Members",-1),pt=ve("th",{scope:"col"},"Membership Name",-1),vt=ve("th",{scope:"col"},"Recurrence",-1),bt=ve("th",{scope:"col"},"Prorated",-1),ht=ve("th",{scope:"col"},"Membership Cost",-1),yt=ve("th",{scope:"col"},"Initiation Fee",-1),ft=ve("th",{scope:"col"},"Discount",-1),_t=ve("th",{scope:"col"},"Taxes",-1),gt={key:0,scope:"col"},kt=ve("th",{scope:"col"},"Sub Total",-1),Mt={key:0},Ct={key:0},xt={key:1},wt={key:2},Yt={key:0},Dt=ve("br",null,null,-1),jt={key:1},Pt={key:0},It={key:1},St={key:0},$t={key:0},Et={key:1},zt={key:1},At={key:3},Vt={class:"is-end"},Tt={class:"d-flex justify-content-between"},Ft=ke(" Card Payment "),qt=ke(" Cash Payment "),Nt={class:"d-flex mb-4 justify-content-between"},Ht={class:"title is-5"},Lt=ke(" Total: "),Rt={class:"title is-5"},Bt=ke(" Cash Total: "),Ot={class:"\r\n            d-flex\r\n            justify-content-center\r\n            align-items-center\r\n            flex-column\r\n            mb-4\r\n          "},Wt=ve("p",{class:"title is-5 mb-4"},"Change Back:",-1),Gt={class:"title is-3 mb-0"},Ut={class:"d-flex justify-content-center flex-wrap mb-4"},Kt=ve("div",{class:"w-100"},null,-1),Jt={class:"d-flex justify-content-center"},Qt=ke("Reset"),Xt=ke("Confirm");var Zt=se({expose:[],setup(e){ie(!1);const t=ie(!1);ne((()=>{console.log("se monto el payment")}));const i=oe((()=>{let e=G(n,"memberships_id");return null!=e?e:[]})),r=oe((()=>{let e=G(n,"recurrences_id");return null!=e?e:[]})),u=oe((()=>{let e=U(n,"initiation_fee");return null!=e?e:[]})),c=oe((()=>{let e=K(n,"discount");return null!=e?e:[]})),m=oe((()=>{let e=parseFloat(Me().format("DD")),t=0,a=0;return r.value.days>=30&&(a=e-r.value.payday,t=r.value.amount/r.value.days*a),{days:a,amount:Math.abs(Math.round(t))}})),d=oe((()=>(e=>{if(""!=U(n,"memberships_id"))return"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:J(e.tax.value),value:e.tax.value}})(i))),p=ie(null),v=oe((()=>{let e=0;return e+=r.value.amount,U(n,"is_initiation_fee").length||(e+=u.value),e-=m.value.amount,c.value.data&&("dolar"==c.value.data.type?e-=c.value.data.value:"percentaje"==c.value.data.type&&(e-=e/100*c.value.data.value)),e+=e/100*d.value.value,s.value.penalty&&(p.value=i.value.penalty,e+=p.value),s.value.leo_vet_fr&&(e-=e/100*i.value.descuento_vet),e})),b=oe((()=>{let e=0;return e+=v.value,e})),h=ie(!1),y=ie(0),f=oe((()=>{const e=parseFloat(y.value)-parseFloat(b.value);return e>0?e:0}));ie(1);const _=async()=>{await o(l.value.id,{total:b.value,payment_type_id:1,cash:y.value,cash_back:f.value}).then((e=>{Q.success("Payment Success"),window.location.reload()})).catch((e=>{}))};return(e,o)=>{const g=De,k=a,M=ct,C=Pe,x=Ie,w=Se;return ue(),ce("div",null,[ve(k,{class:""},{default:pe((()=>{return[ve("table",mt,[ve("thead",null,[ve("tr",null,[dt,pt,vt,bt,ht,yt,ft,_t,p.value?(ue(),ce("th",gt,"Penalty")):me("",!0),kt])]),0!=re(i).length?(ue(),ce("tbody",Mt,[ve("tr",null,[ve("td",null,[ve("p",null,[ve("b",null,be(re(s).name)+" "+be(re(s).second_name)+" "+be(re(s).last_name),1)])]),0!=re(i).legnth?(ue(),ce("td",Ct,be(re(i).name),1)):me("",!0),0!=re(r).length?(ue(),ce("td",xt,be(re(r).descriptions),1)):me("",!0),0!=re(r).length?(ue(),ce("td",wt,[re(r).days>=30?(ue(),ce("span",Yt,[ke(be(re(m).days)+" days : ",1),Dt,ke(" - "+be(re(J)(re(m).amount)),1)])):(ue(),ce("span",jt,"-"))])):me("",!0),ve("td",null,be(re(J)((e=re(r),e.amount))),1),ve("td",null,[re(U)(re(n),"is_initiation_fee").length?(ue(),ce("span",It,be(re(J)(0)),1)):(ue(),ce("span",Pt,be(re(J)(re(u))),1))]),ve("td",null,[null!=re(c).data?(ue(),ce("span",St,["dolar"==re(c).data.type?(ue(),ce("span",$t," - "+be(re(J)(re(c).data.value)),1)):me("",!0),"percentaje"==re(c).data.type?(ue(),ce("span",Et,be(re(c).data.value)+"%",1)):me("",!0)])):(ue(),ce("span",zt,"-"))]),ve("td",null,be(re(d).text),1),p.value?(ue(),ce("td",At,be(re(J)(p.value)),1)):me("",!0),ve("td",null,be(re(J)(re(v))),1)]),ve("tr",null,[ve("td",{style:{"text-align":"right"},colspan:p.value?"9":"8"}," Total ",8,["colspan"]),ve("td",Vt,be(re(J)(re(b))),1)])])):me("",!0)]),ve("div",Tt,[ve(g,{color:"success",disabled:0==re(i).length||isNaN(re(b)),onClick:o[1]||(o[1]=e=>t.value=!0)},{default:pe((()=>[Ft])),_:1},8,["disabled"]),ve(g,{disabled:0==re(i).length||isNaN(re(b)),color:"warning",onClick:o[2]||(o[2]=e=>h.value=!0)},{default:pe((()=>[qt])),_:1},8,["disabled"])])];var e})),_:1}),t.value?(ue(),ce(M,{key:0,class:"",url:`new_payment/${re(l).id}`,amount:re(b),id:re(s).id,member_membership:re(l).id},null,8,["url","amount","id","member_membership"])):me("",!0),ve(w,{open:h.value,actions:"center",onClose:o[6]||(o[6]=e=>h.value=!1)},{content:pe((()=>[ve("div",Nt,[ve("p",Ht,[Lt,ve("b",null,be(re(J)(re(b))),1)]),ve("p",Rt,[Bt,ve("b",null,be(re(J)(y.value)),1)])]),ve("div",Ot,[Wt,ve("p",Gt,[ve("b",null,be(re(J)(re(f))),1)])]),ve("div",Ut,[ve(g,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:o[3]||(o[3]=e=>y.value=re(b))},{default:pe((()=>[ke(" Full Payment "+be(re(J)(re(b))),1)])),_:1}),Kt,(ue(),ce(he,null,ye([5,10,20,50,100],((e,t)=>ve(g,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>y.value+=e},{default:pe((()=>[ke(" $"+be(e),1)])),_:2},1032,["onClick"]))),64))]),ve("div",Jt,[ve(x,null,{default:pe((()=>[ve(C,null,{default:pe((()=>[fe(ve("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>y.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[Ce,y.value]])])),_:1})])),_:1})])])),action:pe((()=>[ve(g,{onClick:o[5]||(o[5]=e=>y.value=0),class:"d-flex justify-content-center",raised:""},{default:pe((()=>[Qt])),_:1}),ve(g,{color:"success",onClick:_,disabled:re(b)>y.value,class:"d-flex justify-content-center",raised:""},{default:pe((()=>[Xt])),_:1},8,["disabled"])])),_:1},8,["open"])])}}});const ea=ve("div",null,[ve("h1",{class:"title is-4 mb-0"},"Personal Information"),ve("p",null,"Edit member's personal information")],-1),ta=ke(" Save Changes "),aa=ke(" Convert to Members ");var sa=se({expose:[],props:{category:{type:String,default:"Adult"}},setup(e){const t=e;oe((()=>"Prospect"==t.category));const a=ie(!1),s=()=>{a.value=!0;let e=X(i.value),t=new FormData;for(var s in e)t.append(s,e[s]);r(t).then((e=>{Q.success("Edit Success"),a.value=!1})).catch((e=>{a.value=!1}))},l=oe((()=>i.value.filter((e=>e.categories.includes(t.category)))));return(e,n)=>{const o=De,r=je,u=Ee,c=ze;return ue(),ce(c,null,{"header-left":pe((()=>[ea])),"header-right":pe((()=>[ve(r,{size:"small",active:a.value},{default:pe((()=>[ve(o,{onClick:s,color:"primary"},{default:pe((()=>[ta])),_:1}),"Prospect"==t.category?(ue(),ce(o,{key:0,color:"info",class:"ml-3"},{default:pe((()=>[aa])),_:1})):me("",!0)])),_:1},8,["active"])])),content:pe((()=>["Minor"==t.category?(ue(),ce(u,{key:0,"inputs-step":re(l)},null,8,["inputs-step"])):(ue(),ce(u,{key:1,"inputs-step":re(i)},null,8,["inputs-step"]))])),_:1})}}});const la=ve("div",null,[ve("h1",{class:"title is-4 mb-0"},"Membership / Contract"),ve("p",null,"Edit member's membership and contract information")],-1),na={class:"columns is-multiline justify-content-center"},oa={key:0,class:"column is-12"},ia=ve("p",null,[ve("small",null,"Membership")],-1),ra={class:"title is-4 mb-0"},ua={class:"text-right"},ca=ve("b",null,"Payment Method:",-1),ma={class:"title is-4"},da=ve("br",null,null,-1),pa={key:0,class:"mr-1 mb-1"},va={key:1,class:"column is-2"},ba=ve("p",null,[ve("b",null,"HOLD Membership")],-1),ha={key:0},ya=ve("p",null," Hold end date last day of the month prior to the end of the hold ",-1),fa=ke("Confirm"),_a=ve("p",null,"Do you want to create an invoice with the prorated amount?",-1),ga={key:0,class:"table w-100"},ka=ve("td",null,"Tax",-1),Ma=ve("td",null,"Total",-1),Ca=ke("Confirm"),xa={key:2,class:"column is-2"},wa=ve("p",null,[ve("b",null,"Pause Payment")],-1),Ya={key:0},Da=ke("Confirm"),ja={key:3,class:"column is-2"},Pa=ve("p",null,[ve("b",null,"Cancel Membership")],-1),Ia={key:4,class:"column is-2"},Sa=ve("p",null,[ve("b",null,"Payment Now")],-1),$a={key:5,class:"column is-2"},Ea=ve("p",null,[ve("b",null,"Pay Late Fee")],-1),za={key:6,class:"column is-2"},Aa=ve("p",null,[ve("b",null,"Sync Subscription")],-1),Va={key:7,class:"mb-4 column is-12"},Ta=ke("Save Changes"),Fa=ke(" New Membership "),qa={key:9,class:"column is-12 mb-6 mt-4"},Na={key:1},Ha={class:"d-flex justify-content-end w-100"},La=ke("Cancel"),Ra={key:10,class:"columns is-multiline column mt-4 is-12"},Ba=ve("b",null,"Contract Date:",-1),Oa={class:"column is-12"},Wa=ve("h1",{class:"title is-6"},"Active Waiver Information",-1),Ga={class:"text-center"},Ua=ve("img",{src:He,width:"40",alt:""},null,-1),Ka=ke(" View PDF ");var Ja=se({expose:[],props:{},emits:["reload"],setup(t,{emit:o}){ne((()=>{u(n)})),ie(null),ie(null),ie(null),ie(null),ie(null);const r=ie(!1);ie(null);const w=ie(!1),Y=ie(!1),D=ie({total:null}),j=ie([{typeInput:"switchEventChangeInput",name:"prorrateo",values:["NO","Yes"],model:!0,required:!1,class:"is-12",isLabel:!0}]);xe(),de();const P=oe((()=>{let e=n.findIndex((e=>"prorrateo"==e.name)),t=n.findIndex((e=>"schedules"==e.name));if(-1==e&&(n.unshift(c.value[0]),K(n,"recurrence").class="is-4"),-1==t&&(n.push(m.value[0]),K(n,"prorrateo").change=function(e){this.model?K(e,"schedules").disabled=!0:K(e,"schedules").disabled=!1}),s.value&&l.value&&1==l.value.status){let e=["locations_id","diciplines","staff_id","discount"];return n.filter((t=>e.includes(t.name)))}return console.log("membershipsData2",n.findIndex((e=>"prorrateo"==e.name))),n})),I=()=>{K(n,"amount").required=!1,K(n,"initiation_fee").required=!1,K(n,"diciplines").required=!1;const e=X(n);b(e).then((e=>{Q.success("Success"),r.value=!1,K(n,"amount").required=!0,K(n,"initiation_fee").required=!0,K(n,"diciplines").required=!0}))},S=async()=>{r.value=!0,await h(P.value,i.value),r.value=!1},$=()=>{confirm("Are you sure you want to perform this action?")&&(r.value=!0,y().then((e=>{Q.success("Memberships Cancel"),window.location.reload(),r.value=!1})))},E=e=>{f(e,l.value.id).then((e=>{if(e.data.status)Q.success("Sign Success");else for(var t in Q.error(e.data.mensaje),e.data.errores)e.data.errores[t].forEach((e=>{Q.error(`${t} : ${e}`)}))})).catch((e=>{}))},z=e=>{},A=ie(!1),V=ie(null),T=()=>{confirm("Are you sure you want to perform this action?")&&(r.value=!0,_(l.value.id,V.value).then((e=>{Q.success("Success Pause"),r.value=!1,o("reload")})).catch((e=>{for(var t in r.value=!1,e.response.data)e.response.data.errores[t].forEach((e=>{Q.error(`${t}: ${e}`)}))})))},F=()=>{confirm("Are you sure you want to perform this action?")&&(r.value=!0,g(l.value.id,V.value,K(j.value,"prorrateo").model).then((e=>{Q.success("Success Hold"),r.value=!1,V.value=null,o("reload")})).catch((e=>{for(var t in r.value=!1,e.response.data)e.response.data[t].forEach((e=>{Q.error(`${t}: ${e}`)}))})))},q=ie(!1),N=(e,t=3,a={})=>{if(!confirm("Do you want to try the payment?"))return;let n={payment_type_id:t,payment_method:e,total:s.value.subscription.total_invoice};1==t&&(n.changeBack=a.changeBack,n.cash=a.cash),r.value=!0,k(l.value.id,n).then((e=>{Q.success("success"),window.location.reload()})).catch((e=>{if("object"==typeof e.response.data)for(var t in e.response.data)"array"==typeof e.response.data[t]||Q.error(e.response.data[t]);else Q.error(e.response.data)})).finally((()=>{r.value=!1}))},H=e=>{N(null,1,e)},L=()=>{r.value=!0,M().then((e=>{r.value=!1,Q.success("Success"),o("reload")})).catch((e=>{r.value=!1}))},B=()=>{r.value=!0,C().then((e=>{r.value=!1,Q.success("Success"),o("reload")})).catch((e=>{Q.error(e.response.data),r.value=!1}))},O=()=>{if(null==l.value.hold_date_finish&&null==l.value.date_finish_pause)w.value=!0;else{if(null!=l.value.date_finish_pause)return void Q.error("This membership is on pause. Activation is required to continue");x(l.value.id).then((e=>{console.log(e.data),D.value=e.data,Y.value=!0})).catch((e=>{console.log(e.response.data)}))}},W=()=>{if(null==s.value.subscription.pause_collection)A.value=!0;else{if(null!=l.value.hold_date_finish)return void Q.error("This membership is on pause.");T()}};return(t,n)=>{const o=a,i=je,u=De,c=Se,m=Ee,b=Ae,h=Fe,y=qe,f=De,_=e,g=Ve,k=Te,M=Ne,C=ze;return ue(),ce(C,null,{"header-left":pe((()=>[la])),content:pe((()=>[ve("div",na,[re(s)&&re(l)&&1==re(l).status?(ue(),ce("div",oa,[ve(o,{class:"d-flex justify-content-between",color:null!=re(l).hold_date_finish?"warning":"info",style:null==re(s).subscription.pause_collection?{}:{backgroundColor:"#404046 !important"}},{default:pe((()=>[ve("span",null,[ia,ve("p",ra,be(re(l).membership.name),1),ve("p",null,be(re(l).recurrence.descriptions),1)]),ve("span",ua,[ve("p",null,[ve("small",null,[ca,ke(" "+be(re(l).payment_type.name),1)])]),ve("p",null,[ve("small",null,be(re(l).recurrence.is_recurrence?"Recurrence":"no recurrence"),1)]),ve("p",ma,[ke(be(re(J)(re(s).subscription.total_invoice/100)),1),da,re(s).subscription&&re(s).subscription.subscription&&!re(s).subscription.subscription.upcoming_total?(ue(),ce("small",pa,"No upcoming bill")):me("",!0)])])])),_:1},8,["color","style"])])):me("",!0),re(s)&&re(l)&&1==re(l).status?(ue(),ce("div",va,[re(s).membership_members.is_recurrence?(ue(),ce(i,{key:0,size:"small",active:r.value},{default:pe((()=>[re(l)&&re(s).subscription?(ue(),ce(o,{key:0,color:"warning",outlined:null==re(l).hold_date_finish,onClick:O,class:"mr-4 btn-card text-center px-2",style:{"font-size":"12px"}},{default:pe((()=>[ba,ve("p",null,[null!=re(l).hold_date_finish?(ue(),ce("span",ha,"Active until: "+be(re(Me)(re(l).hold_date_finish).format("MM/DD/YYYY")),1)):me("",!0)])])),_:1},8,["outlined"])):me("",!0)])),_:1},8,["active"])):me("",!0),ve(c,{open:w.value,actions:"center",onClose:n[2]||(n[2]=e=>w.value=!1)},{content:pe((()=>[ya,fe(ve("input",{type:"date","onUpdate:modelValue":n[1]||(n[1]=e=>V.value=e),class:"input mt-4"},null,512),[[Ce,V.value]])])),action:pe((()=>[ve(u,{onClick:F,color:"primary",raised:""},{default:pe((()=>[fa])),_:1})])),_:1},8,["open"]),ve(c,{open:Y.value,actions:"center",onClose:n[3]||(n[3]=e=>Y.value=!1)},{content:pe((()=>[_a,ve(m,{"inputs-step":j.value},null,8,["inputs-step"]),D.value.total?(ue(),ce("table",ga,[ve("tr",null,[ve("td",null," Subtotal ("+be(D.value.dias_restantes)+" days) ",1),ve("td",null,be(re(J)(D.value.subtotal)),1)]),ve("tr",null,[ka,ve("td",null,be(re(J)(D.value.tax)),1)]),ve("tr",null,[Ma,ve("td",null,be(re(J)(D.value.total)),1)])])):me("",!0)])),action:pe((()=>[ve(u,{onClick:F,color:"primary",raised:""},{default:pe((()=>[Ca])),_:1})])),_:1},8,["open"])])):me("",!0),re(s)&&re(l)&&1==re(l).status?(ue(),ce("div",xa,[re(s).membership_members.is_recurrence?(ue(),ce(i,{key:0,size:"small",active:r.value},{default:pe((()=>[re(l)&&re(s).subscription?(ue(),ce(o,{key:0,color:"undefined",style:[{"font-size":"12px"},null==re(s).subscription.pause_collection?{}:{backgroundColor:"#404046"}],outlined:null==re(s).subscription.pause_collection,onClick:W,class:"mr-4 btn-card text-center px-2"},{default:pe((()=>[wa,ve("p",null,[null!=re(s).subscription.pause_collection?(ue(),ce("span",Ya,"Active until: "+be(re(Me)(re(s).subscription.pause_collection).format("MM-DD-YYYY")),1)):me("",!0)])])),_:1},8,["style","outlined"])):me("",!0)])),_:1},8,["active"])):me("",!0),ve(c,{open:A.value,actions:"center",onClose:n[5]||(n[5]=e=>A.value=!1)},{content:pe((()=>[fe(ve("input",{type:"date","onUpdate:modelValue":n[4]||(n[4]=e=>V.value=e),class:"input"},null,512),[[Ce,V.value]])])),action:pe((()=>[ve(u,{onClick:T,color:"primary",raised:""},{default:pe((()=>[Da])),_:1})])),_:1},8,["open"])])):me("",!0),re(s)&&re(l)&&1==re(l).status?(ue(),ce("div",ja,[ve(i,{size:"small",active:r.value},{default:pe((()=>[re(l)?(ue(),ce(o,{key:0,color:"danger",outlined:"",onClick:$,class:"mr-4 btn-card text-center px-2",style:{"font-size":"12px"}},{default:pe((()=>[Pa])),_:1})):me("",!0)])),_:1},8,["active"])])):me("",!0),re(s)&&re(l)&&1==re(l).status?(ue(),ce("div",Ia,[ve(i,{size:"small",active:r.value},{default:pe((()=>[re(l)?(ue(),ce(o,{key:0,color:"success",outlined:"",onClick:n[6]||(n[6]=e=>q.value=!q.value),class:"mr-4 btn-card text-center px-2",style:{"font-size":"12px"}},{default:pe((()=>[Sa])),_:1})):me("",!0)])),_:1},8,["active"])])):me("",!0),re(s)&&re(l)?(ue(),ce("div",$a,[re(s).membership_members.is_recurrence?(ue(),ce(i,{key:0,size:"small",active:r.value},{default:pe((()=>[re(l)?(ue(),ce(o,{key:0,color:"secondary",outlined:"",onClick:L,class:"mr-4 btn-card text-center px-2",style:{"font-size":"12px"}},{default:pe((()=>[Ea])),_:1})):me("",!0)])),_:1},8,["active"])):me("",!0)])):me("",!0),re(s)&&re(l)?(ue(),ce("div",za,[re(s).membership_members.is_recurrence?(ue(),ce(i,{key:0,size:"small",active:r.value},{default:pe((()=>[re(l)?(ue(),ce(o,{key:0,color:void 0,outlined:"",onClick:B,class:"mr-4 btn-card text-center px-2",style:{"font-size":"12px"}},{default:pe((()=>[Aa])),_:1})):me("",!0)])),_:1},8,["active"])):me("",!0)])):me("",!0),q.value?(ue(),ce("div",Va,[re(s).user?(ue(),ce(h,{key:0,onOnMethodPayment:N,memberid:re(s).id,method_default:re(s).user.pm_last_four,"show-new-card":!1,class:"mb-4",ancho:"is-4"},{default:pe((()=>[ve(b,{total:re(s).subscription.total_invoice,margin:"mx-0",class:"is-4",onOnPaymentCash:H},null,8,["total"])])),_:1},8,["memberid","method_default"])):me("",!0)])):me("",!0),re(d).length?me("",!0):(ue(),ce(o,{key:8,class:"mb-4 column is-12"},{default:pe((()=>[ve(m,{"inputs-step":re(P)},null,8,["inputs-step"]),re(s)&&re(s).trainers?(ue(),ce(y,{key:0,avatars:re(p)(re(s).trainers),size:"small"},null,8,["avatars"])):me("",!0),re(s)&&re(l)&&1==re(l).status?(ue(),ce(i,{key:1,size:"small",active:r.value},{default:pe((()=>[ve(f,{class:"mt-5",onClick:I,color:"primary"},{default:pe((()=>[Ta])),_:1})])),_:1},8,["active"])):me("",!0),re(v)?me("",!0):(ue(),ce(i,{key:2,size:"small",active:r.value},{default:pe((()=>[re(l)&&2!=re(l).status?me("",!0):(ue(),ce(f,{key:0,class:"mt-5",onClick:S,color:"primary"},{default:pe((()=>[Fa])),_:1}))])),_:1},8,["active"]))])),_:1})),re(l)&&2!=re(l).status?me("",!0):(ue(),ce("div",qa,[r.value?(ue(),ce(_,{key:0,height:"300px",class:"mb-4"})):me("",!0),re(d).length?(ue(),ce("div",Na,[(ue(!0),ce(he,null,ye(re(d),((e,a)=>(ue(),ce(k,{key:`presupuesto-${a}`,class:"mb-4",presupuesto:e},{default:pe((()=>[ve("div",Ha,[ve(g,{member:e.member,member_id:re(s).id,membresia:e.membresia,contact:t.dataContact,presupuesto_id:e.presupuesto_id,"categories-members":t.categoriesMembers,"notas-input":t.notasInput,total:e.totales.upfront.amount_total,onPaymentAction:z,type:"edit"},null,8,["member","member_id","membresia","contact","presupuesto_id","categories-members","notas-input","total"])])])),_:2},1032,["presupuesto"])))),128)),ve(f,{onClick:n[7]||(n[7]=e=>d.value=[]),color:"danger"},{default:pe((()=>[La])),_:1})])):me("",!0)])),re(s)&&re(l)?(ue(),ce("div",Ra,[ve("div",null,[ve("p",null,[Ba,ke(" "+be(re(Me)(re(s).membership_members.created_at).format("ddd - DD MMM yyyy")),1)])]),ve("div",Oa,[ve(M,{onOnSign:E,"is-sign":!re(l).sign,contract:`contract_${re(s).id}_${re(s).membership_members.id}_${re(s).personal_identifications}.pdf`,"url-contract":`generateContract/${re(s).id}`},null,8,["is-sign","contract","url-contract"])])])):me("",!0),me("",!0),re(s)&&re(l)?(ue(),ce(o,{key:12,class:"mb-4"},{default:pe((()=>[Wa,ve("div",Ga,[ve("a",{target:"_blank",href:`${re(R)}generateWeiver/${re(s).id}`},[Ua,ve("p",null," weiver_"+be(re(s).id)+"_"+be(re(s).membership_members.id)+"_"+be(re(s).personal_identifications)+".pdf ",1),ve(u,{color:"success",outlined:"",class:"mt-4 py-1"},{default:pe((()=>[Ka])),_:1})],8,["href"])])])),_:1})):me("",!0)])])),_:1})}}});const Qa=ve("div",null,[ve("h1",{class:"title is-4 mb-0"},"Family Members"),ve("p",null,"Edit member's family members")],-1),Xa={class:"columns is-multiline"},Za={key:0,class:"column is-4 mb-4"},es=ve("div",null,[ve("h1",{class:"title is-4 mb-0"},"Parent"),ve("p",null,"Edit parent contact")],-1),ts=ke(" Save Changes "),as={class:""},ss=ve("h1",{class:"title is-5"},"Parent Contact Information",-1),ls={class:"d-flex justify-content-end mr-6"};var ns=se({expose:[],setup(e){ie([{id:1,name:"Wonder Woman",subtitle:"Mother/Adult",img:"https://picsum.photos/150/150"},{id:2,name:"Lionel Messi",subtitle:"Father/Minor",img:"https://picsum.photos/150/151"}]);const a=()=>{const e=X(w.value),t=new FormData;for(var a in e)t.append(a,e[a]);Z.value||j(t).then((e=>{Q.success("Success")}))},l=oe((()=>(console.log("info",i.value),K(w.value,"city_id").model=K(i.value,"city_id").model,K(w.value,"state_id").model=K(i.value,"state_id").model,K(w.value,"postal_code").model=K(i.value,"postal_code").model,K(w.value,"country_id").model=K(i.value,"country_id").model,w.value)));return(e,n)=>{const o=t,i=Le,r=Re,u=ze,c=De,m=Ee;return ue(),ce("div",null,[re(s)&&"Adult"==re(s).category?(ue(),ce(u,{key:0},{"header-left":pe((()=>[Qa])),"header-right":pe((()=>[])),content:pe((()=>[ve("div",Xa,[re(Y)?(ue(),ce("div",Za,[ve(r,{title:`${re(Y).name} ${re(Y).second_name} ${re(Y).last_name}`,class:"border-1 p-4 radius-small"},{icon:pe((()=>[ve(o,{size:"medium",picture:`${re(R)}storage/${re(Y).photo}`,subtitle:"Principal Family"},null,8,["picture"])])),action:pe((()=>[ve(i,{"id-member":re(Y).id},null,8,["id-member"])])),_:1},8,["title"])])):me("",!0),(ue(!0),ce(he,null,ye(re(D),((e,t)=>(ue(),ce("div",{class:"column is-4 mb-4",key:`family-${t}`},[ve(r,{title:`${e.member.name} ${e.member.second_name} ${re(s).last_name}`,subtitle:e.member.relationships,class:"border-1 p-4 radius-small"},{icon:pe((()=>[ve(o,{size:"medium",picture:`${re(R)}storage/${e.member.photo}`},null,8,["picture"])])),action:pe((()=>[ve(i,{"id-member":e.members_id},null,8,["id-member"])])),_:2},1032,["title","subtitle"])])))),128))])])),_:1})):me("",!0),re(s)&&"Minor"==re(s).category?(ue(),ce(u,{key:1},{"header-left":pe((()=>[es])),"header-right":pe((()=>[ve(c,{onClick:a,color:"primary"},{default:pe((()=>[ts])),_:1})])),content:pe((()=>[ve("div",as,[ss,ve("div",ls,[ve(o,{picture:`${re(R)}storage/${re(K)(re(w),"parent_photo").data}`,size:"large"},null,8,["picture"])]),ve(m,{"inputs-step":re(l)},null,8,["inputs-step"])])])),_:1})):me("",!0)])}}});const os=ve("div",null,[ve("h1",{class:"title is-4 mb-0"},"Emergency Contact"),ve("p",null,"Edit member's emergency contact")],-1),is=ke(" Save Changes "),rs={class:""},us=ve("h1",{class:"title is-5"},"Emergency Contact Information",-1);var cs=se({expose:[],setup(e){const t=()=>{const e=X(P.value);console.log(e),I(e).then((e=>{Q.success("Success")}))};return(e,a)=>{const s=De,l=Ee,n=ze;return ue(),ce(n,null,{"header-left":pe((()=>[os])),"header-right":pe((()=>[ve(s,{onClick:t,color:"primary"},{default:pe((()=>[is])),_:1})])),content:pe((()=>[ve("div",rs,[us,ve(l,{"inputs-step":re(P)},null,8,["inputs-step"])])])),_:1})}}});const ms=ve("div",null,[ve("h1",{class:"title is-4 mb-0"},"Check-ins History"),ve("p",null,"Edit member's check-ins history")],-1),ds={class:"p-6"},ps={class:"mt-4"},vs={class:"table is-hoverable is-fullwidth"},bs=ve("thead",null,[ve("tr",null,[ve("th",{scope:"col"},"DATE"),ve("th",{scope:"col"},"TIME")])],-1);var hs=se({expose:[],setup:e=>(e,t)=>{const a=ze;return re(s)?(ue(),ce(a,{key:0},{"header-left":pe((()=>[ms])),"header-right":pe((()=>[])),content:pe((()=>[ve("div",ds,[ve("div",ps,[ve("table",vs,[bs,ve("tbody",null,[(ue(!0),ce(he,null,ye(re(S),((e,t)=>(ue(),ce("tr",{key:`access-${t}`},[ve("td",null,be(re(Me)(e.created_at).format("MM/DD/YYYY")),1),ve("td",null,be(re(Me)(e.created_at).format("HH:mm:ss")),1)])))),128))])])])])])),_:1})):me("",!0)}});const ys=ie([{typeInput:"text",name:"description",placeholder:"Description",model:"",class:"is-12",isLabel:!0,required:!0},{typeInput:"text",name:"amount",placeholder:"Amount",model:"",class:"is-12",isLabel:!0,required:!0}]),fs=ke("Confirm");var _s=se({expose:[],props:{openModal:{type:Boolean,default:!1},paymentMethodId:{type:String,default:""},paymentGateway:{type:Number,default:1}},emits:["closeModal","refreshTransactions"],setup(e,{emit:t}){const a=e,l=ie(!1),n=async()=>{const e=X(ys.value);await s.value;const n={amount:e.amount,description:e.description,payment_method_id:a.paymentGateway,payment_method_stripe_id:a.paymentMethodId,member_id:s.value.id};l.value=!0;try{await(async(e={})=>await O.post("make-manual-payment",e))(n),ee(ys.value),Q.success("Success"),t("closeModal")}catch(o){"string"==typeof o.response.data.message?Q.error(o.response.data.message):Q.error(o)}finally{l.value=!1}},o=()=>{ee(ys.value),t("closeModal")};return(e,t)=>{const s=Ee,i=De,r=Se;return ue(),ce(r,{open:a.openModal,title:"Create a new payment",size:"small",actions:"right",onClose:o},{content:pe((()=>[ve(s,{"inputs-step":re(ys)},null,8,["inputs-step"])])),action:pe((()=>[ve(i,{color:"primary",raised:"",onClick:n,loading:l.value},{default:pe((()=>[fs])),_:1},8,["loading"])])),_:1},8,["open"])}}});const gs=ve("div",null,[ve("h1",{class:"title is-4 mb-0"},"Purchases History"),ve("p",null,"Edit member's purchases history")],-1),ks=ve("p",{class:"title is-5"},"Card List",-1),Ms=ve("div",{class:"d-flex align-items-center"},[ve("p",{class:"title is-1 mb-0"},[ve("i",{class:"fas fa-shopping-bag","aria-hidden":"true"})]),ve("div",{class:"ml-4"},[ve("p",{class:"title is-4 mb-2"},"Make a new payment with cash")])],-1);var Cs=se({expose:[],setup(e){const t=ie(null),l=ie(!1),n=ie(1),o=()=>{},i=e=>{t.value=e,n.value=1,l.value=!0},r=()=>{l.value=!0,n.value=2},u=()=>{l.value=!1};return(e,c)=>{const m=_s,d=Fe,p=a,v=ze;return re(s)?(ue(),ce(v,{key:0},{"header-left":pe((()=>[gs])),"header-right":pe((()=>[])),content:pe((()=>[ks,ve(m,{"payment-method-id":t.value,"open-modal":l.value,"payment-gateway":n.value,onCloseModal:u},null,8,["payment-method-id","open-modal","payment-gateway"]),re(s).user?(ue(),ce(d,{key:0,"show-option":!0,class:"mb-6",onMakePayment:i,onOnMethodPayment:o,method_default:re(s).user.pm_last_four,"show-new-card":!0,memberid:re(s).id},null,8,["method_default","memberid"])):me("",!0),ve(p,{onClick:r,color:"success",class:"btn-card"},{default:pe((()=>[Ms])),_:1})])),_:1})):me("",!0)}}});const xs=ve("div",null,[ve("h1",{class:"title is-4 mb-0"},"Subscription Invoice History"),ve("p")],-1),ws=ve("p",null,"Invoices",-1),Ys={class:"table is-hoverable is-fullwidth"},Ds=ve("thead",null,[ve("tr",null,[ve("th",{scope:"col"},"Description"),ve("th",{scope:"col"},"Created"),ve("th",{scope:"col"},"Amount"),ve("th",{scope:"col"},"Method"),ve("th",{scope:"col"},"Download"),ve("th",{scope:"col"},"Status")])],-1),js={key:0},Ps=ve("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),Is={key:1},Ss=ve("td",null,"Subscription",-1),$s={key:0},Es={key:1},zs={key:0},As={key:1},Vs=ve("td",null,"Cash",-1),Ts=ve("td",null,null,-1);var Fs=se({expose:[],setup(e){const t=we({data:[]});return oe((()=>l.value.payments)),oe((()=>{let e=[];return E.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),ne((async()=>{await $(s.value.id,{invoice_type:1}).then((e=>{t.data=e.data.invoices})).catch((e=>{}))})),(e,l)=>{const n=De,o=$e,i=a,r=ze;return re(s)?(ue(),ce(r,{key:0},{"header-left":pe((()=>[xs])),"header-right":pe((()=>[])),content:pe((()=>[ve(i,{class:"my-4"},{default:pe((()=>[ws,ve("table",Ys,[Ds,re(s).subscription&&re(t).data?(ue(),ce("tbody",js,[(ue(!0),ce(he,null,ye(re(t).data,((e,t)=>(ue(),ce("tr",{key:`invoice-${t}`},[ve("td",null,[ve("p",null,be(e.description),1)]),ve("td",null,be(re(Me)(e.created).format("MM/DD/YYYY")),1),ve("td",null,be(re(J)(e.total/100)),1),ve("td",null,be(e.collection_method),1),ve("td",null,[ve("a",{href:e.invoice_pdf,target:"_blank"},[ve(n,null,{default:pe((()=>[Ps])),_:1})],8,["href"])]),ve("td",null,[ve(o,{class:"mr-1 mb-1",label:e.status},null,8,["label"])])])))),128))])):re(s).membership_members&&re(s).membership_members.invoice_local?(ue(),ce("tbody",Is,[(ue(!0),ce(he,null,ye(re(s).membership_members.invoice_local,((e,t)=>(ue(),ce("tr",{key:`invoice-${t}`},[Ss,ve("td",null,be(re(Me)(e.created).format("MM/DD/YYYY")),1),ve("td",null,[e.period_start?(ue(),ce("span",$s,be(re(Me)(e.period_start).format("MM/DD/YYYY")),1)):(ue(),ce("span",Es))]),ve("td",null,[e.period_end?(ue(),ce("span",zs,be(re(Me)(e.period_end).format("MM/DD/YYYY")),1)):(ue(),ce("span",As))]),ve("td",null,be(re(J)(e.amount/100)),1),Vs,Ts,ve("td",null,be(e.status?"paid":"incomplete"),1)])))),128))])):me("",!0)])])),_:1}),me("",!0)])),_:1})):me("",!0)}}});const qs=ve("div",null,[ve("h1",{class:"title is-4 mb-0"},"Product Invoice History"),ve("p")],-1),Ns=ve("p",null,"Invoices",-1),Hs={class:"table is-hoverable is-fullwidth"},Ls=ve("thead",null,[ve("tr",null,[ve("th",{scope:"col"},"Description"),ve("th",{scope:"col"},"Created"),ve("th",{scope:"col"},"Amount"),ve("th",{scope:"col"},"Method"),ve("th",{scope:"col"},"Download"),ve("th",{scope:"col"},"Status")])],-1),Rs={key:0},Bs=ve("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),Os={key:1},Ws=ve("td",null,"Subscription",-1),Gs={key:0},Us={key:1},Ks={key:0},Js={key:1},Qs=ve("td",null,"Cash",-1),Xs=ve("td",null,null,-1);var Zs=se({expose:[],setup(e){const t=we({data:[]});return oe((()=>l.value.payments)),oe((()=>{let e=[];return E.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),ne((async()=>{const{data:e}=await $(s.value.id,{invoice_type:2});t.data=e.invoices})),(e,l)=>{const n=De,o=$e,i=a,r=ze;return re(s)?(ue(),ce(r,{key:0},{"header-left":pe((()=>[qs])),"header-right":pe((()=>[])),content:pe((()=>[ve(i,{class:"my-4"},{default:pe((()=>[Ns,ve("table",Hs,[Ls,re(s).subscription&&re(t).data?(ue(),ce("tbody",Rs,[(ue(!0),ce(he,null,ye(re(t).data,((e,t)=>(ue(),ce("tr",{key:`invoice-${t}`},[ve("td",null,[ve("p",null,be(e.description),1)]),ve("td",null,be(re(Me)(e.created).format("MM/DD/YYYY")),1),ve("td",null,be(re(J)(e.total/100)),1),ve("td",null,be(e.collection_method),1),ve("td",null,[ve("a",{href:e.invoice_pdf,target:"_blank"},[ve(n,null,{default:pe((()=>[Bs])),_:1})],8,["href"])]),ve("td",null,[ve(o,{class:"mr-1 mb-1",label:e.status},null,8,["label"])])])))),128))])):re(s).membership_members&&re(s).membership_members.invoice_local?(ue(),ce("tbody",Os,[(ue(!0),ce(he,null,ye(re(s).membership_members.invoice_local,((e,t)=>(ue(),ce("tr",{key:`invoice-${t}`},[Ws,ve("td",null,be(re(Me)(e.created).format("MM/DD/YYYY")),1),ve("td",null,[e.period_start?(ue(),ce("span",Gs,be(re(Me)(e.period_start).format("MM/DD/YYYY")),1)):(ue(),ce("span",Us))]),ve("td",null,[e.period_end?(ue(),ce("span",Ks,be(re(Me)(e.period_end).format("MM/DD/YYYY")),1)):(ue(),ce("span",Js))]),ve("td",null,be(re(J)(e.amount/100)),1),Qs,Xs,ve("td",null,be(e.status?"paid":"incomplete"),1)])))),128))])):me("",!0)])])),_:1}),me("",!0)])),_:1})):me("",!0)}}});const el=ve("div",null,[ve("h1",{class:"title is-4 mb-0"},"Charge Invoice History"),ve("p")],-1),tl=ve("p",null,"Invoices",-1),al={class:"table is-hoverable is-fullwidth"},sl=ve("thead",null,[ve("tr",null,[ve("th",{scope:"col"},"Description"),ve("th",{scope:"col"},"Created"),ve("th",{scope:"col"},"Amount"),ve("th",{scope:"col"},"Method"),ve("th",{scope:"col"},"Download"),ve("th",{scope:"col"},"Status")])],-1),ll={key:0},nl=ve("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),ol={key:1},il=ve("td",null,"Subscription",-1),rl={key:0},ul={key:1},cl={key:0},ml={key:1},dl=ve("td",null,"Cash",-1),pl=ve("td",null,null,-1);var vl=se({expose:[],setup(e){const t=we({data:[]});return oe((()=>l.value.payments)),oe((()=>{let e=[];return E.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),ne((async()=>{const{data:e}=await $(s.value.id,{invoice_type:3});t.data=e.invoices})),(e,l)=>{const n=De,o=$e,i=a,r=ze;return re(s)?(ue(),ce(r,{key:0},{"header-left":pe((()=>[el])),"header-right":pe((()=>[])),content:pe((()=>[ve(i,{class:"my-4"},{default:pe((()=>[tl,ve("table",al,[sl,re(s).subscription&&re(t).data?(ue(),ce("tbody",ll,[(ue(!0),ce(he,null,ye(re(t).data,((e,t)=>(ue(),ce("tr",{key:`invoice-${t}`},[ve("td",null,[ve("p",null,be(e.description),1)]),ve("td",null,be(re(Me)(e.created).format("MM/DD/YYYY")),1),ve("td",null,be(re(J)(e.total/100)),1),ve("td",null,be(e.collection_method),1),ve("td",null,[ve("a",{href:e.invoice_pdf,target:"_blank"},[ve(n,null,{default:pe((()=>[nl])),_:1})],8,["href"])]),ve("td",null,[ve(o,{class:"mr-1 mb-1",label:e.status},null,8,["label"])])])))),128))])):re(s).membership_members&&re(s).membership_members.invoice_local?(ue(),ce("tbody",ol,[(ue(!0),ce(he,null,ye(re(s).membership_members.invoice_local,((e,t)=>(ue(),ce("tr",{key:`invoice-${t}`},[il,ve("td",null,be(re(Me)(e.created).format("MM/DD/YYYY")),1),ve("td",null,[e.period_start?(ue(),ce("span",rl,be(re(Me)(e.period_start).format("MM/DD/YYYY")),1)):(ue(),ce("span",ul))]),ve("td",null,[e.period_end?(ue(),ce("span",cl,be(re(Me)(e.period_end).format("MM/DD/YYYY")),1)):(ue(),ce("span",ml))]),ve("td",null,be(re(J)(e.amount/100)),1),dl,pl,ve("td",null,be(e.status?"paid":"incomplete"),1)])))),128))])):me("",!0)])])),_:1}),me("",!0)])),_:1})):me("",!0)}}});const bl={},hl={key:0},yl={key:1},fl={key:2};bl.render=function(e,t){const a=Fs,s=Zs,l=vl,n=Be;return ue(),ce(n,{selected:"subscription",tabs:[{label:"Subscription Invoice",value:"subscription"},{label:"Product Invoice",value:"product"},{label:"Charge Invoice",value:"charge"}]},{tab:pe((({activeValue:e})=>["subscription"===e?(ue(),ce("div",hl,[ve(a)])):"product"===e?(ue(),ce("div",yl,[ve(s)])):"charge"===e?(ue(),ce("div",fl,[ve(l)])):me("",!0)])),_:1})};const _l=ve("div",null,[ve("h1",{class:"title is-4 mb-0"}," Waiver "),ve("p",null,"Edit member's waiver information")],-1),gl=ke(" Convert to Members "),kl={class:"columns is-multiline"},Ml={class:"border-1 document_box p-4 d-flex justify-content-center radius-small"},Cl={href:"234",class:"text-center"},xl=ve("img",{style:{width:"70px"},src:He,alt:""},null,-1);var wl=se({expose:[],setup(e){const t=ie([{name:"Waiver_010221.pdf",url:""},{name:"Waiver_010221.pdf",url:""}]);return(e,a)=>{const s=De,l=ze;return ue(),ce(l,null,{"header-left":pe((()=>[_l])),"header-right":pe((()=>[ve(s,{color:"info"},{default:pe((()=>[gl])),_:1})])),content:pe((()=>[ve("div",kl,[(ue(!0),ce(he,null,ye(t.value,((e,t)=>(ue(),ce("div",{class:"column is-2 mb-4",key:`family-${t}`},[ve("div",Ml,[ve("a",Cl,[xl,ve("p",null,be(e.name),1)])])])))),128))])])),_:1})}}});const Yl=ke("Confirm");var Dl=se({expose:[],props:{openModal:{type:Boolean,default:!1}},emits:["closeModal","refreshTransactions"],setup(e,{emit:t}){const a=e,l=ie(!1),n=async()=>{const e=X(z.value),a={amount:e.amount,description:e.description};l.value=!0;try{"Add Credit"===e.transaction_type?await A(s.value.id,a):await V(s.value.id,a),ee(z.value),Q.success("Success"),t("closeModal"),t("refreshTransactions")}catch(n){"string"==typeof n.response.data.message?Q.error(n.response.data.message):Q.error(n)}finally{l.value=!1}},o=()=>{ee(z.value),t("closeModal")};return(e,t)=>{const s=Ee,i=De,r=Se;return ue(),ce(r,{open:a.openModal,title:"Create a new transaction",size:"small",actions:"right",onClose:o},{content:pe((()=>[ve(s,{"inputs-step":re(z)},null,8,["inputs-step"])])),action:pe((()=>[ve(i,{color:"primary",raised:"",onClick:n,loading:l.value},{default:pe((()=>[Yl])),_:1},8,["loading"])])),_:1},8,["open"])}}});const jl=ve("div",null,[ve("h1",{class:"title is-4 mb-0"},"Credit History"),ve("p",null,"Edit member's credit history")],-1),Pl=ke(" New Transaction "),Il={class:"title"},Sl={class:"mt-4"},$l={class:"table is-hoverable is-fullwidth"},El=ve("thead",null,[ve("tr",null,[ve("th",{scope:"col"},"ID"),ve("th",{scope:"col"},"Description"),ve("th",{scope:"col"},"Date"),ve("th",{scope:"col"},"Type"),ve("th",{scope:"col"},"Amount")])],-1),zl={key:0};var Al=se({expose:[],setup(e){const t=we({open:!1}),l=ie(0);ne((async()=>{n()}));const n=async()=>{await T(s.value.id),(async()=>{const{data:e}=await F(s.value.id);l.value=e.balance})()},o=()=>{t.open=!t.open},i=()=>{t.open=!1};return(e,r)=>{const u=De,c=Dl,m=a,d=ze;return re(s)?(ue(),ce(d,{key:0},{"header-left":pe((()=>[jl])),"header-right":pe((()=>[ve(u,{onClick:o,color:"primary"},{default:pe((()=>[Pl])),_:1})])),content:pe((()=>[ve(c,{"open-modal":re(t).open,onCloseModal:i,onRefreshTransactions:n},null,8,["open-modal"]),ve("p",Il,"Credit: "+be(l.value)+"$",1),ve(m,{class:"p-"},{default:pe((()=>[ve("div",Sl,[ve("table",$l,[El,re(q)?(ue(),ce("tbody",zl,[(ue(!0),ce(he,null,ye(re(q).data,((e,t)=>(ue(),ce("tr",{key:`transaction-${t}`},[ve("td",null,be(e.id),1),ve("td",null,be(e.meta.description),1),ve("td",null,be(re(Me)(e.created_at).format("MM/DD/YYYY")),1),ve("td",null,be(e.type),1),ve("td",null,be(e.amount),1)])))),128))])):me("",!0)])])])),_:1})])),_:1})):me("",!0)}}});const Vl={key:0,class:"columns is-multiline"},Tl={class:"column is-3"},Fl={class:"column is-9"},ql={class:"columns is-multiline column is-12"},Nl={class:"columns is-multiline column is-12"},Hl={key:1,class:"columns is-multiline"},Ll={class:"column is-3"},Rl={class:"column is-9"},Bl={class:"d-flex justify-content-between"},Ol=ve("b",null,"Member since.",-1),Wl=ve("b",null,"Membership Active:",-1),Gl=ve("b",null,"Due Date: ",-1),Ul={key:0},Kl=ve("b",null,"Discount: ",-1),Jl={key:0};var Ql=se({expose:[],setup(t){const o=de();We.value="Member Profile",Ye({title:"Members"});const r=ie(!1),u=ie("personalInformation"),c=e=>{u.value=e.value};le((()=>o.query),((e,t)=>{Object.keys(e).length>0&&(b(),v())}));const m=ie("ERROR MEMBERSHIP"),d=ie("");le(s,(e=>{e.sinMembresia&&(m.value="NO MEMBERSHIP",d.value="Please, select a membership"),e.isSolvente||e.sinMembresia||!e.subscription||(m.value=`Membership ${e.subscription.status}`,d.value=e.subscription.latest_invoice&&e.subscription.latest_invoice.payments_intents&&e.subscription.latest_invoice.payments_intents.length>0?`Last payment status : ${e.subscription.latest_invoice.payments_intents[0].status}`:""),e.subscription&&e.subscription.subscription&&!e.subscription.latest_invoice&&(d.value=`Last payment status : ${e.subscription.subscription.status}`),e.membership_members&&e.membership_members.cacelation_date&&(d.value=`Cancel date : ${Me(e.membership_members.cacelation_date).format("MM-DD-YYYY")}`)})),le((()=>o.hash),(e=>{u.value=o.hash.slice(1)})),le((()=>o.query.id),(e=>{u.value="personalInformation"}));const p=ie(!0),v=()=>{p.value=!0,setTimeout((()=>{p.value=!1}),500)};ne((()=>{""!=o.hash&&(u.value=o.hash.slice(1)),Ze().then((e=>{te(n,"locations_id",et.value)})),Xe().then((e=>{te(i,"country_id",e.contries),te(i,"city_id",e.cities),te(i,"state_id",e.states),te(N,"city_id",e.cities),te(N,"state_id",e.states),te(N,"country_id",e.contries),te(w.value,"city_id",e.cities),te(w.value,"state_id",e.states),te(w.value,"country_id",e.contries)})),Ue().then((e=>{te(n,"memberships_id",e.data.memberships)})),Ge().then((e=>{te(n,"discount",e.data.discounts)})),Ke().then((e=>{te(n,"recurrences_id",e.data)})),Je().then((e=>{te(n,"staff_id",e.data)})),b()}));const b=async()=>{await H(o.query.id).then((e=>{for(var t in console.log("response.data",e.data),e.data)if("select_type"==t)"Individual"==e.data[t]?(K(i.value,"select_type").model=!1,K(i.value,"company_name").typeInput="hidden"):(K(i.value,"select_type").model=!0,K(i.value,"company_name").typeInput="text");else if("membership_members"==t)for(var a in e.data[t]||(m.value="Does not have a membership",d.value="Does not have a membership go to the Membership/Contract section and create a new membership and press New Membership",console.error("no posee una membresia :(")),e.data[t])"memberships_location"==a?e.data[t][a]?(K(n,"locations_id").model=e.data[t][a].companies_locations_id,Qe([e.data[t][a].companies_locations_id]).then((e=>{te(n,"diciplines",e.data)}))):console.error("no posee una locacion :("):"diciplines"==a?(K(n,"diciplines").model=[],e.data[t][a].forEach((e=>{K(n,"diciplines").model.push(e.diciplines_id)}))):"discount"==a?e.data[t][a]&&(K(n,"discount").model=e.data[t][a].id):null!=K(n,a)&&ae(n,a,e.data[t][a]);else if("trainers"==t){let a=[];e.data[t].forEach((e=>{a.push(e.id)})),ae(n,"staff_id",a)}else if("emergency"==t)for(a in e.data[t])ae(P,a,e.data[t][a]);else if("guardian"==t)for(a in e.data[t])"parent_address"==a?K(w.value,"address").model=e.data[t][a]:"parent_photo"==a?(""!=e.data[t][a]||null!=e.data[t][a]?K(w.value,"parent_photo").required=!1:K(w.value,"parent_photo").required=!0,K(w.value,"parent_photo").data=e.data[t][a]):ae(w,a,e.data[t][a]);else ae(i,t,"leo_vet_fr"==t?1==e.data[t]:e.data[t]);p.value=!1}))},h=oe((()=>{let e="";return s.value.subscription?(e=s.value.subscription.subscription&&"active"==s.value.subscription.subscription.status?"active":s.value.subscription.status,"active"==s.value.subscription.status||s.value.subscription.status,"canceled"==s.value.subscription.status&&Me()<=Me(s.value.membership_members.cacelation_date)&&(e="active")):s.value.sinMembresia&&(e=s.value.user&&s.value.user.pm_last_four?"nomembershipcontarjeta":"nomembership"),e})),y=()=>{p.value=!0,b()};return(t,n)=>{const o=e,i=ot,m=a,v=Zt,b=$e,f=sa,_=Ja,g=ns,k=cs,M=hs,C=Cs,x=bl,w=wl,Y=Al,D=Oe;return ue(),ce(D,null,{default:pe((()=>[p.value?(ue(),ce("div",Vl,[ve("div",Tl,[ve(o,{height:"700px"})]),ve("div",Fl,[ve("div",ql,[ve(o,{height:"150px"})]),ve("div",Nl,[ve(o,{height:"420px"})])])])):me("",!0),!p.value&&re(s)?(ue(),ce("div",Hl,[ve("div",Ll,[ve(i,{category:re(s).category,onChangeMenu:c,class:re(h)},null,8,["category","class"])]),ve("div",Rl,[re(L)?me("",!0):(ue(),ce(m,{key:0,class:["\r\n            mb-4\r\n            d-flex\r\n            justify-content-between\r\n            align-items-center\r\n            cardprofile\r\n          ",re(h)]},{default:pe((()=>[ve("div",null,[ve("p",null,be(d.value),1)])])),_:1},8,["class"])),r.value?(ue(),ce(v,{key:1,class:"mb-4"})):me("",!0),null!=re(s).membership_members?(ue(),ce(m,{key:2,class:"mb-4"},{default:pe((()=>{var e;return[ve("div",Bl,[ve("div",null,[ve("p",null,[ve("b",null,[ke("Member #"+be(re(s).id)+" - ",1),ve("small",null,be(re(s).category),1)])]),ve("p",null,[ve("small",null,[Ol,ke(" "+be(re(Me)(re(s).created_at).format("ddd - DD MMM YYYY")),1)])]),ve("p",null,[Wl,ke(" "+be(re(l).membership.name),1)]),ve("p",null,[Gl,ke(" "+be(re(Me)(re(s).subscription.proxima_factura).format("ddd - DD MMM YYYY")),1)]),(null==(e=re(s).membership_members)?void 0:e.discount)?(ue(),ce("p",Ul,[Kl,ke(" "+be(re(s).membership_members.discount.name),1)])):me("",!0)]),re(s).subscription?(ue(),ce("div",Jl,[ve(b,{color:"info",label:re(s).subscription.status,rounded:""},null,8,["label"])])):me("",!0)])]})),_:1})):me("",!0),fe(ve(f,{category:re(s).category},null,8,["category"]),[[_e,"personalInformation"==u.value]]),fe(ve(_,{onReload:y},null,512),[[_e,"memberMembership"==u.value]]),"memberFamily"==u.value?(ue(),ce(g,{key:3})):me("",!0),"memberEmergency"==u.value?(ue(),ce(k,{key:4})):me("",!0),"memberCheckins"==u.value?(ue(),ce(M,{key:5})):me("",!0),"memberPurchases"==u.value?(ue(),ce(C,{key:6})):me("",!0),"memberInvoices"==u.value?(ue(),ce(x,{key:7})):me("",!0),"memberWaiver"==u.value?(ue(),ce(w,{key:8})):me("",!0),"memberCredit"==u.value?(ue(),ce(Y,{key:9})):me("",!0)])])):me("",!0)])),_:1})}}});export default Ql;
