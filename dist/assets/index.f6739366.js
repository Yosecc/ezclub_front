import{_ as e}from"./V-Placeload.ba28fd33.js";import{_ as t}from"./V-Avatar.vue_vue&type=script&setup=true&lang.e8b89c92.js";import{_ as a}from"./V-Card.vue_vue&type=script&setup=true&lang.3e73d9de.js";import{m as s,i as l,b as n,c as r,d as i,e as o,p as u,f as c,h as m,j as d,k as p,l as v,n as f,o as b,q as h,r as y,t as _,u as g,v as k,w as x,x as j,y as C,z as M,A as w,B as P,C as D,D as S,E as $}from"./Members.ee9fe111.js";import{b as E,P as Y,A,F as V,c as z,v as F,g as I,m as T,n as q,p as N,h as L,a as O,s as W}from"./index.a4591174.js";import{d as B,w as H,G as R,b as U,r as G,D as J,o as Q,h as K,J as X,O as Z,j as ee,k as te,F as ae,Q as se,R as le,S as ne,U as re,a8 as ie,E as oe,z as ue,Y as ce,L as me}from"./vendor.d0c8bc4f.js";import{_ as de}from"./V-Button.vue_vue&type=script&setup=true&lang.19e0de69.js";import{_ as pe}from"./V-Loader.vue_vue&type=script&setup=true&lang.ee9a9239.js";import{_ as ve}from"./V-Control.46cc2837.js";import{_ as fe}from"./V-Field.vue_vue&type=script&setup=true&lang.5cab5a8d.js";import{_ as be}from"./V-Modal.vue_vue&type=script&setup=true&lang.b53d2d79.js";import{_ as he}from"./V-Tag.vue_vue&type=script&setup=true&lang.39ace96b.js";import{_ as ye}from"./inputsLayaut.vue_vue&type=style&index=0&lang.7f55e2b2.js";import{_ as _e}from"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.6ebe6131.js";import{_ as ge,a as ke,b as xe}from"./Presupuesto.vue_vue&type=script&setup=true&lang.2e113c88.js";import{_ as je}from"./MemberCards.vue_vue&type=script&setup=true&lang.2cdb36c0.js";import{_ as Ce}from"./V-AvatarStack.vue_vue&type=script&setup=true&lang.38d4d5c1.js";import{_ as Me}from"./FlexTableDropdown.vue_vue&type=script&setup=true&lang.8a14b49c.js";import{_ as we}from"./V-Block.vue_vue&type=script&setup=true&lang.e2962b14.js";import{_ as Pe}from"./V-CreditCard.vue_vue&type=script&setup=true&lang.d0a15005.js";import{f as De,p as Se}from"./PaymentMethodsData.4823f50a.js";import{_ as $e}from"./pdf_icon.d44191be.js";import{_ as Ee}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.38018ab3.js";import{p as Ye}from"./sidebarLayoutState.24ad74be.js";import{g as Ae}from"./Discounts.fbb30bec.js";import{a as Ve}from"./Memberships.73d6bb9c.js";import{g as ze}from"./Recurrences.00f37bcf.js";import{h as Fe}from"./Staffs.c32f62e6.js";import{g as Ie}from"./Diciplines.80da493b.js";import{e as Te}from"./config.74d5eb2c.js";import{b as qe,d as Ne}from"./Companies.1e5a5f6a.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.438fd8f7.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.3464e18c.js";import"./signComponent.vue_vue&type=script&setup=true&lang.ae8bce97.js";import"./V-Dropdown.7e196bf4.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.84f721dd.js";import"./useDropdown.6d34f9a4.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.4ed2dc6a.js";import"./activePanelState.b9e0947e.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.f1ce6ab5.js";import"./V-Message.vue_vue&type=script&setup=true&lang.9d01539d.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.12102989.js";import"./navbarLayoutState.41152ea9.js";import"./video.6d0592c0.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.bd4b68fd.js";import"./darkModeState.2cf6bce9.js";import"./AnimatedLogo.7babd236.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.e23c671a.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.67afcfe6.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.ff5e9d07.js";const Le={class:"d-flex justify-content-center align-items-center flex-column mb-4"},Oe={class:"mt-5 text-center"},We={class:"title is-5 is-narrow"},Be={class:"w-100 mt-5"},He=te("i",{class:"iconify",style:{"font-size":"20px",color:"white"},"data-icon":"feather:arrow-right","aria-hidden":"true"},null,-1);var Re=B({expose:[],props:{category:{type:String,default:"Adult"}},emits:["changeMenu"],setup(e,{emit:n}){const r=e,i=Z();H((()=>i.hash),(e=>{m.value=o.findIndex((e=>e.component==i.hash.slice(1)))})),R((()=>{""!=i.hash&&(m.value=o.findIndex((e=>e.component==i.hash.slice(1))))}));const o=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Family Members",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"}],u=[{name:"Personal Information",component:"personalInformation"},{name:"Waiver",component:"memberWaiver"}],c=U((()=>["Adult","Minor"].includes(r.category)?o:u)),m=G(0),d=G(null),p=U((()=>null!=c.value[m.value]?c.value[m.value].component:d.value));return(e,r)=>{const i=t,o=a;return J(s)?(Q(),K(o,{key:0,color:J(l)?void 0:"danger"},{default:ee((()=>[te("div",Le,[te(i,{picture:J(s).photo?`${J(E)}storage/${J(s).photo}`:"",size:"xl"},null,8,["picture"]),te("div",Oe,[te("h2",We,ae(J(s).name)+" "+ae(J(s).second_name)+" "+ae(J(s).last_name),1)])]),te("div",Be,[te("ul",null,[(Q(!0),K(se,null,le(J(c),((e,t)=>(Q(),K("li",{key:`item-${t}`},[te(o,{class:["\n              mb-3\n              item_menu\n              d-flex\n              justify-content-between\n              align-items-center\n            ",m.value==t?"active":""],color:m.value==t?"warning":void 0,elevated:m.value==t,onClick:e=>(e=>{m.value=e,n("changeMenu",p)})(t)},{default:ee((()=>[te("p",null,ae(e.name),1),He])),_:2},1032,["class","color","elevated","onClick"])])))),128))])])])),_:1},8,["color"])):X("",!0)}}});const Ue=te("div",{id:"payment-element"},null,-1),Ge=oe(" Pay now "),Je=te("div",{id:"payment-message",class:"hidden"},null,-1);var Qe=B({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},setup(t){const s=t,l=Stripe(Y.value);H((()=>s.id),(e=>{console.log("cambio"),n.value=!0,m()}));const n=G(!0);G({id:s.id,amount:s.amount});const r=G(),i=U((()=>"stripe"!=s.url?{payment_type_id:3,amount:s.amount}:{id:s.id,member_mermship_id:s.member_membership,amount:s.amount,payment_type_id:1})),o=G(null),u=G(null),c=G(!1),m=async()=>{let e=await A.post(s.url,i.value).then((e=>{o.value=e.data.clientSecret,r.value=l.elements({clientSecret:o.value}),u.value=r.value.create("payment"),u.value.mount("#payment-element")})).catch((e=>{}));return n.value=!1,e},d=async e=>{e.preventDefault(),c.value=!0,await l.confirmPayment({elements:r.value,confirmParams:{return_url:`${V.value}members/process?payment_type=3&id=`+s.id+`&membership=${s.member_membership}`}}),c.value=!1};return R((()=>{m()})),(t,s)=>{const l=e,r=de,i=pe,o=a;return Q(),K(se,null,[n.value?(Q(),K(l,{key:0,height:"500px"})):X("",!0),ne(te(o,{class:"mt-6"},{default:ee((()=>[te("form",{onSubmit:ie(d,["prevent"]),id:"payment-form"},[Ue,te(i,{size:"small",active:c.value},{default:ee((()=>[te(r,{id:"submit",class:"mt-4",color:"success"},{default:ee((()=>[Ge])),_:1})])),_:1},8,["active"]),Je],40,["onSubmit"])])),_:1},512),[[re,!n.value]])],64)}}});const Ke={class:"table is-hoverable is-striped is-fullwidth"},Xe=te("th",{scope:"col"},"Members",-1),Ze=te("th",{scope:"col"},"Membership Name",-1),et=te("th",{scope:"col"},"Recurrence",-1),tt=te("th",{scope:"col"},"Prorated",-1),at=te("th",{scope:"col"},"Membership Cost",-1),st=te("th",{scope:"col"},"Initiation Fee",-1),lt=te("th",{scope:"col"},"Discount",-1),nt=te("th",{scope:"col"},"Taxes",-1),rt={key:0,scope:"col"},it=te("th",{scope:"col"},"Sub Total",-1),ot={key:0},ut={key:0},ct={key:1},mt={key:2},dt={key:0},pt=te("br",null,null,-1),vt={key:1},ft={key:0},bt={key:1},ht={key:0},yt={key:0},_t={key:1},gt={key:1},kt={key:3},xt={class:"is-end"},jt={class:"d-flex justify-content-between"},Ct=oe(" Card Payment "),Mt=oe(" Cash Payment "),wt={class:"d-flex mb-4 justify-content-between"},Pt={class:"title is-5"},Dt=oe(" Total: "),St={class:"title is-5"},$t=oe(" Cash Total: "),Et={class:"\n            d-flex\n            justify-content-center\n            align-items-center\n            flex-column\n            mb-4\n          "},Yt=te("p",{class:"title is-5 mb-4"},"Change Back:",-1),At={class:"title is-3 mb-0"},Vt={class:"d-flex justify-content-center flex-wrap mb-4"},zt=te("div",{class:"w-100"},null,-1),Ft={class:"d-flex justify-content-center"},It=oe("Reset"),Tt=oe("Confirm");var qt=B({expose:[],setup(e){G(!1);const t=G(!1);R((()=>{console.log("se monto el payment")}));const l=U((()=>{let e=z(r,"memberships_id");return null!=e?e:[]})),o=U((()=>{let e=z(r,"recurrences_id");return null!=e?e:[]})),u=U((()=>{let e=F(r,"initiation_fee");return null!=e?e:[]})),c=U((()=>{let e=I(r,"discount");return null!=e?e:[]})),m=U((()=>{let e=parseFloat(ue().format("DD")),t=0,a=0;return o.value.days>=30&&(a=e-o.value.payday,t=o.value.amount/o.value.days*a),{days:a,amount:Math.abs(Math.round(t))}})),d=U((()=>(e=>{if(""!=F(r,"memberships_id"))return"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:T(e.tax.value),value:e.tax.value}})(l))),p=G(null),v=U((()=>{let e=0;return e+=o.value.amount,F(r,"is_initiation_fee").length||(e+=u.value),e-=m.value.amount,c.value.data&&("dolar"==c.value.data.type?e-=c.value.data.value:"percentaje"==c.value.data.type&&(e-=e/100*c.value.data.value)),e+=e/100*d.value.value,s.value.penalty&&(p.value=l.value.penalty,e+=p.value),s.value.leo_vet_fr&&(e-=e/100*l.value.descuento_vet),e})),f=U((()=>{let e=0;return e+=v.value,e})),b=G(!1),h=G(0),y=U((()=>{const e=parseFloat(h.value)-parseFloat(f.value);return e>0?e:0}));G(1);const _=async()=>{await i(n.value.id,{total:f.value,payment_type_id:1,cash:h.value,cash_back:y.value}).then((e=>{q.success("Payment Success"),window.location.reload()})).catch((e=>{}))};return(e,i)=>{const g=de,k=a,x=Qe,j=ve,C=fe,M=be;return Q(),K("div",null,[te(k,{class:""},{default:ee((()=>{return[te("table",Ke,[te("thead",null,[te("tr",null,[Xe,Ze,et,tt,at,st,lt,nt,p.value?(Q(),K("th",rt,"Penalty")):X("",!0),it])]),0!=J(l).length?(Q(),K("tbody",ot,[te("tr",null,[te("td",null,[te("p",null,[te("b",null,ae(J(s).name)+" "+ae(J(s).second_name)+" "+ae(J(s).last_name),1)])]),0!=J(l).legnth?(Q(),K("td",ut,ae(J(l).name),1)):X("",!0),0!=J(o).length?(Q(),K("td",ct,ae(J(o).descriptions),1)):X("",!0),0!=J(o).length?(Q(),K("td",mt,[J(o).days>=30?(Q(),K("span",dt,[oe(ae(J(m).days)+" days : ",1),pt,oe(" - "+ae(J(T)(J(m).amount)),1)])):(Q(),K("span",vt,"-"))])):X("",!0),te("td",null,ae(J(T)((e=J(o),e.amount))),1),te("td",null,[J(F)(J(r),"is_initiation_fee").length?(Q(),K("span",bt,ae(J(T)(0)),1)):(Q(),K("span",ft,ae(J(T)(J(u))),1))]),te("td",null,[null!=J(c).data?(Q(),K("span",ht,["dolar"==J(c).data.type?(Q(),K("span",yt," - "+ae(J(T)(J(c).data.value)),1)):X("",!0),"percentaje"==J(c).data.type?(Q(),K("span",_t,ae(J(c).data.value)+"%",1)):X("",!0)])):(Q(),K("span",gt,"-"))]),te("td",null,ae(J(d).text),1),p.value?(Q(),K("td",kt,ae(J(T)(p.value)),1)):X("",!0),te("td",null,ae(J(T)(J(v))),1)]),te("tr",null,[te("td",{style:{"text-align":"right"},colspan:p.value?"9":"8"}," Total ",8,["colspan"]),te("td",xt,ae(J(T)(J(f))),1)])])):X("",!0)]),te("div",jt,[te(g,{color:"success",disabled:0==J(l).length||isNaN(J(f)),onClick:i[1]||(i[1]=e=>t.value=!0)},{default:ee((()=>[Ct])),_:1},8,["disabled"]),te(g,{disabled:0==J(l).length||isNaN(J(f)),color:"warning",onClick:i[2]||(i[2]=e=>b.value=!0)},{default:ee((()=>[Mt])),_:1},8,["disabled"])])];var e})),_:1}),t.value?(Q(),K(x,{key:0,class:"",url:`new_payment/${J(n).id}`,amount:J(f),id:J(s).id,member_membership:J(n).id},null,8,["url","amount","id","member_membership"])):X("",!0),te(M,{open:b.value,actions:"center",onClose:i[6]||(i[6]=e=>b.value=!1)},{content:ee((()=>[te("div",wt,[te("p",Pt,[Dt,te("b",null,ae(J(T)(J(f))),1)]),te("p",St,[$t,te("b",null,ae(J(T)(h.value)),1)])]),te("div",Et,[Yt,te("p",At,[te("b",null,ae(J(T)(J(y))),1)])]),te("div",Vt,[te(g,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:i[3]||(i[3]=e=>h.value=J(f))},{default:ee((()=>[oe(" Full Payment "+ae(J(T)(J(f))),1)])),_:1}),zt,(Q(),K(se,null,le([5,10,20,50,100],((e,t)=>te(g,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>h.value+=e},{default:ee((()=>[oe(" $"+ae(e),1)])),_:2},1032,["onClick"]))),64))]),te("div",Ft,[te(C,null,{default:ee((()=>[te(j,null,{default:ee((()=>[ne(te("input",{"onUpdate:modelValue":i[4]||(i[4]=e=>h.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[ce,h.value]])])),_:1})])),_:1})])])),action:ee((()=>[te(g,{onClick:i[5]||(i[5]=e=>h.value=0),class:"d-flex justify-content-center",raised:""},{default:ee((()=>[It])),_:1}),te(g,{color:"success",onClick:_,disabled:J(f)>h.value,class:"d-flex justify-content-center",raised:""},{default:ee((()=>[Tt])),_:1},8,["disabled"])])),_:1},8,["open"])])}}});const Nt=te("div",null,[te("h1",{class:"title is-4 mb-0"},"Personal Information"),te("p",null,"Edit member's personal information")],-1),Lt=oe(" Save Changes "),Ot=oe(" Convert to Members ");var Wt=B({expose:[],props:{category:{type:String,default:"Adult"}},setup(e){const t=e;U((()=>"Prospect"==t.category));const a=G(!1),s=()=>{a.value=!0;let e=N(o.value),t=new FormData;for(var s in e)"id_leo_vet_fr"==s?null==e[s]&&t.append(s,0):t.append(s,e[s]);u(t).then((e=>{q.success("Edit Success"),a.value=!1})).catch((e=>{a.value=!1}))};return(e,l)=>{const n=de,r=pe,i=ye,u=_e;return Q(),K(u,null,{"header-left":ee((()=>[Nt])),"header-right":ee((()=>[te(r,{size:"small",active:a.value},{default:ee((()=>[te(n,{onClick:s,color:"primary"},{default:ee((()=>[Lt])),_:1}),"Prospect"==t.category?(Q(),K(n,{key:0,color:"info",class:"ml-3"},{default:ee((()=>[Ot])),_:1})):X("",!0)])),_:1},8,["active"])])),content:ee((()=>[te(i,{"inputs-step":J(o)},null,8,["inputs-step"])])),_:1})}}});const Bt=te("div",null,[te("h1",{class:"title is-4 mb-0"},"Membership / Contract"),te("p",null,"Edit member's membership and contract information")],-1),Ht={class:"columns is-multiline justify-content-center"},Rt={key:0,class:"column is-12"},Ut=te("p",null,[te("small",null,"Membership")],-1),Gt={class:"title is-4"},Jt={key:1,class:"column is-4 mb-6 mt-4"},Qt=te("p",null,[te("b",null,"HOLD Membership")],-1),Kt={key:0},Xt={key:2,class:"column is-4 mb-6 mt-4"},Zt=te("p",null,[te("b",null,"Cancel Membership")],-1),ea={key:3,class:"column is-4 mb-6 mt-4"},ta=te("p",null,[te("b",null,"Retry Payment")],-1),aa={key:4,class:"mb-4  column is-12"},sa=oe("Save Changes"),la=oe(" New Membership "),na={key:6,class:"column is-12 mb-6 mt-4"},ra={key:1},ia={class:"d-flex justify-content-end w-100"},oa=oe("Cancel");var ua=B({expose:[],props:{},setup(t){R((()=>{c(r)})),G(null),G(null),G(null),G(null),G(null);const l=G(!1);G(null);const i=U((()=>{if(s.value&&n.value){let e=["locations_id","diciplines","staff_id"];return r.filter((t=>e.includes(t.name)))}return r})),u=()=>{console.log(r),I(r,"amount").required=!1,I(r,"initiation_fee").required=!1,I(r,"diciplines").required=!1;const e=N(r);v(e).then((e=>{q.success("Success"),l.value=!1,I(r,"amount").required=!0,I(r,"initiation_fee").required=!0,I(r,"diciplines").required=!0}))},_=async()=>{l.value=!0,await f(r,o.value),l.value=!1},g=()=>{confirm("Are you sure you want to perform this action?")&&(l.value=!0,b().then((e=>{q.success("Memberships Cancel"),window.location.reload(),l.value=!1})))},k=e=>{},x=()=>{confirm("Are you sure you want to perform this action?")&&(l.value=!0,h(n.value.id).then((e=>{q.success("Success Pause"),l.value=!1,window.location.reload()})).catch((e=>{for(var t in l.value=!1,e.response.data.errores)e.response.data.errores[t].forEach((e=>{q.error(`${t}: ${e}`)}))})))},j=G(!1),C=(e,t=3,a={})=>{if(!confirm("Do you want to try the payment?"))return;let l={invoice_id:s.value.subscription.latest_invoice,payment_type_id:t,payment_method:e,total:s.value.subscription.total_invoice};1==t&&(l.changeBack=a.changeBack,l.cash=a.cash),console.log("llaj",l),y(n.value.id,l).then((e=>{q.success("success"),window.location.reload()})).catch((e=>{if("object"==typeof e.response.data)for(var t in e.response.data)e.response.data[t].forEach((e=>{q.error(`${t} : ${e}`)}));else q.error(e.response.data)}))},M=e=>{C(null,1,e)};return(t,r)=>{const o=a,c=pe,v=ge,f=je,b=ye,h=Ce,y=de,w=e,P=ke,D=xe,S=_e;return Q(),K(S,null,{"header-left":ee((()=>[Bt])),content:ee((()=>[te("div",Ht,[J(s)&&J(n)?(Q(),K("div",Rt,[te(o,{color:"info"},{default:ee((()=>[Ut,te("p",Gt,ae(J(n).membership.name),1)])),_:1})])):X("",!0),J(s)&&J(n)?(Q(),K("div",Jt,[J(s).membership_members.is_recurrence?(Q(),K(c,{key:0,size:"small",active:l.value},{default:ee((()=>[J(n)&&J(s).subscription?(Q(),K(o,{key:0,color:"info",outlined:null==J(s).subscription.pause_collection,onClick:x,class:"mr-4 btn-card text-center"},{default:ee((()=>[Qt,null!=J(s).subscription.pause_collection?(Q(),K("span",Kt,"Active until: "+ae(J(s).subscription.pause_collection.resumes_at),1)):X("",!0)])),_:1},8,["outlined"])):X("",!0)])),_:1},8,["active"])):X("",!0)])):X("",!0),J(s)&&J(n)?(Q(),K("div",Xt,[J(s).membership_members.is_recurrence?(Q(),K(c,{key:0,size:"small",active:l.value},{default:ee((()=>[J(n)?(Q(),K(o,{key:0,color:"danger",outlined:"",onClick:g,class:"mr-4 btn-card text-center"},{default:ee((()=>[Zt])),_:1})):X("",!0)])),_:1},8,["active"])):X("",!0)])):X("",!0),J(s)&&J(n)?(Q(),K("div",ea,[J(s).membership_members.is_recurrence?(Q(),K(c,{key:0,size:"small",active:l.value},{default:ee((()=>[J(n)?(Q(),K(o,{key:0,color:"success",outlined:"",onClick:r[1]||(r[1]=e=>j.value=!j.value),class:"mr-4 btn-card text-center"},{default:ee((()=>[ta])),_:1})):X("",!0)])),_:1},8,["active"])):X("",!0)])):X("",!0),j.value?(Q(),K("div",aa,[J(s).user?(Q(),K(f,{key:0,onOnMethodPayment:C,memberid:J(s).id,method_default:J(s).user.pm_last_four,"show-new-card":!1,class:" mb-4",ancho:"is-4"},{default:ee((()=>[te(v,{total:J(s).subscription.total_invoice,margin:"mx-0",class:"is-4",onOnPaymentCash:M},null,8,["total"])])),_:1},8,["memberid","method_default"])):X("",!0)])):X("",!0),J(m).length?X("",!0):(Q(),K(o,{key:5,class:"mb-4  column is-12"},{default:ee((()=>[te(b,{"inputs-step":J(i)},null,8,["inputs-step"]),J(s).trainers?(Q(),K(h,{key:0,avatars:J(d)(J(s).trainers),size:"small"},null,8,["avatars"])):X("",!0),J(s)&&J(n)?(Q(),K(c,{key:1,size:"small",active:l.value},{default:ee((()=>[te(y,{class:"mt-5",onClick:u,color:"primary"},{default:ee((()=>[sa])),_:1})])),_:1},8,["active"])):X("",!0),J(p)?X("",!0):(Q(),K(c,{key:2,size:"small",active:l.value},{default:ee((()=>[J(n)?X("",!0):(Q(),K(y,{key:0,class:"mt-5",onClick:_,color:"primary"},{default:ee((()=>[la])),_:1}))])),_:1},8,["active"]))])),_:1})),J(n)?X("",!0):(Q(),K("div",na,[l.value?(Q(),K(w,{key:0,height:"300px",class:"mb-4"})):X("",!0),J(m).length?(Q(),K("div",ra,[(Q(!0),K(se,null,le(J(m),((e,a)=>(Q(),K(D,{key:`presupuesto-${a}`,class:"mb-4",presupuesto:e},{default:ee((()=>[te("div",ia,[te(P,{member:e.member,member_id:J(s).id,membresia:e.membresia,contact:t.dataContact,presupuesto_id:e.presupuesto_id,"categories-members":t.categoriesMembers,"notas-input":t.notasInput,total:e.totales.upfront.amount_total,onPaymentAction:k,type:"edit"},null,8,["member","member_id","membresia","contact","presupuesto_id","categories-members","notas-input","total"])])])),_:2},1032,["presupuesto"])))),128)),te(y,{onClick:r[2]||(r[2]=e=>m.value=[]),color:"danger"},{default:ee((()=>[oa])),_:1})])):X("",!0)]))])])),_:1})}}});const ca=te("div",null,[te("h1",{class:"title is-4 mb-0"},"Family Members"),te("p",null,"Edit member's family members")],-1),ma={class:"columns is-multiline"},da={key:0,class:"column is-4 mb-4"},pa=te("div",null,[te("h1",{class:"title is-4 mb-0"},"Parent"),te("p",null,"Edit parent contact")],-1),va=oe(" Save Changes "),fa={class:""},ba=te("h1",{class:"title is-5"},"Parent Contact Information",-1),ha={class:"d-flex justify-content-end mr-6"};var ya=B({expose:[],setup(e){G([{id:1,name:"Wonder Woman",subtitle:"Mother/Adult",img:"https://picsum.photos/150/150"},{id:2,name:"Lionel Messi",subtitle:"Father/Minor",img:"https://picsum.photos/150/151"}]);const a=()=>{const e=perpareDataInputs(k.value);x(e).then((e=>{q.success("Success")}))};return(e,l)=>{const n=t,r=Me,i=we,o=_e,u=de,c=ye;return Q(),K("div",null,[J(s)&&"Adult"==J(s).category?(Q(),K(o,{key:0},{"header-left":ee((()=>[ca])),"header-right":ee((()=>[])),content:ee((()=>[te("div",ma,[J(_)?(Q(),K("div",da,[te(i,{title:`${J(_).name} ${J(_).second_name} ${J(_).last_name}`,class:"border-1 p-4 radius-small"},{icon:ee((()=>[te(n,{size:"medium",picture:`${J(E)}storage/${J(_).photo}`,subtitle:"Principal Family"},null,8,["picture"])])),action:ee((()=>[te(r,{"id-member":J(_).id},null,8,["id-member"])])),_:1},8,["title"])])):X("",!0),(Q(!0),K(se,null,le(J(g),((e,t)=>(Q(),K("div",{class:"column is-4 mb-4",key:`family-${t}`},[te(i,{title:`${e.member.name} ${e.member.second_name} ${J(s).last_name}`,subtitle:e.member.relationships,class:"border-1 p-4 radius-small"},{icon:ee((()=>[te(n,{size:"medium",picture:`${J(E)}storage/${e.member.photo}`},null,8,["picture"])])),action:ee((()=>[te(r,{"id-member":e.members_id},null,8,["id-member"])])),_:2},1032,["title","subtitle"])])))),128))])])),_:1})):X("",!0),J(s)&&"Minor"==J(s).category?(Q(),K(o,{key:1},{"header-left":ee((()=>[pa])),"header-right":ee((()=>[te(u,{onClick:a,color:"primary"},{default:ee((()=>[va])),_:1})])),content:ee((()=>[te("div",fa,[ba,te("div",ha,[te(n,{picture:`${J(E)}storage/${J(F)(J(k),"parent_photo")}`,size:"large"},null,8,["picture"])]),te(c,{"inputs-step":J(k)},null,8,["inputs-step"])])])),_:1})):X("",!0)])}}});const _a=te("div",null,[te("h1",{class:"title is-4 mb-0"},"Emergency Contact"),te("p",null,"Edit member's emergency contact")],-1),ga=oe(" Save Changes "),ka={class:""},xa=te("h1",{class:"title is-5"},"Emergency Contact Information",-1);var ja=B({expose:[],setup(e){const t=()=>{const e=N(j.value);console.log(e),C(e).then((e=>{q.success("Success")}))};return(e,a)=>{const s=de,l=ye,n=_e;return Q(),K(n,null,{"header-left":ee((()=>[_a])),"header-right":ee((()=>[te(s,{onClick:t,color:"primary"},{default:ee((()=>[ga])),_:1})])),content:ee((()=>[te("div",ka,[xa,te(l,{"inputs-step":J(j)},null,8,["inputs-step"])])])),_:1})}}});const Ca=te("div",null,[te("h1",{class:"title is-4 mb-0"},"Check-ins History"),te("p",null,"Edit member's check-ins history")],-1),Ma={class:"p-6"},wa={class:"d-flex"},Pa=te("input",{type:"date",class:"input",placeholder:"input.placeholder"},null,-1),Da=te("input",{type:"date",class:"input",placeholder:"input.placeholder"},null,-1),Sa=oe(" Export "),$a={class:"mt-4"},Ea={class:"table is-hoverable is-fullwidth"},Ya=te("thead",null,[te("tr",null,[te("th",{scope:"col"},"DATE"),te("th",{scope:"col"},"TIME"),te("th",{scope:"col"},"STAFF")])],-1);var Aa=B({expose:[],setup:e=>(e,t)=>{const a=ve,l=fe,n=de,r=_e;return J(s)?(Q(),K(r,{key:0},{"header-left":ee((()=>[Ca])),"header-right":ee((()=>[])),content:ee((()=>[te("div",Ma,[te("div",wa,[te(l,{class:"field mr-3"},{default:ee((()=>[te(a,null,{default:ee((()=>[Pa])),_:1})])),_:1}),te(l,{class:"field mr-3"},{default:ee((()=>[te(a,null,{default:ee((()=>[Da])),_:1})])),_:1}),te(n,{color:"primary"},{default:ee((()=>[Sa])),_:1})]),te("div",$a,[te("table",Ea,[Ya,te("tbody",null,[(Q(!0),K(se,null,le(J(M),((e,t)=>(Q(),K("tr",{key:`access-${t}`},[te("td",null,ae(J(ue)(e.created_at).format("DD/MM/YYYY")),1),te("td",null,ae(J(ue)(e.created_at).format("HH:mm:ss")),1),te("td",null,ae(e.user.name),1)])))),128))])])])])])),_:1})):X("",!0)}});const Va=oe(" New Card "),za={class:"column is-8 mx-auto"};var Fa=B({expose:[],setup(e){const t=G(!1),a=()=>{const e=N(Se.value);L.value||(t.value=!0,w(s.value.id,e).then((e=>{q.success("Success"),t.value=!1})).catch((e=>{if("object"==typeof e.response.data)for(var a in e.response.data)e.response.data[a].forEach((e=>{q.error(`${a} : ${e}`)}));else q.error(e.response.data);t.value=!1})))};return(e,s)=>{const l=de,n=pe,r=Pe,i=ve,o=fe,u=ye,c=_e;return Q(),K(c,null,{"header-right":ee((()=>[te(n,{active:t.value,size:"small"},{default:ee((()=>[te(l,{onClick:a,color:"primary"},{default:ee((()=>[Va])),_:1})])),_:1},8,["active"])])),content:ee((()=>[te(o,null,{default:ee((()=>[te(i,null,{default:ee((()=>[te(r,{color:"orange",flipped:J(De),onFlip:s[1]||(s[1]=e=>De.value=!J(De)),number:J(I)(J(Se),"card_number").model,name:J(I)(J(Se),"card_name").model,expiry:`${J(I)(J(Se),"date_day_expired").model}/${J(I)(J(Se),"date_year_expired").model}`,cvc:J(I)(J(Se),"cvv").model},null,8,["flipped","number","name","expiry","cvc"])])),_:1})])),_:1}),te("div",za,[te(u,{"inputs-step":J(Se)},null,8,["inputs-step"])])])),_:1})}}});const Ia=te("div",null,[te("h1",{class:"title is-4 mb-0"},"Purchases History"),te("p",null,"Edit member's purchases history")],-1),Ta=te("p",{class:"title is-5"},"Card List",-1),qa={class:"mt-4"},Na={class:"table is-hoverable is-fullwidth"},La=te("thead",null,[te("tr",null,[te("th",{scope:"col"},"Description"),te("th",{scope:"col"},"Created"),te("th",{scope:"col"},"Start Period"),te("th",{scope:"col"},"End Period"),te("th",{scope:"col"},"Mount"),te("th",{scope:"col"},"Download"),te("th",{scope:"col"},"Status")])],-1),Oa={key:0},Wa=te("i",{class:"fas fa-download","aria-hidden":"true"},null,-1);var Ba=B({expose:[],setup(e){U((()=>n.value.payments)),U((()=>{let e=[];return D.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),R((async()=>{await P(s.value.id)}));const t=e=>{};return(e,l)=>{const r=je,i=Fa,o=de,u=a,c=_e;return J(s)?(Q(),K(c,{key:0},{"header-left":ee((()=>[Ia])),"header-right":ee((()=>[])),content:ee((()=>[Ta,J(s).user?(Q(),K(r,{key:0,showOption:!0,class:"mb-6",onOnMethodPayment:t,method_default:J(s).user.pm_last_four,"show-new-card":!1},null,8,["method_default"])):X("",!0),te(i),te(u,{class:"p-"},{default:ee((()=>[te("div",qa,[te("table",Na,[La,J(n)?(Q(),K("tbody",Oa,[(Q(!0),K(se,null,le(J(s).invoices,((e,t)=>{var a;return Q(),K("tr",{key:`invoice-${t}`},[te("td",null,ae(null!=(a=e.subscription)?a:"Others"),1),te("td",null,ae(J(ue)(e.created).format("MM/DD/YYYY")),1),te("td",null,ae(J(ue)(e.period_start).format("MM/DD/YYYY")),1),te("td",null,ae(J(ue)(e.period_end).format("MM/DD/YYYY")),1),te("td",null,ae(J(T)(e.total/100)),1),te("td",null,[te("a",{href:e.invoice_pdf,download:""},[te(o,null,{default:ee((()=>[Wa])),_:1})],8,["href"])]),te("td",null,ae("paid"==e.status?"Paid":"error"),1)])})),128))])):X("",!0)])])])),_:1})])),_:1})):X("",!0)}}});const Ha=te("div",null,[te("h1",{class:"title is-4 mb-0"}," Waiver "),te("p",null,"Edit member's waiver information")],-1),Ra=oe(" Convert to Members "),Ua={class:"columns is-multiline"},Ga={class:"border-1 document_box p-4 d-flex justify-content-center radius-small"},Ja={href:"234",class:"text-center"},Qa=te("img",{style:{width:"70px"},src:$e,alt:""},null,-1);var Ka=B({expose:[],setup(e){const t=G([{name:"Waiver_010221.pdf",url:""},{name:"Waiver_010221.pdf",url:""}]);return(e,a)=>{const s=de,l=_e;return Q(),K(l,null,{"header-left":ee((()=>[Ha])),"header-right":ee((()=>[te(s,{color:"info"},{default:ee((()=>[Ra])),_:1})])),content:ee((()=>[te("div",Ua,[(Q(!0),K(se,null,le(t.value,((e,t)=>(Q(),K("div",{class:"column is-2 mb-4",key:`family-${t}`},[te("div",Ga,[te("a",Ja,[Qa,te("p",null,ae(e.name),1)])])])))),128))])])),_:1})}}});const Xa={key:0,class:"columns is-multiline"},Za={class:"column is-3"},es={class:"column is-9"},ts={class:"columns is-multiline column is-12"},as={class:"columns is-multiline column is-12"},ss={key:1,class:"columns is-multiline"},ls={class:"column is-3"},ns={class:"column is-9"},rs={class:"title is-5 mb-0"},is={key:0},os={class:"d-flex justify-content-between"},us=te("b",null,"Member since.",-1),cs=te("b",null,"Membership Active:",-1),ms={key:0},ds=te("b",null,"Due Date: ",-1),ps={key:0};var vs=B({expose:[],setup(t){const i=Z();Ye.value="Member Profile",me({title:"Members"});const u=G(!1),c=G("personalInformation"),m=e=>{c.value=e.value};H((()=>i.query),((e,t)=>{Object.keys(e).length>0&&(b(),f())}));const d=G("FAILED PAYMENT"),p=G("");H((()=>i.hash),(e=>{c.value=i.hash.slice(1)})),H((()=>i.query.id),(e=>{c.value="personalInformation"}));const v=G(!0),f=()=>{v.value=!0,setTimeout((()=>{v.value=!1}),500)};R((()=>{""!=i.hash&&(c.value=i.hash.slice(1)),qe().then((e=>{O(r,"locations_id",Ne.value)})),Te().then((e=>{O(o,"country_id",e.contries),O(o,"city_id",e.cities),O(o,"state_id",e.states),O(S,"city_id",e.cities),O(S,"state_id",e.states),O(S,"country_id",e.contries)})),Ve().then((e=>{O(r,"memberships_id",e.data.memberships)})),Ae().then((e=>{O(r,"discount",e.data.discounts)})),ze().then((e=>{O(r,"recurrences_id",e.data)})),Fe().then((e=>{O(r,"staff_id",e.data)})),b()}));const b=async()=>{await $(i.query.id).then((e=>{for(var t in console.log("response.data",e.data),e.data)if("select_type"==t)"Individual"==e.data[t]?I(o.value,"select_type").model=!1:I(o.value,"select_type").model=!0;else if("membership_members"==t)for(var a in e.data[t]||(d.value="Does not have a membership",p.value="Does not have a membership go to the Membership/Contract section and create a new membership and press New Membership",console.error("no posee una membresia :(")),e.data[t])"memberships_location"==a?e.data[t][a]?(I(r,"locations_id").model=e.data[t][a].companies_locations_id,Ie([e.data[t][a].companies_locations_id]).then((e=>{O(r,"diciplines",e.data)}))):console.error("no posee una locacion :("):"diciplines"==a?(I(r,"diciplines").model=[],e.data[t][a].forEach((e=>{I(r,"diciplines").model.push(e.diciplines_id)}))):null!=I(r,a)&&W(r,a,e.data[t][a]);else if("trainers"==t){let a=[];e.data[t].forEach((e=>{a.push(e.id)})),W(r,"staff_id",a)}else if("emergency"==t)for(a in e.data[t])W(j,a,e.data[t][a]);else if("guardian"==t)for(a in e.data[t])W(k,a,e.data[t][a]);else W(o,t,"leo_vet_fr"==t?1==e.data[t]:e.data[t]);v.value=!1}))};return(t,r)=>{const o=e,f=Re,b=a,h=qt,y=he,_=Wt,g=ua,k=ya,x=ja,j=Aa,C=Ba,M=Ka,w=Ee;return Q(),K(w,null,{default:ee((()=>[v.value?(Q(),K("div",Xa,[te("div",Za,[te(o,{height:"700px"})]),te("div",es,[te("div",ts,[te(o,{height:"150px"})]),te("div",as,[te(o,{height:"420px"})])])])):X("",!0),!v.value&&J(s)?(Q(),K("div",ss,[te("div",ls,[te(f,{category:J(i).query.category,onChangeMenu:m},null,8,["category"])]),te("div",ns,[J(l)?X("",!0):(Q(),K(b,{key:0,class:"mb-4 d-flex justify-content-between align-items-center",color:"danger"},{default:ee((()=>[te("div",null,[te("h3",rs,ae(d.value),1),te("p",null,ae(p.value),1),J(s).subscription?(Q(),K("small",is,[te("p",null,ae(J(s).subscription.status),1)])):X("",!0)])])),_:1})),u.value?(Q(),K(h,{key:1,class:"mb-4"})):X("",!0),null!=J(s).membership_members?(Q(),K(b,{key:2,class:"mb-4"},{default:ee((()=>[te("div",os,[te("div",null,[te("p",null,[te("b",null,"Member #"+ae(J(s).id),1)]),te("p",null,[te("small",null,[us,oe(" "+ae(J(ue)(J(s).created_at).format("ddd - DD MMM YYYY")),1)])]),te("p",null,[cs,oe(" "+ae(J(n).membership.name),1)]),J(s).subscription&&J(s).membership_members.is_recurrence?(Q(),K("p",ms,[ds,oe(" "+ae(J(ue)(J(s).subscription.proxima_factura).format("ddd - DD MMM YYYY")),1)])):X("",!0)]),J(s).subscription?(Q(),K("div",ps,[te(y,{color:"info",label:J(s).subscription.status,rounded:""},null,8,["label"])])):X("",!0)])])),_:1})):X("",!0),ne(te(_,{category:J(i).query.category},null,8,["category"]),[[re,"personalInformation"==c.value]]),ne(te(g,null,null,512),[[re,"memberMembership"==c.value]]),ne(te(k,null,null,512),[[re,"memberFamily"==c.value]]),ne(te(x,null,null,512),[[re,"memberEmergency"==c.value]]),ne(te(j,null,null,512),[[re,"memberCheckins"==c.value]]),ne(te(C,null,null,512),[[re,"memberPurchases"==c.value]]),ne(te(M,null,null,512),[[re,"memberWaiver"==c.value]])])])):X("",!0)])),_:1})}}});export default vs;
