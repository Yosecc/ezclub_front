import{d as Xs,r as zs,V as Bs,o as Ys,e as Us,ao as Vs}from"./index.4457215e.js";var Nn=new Date,Xn=new Date;function gt(t,e,n,i){function r(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=function(a){return t(a=new Date(+a)),a},r.ceil=function(a){return t(a=new Date(a-1)),e(a,1),t(a),a},r.round=function(a){var s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=function(a,s){return e(a=new Date(+a),s==null?1:Math.floor(s)),a},r.range=function(a,s,o){var u=[],l;if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return u;do u.push(l=new Date(+a)),e(a,o),t(a);while(l<a&&a<s);return u},r.filter=function(a){return gt(function(s){if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},function(s,o){if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););})},n&&(r.count=function(a,s){return Nn.setTime(+a),Xn.setTime(+s),t(Nn),t(Xn),Math.floor(n(Nn,Xn))},r.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?function(s){return i(s)%a===0}:function(s){return r.count(0,s)%a===0}):r}),r}var en=gt(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});en.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?gt(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):en};var Hs=en;en.range;const zt=1e3,$t=zt*60,Bt=$t*60,jt=Bt*24,$i=jt*7,Ji=jt*30,zn=jt*365;var ra=gt(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*zt)},function(t,e){return(e-t)/zt},function(t){return t.getUTCSeconds()}),Le=ra;ra.range;var aa=gt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*zt)},function(t,e){t.setTime(+t+e*$t)},function(t,e){return(e-t)/$t},function(t){return t.getMinutes()}),sa=aa;aa.range;var oa=gt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*zt-t.getMinutes()*$t)},function(t,e){t.setTime(+t+e*Bt)},function(t,e){return(e-t)/Bt},function(t){return t.getHours()}),ua=oa;oa.range;var la=gt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$t)/jt,t=>t.getDate()-1),_n=la;la.range;function ee(t){return gt(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*$t)/$i})}var mn=ee(0),nn=ee(1),Gs=ee(2),Ws=ee(3),he=ee(4),qs=ee(5),Zs=ee(6);mn.range;nn.range;Gs.range;Ws.range;he.range;qs.range;Zs.range;var ca=gt(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),fa=ca;ca.range;var Ai=gt(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Ai.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:gt(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};var Kt=Ai;Ai.range;var ha=gt(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*$t)},function(t,e){return(e-t)/$t},function(t){return t.getUTCMinutes()}),js=ha;ha.range;var da=gt(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Bt)},function(t,e){return(e-t)/Bt},function(t){return t.getUTCHours()}),Ks=da;da.range;var ga=gt(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/jt},function(t){return t.getUTCDate()-1}),ki=ga;ga.range;function ne(t){return gt(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/$i})}var Ci=ne(0),rn=ne(1),Js=ne(2),Qs=ne(3),de=ne(4),to=ne(5),eo=ne(6);Ci.range;rn.range;Js.range;Qs.range;de.range;to.range;eo.range;var va=gt(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()}),no=va;va.range;var Mi=gt(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Mi.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:gt(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};var ge=Mi;Mi.range;function pa(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Si(t){let e=t,n=t;t.length===1&&(e=(s,o)=>t(s)-o,n=io(t));function i(s,o,u,l){for(u==null&&(u=0),l==null&&(l=s.length);u<l;){const c=u+l>>>1;n(s[c],o)<0?u=c+1:l=c}return u}function r(s,o,u,l){for(u==null&&(u=0),l==null&&(l=s.length);u<l;){const c=u+l>>>1;n(s[c],o)>0?l=c:u=c+1}return u}function a(s,o,u,l){u==null&&(u=0),l==null&&(l=s.length);const c=i(s,o,u,l-1);return c>u&&e(s[c-1],o)>-e(s[c],o)?c-1:c}return{left:i,center:a,right:r}}function io(t){return(e,n)=>pa(t(e),n)}function ro(t){return t===null?NaN:+t}const ao=Si(pa),so=ao.right;Si(ro).center;var oo=so,ii=Math.sqrt(50),ri=Math.sqrt(10),ai=Math.sqrt(2);function si(t,e,n){var i,r=-1,a,s,o;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(a=t,t=e,e=a),(o=xa(t,e,n))===0||!isFinite(o))return[];if(o>0){let u=Math.round(t/o),l=Math.round(e/o);for(u*o<t&&++u,l*o>e&&--l,s=new Array(a=l-u+1);++r<a;)s[r]=(u+r)*o}else{o=-o;let u=Math.round(t*o),l=Math.round(e*o);for(u/o<t&&++u,l/o>e&&--l,s=new Array(a=l-u+1);++r<a;)s[r]=(u+r)/o}return i&&s.reverse(),s}function xa(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=ii?10:a>=ri?5:a>=ai?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=ii?10:a>=ri?5:a>=ai?2:1)}function oi(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=ii?r*=10:a>=ri?r*=5:a>=ai&&(r*=2),e<t?-r:r}function _a(t,e,n,i,r,a){const s=[[Le,1,zt],[Le,5,5*zt],[Le,15,15*zt],[Le,30,30*zt],[a,1,$t],[a,5,5*$t],[a,15,15*$t],[a,30,30*$t],[r,1,Bt],[r,3,3*Bt],[r,6,6*Bt],[r,12,12*Bt],[i,1,jt],[i,2,2*jt],[n,1,$i],[e,1,Ji],[e,3,3*Ji],[t,1,zn]];function o(l,c,f){const h=c<l;h&&([l,c]=[c,l]);const d=f&&typeof f.range=="function"?f:u(l,c,f),g=d?d.range(l,+c+1):[];return h?g.reverse():g}function u(l,c,f){const h=Math.abs(c-l)/f,d=Si(([,,p])=>p).right(s,h);if(d===s.length)return t.every(oi(l/zn,c/zn,f));if(d===0)return Hs.every(Math.max(oi(l,c,f),1));const[g,v]=s[h/s[d-1][2]<s[d][2]/h?d-1:d];return g.every(v)}return[o,u]}_a(ge,no,Ci,ki,Ks,js);const[uo,lo]=_a(Kt,fa,mn,_n,ua,sa);function Bn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Yn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function $e(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function co(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,a=t.days,s=t.shortDays,o=t.months,u=t.shortMonths,l=Ae(r),c=ke(r),f=Ae(a),h=ke(a),d=Ae(s),g=ke(s),v=Ae(o),p=ke(o),_=Ae(u),y=ke(u),b={a:W,A:K,b:O,B:rt,c:null,d:rr,e:rr,f:Fo,g:Vo,G:Go,H:Lo,I:Eo,j:Do,L:ma,m:Io,M:Oo,p:U,q:Q,Q:or,s:ur,S:Po,u:No,U:Xo,V:zo,w:Bo,W:Yo,x:null,X:null,y:Uo,Y:Ho,Z:Wo,"%":sr},m={a:dt,A:J,b:M,B:I,c:null,d:ar,e:ar,f:Ko,g:ou,G:lu,H:qo,I:Zo,j:jo,L:ba,m:Jo,M:Qo,p:tt,q:ct,Q:or,s:ur,S:tu,u:eu,U:nu,V:iu,w:ru,W:au,x:null,X:null,y:su,Y:uu,Z:cu,"%":sr},w={a:F,A:C,b:A,B:R,c:D,d:nr,e:nr,f:Co,g:er,G:tr,H:ir,I:ir,j:wo,L:ko,m:To,M:$o,p:E,q:bo,Q:So,s:Ro,S:Ao,u:po,U:xo,V:_o,w:vo,W:mo,x:X,X:G,y:er,Y:tr,Z:yo,"%":Mo};b.x=T(n,b),b.X=T(i,b),b.c=T(e,b),m.x=T(n,m),m.X=T(i,m),m.c=T(e,m);function T(L,N){return function(Y){var k=[],lt=-1,V=0,at=L.length,pt,Xt,kt;for(Y instanceof Date||(Y=new Date(+Y));++lt<at;)L.charCodeAt(lt)===37&&(k.push(L.slice(V,lt)),(Xt=Qi[pt=L.charAt(++lt)])!=null?pt=L.charAt(++lt):Xt=pt==="e"?" ":"0",(kt=N[pt])&&(pt=kt(Y,Xt)),k.push(pt),V=lt+1);return k.push(L.slice(V,lt)),k.join("")}}function $(L,N){return function(Y){var k=$e(1900,void 0,1),lt=S(k,L,Y+="",0),V,at;if(lt!=Y.length)return null;if("Q"in k)return new Date(k.Q);if("s"in k)return new Date(k.s*1e3+("L"in k?k.L:0));if(N&&!("Z"in k)&&(k.Z=0),"p"in k&&(k.H=k.H%12+k.p*12),k.m===void 0&&(k.m="q"in k?k.q:0),"V"in k){if(k.V<1||k.V>53)return null;"w"in k||(k.w=1),"Z"in k?(V=Yn($e(k.y,0,1)),at=V.getUTCDay(),V=at>4||at===0?rn.ceil(V):rn(V),V=ki.offset(V,(k.V-1)*7),k.y=V.getUTCFullYear(),k.m=V.getUTCMonth(),k.d=V.getUTCDate()+(k.w+6)%7):(V=Bn($e(k.y,0,1)),at=V.getDay(),V=at>4||at===0?nn.ceil(V):nn(V),V=_n.offset(V,(k.V-1)*7),k.y=V.getFullYear(),k.m=V.getMonth(),k.d=V.getDate()+(k.w+6)%7)}else("W"in k||"U"in k)&&("w"in k||(k.w="u"in k?k.u%7:"W"in k?1:0),at="Z"in k?Yn($e(k.y,0,1)).getUTCDay():Bn($e(k.y,0,1)).getDay(),k.m=0,k.d="W"in k?(k.w+6)%7+k.W*7-(at+5)%7:k.w+k.U*7-(at+6)%7);return"Z"in k?(k.H+=k.Z/100|0,k.M+=k.Z%100,Yn(k)):Bn(k)}}function S(L,N,Y,k){for(var lt=0,V=N.length,at=Y.length,pt,Xt;lt<V;){if(k>=at)return-1;if(pt=N.charCodeAt(lt++),pt===37){if(pt=N.charAt(lt++),Xt=w[pt in Qi?N.charAt(lt++):pt],!Xt||(k=Xt(L,Y,k))<0)return-1}else if(pt!=Y.charCodeAt(k++))return-1}return k}function E(L,N,Y){var k=l.exec(N.slice(Y));return k?(L.p=c.get(k[0].toLowerCase()),Y+k[0].length):-1}function F(L,N,Y){var k=d.exec(N.slice(Y));return k?(L.w=g.get(k[0].toLowerCase()),Y+k[0].length):-1}function C(L,N,Y){var k=f.exec(N.slice(Y));return k?(L.w=h.get(k[0].toLowerCase()),Y+k[0].length):-1}function A(L,N,Y){var k=_.exec(N.slice(Y));return k?(L.m=y.get(k[0].toLowerCase()),Y+k[0].length):-1}function R(L,N,Y){var k=v.exec(N.slice(Y));return k?(L.m=p.get(k[0].toLowerCase()),Y+k[0].length):-1}function D(L,N,Y){return S(L,e,N,Y)}function X(L,N,Y){return S(L,n,N,Y)}function G(L,N,Y){return S(L,i,N,Y)}function W(L){return s[L.getDay()]}function K(L){return a[L.getDay()]}function O(L){return u[L.getMonth()]}function rt(L){return o[L.getMonth()]}function U(L){return r[+(L.getHours()>=12)]}function Q(L){return 1+~~(L.getMonth()/3)}function dt(L){return s[L.getUTCDay()]}function J(L){return a[L.getUTCDay()]}function M(L){return u[L.getUTCMonth()]}function I(L){return o[L.getUTCMonth()]}function tt(L){return r[+(L.getUTCHours()>=12)]}function ct(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var N=T(L+="",b);return N.toString=function(){return L},N},parse:function(L){var N=$(L+="",!1);return N.toString=function(){return L},N},utcFormat:function(L){var N=T(L+="",m);return N.toString=function(){return L},N},utcParse:function(L){var N=$(L+="",!0);return N.toString=function(){return L},N}}}var Qi={"-":"",_:" ",0:"0"},vt=/^\s*\d+/,fo=/^%/,ho=/[\\^$*+?|[\]().{}]/g;function Z(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function go(t){return t.replace(ho,"\\$&")}function Ae(t){return new RegExp("^(?:"+t.map(go).join("|")+")","i")}function ke(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function vo(t,e,n){var i=vt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function po(t,e,n){var i=vt.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function xo(t,e,n){var i=vt.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function _o(t,e,n){var i=vt.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function mo(t,e,n){var i=vt.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function tr(t,e,n){var i=vt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function er(t,e,n){var i=vt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function yo(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function bo(t,e,n){var i=vt.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function To(t,e,n){var i=vt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function nr(t,e,n){var i=vt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function wo(t,e,n){var i=vt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function ir(t,e,n){var i=vt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function $o(t,e,n){var i=vt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Ao(t,e,n){var i=vt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function ko(t,e,n){var i=vt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Co(t,e,n){var i=vt.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Mo(t,e,n){var i=fo.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function So(t,e,n){var i=vt.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function Ro(t,e,n){var i=vt.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function rr(t,e){return Z(t.getDate(),e,2)}function Lo(t,e){return Z(t.getHours(),e,2)}function Eo(t,e){return Z(t.getHours()%12||12,e,2)}function Do(t,e){return Z(1+_n.count(Kt(t),t),e,3)}function ma(t,e){return Z(t.getMilliseconds(),e,3)}function Fo(t,e){return ma(t,e)+"000"}function Io(t,e){return Z(t.getMonth()+1,e,2)}function Oo(t,e){return Z(t.getMinutes(),e,2)}function Po(t,e){return Z(t.getSeconds(),e,2)}function No(t){var e=t.getDay();return e===0?7:e}function Xo(t,e){return Z(mn.count(Kt(t)-1,t),e,2)}function ya(t){var e=t.getDay();return e>=4||e===0?he(t):he.ceil(t)}function zo(t,e){return t=ya(t),Z(he.count(Kt(t),t)+(Kt(t).getDay()===4),e,2)}function Bo(t){return t.getDay()}function Yo(t,e){return Z(nn.count(Kt(t)-1,t),e,2)}function Uo(t,e){return Z(t.getFullYear()%100,e,2)}function Vo(t,e){return t=ya(t),Z(t.getFullYear()%100,e,2)}function Ho(t,e){return Z(t.getFullYear()%1e4,e,4)}function Go(t,e){var n=t.getDay();return t=n>=4||n===0?he(t):he.ceil(t),Z(t.getFullYear()%1e4,e,4)}function Wo(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Z(e/60|0,"0",2)+Z(e%60,"0",2)}function ar(t,e){return Z(t.getUTCDate(),e,2)}function qo(t,e){return Z(t.getUTCHours(),e,2)}function Zo(t,e){return Z(t.getUTCHours()%12||12,e,2)}function jo(t,e){return Z(1+ki.count(ge(t),t),e,3)}function ba(t,e){return Z(t.getUTCMilliseconds(),e,3)}function Ko(t,e){return ba(t,e)+"000"}function Jo(t,e){return Z(t.getUTCMonth()+1,e,2)}function Qo(t,e){return Z(t.getUTCMinutes(),e,2)}function tu(t,e){return Z(t.getUTCSeconds(),e,2)}function eu(t){var e=t.getUTCDay();return e===0?7:e}function nu(t,e){return Z(Ci.count(ge(t)-1,t),e,2)}function Ta(t){var e=t.getUTCDay();return e>=4||e===0?de(t):de.ceil(t)}function iu(t,e){return t=Ta(t),Z(de.count(ge(t),t)+(ge(t).getUTCDay()===4),e,2)}function ru(t){return t.getUTCDay()}function au(t,e){return Z(rn.count(ge(t)-1,t),e,2)}function su(t,e){return Z(t.getUTCFullYear()%100,e,2)}function ou(t,e){return t=Ta(t),Z(t.getUTCFullYear()%100,e,2)}function uu(t,e){return Z(t.getUTCFullYear()%1e4,e,4)}function lu(t,e){var n=t.getUTCDay();return t=n>=4||n===0?de(t):de.ceil(t),Z(t.getUTCFullYear()%1e4,e,4)}function cu(){return"+0000"}function sr(){return"%"}function or(t){return+t}function ur(t){return Math.floor(+t/1e3)}var re,Ri,wa,$a,Aa;fu({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fu(t){return re=co(t),Ri=re.format,wa=re.parse,$a=re.utcFormat,Aa=re.utcParse,re}var ui="http://www.w3.org/1999/xhtml",ve={svg:"http://www.w3.org/2000/svg",xhtml:ui,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ve.hasOwnProperty(e)?{space:ve[e],local:t}:t}function hu(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ui&&e.documentElement.namespaceURI===ui?e.createElement(t):e.createElementNS(n,t)}}function du(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ka(t){var e=yn(t);return(e.local?du:hu)(e)}function gu(){}function Li(t){return t==null?gu:function(){return this.querySelector(t)}}function vu(t){typeof t!="function"&&(t=Li(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],s=a.length,o=i[r]=new Array(s),u,l,c=0;c<s;++c)(u=a[c])&&(l=t.call(u,u.__data__,c,a))&&("__data__"in u&&(l.__data__=u.__data__),o[c]=l);return new yt(i,this._parents)}function Ei(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function pu(){return[]}function Ca(t){return t==null?pu:function(){return this.querySelectorAll(t)}}function xu(t){return function(){var e=t.apply(this,arguments);return e==null?[]:Ei(e)}}function _u(t){typeof t=="function"?t=xu(t):t=Ca(t);for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var s=e[a],o=s.length,u,l=0;l<o;++l)(u=s[l])&&(i.push(t.call(u,u.__data__,l,s)),r.push(u));return new yt(i,r)}function Ma(t){return function(){return this.matches(t)}}function Sa(t){return function(e){return e.matches(t)}}var mu=Array.prototype.find;function yu(t){return function(){return mu.call(this.children,t)}}function bu(){return this.firstElementChild}function Tu(t){return this.select(t==null?bu:yu(typeof t=="function"?t:Sa(t)))}var wu=Array.prototype.filter;function $u(){return this.children}function Au(t){return function(){return wu.call(this.children,t)}}function ku(t){return this.selectAll(t==null?$u:Au(typeof t=="function"?t:Sa(t)))}function Cu(t){typeof t!="function"&&(t=Ma(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],s=a.length,o=i[r]=[],u,l=0;l<s;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&o.push(u);return new yt(i,this._parents)}function Ra(t){return new Array(t.length)}function Mu(){return new yt(this._enter||this._groups.map(Ra),this._parents)}function an(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}an.prototype={constructor:an,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Su(t){return function(){return t}}function Ru(t,e,n,i,r,a){for(var s=0,o,u=e.length,l=a.length;s<l;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):n[s]=new an(t,a[s]);for(;s<u;++s)(o=e[s])&&(r[s]=o)}function Lu(t,e,n,i,r,a,s){var o,u,l=new Map,c=e.length,f=a.length,h=new Array(c),d;for(o=0;o<c;++o)(u=e[o])&&(h[o]=d=s.call(u,u.__data__,o,e)+"",l.has(d)?r[o]=u:l.set(d,u));for(o=0;o<f;++o)d=s.call(t,a[o],o,a)+"",(u=l.get(d))?(i[o]=u,u.__data__=a[o],l.delete(d)):n[o]=new an(t,a[o]);for(o=0;o<c;++o)(u=e[o])&&l.get(h[o])===u&&(r[o]=u)}function Eu(t){return t.__data__}function Du(t,e){if(!arguments.length)return Array.from(this,Eu);var n=e?Lu:Ru,i=this._parents,r=this._groups;typeof t!="function"&&(t=Su(t));for(var a=r.length,s=new Array(a),o=new Array(a),u=new Array(a),l=0;l<a;++l){var c=i[l],f=r[l],h=f.length,d=Ei(t.call(c,c&&c.__data__,l,i)),g=d.length,v=o[l]=new Array(g),p=s[l]=new Array(g),_=u[l]=new Array(h);n(c,f,v,p,_,d,e);for(var y=0,b=0,m,w;y<g;++y)if(m=v[y]){for(y>=b&&(b=y+1);!(w=p[b])&&++b<g;);m._next=w||null}}return s=new yt(s,i),s._enter=o,s._exit=u,s}function Fu(){return new yt(this._exit||this._groups.map(Ra),this._parents)}function Iu(t,e,n){var i=this.enter(),r=this,a=this.exit();return i=typeof t=="function"?t(i):i.append(t+""),e!=null&&(r=e(r)),n==null?a.remove():n(a),i&&r?i.merge(r).order():r}function Ou(t){if(!(t instanceof yt))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),s=new Array(i),o=0;o<a;++o)for(var u=e[o],l=n[o],c=u.length,f=s[o]=new Array(c),h,d=0;d<c;++d)(h=u[d]||l[d])&&(f[d]=h);for(;o<i;++o)s[o]=e[o];return new yt(s,this._parents)}function Pu(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,a=i[r],s;--r>=0;)(s=i[r])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Nu(t){t||(t=Xu);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var s=n[a],o=s.length,u=r[a]=new Array(o),l,c=0;c<o;++c)(l=s[c])&&(u[c]=l);u.sort(e)}return new yt(r,this._parents).order()}function Xu(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zu(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Bu(){return Array.from(this)}function Yu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var s=i[r];if(s)return s}return null}function Uu(){let t=0;for(const e of this)++t;return t}function Vu(){return!this.node()}function Hu(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],a=0,s=r.length,o;a<s;++a)(o=r[a])&&t.call(o,o.__data__,a,r);return this}function Gu(t){return function(){this.removeAttribute(t)}}function Wu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qu(t,e){return function(){this.setAttribute(t,e)}}function Zu(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ju(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ku(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ju(t,e){var n=yn(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Wu:Gu:typeof e=="function"?n.local?Ku:ju:n.local?Zu:qu)(n,e))}function La(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Qu(t){return function(){this.style.removeProperty(t)}}function tl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function el(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function nl(t,e,n){return arguments.length>1?this.each((e==null?Qu:typeof e=="function"?el:tl)(t,e,n==null?"":n)):pe(this.node(),t)}function pe(t,e){return t.style.getPropertyValue(e)||La(t).getComputedStyle(t,null).getPropertyValue(e)}function il(t){return function(){delete this[t]}}function rl(t,e){return function(){this[t]=e}}function al(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function sl(t,e){return arguments.length>1?this.each((e==null?il:typeof e=="function"?al:rl)(t,e)):this.node()[t]}function Ea(t){return t.trim().split(/^|\s+/)}function Di(t){return t.classList||new Da(t)}function Da(t){this._node=t,this._names=Ea(t.getAttribute("class")||"")}Da.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Fa(t,e){for(var n=Di(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Ia(t,e){for(var n=Di(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function ol(t){return function(){Fa(this,t)}}function ul(t){return function(){Ia(this,t)}}function ll(t,e){return function(){(e.apply(this,arguments)?Fa:Ia)(this,t)}}function cl(t,e){var n=Ea(t+"");if(arguments.length<2){for(var i=Di(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?ll:e?ol:ul)(n,e))}function fl(){this.textContent=""}function hl(t){return function(){this.textContent=t}}function dl(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function gl(t){return arguments.length?this.each(t==null?fl:(typeof t=="function"?dl:hl)(t)):this.node().textContent}function vl(){this.innerHTML=""}function pl(t){return function(){this.innerHTML=t}}function xl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function _l(t){return arguments.length?this.each(t==null?vl:(typeof t=="function"?xl:pl)(t)):this.node().innerHTML}function ml(){this.nextSibling&&this.parentNode.appendChild(this)}function yl(){return this.each(ml)}function bl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tl(){return this.each(bl)}function wl(t){var e=typeof t=="function"?t:ka(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function $l(){return null}function Al(t,e){var n=typeof t=="function"?t:ka(t),i=e==null?$l:typeof e=="function"?e:Li(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function kl(){var t=this.parentNode;t&&t.removeChild(this)}function Cl(){return this.each(kl)}function Ml(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Sl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Rl(t){return this.select(t?Sl:Ml)}function Ll(t){return arguments.length?this.property("__data__",t):this.node().__data__}function El(t){return function(e){t.call(this,e,this.__data__)}}function Dl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Fl(t){return function(){var e=this.__on;if(!!e){for(var n=0,i=-1,r=e.length,a;n<r;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++i]=a;++i?e.length=i:delete this.__on}}}function Il(t,e,n){return function(){var i=this.__on,r,a=El(e);if(i){for(var s=0,o=i.length;s<o;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=e;return}}this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function Ol(t,e,n){var i=Dl(t+""),r,a=i.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,l=o.length,c;u<l;++u)for(r=0,c=o[u];r<a;++r)if((s=i[r]).type===c.type&&s.name===c.name)return c.value}return}for(o=e?Il:Fl,r=0;r<a;++r)this.each(o(i[r],e,n));return this}function Oa(t,e,n){var i=La(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Pl(t,e){return function(){return Oa(this,t,e)}}function Nl(t,e){return function(){return Oa(this,t,e.apply(this,arguments))}}function Xl(t,e){return this.each((typeof e=="function"?Nl:Pl)(t,e))}function*zl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length,s;r<a;++r)(s=i[r])&&(yield s)}var Fi=[null];function yt(t,e){this._groups=t,this._parents=e}function be(){return new yt([[document.documentElement]],Fi)}function Bl(){return this}yt.prototype=be.prototype={constructor:yt,select:vu,selectAll:_u,selectChild:Tu,selectChildren:ku,filter:Cu,data:Du,enter:Mu,exit:Fu,join:Iu,merge:Ou,selection:Bl,order:Pu,sort:Nu,call:zu,nodes:Bu,node:Yu,size:Uu,empty:Vu,each:Hu,attr:Ju,style:nl,property:sl,classed:cl,text:gl,html:_l,raise:yl,lower:Tl,append:wl,insert:Al,remove:Cl,clone:Rl,datum:Ll,on:Ol,dispatch:Xl,[Symbol.iterator]:zl};function P(t){return typeof t=="string"?new yt([[document.querySelector(t)]],[document.documentElement]):new yt([[t]],Fi)}function Yl(t){let e;for(;e=t.sourceEvent;)t=e;return t}function li(t,e){if(t=Yl(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function Pa(t){return typeof t=="string"?new yt([document.querySelectorAll(t)],[document.documentElement]):new yt([t==null?[]:Ei(t)],Fi)}var Ul={value:()=>{}};function Ii(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new qe(n)}function qe(t){this._=t}function Vl(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}qe.prototype=Ii.prototype={constructor:qe,on:function(t,e){var n=this._,i=Vl(t+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(t=i[a]).type)&&(r=Hl(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(r=(t=i[a]).type)n[r]=lr(n[r],t.name,e);else if(e==null)for(r in n)n[r]=lr(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new qe(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,r=a.length;i<r;++i)a[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};function Hl(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function lr(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Ul,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}function Un(t){t.stopImmediatePropagation()}function ce(t){t.preventDefault(),t.stopImmediatePropagation()}function Gl(t){var e=t.document.documentElement,n=P(t).on("dragstart.drag",ce,!0);"onselectstart"in e?n.on("selectstart.drag",ce,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Wl(t,e){var n=t.document.documentElement,i=P(t).on("dragstart.drag",null);e&&(i.on("click.drag",ce,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ue=t=>()=>t;function ci(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:a,x:s,y:o,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}ci.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ql(t){return!t.ctrlKey&&!t.button}function Zl(){return this.parentNode}function jl(t,e){return e==null?{x:t.x,y:t.y}:e}function Kl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jl(){var t=ql,e=Zl,n=jl,i=Kl,r={},a=Ii("start","drag","end"),s=0,o,u,l,c,f=0;function h(m){m.on("mousedown.drag",d).filter(i).on("touchstart.drag",p).on("touchmove.drag",_).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(m,w){if(!(c||!t.call(this,m,w))){var T=b(this,e.call(this,m,w),m,w,"mouse");!T||(P(m.view).on("mousemove.drag",g,!0).on("mouseup.drag",v,!0),Gl(m.view),Un(m),l=!1,o=m.clientX,u=m.clientY,T("start",m))}}function g(m){if(ce(m),!l){var w=m.clientX-o,T=m.clientY-u;l=w*w+T*T>f}r.mouse("drag",m)}function v(m){P(m.view).on("mousemove.drag mouseup.drag",null),Wl(m.view,l),ce(m),r.mouse("end",m)}function p(m,w){if(!!t.call(this,m,w)){var T=m.changedTouches,$=e.call(this,m,w),S=T.length,E,F;for(E=0;E<S;++E)(F=b(this,$,m,w,T[E].identifier,T[E]))&&(Un(m),F("start",m,T[E]))}}function _(m){var w=m.changedTouches,T=w.length,$,S;for($=0;$<T;++$)(S=r[w[$].identifier])&&(ce(m),S("drag",m,w[$]))}function y(m){var w=m.changedTouches,T=w.length,$,S;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),$=0;$<T;++$)(S=r[w[$].identifier])&&(Un(m),S("end",m,w[$]))}function b(m,w,T,$,S,E){var F=a.copy(),C=li(E||T,w),A,R,D;if((D=n.call(m,new ci("beforestart",{sourceEvent:T,target:h,identifier:S,active:s,x:C[0],y:C[1],dx:0,dy:0,dispatch:F}),$))!=null)return A=D.x-C[0]||0,R=D.y-C[1]||0,function X(G,W,K){var O=C,rt;switch(G){case"start":r[S]=X,rt=s++;break;case"end":delete r[S],--s;case"drag":C=li(K||W,w),rt=s;break}F.call(G,m,new ci(G,{sourceEvent:W,subject:D,target:h,identifier:S,active:rt,x:C[0]+A,y:C[1]+R,dx:C[0]-O[0],dy:C[1]-O[1],dispatch:F}),$)}}return h.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Ue(!!m),h):t},h.container=function(m){return arguments.length?(e=typeof m=="function"?m:Ue(m),h):e},h.subject=function(m){return arguments.length?(n=typeof m=="function"?m:Ue(m),h):n},h.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Ue(!!m),h):i},h.on=function(){var m=a.on.apply(a,arguments);return m===a?h:m},h.clickDistance=function(m){return arguments.length?(f=(m=+m)*m,h):Math.sqrt(f)},h}function Oi(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Na(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Be(){}var Oe=.7,sn=1/Oe,fe="\\s*([+-]?\\d+)\\s*",Pe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ft="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ql=/^#([0-9a-f]{3,8})$/,tc=new RegExp("^rgb\\("+[fe,fe,fe]+"\\)$"),ec=new RegExp("^rgb\\("+[Ft,Ft,Ft]+"\\)$"),nc=new RegExp("^rgba\\("+[fe,fe,fe,Pe]+"\\)$"),ic=new RegExp("^rgba\\("+[Ft,Ft,Ft,Pe]+"\\)$"),rc=new RegExp("^hsl\\("+[Pe,Ft,Ft]+"\\)$"),ac=new RegExp("^hsla\\("+[Pe,Ft,Ft,Pe]+"\\)$"),cr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Oi(Be,Jt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:fr,formatHex:fr,formatHsl:sc,formatRgb:hr,toString:hr});function fr(){return this.rgb().formatHex()}function sc(){return Xa(this).formatHsl()}function hr(){return this.rgb().formatRgb()}function Jt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ql.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?dr(e):n===3?new wt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ve(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ve(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=tc.exec(t))?new wt(e[1],e[2],e[3],1):(e=ec.exec(t))?new wt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nc.exec(t))?Ve(e[1],e[2],e[3],e[4]):(e=ic.exec(t))?Ve(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rc.exec(t))?pr(e[1],e[2]/100,e[3]/100,1):(e=ac.exec(t))?pr(e[1],e[2]/100,e[3]/100,e[4]):cr.hasOwnProperty(t)?dr(cr[t]):t==="transparent"?new wt(NaN,NaN,NaN,0):null}function dr(t){return new wt(t>>16&255,t>>8&255,t&255,1)}function Ve(t,e,n,i){return i<=0&&(t=e=n=NaN),new wt(t,e,n,i)}function oc(t){return t instanceof Be||(t=Jt(t)),t?(t=t.rgb(),new wt(t.r,t.g,t.b,t.opacity)):new wt}function on(t,e,n,i){return arguments.length===1?oc(t):new wt(t,e,n,i==null?1:i)}function wt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Oi(wt,on,Na(Be,{brighter:function(t){return t=t==null?sn:Math.pow(sn,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Oe:Math.pow(Oe,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gr,formatHex:gr,formatRgb:vr,toString:vr}));function gr(){return"#"+Vn(this.r)+Vn(this.g)+Vn(this.b)}function vr(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Vn(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function pr(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Dt(t,e,n,i)}function Xa(t){if(t instanceof Dt)return new Dt(t.h,t.s,t.l,t.opacity);if(t instanceof Be||(t=Jt(t)),!t)return new Dt;if(t instanceof Dt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),s=NaN,o=a-r,u=(a+r)/2;return o?(e===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-e)/o+2:s=(e-n)/o+4,o/=u<.5?a+r:2-a-r,s*=60):o=u>0&&u<1?0:s,new Dt(s,o,u,t.opacity)}function uc(t,e,n,i){return arguments.length===1?Xa(t):new Dt(t,e,n,i==null?1:i)}function Dt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Oi(Dt,uc,Na(Be,{brighter:function(t){return t=t==null?sn:Math.pow(sn,t),new Dt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Oe:Math.pow(Oe,t),new Dt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new wt(Hn(t>=240?t-240:t+120,r,i),Hn(t,r,i),Hn(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Hn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var Pi=t=>()=>t;function lc(t,e){return function(n){return t+n*e}}function cc(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function fc(t){return(t=+t)==1?za:function(e,n){return n-e?cc(e,n,t):Pi(isNaN(e)?n:e)}}function za(t,e){var n=e-t;return n?lc(t,n):Pi(isNaN(t)?e:t)}var un=function t(e){var n=fc(e);function i(r,a){var s=n((r=on(r)).r,(a=on(a)).r),o=n(r.g,a.g),u=n(r.b,a.b),l=za(r.opacity,a.opacity);return function(c){return r.r=s(c),r.g=o(c),r.b=u(c),r.opacity=l(c),r+""}}return i.gamma=t,i}(1);function hc(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function dc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gc(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=bn(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function vc(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Ct(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function pc(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=bn(t[r],e[r]):i[r]=e[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var fi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gn=new RegExp(fi.source,"g");function xc(t){return function(){return t}}function _c(t){return function(e){return t(e)+""}}function Ba(t,e){var n=fi.lastIndex=Gn.lastIndex=0,i,r,a,s=-1,o=[],u=[];for(t=t+"",e=e+"";(i=fi.exec(t))&&(r=Gn.exec(e));)(a=r.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,u.push({i:s,x:Ct(i,r)})),n=Gn.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?u[0]?_c(u[0].x):xc(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)o[(f=u[c]).i]=f.x(l);return o.join("")})}function bn(t,e){var n=typeof e,i;return e==null||n==="boolean"?Pi(e):(n==="number"?Ct:n==="string"?(i=Jt(e))?(e=i,un):Ba:e instanceof Jt?un:e instanceof Date?vc:dc(e)?hc:Array.isArray(e)?gc:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?pc:Ct)(t,e)}function mc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var xr=180/Math.PI,hi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ya(t,e,n,i,r,a){var s,o,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,u/=o),t*i<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*xr,skewX:Math.atan(u)*xr,scaleX:s,scaleY:o}}var He;function yc(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?hi:Ya(e.a,e.b,e.c,e.d,e.e,e.f)}function bc(t){return t==null||(He||(He=document.createElementNS("http://www.w3.org/2000/svg","g")),He.setAttribute("transform",t),!(t=He.transform.baseVal.consolidate()))?hi:(t=t.matrix,Ya(t.a,t.b,t.c,t.d,t.e,t.f))}function Ua(t,e,n,i){function r(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,g){if(l!==f||c!==h){var v=d.push("translate(",null,e,null,n);g.push({i:v-4,x:Ct(l,f)},{i:v-2,x:Ct(c,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function s(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:Ct(l,c)})):c&&f.push(r(f)+"rotate("+c+i)}function o(l,c,f,h){l!==c?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:Ct(l,c)}):c&&f.push(r(f)+"skewX("+c+i)}function u(l,c,f,h,d,g){if(l!==f||c!==h){var v=d.push(r(d)+"scale(",null,",",null,")");g.push({i:v-4,x:Ct(l,f)},{i:v-2,x:Ct(c,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=t(l),c=t(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),s(l.rotate,c.rotate,f,h),o(l.skewX,c.skewX,f,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var g=-1,v=h.length,p;++g<v;)f[(p=h[g]).i]=p.x(d);return f.join("")}}}var Tc=Ua(yc,"px, ","px)","deg)"),wc=Ua(bc,", ",")",")"),xe=0,Ee=0,Ce=0,Va=1e3,ln,De,cn=0,Qt=0,Tn=0,Ne=typeof performance=="object"&&performance.now?performance:Date,Ha=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ni(){return Qt||(Ha($c),Qt=Ne.now()+Tn)}function $c(){Qt=0}function fn(){this._call=this._time=this._next=null}fn.prototype=Ga.prototype={constructor:fn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ni():+n)+(e==null?0:+e),!this._next&&De!==this&&(De?De._next=this:ln=this,De=this),this._call=t,this._time=n,di()},stop:function(){this._call&&(this._call=null,this._time=1/0,di())}};function Ga(t,e,n){var i=new fn;return i.restart(t,e,n),i}function Ac(){Ni(),++xe;for(var t=ln,e;t;)(e=Qt-t._time)>=0&&t._call.call(null,e),t=t._next;--xe}function _r(){Qt=(cn=Ne.now())+Tn,xe=Ee=0;try{Ac()}finally{xe=0,Cc(),Qt=0}}function kc(){var t=Ne.now(),e=t-cn;e>Va&&(Tn-=e,cn=t)}function Cc(){for(var t,e=ln,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ln=n);De=t,di(i)}function di(t){if(!xe){Ee&&(Ee=clearTimeout(Ee));var e=t-Qt;e>24?(t<1/0&&(Ee=setTimeout(_r,t-Ne.now()-Tn)),Ce&&(Ce=clearInterval(Ce))):(Ce||(cn=Ne.now(),Ce=setInterval(kc,Va)),xe=1,Ha(_r))}}function mr(t,e,n){var i=new fn;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Mc=Ii("start","end","cancel","interrupt"),Sc=[],Wa=0,yr=1,gi=2,Ze=3,br=4,vi=5,je=6;function wn(t,e,n,i,r,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Rc(t,n,{name:e,index:i,group:r,on:Mc,tween:Sc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Wa})}function Xi(t,e){var n=Lt(t,e);if(n.state>Wa)throw new Error("too late; already scheduled");return n}function Nt(t,e){var n=Lt(t,e);if(n.state>Ze)throw new Error("too late; already running");return n}function Lt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Rc(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=Ga(a,0,n.time);function a(l){n.state=yr,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,f,h,d;if(n.state!==yr)return u();for(c in i)if(d=i[c],d.name===n.name){if(d.state===Ze)return mr(s);d.state===br?(d.state=je,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[c]):+c<e&&(d.state=je,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[c])}if(mr(function(){n.state===Ze&&(n.state=br,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=gi,n.on.call("start",t,t.__data__,n.index,n.group),n.state===gi){for(n.state=Ze,r=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++f]=d);r.length=f+1}}function o(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=vi,1),f=-1,h=r.length;++f<h;)r[f].call(t,c);n.state===vi&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=je,n.timer.stop(),delete i[e];for(var l in i)return;delete t.__transition}}function Lc(t,e){var n=t.__transition,i,r,a=!0,s;if(!!n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){a=!1;continue}r=i.state>gi&&i.state<vi,i.state=je,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}a&&delete t.__transition}}function Ec(t){return this.each(function(){Lc(this,t)})}function Dc(t,e){var n,i;return function(){var r=Nt(this,t),a=r.tween;if(a!==n){i=n=a;for(var s=0,o=i.length;s<o;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function Fc(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var a=Nt(this,t),s=a.tween;if(s!==i){r=(i=s).slice();for(var o={name:e,value:n},u=0,l=r.length;u<l;++u)if(r[u].name===e){r[u]=o;break}u===l&&r.push(o)}a.tween=r}}function Ic(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Lt(this.node(),n).tween,r=0,a=i.length,s;r<a;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?Dc:Fc)(n,t,e))}function zi(t,e,n){var i=t._id;return t.each(function(){var r=Nt(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Lt(r,i).value[e]}}function qa(t,e){var n;return(typeof e=="number"?Ct:e instanceof Jt?un:(n=Jt(e))?(e=n,un):Ba)(t,e)}function Oc(t){return function(){this.removeAttribute(t)}}function Pc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Nc(t,e,n){var i,r=n+"",a;return function(){var s=this.getAttribute(t);return s===r?null:s===i?a:a=e(i=s,n)}}function Xc(t,e,n){var i,r=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?a:a=e(i=s,n)}}function zc(t,e,n){var i,r,a;return function(){var s,o=n(this),u;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=o+"",s===u?null:s===i&&u===r?a:(r=u,a=e(i=s,o)))}}function Bc(t,e,n){var i,r,a;return function(){var s,o=n(this),u;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=o+"",s===u?null:s===i&&u===r?a:(r=u,a=e(i=s,o)))}}function Yc(t,e){var n=yn(t),i=n==="transform"?wc:qa;return this.attrTween(t,typeof e=="function"?(n.local?Bc:zc)(n,i,zi(this,"attr."+t,e)):e==null?(n.local?Pc:Oc)(n):(n.local?Xc:Nc)(n,i,e))}function Uc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Vc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Hc(t,e){var n,i;function r(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&Vc(t,a)),n}return r._value=e,r}function Gc(t,e){var n,i;function r(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&Uc(t,a)),n}return r._value=e,r}function Wc(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=yn(t);return this.tween(n,(i.local?Hc:Gc)(i,e))}function qc(t,e){return function(){Xi(this,t).delay=+e.apply(this,arguments)}}function Zc(t,e){return e=+e,function(){Xi(this,t).delay=e}}function jc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?qc:Zc)(e,t)):Lt(this.node(),e).delay}function Kc(t,e){return function(){Nt(this,t).duration=+e.apply(this,arguments)}}function Jc(t,e){return e=+e,function(){Nt(this,t).duration=e}}function Qc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Kc:Jc)(e,t)):Lt(this.node(),e).duration}function tf(t,e){if(typeof e!="function")throw new Error;return function(){Nt(this,t).ease=e}}function ef(t){var e=this._id;return arguments.length?this.each(tf(e,t)):Lt(this.node(),e).ease}function nf(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Nt(this,t).ease=n}}function rf(t){if(typeof t!="function")throw new Error;return this.each(nf(this._id,t))}function af(t){typeof t!="function"&&(t=Ma(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],s=a.length,o=i[r]=[],u,l=0;l<s;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&o.push(u);return new Vt(i,this._parents,this._name,this._id)}function sf(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),s=new Array(i),o=0;o<a;++o)for(var u=e[o],l=n[o],c=u.length,f=s[o]=new Array(c),h,d=0;d<c;++d)(h=u[d]||l[d])&&(f[d]=h);for(;o<i;++o)s[o]=e[o];return new Vt(s,this._parents,this._name,this._id)}function of(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function uf(t,e,n){var i,r,a=of(e)?Xi:Nt;return function(){var s=a(this,t),o=s.on;o!==i&&(r=(i=o).copy()).on(e,n),s.on=r}}function lf(t,e){var n=this._id;return arguments.length<2?Lt(this.node(),n).on.on(t):this.each(uf(n,t,e))}function cf(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ff(){return this.on("end.remove",cf(this._id))}function hf(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Li(t));for(var i=this._groups,r=i.length,a=new Array(r),s=0;s<r;++s)for(var o=i[s],u=o.length,l=a[s]=new Array(u),c,f,h=0;h<u;++h)(c=o[h])&&(f=t.call(c,c.__data__,h,o))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,wn(l[h],e,n,h,l,Lt(c,n)));return new Vt(a,this._parents,e,n)}function df(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ca(t));for(var i=this._groups,r=i.length,a=[],s=[],o=0;o<r;++o)for(var u=i[o],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var h=t.call(c,c.__data__,f,u),d,g=Lt(c,n),v=0,p=h.length;v<p;++v)(d=h[v])&&wn(d,e,n,v,h,g);a.push(h),s.push(c)}return new Vt(a,s,e,n)}var gf=be.prototype.constructor;function vf(){return new gf(this._groups,this._parents)}function pf(t,e){var n,i,r;return function(){var a=pe(this,t),s=(this.style.removeProperty(t),pe(this,t));return a===s?null:a===n&&s===i?r:r=e(n=a,i=s)}}function Za(t){return function(){this.style.removeProperty(t)}}function xf(t,e,n){var i,r=n+"",a;return function(){var s=pe(this,t);return s===r?null:s===i?a:a=e(i=s,n)}}function _f(t,e,n){var i,r,a;return function(){var s=pe(this,t),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(t),pe(this,t))),s===u?null:s===i&&u===r?a:(r=u,a=e(i=s,o))}}function mf(t,e){var n,i,r,a="style."+e,s="end."+a,o;return function(){var u=Nt(this,t),l=u.on,c=u.value[a]==null?o||(o=Za(e)):void 0;(l!==n||r!==c)&&(i=(n=l).copy()).on(s,r=c),u.on=i}}function yf(t,e,n){var i=(t+="")=="transform"?Tc:qa;return e==null?this.styleTween(t,pf(t,i)).on("end.style."+t,Za(t)):typeof e=="function"?this.styleTween(t,_f(t,i,zi(this,"style."+t,e))).each(mf(this._id,t)):this.styleTween(t,xf(t,i,e),n).on("end.style."+t,null)}function bf(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Tf(t,e,n){var i,r;function a(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&bf(t,s,n)),i}return a._value=e,a}function wf(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Tf(t,e,n==null?"":n))}function $f(t){return function(){this.textContent=t}}function Af(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function kf(t){return this.tween("text",typeof t=="function"?Af(zi(this,"text",t)):$f(t==null?"":t+""))}function Cf(t){return function(e){this.textContent=t.call(this,e)}}function Mf(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Cf(r)),e}return i._value=t,i}function Sf(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Mf(t))}function Rf(){for(var t=this._name,e=this._id,n=Ka(),i=this._groups,r=i.length,a=0;a<r;++a)for(var s=i[a],o=s.length,u,l=0;l<o;++l)if(u=s[l]){var c=Lt(u,e);wn(u,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Vt(i,this._parents,t,n)}function Lf(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(a,s){var o={value:s},u={value:function(){--r===0&&a()}};n.each(function(){var l=Nt(this,i),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(u)),l.on=e}),r===0&&a()})}var Ef=0;function Vt(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function ja(t){return be().transition(t)}function Ka(){return++Ef}var Wt=be.prototype;Vt.prototype=ja.prototype={constructor:Vt,select:hf,selectAll:df,filter:af,merge:sf,selection:vf,transition:Rf,call:Wt.call,nodes:Wt.nodes,node:Wt.node,size:Wt.size,empty:Wt.empty,each:Wt.each,on:lf,attr:Yc,attrTween:Wc,style:yf,styleTween:wf,text:kf,textTween:Sf,remove:ff,tween:Ic,delay:jc,duration:Qc,ease:ef,easeVarying:rf,end:Lf,[Symbol.iterator]:Wt[Symbol.iterator]};const Df=t=>+t;function Ff(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var If={time:null,delay:0,duration:250,ease:Ff};function Of(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Pf(t){var e,n;t instanceof Vt?(e=t._id,t=t._name):(e=Ka(),(n=If).time=Ni(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var s=i[a],o=s.length,u,l=0;l<o;++l)(u=s[l])&&wn(u,t,e,l,s,n||Of(u,e));return new Vt(i,this._parents,t,e)}be.prototype.interrupt=Ec;be.prototype.transition=Pf;function Nf(t){var e=t.__brush;return e?e.dim.output(e.selection):null}var Tr={},Wn={},qn=34,Me=10,Zn=13;function Ja(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Xf(t,e){var n=Ja(t);return function(i,r){return e(n(i),r,t)}}function wr(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function Tt(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function zf(t){return t<0?"-"+Tt(-t,6):t>9999?"+"+Tt(t,6):Tt(t,4)}function Bf(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":zf(t.getUTCFullYear())+"-"+Tt(t.getUTCMonth()+1,2)+"-"+Tt(t.getUTCDate(),2)+(r?"T"+Tt(e,2)+":"+Tt(n,2)+":"+Tt(i,2)+"."+Tt(r,3)+"Z":i?"T"+Tt(e,2)+":"+Tt(n,2)+":"+Tt(i,2)+"Z":n||e?"T"+Tt(e,2)+":"+Tt(n,2)+"Z":"")}function Qa(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(f,h){var d,g,v=r(f,function(p,_){if(d)return d(p,_-1);g=p,d=h?Xf(p,h):Ja(p)});return v.columns=g||[],v}function r(f,h){var d=[],g=f.length,v=0,p=0,_,y=g<=0,b=!1;f.charCodeAt(g-1)===Me&&--g,f.charCodeAt(g-1)===Zn&&--g;function m(){if(y)return Wn;if(b)return b=!1,Tr;var T,$=v,S;if(f.charCodeAt($)===qn){for(;v++<g&&f.charCodeAt(v)!==qn||f.charCodeAt(++v)===qn;);return(T=v)>=g?y=!0:(S=f.charCodeAt(v++))===Me?b=!0:S===Zn&&(b=!0,f.charCodeAt(v)===Me&&++v),f.slice($+1,T-1).replace(/""/g,'"')}for(;v<g;){if((S=f.charCodeAt(T=v++))===Me)b=!0;else if(S===Zn)b=!0,f.charCodeAt(v)===Me&&++v;else if(S!==n)continue;return f.slice($,T)}return y=!0,f.slice($,g)}for(;(_=m())!==Wn;){for(var w=[];_!==Tr&&_!==Wn;)w.push(_),_=m();h&&(w=h(w,p++))==null||d.push(w)}return d}function a(f,h){return f.map(function(d){return h.map(function(g){return c(d[g])}).join(t)})}function s(f,h){return h==null&&(h=wr(f)),[h.map(c).join(t)].concat(a(f,h)).join(`
`)}function o(f,h){return h==null&&(h=wr(f)),a(f,h).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(t)}function c(f){return f==null?"":f instanceof Date?Bf(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:r,format:s,formatBody:o,formatRows:u,formatRow:l,formatValue:c}}var ts=Qa(","),Yf=ts.parse,Uf=ts.parseRows,es=Qa("	"),Vf=es.parse,Hf=es.parseRows;function Ye(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const $r=Symbol("implicit");function ns(){var t=new Map,e=[],n=[],i=$r;function r(a){var s=a+"",o=t.get(s);if(!o){if(i!==$r)return i;t.set(s,o=e.push(a))}return n[(o-1)%n.length]}return r.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Map;for(const s of a){const o=s+"";t.has(o)||t.set(o,e.push(s))}return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return ns(e,n).unknown(i)},Ye.apply(r,arguments),r}function Gf(t){return function(){return t}}function Wf(t){return+t}var Ar=[0,1];function oe(t){return t}function pi(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Gf(isNaN(e)?NaN:.5)}function qf(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function Zf(t,e,n){var i=t[0],r=t[1],a=e[0],s=e[1];return r<i?(i=pi(r,i),a=n(s,a)):(i=pi(i,r),a=n(a,s)),function(o){return a(i(o))}}function jf(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=pi(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var u=oo(t,o,1,i)-1;return a[u](r[u](o))}}function $n(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Bi(){var t=Ar,e=Ar,n=bn,i,r,a,s=oe,o,u,l;function c(){var h=Math.min(t.length,e.length);return s!==oe&&(s=qf(t[0],t[h-1])),o=h>2?jf:Zf,u=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(u||(u=o(t.map(i),e,n)))(i(s(h)))}return f.invert=function(h){return s(r((l||(l=o(e,t.map(i),Ct)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Wf),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=mc,c()},f.clamp=function(h){return arguments.length?(s=h?!0:oe,c()):s!==oe},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return i=h,r=d,c()}}function is(){return Bi()(oe,oe)}function Kf(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function hn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function _e(t){return t=hn(Math.abs(t)),t?t[1]:NaN}function Jf(t,e){return function(n,i){for(var r=n.length,a=[],s=0,o=t[0],u=0;r>0&&o>0&&(u+o+1>i&&(o=Math.max(1,i-u)),a.push(n.substring(r-=o,r+o)),!((u+=o+1)>i));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Qf(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var th=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dn(t){if(!(e=th.exec(t)))throw new Error("invalid format: "+t);var e;return new Yi({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}dn.prototype=Yi.prototype;function Yi(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Yi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eh(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var rs;function nh(t,e){var n=hn(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(rs=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+hn(t,Math.max(0,e+a-1))[0]}function kr(t,e){var n=hn(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}var Cr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Kf,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>kr(t*100,e),r:kr,s:nh,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Mr(t){return t}var Sr=Array.prototype.map,Rr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function ih(t){var e=t.grouping===void 0||t.thousands===void 0?Mr:Jf(Sr.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Mr:Qf(Sr.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=dn(f);var h=f.fill,d=f.align,g=f.sign,v=f.symbol,p=f.zero,_=f.width,y=f.comma,b=f.precision,m=f.trim,w=f.type;w==="n"?(y=!0,w="g"):Cr[w]||(b===void 0&&(b=12),m=!0,w="g"),(p||h==="0"&&d==="=")&&(p=!0,h="0",d="=");var T=v==="$"?n:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",$=v==="$"?i:/[%p]/.test(w)?s:"",S=Cr[w],E=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function F(C){var A=T,R=$,D,X,G;if(w==="c")R=S(C)+R,C="";else{C=+C;var W=C<0||1/C<0;if(C=isNaN(C)?u:S(Math.abs(C),b),m&&(C=eh(C)),W&&+C==0&&g!=="+"&&(W=!1),A=(W?g==="("?g:o:g==="-"||g==="("?"":g)+A,R=(w==="s"?Rr[8+rs/3]:"")+R+(W&&g==="("?")":""),E){for(D=-1,X=C.length;++D<X;)if(G=C.charCodeAt(D),48>G||G>57){R=(G===46?r+C.slice(D+1):C.slice(D))+R,C=C.slice(0,D);break}}}y&&!p&&(C=e(C,1/0));var K=A.length+C.length+R.length,O=K<_?new Array(_-K+1).join(h):"";switch(y&&p&&(C=e(O+C,O.length?_-R.length:1/0),O=""),d){case"<":C=A+C+R+O;break;case"=":C=A+O+C+R;break;case"^":C=O.slice(0,K=O.length>>1)+A+C+R+O.slice(K);break;default:C=O+A+C+R;break}return a(C)}return F.toString=function(){return f+""},F}function c(f,h){var d=l((f=dn(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(_e(h)/3)))*3,v=Math.pow(10,-g),p=Rr[8+g/3];return function(_){return d(v*_)+p}}return{format:l,formatPrefix:c}}var Ge,Ui,as;rh({thousands:",",grouping:[3],currency:["$",""]});function rh(t){return Ge=ih(t),Ui=Ge.format,as=Ge.formatPrefix,Ge}function ah(t){return Math.max(0,-_e(Math.abs(t)))}function sh(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_e(e)/3)))*3-_e(Math.abs(t)))}function oh(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_e(e)-_e(t))+1}function uh(t,e,n,i){var r=oi(t,e,n),a;switch(i=dn(i==null?",f":i),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(a=sh(r,s))&&(i.precision=a),as(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=oh(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=ah(r))&&(i.precision=a-(i.type==="%")*2);break}}return Ui(i)}function ss(t){var e=t.domain;return t.ticks=function(n){var i=e();return si(i[0],i[i.length-1],n==null?10:n)},t.tickFormat=function(n,i){var r=e();return uh(r[0],r[r.length-1],n==null?10:n,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,a=i.length-1,s=i[r],o=i[a],u,l,c=10;for(o<s&&(l=s,s=o,o=l,l=r,r=a,a=l);c-- >0;){if(l=xa(s,o,n),l===u)return i[r]=s,i[a]=o,e(i);if(l>0)s=Math.floor(s/l)*l,o=Math.ceil(o/l)*l;else if(l<0)s=Math.ceil(s*l)/l,o=Math.floor(o*l)/l;else break;u=l}return t},t}function os(){var t=is();return t.copy=function(){return $n(t,os())},Ye.apply(t,arguments),ss(t)}function us(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],a=t[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),t[n]=e.floor(r),t[i]=e.ceil(a),t}function Lr(t){return Math.log(t)}function Er(t){return Math.exp(t)}function lh(t){return-Math.log(-t)}function ch(t){return-Math.exp(-t)}function fh(t){return isFinite(t)?+("1e"+t):t<0?0:t}function hh(t){return t===10?fh:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function dh(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Dr(t){return function(e){return-t(-e)}}function gh(t){var e=t(Lr,Er),n=e.domain,i=10,r,a;function s(){return r=dh(i),a=hh(i),n()[0]<0?(r=Dr(r),a=Dr(a),t(lh,ch)):t(Lr,Er),e}return e.base=function(o){return arguments.length?(i=+o,s()):i},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=function(o){var u=n(),l=u[0],c=u[u.length-1],f;(f=c<l)&&(h=l,l=c,c=h);var h=r(l),d=r(c),g,v,p,_=o==null?10:+o,y=[];if(!(i%1)&&d-h<_){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(v=1,g=a(h);v<i;++v)if(p=g*v,!(p<l)){if(p>c)break;y.push(p)}}else for(;h<=d;++h)for(v=i-1,g=a(h);v>=1;--v)if(p=g*v,!(p<l)){if(p>c)break;y.push(p)}y.length*2<_&&(y=si(l,c,_))}else y=si(h,d,Math.min(d-h,_)).map(a);return f?y.reverse():y},e.tickFormat=function(o,u){if(u==null&&(u=i===10?".0e":","),typeof u!="function"&&(u=Ui(u)),o===1/0)return u;o==null&&(o=10);var l=Math.max(1,i*o/e.ticks().length);return function(c){var f=c/a(Math.round(r(c)));return f*i<i-.5&&(f*=i),f<=l?u(c):""}},e.nice=function(){return n(us(n(),{floor:function(o){return a(Math.floor(r(o)))},ceil:function(o){return a(Math.ceil(r(o)))}}))},e}function ls(){var t=gh(Bi()).domain([1,10]);return t.copy=function(){return $n(t,ls()).base(t.base())},Ye.apply(t,arguments),t}function Fr(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Ir(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function vh(t){var e=1,n=t(Fr(e),Ir(e));return n.constant=function(i){return arguments.length?t(Fr(e=+i),Ir(e)):e},ss(n)}function cs(){var t=vh(Bi());return t.copy=function(){return $n(t,cs()).constant(t.constant())},Ye.apply(t,arguments)}function ph(t){return new Date(t)}function xh(t){return t instanceof Date?+t:+new Date(+t)}function fs(t,e,n,i,r,a,s,o,u,l){var c=is(),f=c.invert,h=c.domain,d=l(".%L"),g=l(":%S"),v=l("%I:%M"),p=l("%I %p"),_=l("%a %d"),y=l("%b %d"),b=l("%B"),m=l("%Y");function w(T){return(u(T)<T?d:o(T)<T?g:s(T)<T?v:a(T)<T?p:i(T)<T?r(T)<T?_:y:n(T)<T?b:m)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?h(Array.from(T,xh)):h().map(ph)},c.ticks=function(T){var $=h();return t($[0],$[$.length-1],T==null?10:T)},c.tickFormat=function(T,$){return $==null?w:l($)},c.nice=function(T){var $=h();return(!T||typeof T.range!="function")&&(T=e($[0],$[$.length-1],T==null?10:T)),T?h(us($,T)):c},c.copy=function(){return $n(c,fs(t,e,n,i,r,a,s,o,u,l))},c}function _h(){return Ye.apply(fs(uo,lo,Kt,fa,mn,_n,ua,sa,Le,Ri).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const xi=Math.PI,_i=2*xi,Zt=1e-6,mh=_i-Zt;function mi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function An(){return new mi}mi.prototype=An.prototype={constructor:mi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var a=this._x1,s=this._y1,o=n-t,u=i-e,l=a-t,c=s-e,f=l*l+c*c;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>Zt)if(!(Math.abs(c*o-u*l)>Zt)||!r)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-a,d=i-s,g=o*o+u*u,v=h*h+d*d,p=Math.sqrt(g),_=Math.sqrt(f),y=r*Math.tan((xi-Math.acos((g+f-v)/(2*p*_)))/2),b=y/_,m=y/p;Math.abs(b-1)>Zt&&(this._+="L"+(t+b*l)+","+(e+b*c)),this._+="A"+r+","+r+",0,0,"+ +(c*h>l*d)+","+(this._x1=t+m*o)+","+(this._y1=e+m*u)}},arc:function(t,e,n,i,r,a){t=+t,e=+e,n=+n,a=!!a;var s=n*Math.cos(i),o=n*Math.sin(i),u=t+s,l=e+o,c=1^a,f=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+l:(Math.abs(this._x1-u)>Zt||Math.abs(this._y1-l)>Zt)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%_i+_i),f>mh?this._+="A"+n+","+n+",0,1,"+c+","+(t-s)+","+(e-o)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>Zt&&(this._+="A"+n+","+n+",0,"+ +(f>=xi)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function q(t){return function(){return t}}var Or=Math.abs,_t=Math.atan2,qt=Math.cos,yh=Math.max,jn=Math.min,Et=Math.sin,ue=Math.sqrt,mt=1e-12,Xe=Math.PI,gn=Xe/2,Ke=2*Xe;function bh(t){return t>1?0:t<-1?Xe:Math.acos(t)}function Pr(t){return t>=1?gn:t<=-1?-gn:Math.asin(t)}function Th(t){return t.innerRadius}function wh(t){return t.outerRadius}function $h(t){return t.startAngle}function Ah(t){return t.endAngle}function kh(t){return t&&t.padAngle}function Ch(t,e,n,i,r,a,s,o){var u=n-t,l=i-e,c=s-r,f=o-a,h=f*u-c*l;if(!(h*h<mt))return h=(c*(e-a)-f*(t-r))/h,[t+h*u,e+h*l]}function We(t,e,n,i,r,a,s){var o=t-n,u=e-i,l=(s?a:-a)/ue(o*o+u*u),c=l*u,f=-l*o,h=t+c,d=e+f,g=n+c,v=i+f,p=(h+g)/2,_=(d+v)/2,y=g-h,b=v-d,m=y*y+b*b,w=r-a,T=h*v-g*d,$=(b<0?-1:1)*ue(yh(0,w*w*m-T*T)),S=(T*b-y*$)/m,E=(-T*y-b*$)/m,F=(T*b+y*$)/m,C=(-T*y+b*$)/m,A=S-p,R=E-_,D=F-p,X=C-_;return A*A+R*R>D*D+X*X&&(S=F,E=C),{cx:S,cy:E,x01:-c,y01:-f,x11:S*(r/w-1),y11:E*(r/w-1)}}function Nr(){var t=Th,e=wh,n=q(0),i=null,r=$h,a=Ah,s=kh,o=null;function u(){var l,c,f=+t.apply(this,arguments),h=+e.apply(this,arguments),d=r.apply(this,arguments)-gn,g=a.apply(this,arguments)-gn,v=Or(g-d),p=g>d;if(o||(o=l=An()),h<f&&(c=h,h=f,f=c),!(h>mt))o.moveTo(0,0);else if(v>Ke-mt)o.moveTo(h*qt(d),h*Et(d)),o.arc(0,0,h,d,g,!p),f>mt&&(o.moveTo(f*qt(g),f*Et(g)),o.arc(0,0,f,g,d,p));else{var _=d,y=g,b=d,m=g,w=v,T=v,$=s.apply(this,arguments)/2,S=$>mt&&(i?+i.apply(this,arguments):ue(f*f+h*h)),E=jn(Or(h-f)/2,+n.apply(this,arguments)),F=E,C=E,A,R;if(S>mt){var D=Pr(S/f*Et($)),X=Pr(S/h*Et($));(w-=D*2)>mt?(D*=p?1:-1,b+=D,m-=D):(w=0,b=m=(d+g)/2),(T-=X*2)>mt?(X*=p?1:-1,_+=X,y-=X):(T=0,_=y=(d+g)/2)}var G=h*qt(_),W=h*Et(_),K=f*qt(m),O=f*Et(m);if(E>mt){var rt=h*qt(y),U=h*Et(y),Q=f*qt(b),dt=f*Et(b),J;if(v<Xe&&(J=Ch(G,W,Q,dt,rt,U,K,O))){var M=G-J[0],I=W-J[1],tt=rt-J[0],ct=U-J[1],L=1/Et(bh((M*tt+I*ct)/(ue(M*M+I*I)*ue(tt*tt+ct*ct)))/2),N=ue(J[0]*J[0]+J[1]*J[1]);F=jn(E,(f-N)/(L-1)),C=jn(E,(h-N)/(L+1))}}T>mt?C>mt?(A=We(Q,dt,G,W,h,C,p),R=We(rt,U,K,O,h,C,p),o.moveTo(A.cx+A.x01,A.cy+A.y01),C<E?o.arc(A.cx,A.cy,C,_t(A.y01,A.x01),_t(R.y01,R.x01),!p):(o.arc(A.cx,A.cy,C,_t(A.y01,A.x01),_t(A.y11,A.x11),!p),o.arc(0,0,h,_t(A.cy+A.y11,A.cx+A.x11),_t(R.cy+R.y11,R.cx+R.x11),!p),o.arc(R.cx,R.cy,C,_t(R.y11,R.x11),_t(R.y01,R.x01),!p))):(o.moveTo(G,W),o.arc(0,0,h,_,y,!p)):o.moveTo(G,W),!(f>mt)||!(w>mt)?o.lineTo(K,O):F>mt?(A=We(K,O,rt,U,f,-F,p),R=We(G,W,Q,dt,f,-F,p),o.lineTo(A.cx+A.x01,A.cy+A.y01),F<E?o.arc(A.cx,A.cy,F,_t(A.y01,A.x01),_t(R.y01,R.x01),!p):(o.arc(A.cx,A.cy,F,_t(A.y01,A.x01),_t(A.y11,A.x11),!p),o.arc(0,0,f,_t(A.cy+A.y11,A.cx+A.x11),_t(R.cy+R.y11,R.cx+R.x11),p),o.arc(R.cx,R.cy,F,_t(R.y11,R.x11),_t(R.y01,R.x01),!p))):o.arc(0,0,f,m,b,p)}if(o.closePath(),l)return o=null,l+""||null}return u.centroid=function(){var l=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,c=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Xe/2;return[qt(c)*l,Et(c)*l]},u.innerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:q(+l),u):t},u.outerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:q(+l),u):e},u.cornerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:q(+l),u):n},u.padRadius=function(l){return arguments.length?(i=l==null?null:typeof l=="function"?l:q(+l),u):i},u.startAngle=function(l){return arguments.length?(r=typeof l=="function"?l:q(+l),u):r},u.endAngle=function(l){return arguments.length?(a=typeof l=="function"?l:q(+l),u):a},u.padAngle=function(l){return arguments.length?(s=typeof l=="function"?l:q(+l),u):s},u.context=function(l){return arguments.length?(o=l==null?null:l,u):o},u}function Vi(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function hs(t){this._context=t}hs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Hi(t){return new hs(t)}function ds(t){return t[0]}function gs(t){return t[1]}function vs(t,e){var n=q(!0),i=null,r=Hi,a=null;t=typeof t=="function"?t:t===void 0?ds:q(t),e=typeof e=="function"?e:e===void 0?gs:q(e);function s(o){var u,l=(o=Vi(o)).length,c,f=!1,h;for(i==null&&(a=r(h=An())),u=0;u<=l;++u)!(u<l&&n(c=o[u],u,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(c,u,o),+e(c,u,o));if(h)return a=null,h+""||null}return s.x=function(o){return arguments.length?(t=typeof o=="function"?o:q(+o),s):t},s.y=function(o){return arguments.length?(e=typeof o=="function"?o:q(+o),s):e},s.defined=function(o){return arguments.length?(n=typeof o=="function"?o:q(!!o),s):n},s.curve=function(o){return arguments.length?(r=o,i!=null&&(a=r(i)),s):r},s.context=function(o){return arguments.length?(o==null?i=a=null:a=r(i=o),s):i},s}function Mh(t,e,n){var i=null,r=q(!0),a=null,s=Hi,o=null;t=typeof t=="function"?t:t===void 0?ds:q(+t),e=typeof e=="function"?e:q(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?gs:q(+n);function u(c){var f,h,d,g=(c=Vi(c)).length,v,p=!1,_,y=new Array(g),b=new Array(g);for(a==null&&(o=s(_=An())),f=0;f<=g;++f){if(!(f<g&&r(v=c[f],f,c))===p)if(p=!p)h=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),d=f-1;d>=h;--d)o.point(y[d],b[d]);o.lineEnd(),o.areaEnd()}p&&(y[f]=+t(v,f,c),b[f]=+e(v,f,c),o.point(i?+i(v,f,c):y[f],n?+n(v,f,c):b[f]))}if(_)return o=null,_+""||null}function l(){return vs().defined(r).curve(s).context(a)}return u.x=function(c){return arguments.length?(t=typeof c=="function"?c:q(+c),i=null,u):t},u.x0=function(c){return arguments.length?(t=typeof c=="function"?c:q(+c),u):t},u.x1=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:q(+c),u):i},u.y=function(c){return arguments.length?(e=typeof c=="function"?c:q(+c),n=null,u):e},u.y0=function(c){return arguments.length?(e=typeof c=="function"?c:q(+c),u):e},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:q(+c),u):n},u.lineX0=u.lineY0=function(){return l().x(t).y(e)},u.lineY1=function(){return l().x(t).y(n)},u.lineX1=function(){return l().x(i).y(e)},u.defined=function(c){return arguments.length?(r=typeof c=="function"?c:q(!!c),u):r},u.curve=function(c){return arguments.length?(s=c,a!=null&&(o=s(a)),u):s},u.context=function(c){return arguments.length?(c==null?a=o=null:o=s(a=c),u):a},u}function Sh(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Rh(t){return t}function Lh(){var t=Rh,e=Sh,n=null,i=q(0),r=q(Ke),a=q(0);function s(o){var u,l=(o=Vi(o)).length,c,f,h=0,d=new Array(l),g=new Array(l),v=+i.apply(this,arguments),p=Math.min(Ke,Math.max(-Ke,r.apply(this,arguments)-v)),_,y=Math.min(Math.abs(p)/l,a.apply(this,arguments)),b=y*(p<0?-1:1),m;for(u=0;u<l;++u)(m=g[d[u]=u]=+t(o[u],u,o))>0&&(h+=m);for(e!=null?d.sort(function(w,T){return e(g[w],g[T])}):n!=null&&d.sort(function(w,T){return n(o[w],o[T])}),u=0,f=h?(p-l*b)/h:0;u<l;++u,v=_)c=d[u],m=g[c],_=v+(m>0?m*f:0)+b,g[c]={data:o[c],index:u,value:m,startAngle:v,endAngle:_,padAngle:y};return g}return s.value=function(o){return arguments.length?(t=typeof o=="function"?o:q(+o),s):t},s.sortValues=function(o){return arguments.length?(e=o,n=null,s):e},s.sort=function(o){return arguments.length?(n=o,e=null,s):n},s.startAngle=function(o){return arguments.length?(i=typeof o=="function"?o:q(+o),s):i},s.endAngle=function(o){return arguments.length?(r=typeof o=="function"?o:q(+o),s):r},s.padAngle=function(o){return arguments.length?(a=typeof o=="function"?o:q(+o),s):a},s}function Gt(){}function vn(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function kn(t){this._context=t}kn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vn(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Eh(t){return new kn(t)}function ps(t){this._context=t}ps.prototype={areaStart:Gt,areaEnd:Gt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:vn(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Dh(t){return new ps(t)}function xs(t){this._context=t}xs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:vn(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Fh(t){return new xs(t)}function _s(t,e){this._basis=new kn(t),this._beta=e}_s.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],a=t[n]-i,s=e[n]-r,o=-1,u;++o<=n;)u=o/n,this._basis.point(this._beta*t[o]+(1-this._beta)*(i+u*a),this._beta*e[o]+(1-this._beta)*(r+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Ih=function t(e){function n(i){return e===1?new kn(i):new _s(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function pn(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Gi(t,e){this._context=t,this._k=(1-e)/6}Gi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:pn(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:pn(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Oh=function t(e){function n(i){return new Gi(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Wi(t,e){this._context=t,this._k=(1-e)/6}Wi.prototype={areaStart:Gt,areaEnd:Gt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:pn(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ph=function t(e){function n(i){return new Wi(i,e)}return n.tension=function(i){return t(+i)},n}(0);function qi(t,e){this._context=t,this._k=(1-e)/6}qi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pn(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Nh=function t(e){function n(i){return new qi(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Zi(t,e,n){var i=t._x1,r=t._y1,a=t._x2,s=t._y2;if(t._l01_a>mt){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,r=(r*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>mt){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-e*t._l12_2a)/c,s=(s*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,a,s,t._x2,t._y2)}function ms(t,e){this._context=t,this._alpha=e}ms.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Zi(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Xh=function t(e){function n(i){return e?new ms(i,e):new Gi(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function ys(t,e){this._context=t,this._alpha=e}ys.prototype={areaStart:Gt,areaEnd:Gt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Zi(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var zh=function t(e){function n(i){return e?new ys(i,e):new Wi(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function bs(t,e){this._context=t,this._alpha=e}bs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Zi(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bh=function t(e){function n(i){return e?new bs(i,e):new qi(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Ts(t){this._context=t}Ts.prototype={areaStart:Gt,areaEnd:Gt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Yh(t){return new Ts(t)}function Xr(t){return t<0?-1:1}function zr(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),s=(n-t._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(Xr(a)+Xr(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function Br(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Kn(t,e,n){var i=t._x0,r=t._y0,a=t._x1,s=t._y1,o=(a-i)/3;t._context.bezierCurveTo(i+o,r+o*e,a-o,s-o*n,a,s)}function xn(t){this._context=t}xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Kn(this,this._t0,Br(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Kn(this,Br(this,n=zr(this,t,e)),n);break;default:Kn(this,this._t0,n=zr(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function ws(t){this._context=new $s(t)}(ws.prototype=Object.create(xn.prototype)).point=function(t,e){xn.prototype.point.call(this,e,t)};function $s(t){this._context=t}$s.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}};function Uh(t){return new xn(t)}function Vh(t){return new ws(t)}function As(t){this._context=t}As.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=Yr(t),r=Yr(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Yr(t){var e,n=t.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/a[e-1],a[e]-=i,s[e]-=i*s[e-1];for(r[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)r[e]=(s[e]-r[e+1])/a[e];for(a[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function Hh(t){return new As(t)}function Cn(t,e){this._context=t,this._t=e}Cn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Gh(t){return new Cn(t,.5)}function Wh(t){return new Cn(t,0)}function qh(t){return new Cn(t,1)}var Jn=Array.prototype.slice;function Zh(t){return t}var Je=1,Qe=2,yi=3,Fe=4,Ur=1e-6;function jh(t){return"translate("+t+",0)"}function Kh(t){return"translate(0,"+t+")"}function Jh(t){return e=>+t(e)}function Qh(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function td(){return!this.__axis}function Mn(t,e){var n=[],i=null,r=null,a=6,s=6,o=3,u=typeof window!="undefined"&&window.devicePixelRatio>1?0:.5,l=t===Je||t===Fe?-1:1,c=t===Fe||t===Qe?"x":"y",f=t===Je||t===yi?jh:Kh;function h(d){var g=i==null?e.ticks?e.ticks.apply(e,n):e.domain():i,v=r==null?e.tickFormat?e.tickFormat.apply(e,n):Zh:r,p=Math.max(a,0)+o,_=e.range(),y=+_[0]+u,b=+_[_.length-1]+u,m=(e.bandwidth?Qh:Jh)(e.copy(),u),w=d.selection?d.selection():d,T=w.selectAll(".domain").data([null]),$=w.selectAll(".tick").data(g,e).order(),S=$.exit(),E=$.enter().append("g").attr("class","tick"),F=$.select("line"),C=$.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),$=$.merge(E),F=F.merge(E.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),C=C.merge(E.append("text").attr("fill","currentColor").attr(c,l*p).attr("dy",t===Je?"0em":t===yi?"0.71em":"0.32em")),d!==w&&(T=T.transition(d),$=$.transition(d),F=F.transition(d),C=C.transition(d),S=S.transition(d).attr("opacity",Ur).attr("transform",function(A){return isFinite(A=m(A))?f(A+u):this.getAttribute("transform")}),E.attr("opacity",Ur).attr("transform",function(A){var R=this.parentNode.__axis;return f((R&&isFinite(R=R(A))?R:m(A))+u)})),S.remove(),T.attr("d",t===Fe||t===Qe?s?"M"+l*s+","+y+"H"+u+"V"+b+"H"+l*s:"M"+u+","+y+"V"+b:s?"M"+y+","+l*s+"V"+u+"H"+b+"V"+l*s:"M"+y+","+u+"H"+b),$.attr("opacity",1).attr("transform",function(A){return f(m(A)+u)}),F.attr(c+"2",l*a),C.attr(c,l*p).text(v),w.filter(td).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Qe?"start":t===Fe?"end":"middle"),w.each(function(){this.__axis=m})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Jn.call(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Jn.call(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(i=d==null?null:Jn.call(d),h):i&&i.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(a=s=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(s=+d,h):s},h.tickPadding=function(d){return arguments.length?(o=+d,h):o},h.offset=function(d){return arguments.length?(u=+d,h):u},h}function ed(t){return Mn(Je,t)}function nd(t){return Mn(Qe,t)}function Vr(t){return Mn(yi,t)}function Hr(t){return Mn(Fe,t)}function le(t,e,n){this.k=t,this.x=e,this.y=n}le.prototype={constructor:le,scale:function(t){return t===1?this:new le(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new le(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new le(1,0,0);le.prototype;/*!
* Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 * 
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 * 
 * @version 3.0.3
*/var x={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",chartCircles:"bb-chart-circles",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",colorScale:"bb-colorscale",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",main:"bb-main",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions",subchart:"bb-subchart",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",valueDown:"bb-value-down",valueUp:"bb-value-up",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridFocus:"bb-ygrid-focus",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_",TextOverlapping:"text-overlapping"},id=function(){function t(){var e={chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null};return e}return t}(),rd=function(){function t(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[]},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}return t}(),Gr={element:id,state:rd},ad=function(){function t(){var e=this;Object.keys(Gr).forEach(function(n){e[n]=new Gr[n]})}return t.prototype.getStore=function(e){return this[e]},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var St=function(){return St=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++)for(var a in n=arguments[i],n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},St.apply(this,arguments)};function bt(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t}var sd={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:350,plugins:[],render:{},regions:[]},od={data_x:void 0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_color:void 0,data_colors:{},data_labels:{},data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},ud={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},ld={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},cd={legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:void 0,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1},fd={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},hd={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null},ft=function(){var t=typeof globalThis=="object"&&globalThis!==null&&globalThis.Object===Object&&globalThis||typeof global=="object"&&global!==null&&global.Object===Object&&global||typeof self=="object"&&self!==null&&self.Object===Object&&self;return t||Function("return this")()}(),xt=ft&&ft.document,B=function(t){return t||t===0},H=function(t){return typeof t=="function"},ht=function(t){return typeof t=="string"},j=function(t){return typeof t=="number"},ot=function(t){return typeof t=="undefined"},nt=function(t){return typeof t!="undefined"},ks=function(t){return typeof t=="boolean"},Qn=function(t){return Math.ceil(t/10)*10},Se=function(t){return Math.ceil(t)+.5},tn=function(t){return t[1]-t[0]},It=function(t){return typeof t=="object"},Sn=function(t){return ot(t)||t===null||ht(t)&&t.length===0||It(t)&&!(t instanceof Date)&&Object.keys(t).length===0||j(t)&&isNaN(t)},ut=function(t){return!Sn(t)},et=function(t){return Array.isArray(t)},it=function(t){return t&&!t.nodeType&&It(t)&&!et(t)};function Yt(t,e,n){return nt(t[e])?t[e]:n}function dd(t,e){var n=!1;return Object.keys(t).forEach(function(i){return t[i]===e&&(n=!0)}),n}function st(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=H(t);return i&&t.call.apply(t,e),i}function ji(t,e){var n=0;t.each(function(){return++n}).on("end",function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];!--n&&e.apply.apply(e,bt([this],i))})}function Re(t){return ht(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function ze(t,e,n,i){if(n===void 0&&(n=[-1,1]),i===void 0&&(i=!1),!(!t||!ht(e)))if(e.indexOf(`
`)===-1)t.text(e);else{var r=[t.text(),e].map(function(o){return o.replace(/[\s\n]/g,"")});if(r[0]!==r[1]){var a=e.split(`
`),s=i?a.length-1:1;t.html(""),a.forEach(function(o,u){t.append("tspan").attr("x",0).attr("dy",(u===0?n[0]*s:n[1])+"em").text(o)})}}}function Cs(t){var e=t.getBBox(),n=e.x,i=e.y,r=e.width,a=e.height;return[{x:n,y:i+a},{x:n,y:i},{x:n+r,y:i},{x:n+r,y:i+a}]}function gd(t){var e=t.getBoundingClientRect(),n=e.width,i=e.height,r=Cs(t),a=r[0].x,s=Math.min(r[0].y,r[1].y);return{x:a,y:s,width:n,height:i}}function Ut(t,e){var n=t&&(t.touches||t.sourceEvent&&t.sourceEvent.touches),i=t?li(n?n[0]:t,e):[0,0];return i}function Ms(t){var e=t.event,n=t.$el,i=n.subchart.main||n.main,r;return e&&e.type==="brush"?r=e.selection:i&&(r=i.select("."+x.brush).node())&&(r=Nf(r)),r}function Ie(t){var e=!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width");return e?t.rect=t.getBoundingClientRect():t.rect}function Te(t){t===void 0&&(t=!0);var e=Math.random();return t?String(e):e}function bi(t,e,n,i,r){if(n>i)return-1;var a=Math.floor((n+i)/2),s=t[a],o=s.x,u=s.w,l=u===void 0?0:u;return r&&(o=t[a].y,l=t[a].h),e>=o&&e<=o+l?a:e<o?bi(t,e,n,a-1,r):bi(t,e,a+1,i,r)}function vd(t){var e=Ms(t);return e?e[0]===e[1]:!0}function pd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(i){if(it(i)&&i.constructor){var r=new i.constructor;for(var a in i)r[a]=n(i[a]);return r}return i};return t.map(function(i){return n(i)}).reduce(function(i,r){return St(St({},i),r)})}function Rt(t,e){t===void 0&&(t={}),et(e)&&e.forEach(function(i){return Rt(t,i)});for(var n in e)/^\d+$/.test(n)||n in t||(t[n]=e[n]);return t}var Ot=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},we=function(t){return[].slice.call(t)};function xd(t){var e=[];return t.forEach(function(n){try{n.cssRules&&n.cssRules.length&&(e=e.concat(we(n.cssRules)))}catch(i){console.error("Error while reading rules from "+n.href+": "+i.toString())}}),e}var Wr=function(t){var e=t?t.transform:null,n=e&&e.baseVal;return n&&n.numberOfItems?n.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}};function Ti(t){var e=t[0]instanceof Date,n=(e?t.map(Number):t).filter(function(i,r,a){return a.indexOf(i)===r});return e?n.map(function(i){return new Date(i)}):n}function ti(t){return t&&t.length?t.reduce(function(e,n){return e.concat(n)}):[]}function me(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!e.length||e.length===1&&!e[0])return t;var i=e.shift();return it(t)&&it(i)&&Object.keys(i).forEach(function(r){var a=i[r];it(a)?(!t[r]&&(t[r]={}),t[r]=me(t[r],a)):t[r]=et(a)?a.concat():a}),me.apply(void 0,bt([t],e))}function ye(t,e){e===void 0&&(e=!0);var n;return t[0]instanceof Date?n=e?function(i,r){return i-r}:function(i,r){return r-i}:e&&!t.every(isNaN)?n=function(i,r){return i-r}:e||(n=function(i,r){return i>r&&-1||i<r&&1||i===r&&0}),t.concat().sort(n)}function Mt(t,e){var n=e.filter(function(i){return ut(i)});return n.length?j(n[0])?n=Math[t].apply(Math,n):n[0]instanceof Date&&(n=ye(n,t==="min")[0]):n=void 0,n}var ei=function(t,e,n){n===void 0&&(n=1);for(var i=[],r=Math.max(0,Math.ceil((e-t)/n))|0,a=t;a<r;a++)i.push(t+a*n);return i},_d={mouse:function(){var t=function(){return{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}};try{return new MouseEvent("t"),function(e,n,i){i===void 0&&(i=t()),e.dispatchEvent(new MouseEvent(n,i))}}catch{return function(n,i,r){r===void 0&&(r=t());var a=xt.createEvent("MouseEvent");a.initMouseEvent(i,r.bubbles,r.cancelable,ft,0,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.dispatchEvent(a)}}}(),touch:function(t,e,n){var i=new Touch(me({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[i],targetTouches:[],changedTouches:[i]}))}};function wi(t,e){var n=t;for(var i in e)n=n.replace(new RegExp("{="+i+"}","g"),e[i]);return n}function Pt(t){var e;if(t instanceof Date)e=t;else if(ht(t)){var n=this,i=n.config,r=n.format;e=r.dataTime(i.data_xFormat)(t)}else j(t)&&!isNaN(t)&&(e=new Date(+t));return(!e||isNaN(+e))&&console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),e}function Ss(){return!xt.hidden}function md(t,e){var n=!1;if(/Mobi/.test(ft.navigator.userAgent)&&e){var i=ft.navigator&&"maxTouchPoints"in ft.navigator&&ft.navigator.maxTouchPoints>0,r="ontouchmove"in ft||ft.DocumentTouch&&xt instanceof ft.DocumentTouch;n=i||r}var a=t&&!n?"onmouseover"in ft:!1;return a&&"mouse"||n&&"touch"||null}var Rn=function(){function t(){return pd(sd,od,ud,ld,cd,fd,hd,t.data)}return t.setOptions=function(e){this.data=e.reduce(function(n,i){return St(St({},n),i)},this.data)},t.data={},t}(),At={bubbleBaseLength:"$baseLength",colorPattern:"__colorPattern__",dataMinMax:"$dataMinMax",dataTotalSum:"$dataTotalSum",dataTotalPerIndex:"$totalPerIndex",legendItemTextBox:"legendItemTextBox",radarPoints:"$radarPoints",setOverOut:"setOverOut",callOverOutForTouch:"callOverOutForTouch",textRect:"textRect"},yd=function(){function t(){this.cache={}}return t.prototype.add=function(e,n,i){return i===void 0&&(i=!1),this.cache[e]=i?this.cloneTarget(n):n,this.cache[e]},t.prototype.remove=function(e){var n=this;we(e).forEach(function(i){return delete n.cache[i]})},t.prototype.get=function(e,n){if(n===void 0&&(n=!1),n){for(var i=[],r=0,a=void 0;a=e[r];r++)a in this.cache&&i.push(this.cloneTarget(this.cache[a]));return i}else{var s=this.cache[e];return B(s)?s:null}},t.prototype.reset=function(e){var n=this;for(var i in n.cache)(e||/^\$/.test(i))&&(n.cache[i]=null)},t.prototype.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(n){return{x:n.x,value:n.value,id:n.id}})}},t}(),Rs=ft.setTimeout,Ls=ft.clearTimeout;function bd(){var t=[],e,n=function(){n.clear(),e=Rs(function(){t.forEach(function(i){return i()})},200)};return n.clear=function(){e&&(Ls(e),e=null)},n.add=function(i){return t.push(i)},n.remove=function(i){return t.splice(t.indexOf(i),1)},n}function Es(){var t=[],e=function(n,i){var r;function a(){for(var s=0,o=0,u;u=t[o];o++){if(u===!0||u.empty&&u.empty()){s++;continue}try{u.transition()}catch{s++}}r&&Ls(r),s===t.length?i&&i():r=Rs(a,50)}a()};return e.add=function(n){et(n)?t=t.concat(n):t.push(n)},e}var Td={convertData:function(t,e){var n;if(t.bindto?(n={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(i){var r="data_"+i;r in t&&(n[i]=t[r])})):n=t,n.url&&e)this.convertUrlToData(n.url,n.mimeType,n.headers,n.keys,e);else if(n.json)n=this.convertJsonToData(n.json,n.keys);else if(n.rows)n=this.convertRowsToData(n.rows);else if(n.columns)n=this.convertColumnsToData(n.columns);else if(t.bindto)throw Error("url or json or rows or columns is required.");return et(n)&&n},convertUrlToData:function(t,e,n,i,r){var a=this;e===void 0&&(e="csv");var s=new XMLHttpRequest;s.open("GET",t),n&&Object.keys(n).forEach(function(o){s.setRequestHeader(o,n[o])}),s.onreadystatechange=function(){if(s.readyState===4)if(s.status===200){var o=s.responseText;o&&r.call(a,a["convert"+Ot(e)+"ToData"](e==="json"?JSON.parse(o):o,i))}else throw new Error(t+": Something went wrong loading!")},s.send()},convertCsvTsvToData:function(t,e){var n=t.rows(e),i;return n.length===1?(i=[{}],n[0].forEach(function(r){i[0][r]=null})):i=t.parse(e),i},convertCsvToData:function(t){return this.convertCsvTsvToData({rows:Uf,parse:Yf},t)},convertTsvToData:function(t){return this.convertCsvTsvToData({rows:Hf,parse:Vf},t)},convertJsonToData:function(t,e){var n=this,i=this.config,r=[],a,s;if(et(t)){var o=e||i.data_keys;o.x?(a=o.value.concat(o.x),i.data_x=o.x):a=o.value,r.push(a),t.forEach(function(u){var l=a.map(function(c){var f=n.findValueInJson(u,c);return ot(f)&&(f=null),f});r.push(l)}),s=this.convertRowsToData(r)}else Object.keys(t).forEach(function(u){var l=t[u].concat();l.unshift(u),r.push(l)}),s=this.convertColumnsToData(r);return s},findValueInJson:function(t,e){if(t[e]!==void 0)return t[e];var n=e.replace(/\[(\w+)\]/g,".$1"),i=n.replace(/^\./,"").split("."),r=t;return i.some(function(a){return!(r=r&&a in r?r[a]:void 0)}),r},convertRowsToData:function(t){var e=t[0],n=[];return t.forEach(function(i,r){if(r>0){var a={};i.forEach(function(s,o){if(ot(s))throw new Error("Source data is missing a component at ("+r+", "+o+")!");a[e[o]]=s}),n.push(a)}}),n},convertColumnsToData:function(t){var e=[];return t.forEach(function(n,i){var r=n[0];n.forEach(function(a,s){if(s>0){if(ot(e[s-1])&&(e[s-1]={}),ot(a))throw new Error("Source data is missing a component at ("+i+", "+s+")!");e[s-1][r]=a}})}),e},convertDataToTargets:function(t,e){var n=this,i=this,r=i.axis,a=i.config,s=i.state,o=!1,u=!1,l=!1;r&&(o=r.isCategorized(),u=r.isTimeSeries(),l=r.isCustomX());var c=Object.keys(t[0]||{}),f=c.length?c.filter(i.isNotX,i):[],h=c.length?c.filter(i.isX,i):[],d;f.forEach(function(v){var p=n.getXKey(v);l||u?h.indexOf(p)>=0?d=(e&&i.data.xs[v]||[]).concat(t.map(function(_){return _[p]}).filter(B).map(function(_,y){return i.generateTargetX(_,v,y)})):a.data_x?d=n.getOtherTargetXs():ut(a.data_xs)&&(d=i.getXValuesOfXKey(p,i.data.targets)):d=t.map(function(_,y){return y}),d&&(n.data.xs[v]=d)}),f.forEach(function(v){if(!n.data.xs[v])throw new Error('x is not defined for id = "'+v+'".')});var g=f.map(function(v,p){var _=a.data_idConverter.bind(i.api)(v),y=i.getXKey(v),b=l&&o,m=b&&t.map(function(w){return w.x}).every(function(w){return a.axis_x_categories.indexOf(w)>-1});return{id:_,id_org:v,values:t.map(function(w,T){var $=w[y],S=w[v],E;return S=S!==null&&!isNaN(S)&&!it(S)?+S:et(S)||it(S)?S:null,(b||s.hasRadar)&&p===0&&!ot($)?(!m&&p===0&&T===0&&(a.axis_x_categories=[]),E=a.axis_x_categories.indexOf($),E===-1&&(E=a.axis_x_categories.length,a.axis_x_categories.push($))):E=i.generateTargetX($,v,T),(ot(S)||i.data.xs[v].length<=T)&&(E=void 0),{x:E,value:S,id:_}}).filter(function(w){return nt(w.x)})}});return g.forEach(function(v){a.data_xSort&&(v.values=v.values.sort(function(p,_){var y=p.x||p.x===0?p.x:1/0,b=_.x||_.x===0?_.x:1/0;return y-b})),v.values.forEach(function(p,_){return p.index=_}),i.data.xs[v.id].sort(function(p,_){return p-_})}),s.hasNegativeValue=i.hasNegativeValueInTargets(g),s.hasPositiveValue=i.hasPositiveValueInTargets(g),a.data_type&&i.setTargetType(i.mapToIds(g).filter(function(v){return!(v in a.data_types)}),a.data_type),g.forEach(function(v){return i.cache.add(v.id_org,v,!0)}),g}},wd={isX:function(t){var e=this,n=e.config,i=n.data_x&&t===n.data_x,r=ut(n.data_xs)&&dd(n.data_xs,t);return i||r},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!!(t.data_stack_normalize&&t.data_groups.length)},isGrouped:function(t){var e=this.config.data_groups;return t?e.some(function(n){return n.indexOf(t)>=0&&n.length>1}):e.length>0},getXKey:function(t){var e=this,n=e.config;return n.data_x?n.data_x:ut(n.data_xs)?n.data_xs[t]:null},getXValuesOfXKey:function(t,e){var n=this,i=e&&ut(e)?n.mapToIds(e):[],r;return i.forEach(function(a){n.getXKey(a)===t&&(r=n.data.xs[a])}),r},getIndexByX:function(t,e){var n=this;return e?e.indexOf(ht(t)?t:+t):(n.filterByX(n.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){var n=this;return t in n.data.xs&&n.data.xs[t]&&B(n.data.xs[t][e])?n.data.xs[t][e]:e},getOtherTargetXs:function(){var t=this,e=Object.keys(t.data.xs);return e.length?t.data.xs[e[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this,n=e.config;Object.keys(t).forEach(function(i){n.data_xs[i]=t[i]})},isMultipleX:function(){return ut(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e=this,n=e.config,i;return t&&(i=n.data_names[t.id],t.name=i!==void 0?i:t.id),t},getAllValuesOnIndex:function(t,e){e===void 0&&(e=!1);var n=this,i=n.filterTargetsToShow(n.data.targets).map(function(r){return n.addName(n.getValueOnIndex(r.values,t))});return e&&(i=i.filter(function(r){return B(r.value)})),i},getValueOnIndex:function(t,e){var n=t.filter(function(i){return i.index===e});return n.length?n[0]:null},updateTargetX:function(t,e){var n=this;t.forEach(function(i){i.values.forEach(function(r,a){r.x=n.generateTargetX(e[a],i.id,a)}),n.data.xs[i.id]=e})},updateTargetXs:function(t,e){var n=this;t.forEach(function(i){e[i.id]&&n.updateTargetX([i],e[i.id])})},generateTargetX:function(t,e,n){var i=this,r=i.axis,a=r&&r.isCategorized()?n:t||n;if(r&&r.isTimeSeries()){var s=Pt.bind(i);a=s(t||i.getXValue(e,n))}else r&&r.isCustomX()&&!r.isCategorized()&&(a=B(t)?+t:i.getXValue(e,n));return a},updateXs:function(t){t.length&&(this.axis.xs=t.map(function(e){return e.x}))},getPrevX:function(t){var e=this.axis.xs[t-1];return nt(e)?e:null},getNextX:function(t){var e=this.axis.xs[t+1];return nt(e)?e:null},getBaseValue:function(t){var e=this,n=e.state.hasAxis,i=t.value;return i&&n&&(e.isAreaRangeType(t)?i=e.getRangedData(t,"mid"):e.isBubbleZType(t)&&(i=e.getBubbleZData(i,"y"))),i},getMinMaxValue:function(t){var e=this.getBaseValue.bind(this),n,i;return(t||this.data.targets.map(function(r){return r.values})).forEach(function(r,a){var s=r.map(e).filter(j);n=Math.min.apply(Math,bt([a?n:1/0],s)),i=Math.max.apply(Math,bt([a?i:-1/0],s))}),{min:n,max:i}},getMinMaxData:function(){var t=this,e=At.dataMinMax,n=t.cache.get(e);if(!n){var i=t.data.targets.map(function(o){return o.values}),r=t.getMinMaxValue(i),a=[],s=[];i.forEach(function(o){var u=t.getFilteredDataByValue(o,r.min),l=t.getFilteredDataByValue(o,r.max);u.length&&(a=a.concat(u)),l.length&&(s=s.concat(l))}),t.cache.add(e,n={min:a,max:s})}return n},getTotalPerIndex:function(){var t=this,e=At.dataTotalPerIndex,n=t.cache.get(e);return t.isStackNormalized()&&!n&&(n=[],t.data.targets.forEach(function(i){i.values.forEach(function(r,a){n[a]||(n[a]=0),n[a]+=j(r.value)?r.value:0})})),n},getTotalDataSum:function(t){var e=this,n=At.dataTotalSum,i=e.cache.get(n);if(!j(i)){var r=ti(e.data.targets.map(function(a){return a.values})).map(function(a){return a.value}).reduce(function(a,s){return a+s});e.cache.add(n,i=r)}return t&&(i-=e.getHiddenTotalDataSum()),i},getHiddenTotalDataSum:function(){var t=this,e=t.api,n=t.state.hiddenTargetIds,i=0;return n.length&&(i=e.data.values.bind(e)(n).reduce(function(r,a){return r+a})),i},getFilteredDataByValue:function(t,e){var n=this;return t.filter(function(i){return n.getBaseValue(i)===e})},getMaxDataCount:function(){return Math.max.apply(Math,this.data.targets.map(function(t){return t.values.length}))},getMaxDataCountTarget:function(){var t=this.filterTargetsToShow()||[],e=t.length;return e>1?(t=t.map(function(n){return n.values}).reduce(function(n,i){return n.concat(i)}).map(function(n){return n.x}),t=ye(Ti(t)).map(function(n,i){return{x:n,index:i}})):e&&(t=t[0].values),t},mapToIds:function(t){return t.map(function(e){return e.id})},mapToTargetIds:function(t){var e=this;return t?et(t)?t.concat():[t]:e.mapToIds(e.data.targets)},hasTarget:function(t,e){for(var n=this.mapToIds(t),i=0,r=void 0;r=n[i];i++)if(r===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;return(t||e.data.targets).filter(function(n){return e.isTargetToShow(n.id)})},mapTargetsToUniqueXs:function(t){var e=this,n=e.axis,i=[];return t&&t.length&&(i=Ti(ti(t.map(function(r){return r.values.map(function(a){return+a.x})}))),i=n&&n.isTimeSeries()?i.map(function(r){return new Date(+r)}):i.map(function(r){return+r})),ye(i)},addHiddenTargetIds:function(t){this.state.hiddenTargetIds=this.state.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function(t){this.state.hiddenTargetIds=this.state.hiddenTargetIds.filter(function(e){return t.indexOf(e)<0})},addHiddenLegendIds:function(t){this.state.hiddenLegendIds=this.state.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function(t){this.state.hiddenLegendIds=this.state.hiddenLegendIds.filter(function(e){return t.indexOf(e)<0})},getValuesAsIdKeyed:function(t){var e=this,n=e.state.hasAxis,i={},r=e.isMultipleX(),a=r?e.mapTargetsToUniqueXs(t).map(function(s){return ht(s)?s:+s}):null;return t.forEach(function(s){var o=[];s.values.filter(function(u){return B(u.value)}).forEach(function(u){var l=u.value;e.isCandlestickType(u)&&(l=et(l)?l.slice(0,4):[l.open,l.high,l.low,l.close]),et(l)?o.push.apply(o,l):it(l)&&"high"in l?o.push.apply(o,Object.values(l)):e.isBubbleZType(u)?o.push(n&&e.getBubbleZData(l,"y")):r?o[e.getIndexByX(u.x,a)]=l:o.push(l)}),i[s.id]=o}),i},checkValueInTargets:function(t,e){for(var n=Object.keys(t),i,r=0;r<n.length;r++){i=t[n[r]].values;for(var a=0;a<i.length;a++)if(e(i[a].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,function(e){return e<0})},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,function(e){return e>0})},_checkOrder:function(t){var e=this.config,n=e.data_order;return ht(n)&&n.toLowerCase()===t},isOrderDesc:function(){return this._checkOrder("desc")},isOrderAsc:function(){return this._checkOrder("asc")},orderTargets:function(t){var e=this,n=bt([],t),i=e.getSortCompareFn();return i&&n.sort(i),n},getSortCompareFn:function(t){t===void 0&&(t=!1);var e=this,n=e.config,i=e.isOrderAsc(),r=e.isOrderDesc(),a;return i||r?a=function(s,o){var u=function(f,h){return f+Math.abs(h.value)},l=s.values.reduce(u,0),c=o.values.reduce(u,0);return t?i?l-c:c-l:i?c-l:l-c}:H(n.data_order)&&(a=n.data_order.bind(e.api)),a||null},filterByX:function(t,e){return ti(t.map(function(n){return n.values})).filter(function(n){return n.x-e===0})},filterRemoveNull:function(t){var e=this;return t.filter(function(n){return B(e.getBaseValue(n))})},filterByXDomain:function(t,e){return t.map(function(n){return{id:n.id,id_org:n.id_org,values:n.values.filter(function(i){return e[0]<=i.x&&i.x<=e[1]})}})},hasDataLabel:function(){var t=this.config.data_labels;return ks(t)&&t||It(t)&&ut(t)},getDataIndexFromEvent:function(t){var e=this,n=e.config,i=e.state,r=i.inputType,a=i.eventReceiver,s=a.coords,o=a.rect,u=n.axis_rotated,l=r==="touch"&&t.changedTouches?t.changedTouches[0]:t,c=bi(s,u?l.clientY-o.top:l.clientX-o.left,0,s.length-1,u);return c},getDataLabelLength:function(t,e,n){var i=this,r=[0,0],a=1.3;return i.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(s){return i.dataLabelFormat(s.id)(s)}).each(function(s,o){r[o]=this.getBoundingClientRect()[n]*a}).remove(),r},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){var n=t[e].x,i=[],r;for(r=e-1;r>=0&&n===t[r].x;r--)i.push(t[r]);for(r=e;r<t.length&&n===t[r].x;r++)i.push(t[r]);return i},findClosestFromTargets:function(t,e){var n=this,i=t.map(function(r){return n.findClosest(r.values,e)});return n.findClosest(i,e)},findClosest:function(t,e){var n=this,i=n.config,r=n.$el.main,a=t.filter(function(u){return u&&B(u.value)}),s=i.point_sensitivity,o;return a.filter(function(u){return n.isBarType(u.id)}).forEach(function(u){var l=r.select("."+x.bars+n.getTargetSelectorSuffix(u.id)+" ."+x.bar+"-"+u.index).node();!o&&n.isWithinBar(l)&&(o=u)}),a.filter(function(u){return!n.isBarType(u.id)}).forEach(function(u){var l=n.dist(u,e);l<s&&(s=l,o=u)}),o},dist:function(t,e){var n=this,i=n.config.axis_rotated,r=n.scale,a=i?1:0,s=i?0:1,o=n.circleY(t,t.index),u=(r.zoom||r.x)(t.x);return Math.sqrt(Math.pow(u-e[a],2)+Math.pow(o-e[s],2))},convertValuesToStep:function(t){var e=this,n=e.axis,i=e.config,r=i.line_step_type,a=n?n.isCategorized():!1,s=et(t)?t.concat():[t];if(!(a||/step\-(after|before)/.test(r)))return t;var o=s[0],u=s[s.length-1],l=o.id,c=o.x;return s.unshift({x:--c,value:o.value,id:l}),a&&r==="step-after"&&s.unshift({x:--c,value:o.value,id:l}),c=u.x,s.push({x:++c,value:u.value,id:l}),a&&r==="step-before"&&s.push({x:++c,value:u.value,id:l}),s},convertValuesToRange:function(t){var e=et(t)?t.concat():[t],n=[];return e.forEach(function(i){var r=i.x,a=i.id;n.push({x:r,id:a,value:i.value[0]}),n.push({x:r,id:a,value:i.value[2]})}),n},updateDataAttributes:function(t,e){var n=this,i=n.config,r=i["data_"+t];return ot(e)||(Object.keys(e).forEach(function(a){r[a]=e[a]}),n.redraw({withLegend:!0})),r},getRangedData:function(t,e,n){e===void 0&&(e=""),n===void 0&&(n="areaRange");var i=t==null?void 0:t.value;if(et(i)){var r={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[n].indexOf(e);return r>=0&&i?i[r]:void 0}else if(i)return i[e];return i},getRatio:function(t,e,n){var i=this,r=i.config,a=i.state,s=i.api,o=0;if(e&&s.data.shown().length){if(o=e.ratio||e.value,t==="arc")if(i.pie.padAngle()())o=e.value/i.getTotalDataSum(!0);else{var u=r.gauge_fullCircle?i.getArcLength():i.getStartAngle()*-2,l=i.hasType("gauge")?u:Math.PI*2;o=(e.endAngle-e.startAngle)/l}else if(t==="index"){var c=s.data.values.bind(s),f=this.getTotalPerIndex();if(a.hiddenTargetIds.length){var h=c(a.hiddenTargetIds,!1);h.length&&(h=h.reduce(function(v,p){return v.map(function(_,y){return(j(_)?_:0)+p[y]})}),f=f.map(function(v,p){return v-h[p]}))}e.ratio=j(e.value)&&f&&f[e.index]>0?e.value/f[e.index]:0,o=e.ratio}else if(t==="radar")o=parseFloat(String(Math.max(e.value,0)))/a.current.dataMax*r.radar_size_ratio;else if(t==="bar"){var d=i.getYScaleById.bind(i)(e.id),g=d.domain().reduce(function(v,p){return p-v});o=Math.abs(e.value)/g}}return n&&o?o*100:o},updateDataIndexByX:function(t){var e=this,n=t.reduce(function(i,r,a){return i[Number(r.x)]=a,i},{});e.data.targets.forEach(function(i){i.values.forEach(function(r,a){var s=n[Number(r.x)];s===void 0&&(s=a),r.index=s})})},isBubbleZType:function(t){var e=this;return e.isBubbleType(t)&&(it(t.value)&&("z"in t.value||"y"in t.value)||et(t.value)&&t.value.length===2)},getDataById:function(t){var e=this.cache.get(t)||this.api.data(t);return et(e)?e[0]:e}},$d={load:function(t,e){var n=this,i=t;i&&(e.filter&&(i=i.filter(e.filter)),(e.type||e.types)&&i.forEach(function(r){var a=e.types&&e.types[r.id]||e.type;n.setTargetType(r.id,a)}),n.data.targets.forEach(function(r){for(var a=0;a<i.length;a++)if(r.id===i[a].id){r.values=i[a].values,i.splice(a,1);break}}),n.data.targets=n.data.targets.concat(i)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.updateTypesElements(),e.done&&e.done.call(n.api)},loadFromArgs:function(t){var e=this;if(!!e.config){e.cache.reset();var n=t.data||e.convertData(t,function(i){return e.load(e.convertDataToTargets(i),t)});n&&e.load(e.convertDataToTargets(n),t)}},unload:function(t,e){var n=this,i=n.state,r=n.$el,a=e,s=t;if(n.cache.reset(),a||(a=function(){}),s=s.filter(function(o){return n.hasTarget(n.data.targets,o)}),!s||s.length===0){a();return}r.svg.selectAll(s.map(function(o){return n.selectorTarget(o)})).transition().style("opacity","0").remove().call(ji,a),s.forEach(function(o){i.withoutFadeIn[o]=!1,r.legend&&r.legend.selectAll("."+x.legendItem+n.getTargetSelectorSuffix(o)).remove(),n.data.targets=n.data.targets.filter(function(u){return u.id!==o})}),n.updateTypesElements()}},Ad={selectRectForSingle:function(t,e,n){var i=this,r=i.config,a=i.$el.main,s=r.data_selection_enabled,o=r.data_selection_grouped,u=r.data_selection_isselectable,l=r.tooltip_grouped,c=i.getAllValuesOnIndex(n);l&&(i.showTooltip(c,t),i.showGridFocus&&i.showGridFocus(c),!s||o)||a.selectAll("."+x.shape+"-"+n).each(function(){P(this).classed(x.EXPANDED,!0),s&&e.style("cursor",o?"pointer":null),l||(i.hideGridFocus&&i.hideGridFocus(),i.hideTooltip(),!o&&i.setExpand(n))}).filter(function(f){return i.isWithinShape(this,f)}).call(function(f){var h=f.data();s&&(o||u&&u.bind(i.api)(h))&&e.style("cursor","pointer"),l||(i.showTooltip(h,t),i.showGridFocus&&i.showGridFocus(h),i.unexpandCircles&&i.unexpandCircles(),f.each(function(d){return i.setExpand(n,d.id)}))})},setExpand:function(t,e,n){var i=this,r=i.config,a=i.$el.circle;a&&r.point_focus_expand_enabled&&i.expandCircles(t,e,n),i.expandBarTypeShapes(!0,t,e,n)},expandBarTypeShapes:function(t,e,n,i){t===void 0&&(t=!0);var r=this;["bar","candlestick"].filter(function(a){return r.$el[a]}).forEach(function(a){i&&r.$el[a].classed(x.EXPANDED,!1),r.getShapeByIndex(a,e,n).classed(x.EXPANDED,t)})},setOverOut:function(t,e){var n=this,i=n.config,r=n.state.hasRadar,a=n.$el.main,s=it(e);if(s||e!==-1){var o=i[t?"data_onover":"data_onout"].bind(n.api);if(i.color_onover&&n.setOverColor(t,e,s),s)o(e,a.select("."+x.arc+n.getTargetSelectorSuffix(e.id)).node());else if(i.tooltip_grouped)t&&(i.point_focus_only&&r?n.showCircleFocus(n.getAllValuesOnIndex(e,!0)):n.setExpand(e,null,!0)),!n.isMultipleX()&&a.selectAll("."+x.shape+"-"+e).each(function(c){o(c,this)});else{var u=n.cache.get(At.setOverOut)||[],l=a.selectAll("."+x.shape+"-"+e).filter(function(c){return n.isWithinShape(this,c)});l.each(function(c){var f=this;(u.length===0||u.every(function(h){return h!==f}))&&(o(c,this),u.push(this))}),u.length>0&&l.empty()&&(o=i.data_onout.bind(n.api),u.forEach(function(c){return o(P(c).datum(),c)}),u=[]),n.cache.add(At.setOverOut,u)}}},callOverOutForTouch:function(t){var e=this,n=e.cache.get(At.callOverOutForTouch);(it(t)&&n?t.id!==n.id:t!==n)&&((n||j(n))&&e.setOverOut(!1,n),(t||j(t))&&e.setOverOut(!0,t),e.cache.add(At.callOverOutForTouch,t))},getDraggableSelection:function(){var t=this,e=t.config,n=t.state;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?Jl().on("drag",function(i){n.event=i,t.drag(Ut(i,this))}).on("start",function(i){n.event=i,t.dragstart(Ut(i,this))}).on("end",function(i){n.event=i,t.dragend()}):function(){}},dispatchEvent:function(t,e,n){var i=this,r=i.config,a=i.state,s=a.eventReceiver,o=a.hasAxis,u=a.hasRadar,l=i.$el,c=l.eventRect,f=l.arcs,h=l.radar,d=i.isMultipleX(),g=(u?h.axes.select("."+x.axis+"-"+e+" text"):c||f.selectAll("."+x.target+" path").filter(function($,S){return S===e})).node(),v=g.getBoundingClientRect(),p=v.width,_=v.left,y=v.top;if(o&&!u&&!d){var b=s.coords[e];p=b.w,_+=b.x,y+=b.y}var m=_+(n?n[0]:0)+(d||r.axis_rotated?0:p/2),w=y+(n?n[1]:0),T={screenX:m,screenY:w,clientX:m,clientY:w};_d[/^(mouse|click)/.test(t)?"mouse":"touch"](g,t,T)},setDragStatus:function(t){this.state.dragging=t}},kd={generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},getClass:function(t,e){var n=this,i=/s$/.test(t),r=/^(area|arc|line)s?$/.test(t),a=i?"id":"index";return function(s){var o=s.data||s,u=(e?n.generateClass(x[i?"shapes":"shape"],o[a]):"")+n.generateClass(x[t],o[r?"id":a]);return u.trim()}},getChartClass:function(t){var e=this;return function(n){return x["chart"+t]+e.classTarget((n.data?n.data:n).id)}},generateExtraLineClass:function(){var t=this,e=t.config.line_classes||[],n=[];return function(i){var r=i.id||i.data&&i.data.id||i;return n.indexOf(r)<0&&n.push(r),e[n.indexOf(r)%e.length]}},classRegion:function(t,e){return this.generateClass(x.region,e)+" "+("class"in t?t.class:"")},classTarget:function(t){var e=this.config.data_classes[t],n="";return e&&(n=" "+x.target+"-"+e),this.generateClass(x.target,t)+n},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(this.state.focusedTargetIds.indexOf(t.id)>=0?x.focused:"")},classDefocused:function(t){return" "+(this.state.defocusedTargetIds.indexOf(t.id)>=0?x.defocused:"")},getTargetSelectorSuffix:function(t){return t||t===0?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function(t,e){var n=e||"",i=this.getTargetSelectorSuffix(t);return n+"."+(x.target+i)+", "+n+"."+(x.circles+i)},selectorTargets:function(t,e){var n=this,i=t||[];return i.length?i.map(function(r){return n.selectorTarget(r,e)}):null},selectorLegend:function(t){return"."+(x.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return t&&t.length?t.map(function(n){return e.selectorLegend(n)}):null}},Cd={categoryName:function(t){var e=this.config.axis_x_categories;return e&&t<e.length?e[t]:t}},Md=function(t,e,n){var i=P(t.cloneNode(!0));return i.attr("id",n).insert("rect",":first-child").attr("width",i.attr("width")).attr("height",i.attr("height")).style("fill",e),{id:n,node:i.node()}},Sd=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Rd={getColorFromCss:function(){var t=At.colorPattern,e=xt.body,n=e[t];if(!n){var i=";",r=xt.createElement("span");r.className=x.colorPattern,r.style.display="none",e.appendChild(r);var a=ft.getComputedStyle(r).backgroundImage;r.parentNode.removeChild(r),a.indexOf(i)>-1&&(n=a.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(i).map(function(s){return s.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),e[t]=n)}return n},generateColor:function(){var t=this,e=t.config,n=e.data_colors,i=e.data_color,r=[],a=ut(e.color_pattern)?e.color_pattern:ns(t.getColorFromCss()||Sd).range(),s=a;if(H(e.color_tiles)){var o=e.color_tiles.bind(t.api)(),u=a.map(function(l,c){var f=l.replace(/[#\(\)\s,]/g,""),h=t.state.datetimeId+"-pattern-"+f+"-"+c;return Md(o[c%o.length],l,h)});a=u.map(function(l){return"url(#"+l.id+")"}),t.patterns=u}return function(l){var c=l.id||l.data&&l.data.id||l,f=t.isTypeOf(c,["line","spline","step"])||!e.data_types[c],h;return H(n[c])?h=n[c].bind(t.api)(l):n[c]?h=n[c]:(r.indexOf(c)<0&&r.push(c),h=f?s[r.indexOf(c)%s.length]:a[r.indexOf(c)%a.length],n[c]=h),H(i)?i.bind(t.api)(h,l):h}},generateLevelColor:function(){var t=this,e=t.config,n=e.color_pattern,i=e.color_threshold,r=i.unit==="value",a=i.max||100,s=i.values&&i.values.length?i.values:[];return ut(i)?function(o){for(var u=r?o:o*100/a,l=n[n.length-1],c=0,f=s.length;c<f;c++)if(u<=s[c]){l=n[c];break}return l}:null},setOverColor:function(t,e){var n=this,i=n.config,r=n.$el.main,a=i.color_onover,s=t?a:n.color;it(s)?s=function(o){var u=o.id;return u in a?a[u]:n.color(u)}:ht(s)?s=function(){return a}:H(a)&&(s=s.bind(n.api)),r.selectAll(it(e)?"."+x.arc+n.getTargetSelectorSuffix(e.id):"."+x.shape+"-"+e).style("fill",s)}},z={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step"},Ht={Area:[z.AREA,z.AREA_SPLINE,z.AREA_SPLINE_RANGE,z.AREA_LINE_RANGE,z.AREA_STEP],AreaRange:[z.AREA_SPLINE_RANGE,z.AREA_LINE_RANGE],Arc:[z.PIE,z.DONUT,z.GAUGE,z.RADAR],Line:[z.LINE,z.SPLINE,z.AREA,z.AREA_SPLINE,z.AREA_SPLINE_RANGE,z.AREA_LINE_RANGE,z.STEP,z.AREA_STEP],Step:[z.STEP,z.AREA_STEP],Spline:[z.SPLINE,z.AREA_SPLINE,z.AREA_SPLINE_RANGE]},Ld={getYDomainMinMax:function(t,e){var n=this,i=n.axis,r=n.config,a=e==="min",s=r.data_groups,o=n.mapToIds(t),u=n.getValuesAsIdKeyed(t);if(s.length>0)for(var l=n["has"+(a?"Negative":"Positive")+"ValueInTargets"](t),c=function(g,v){if(v=v.filter(function(w){return o.indexOf(w)>=0}),v.length===0)return f=v,"continue";var p=v[0],_=i.getId(p);l&&u[p]&&(u[p]=u[p].map(function(w){return(a?w<0:w>0)?w:0}));for(var y=function(w,T){if(!u[T])return"continue";var $=i.getId(T);u[T].forEach(function(S,E){var F=+S,C=a?F>0:F<0;$===_&&!(l&&C)&&(u[p][E]+=F)})},b=1,m=void 0;m=v[b];b++)y(b,m);f=v},f,h=0,d=void 0;d=s[h];h++)c(h,d),d=f;return Mt(e,Object.keys(u).map(function(g){return Mt(e,u[g])}))},getYDomainMin:function(t){return this.getYDomainMinMax(t,"min")},getYDomainMax:function(t){return this.getYDomainMinMax(t,"max")},isHiddenTargetWithYDomain:function(t){var e=this;return e.state.hiddenTargetIds.some(function(n){return e.axis.getId(n)===t})},getYDomain:function(t,e,n){var i=this,r=i.axis,a=i.config,s=i.scale,o="axis_"+e;if(i.isStackNormalized())return[0,100];var u=s&&s[e]&&s[e].type==="log",l=t.filter(function(D){return r.getId(D.id)===e}),c=n?i.filterByXDomain(l,n):l;if(c.length===0)return i.isHiddenTargetWithYDomain(e)?s[e].domain():e==="y2"?s.y.domain():i.getYDomain(t,"y2",n);var f=a[o+"_min"],h=a[o+"_max"],d=i.getYDomainMin(c),g=i.getYDomainMax(c),v=a[o+"_center"],p=bt([z.BAR,z.BUBBLE,z.SCATTER],Ht.Line).some(function(D){var X=D.indexOf("area")>-1?"area":D;return i.hasType(D,c)&&a[X+"_zerobased"]}),_=a[o+"_inverted"],y=i.hasDataLabel()&&a.axis_rotated,b=i.hasDataLabel()&&!a.axis_rotated;d=B(f)?f:B(h)?d<h?d:h-10:d,g=B(h)?h:B(f)?f<g?g:f+10:g,isNaN(d)&&(d=0),isNaN(g)&&(g=d),d===g&&(d<0?g=0:d=0);var m=d>=0&&g>=0,w=d<=0&&g<=0;(B(f)&&m||B(h)&&w)&&(p=!1),p&&(m&&(d=0),w&&(g=0));var T=Math.abs(g-d),$={top:T*.1,bottom:T*.1};if(nt(v)){var S=Math.max(Math.abs(d),Math.abs(g));g=v+S,d=v-S}if(y){var E=tn(s.y.range()),F=i.getDataLabelLength(d,g,"width").map(function(D){return D/E});["bottom","top"].forEach(function(D,X){$[D]+=T*(F[X]/(1-F[0]-F[1]))})}else if(b){var C=i.getDataLabelLength(d,g,"height");["bottom","top"].forEach(function(D,X){$[D]+=r.convertPixelsToAxisPadding(C[X],T)})}var A=a[o+"_padding"];ut(A)&&["bottom","top"].forEach(function(D){$[D]=r.getPadding(A,D,$[D],T)}),p&&(m&&($.bottom=d),w&&($.top=-g));var R=u?[d,g].map(function(D){return D<0?0:D}):[d-$.bottom,g+$.top];return _?R.reverse():R},getXDomainMinMax:function(t,e){var n=this,i=n.config["axis_x_"+e],r=Mt(e,t.map(function(s){return Mt(e,s.values.map(function(o){return o.x}))})),a=it(i)?i.value:i;return a=nt(a)&&n.axis.isTimeSeries()?Pt.bind(this)(a):a,it(i)&&i.fit&&(e==="min"&&a<r||e==="max"&&a>r)&&(a=void 0),nt(a)?a:r},getXDomainMin:function(t){return this.getXDomainMinMax(t,"min")},getXDomainMax:function(t){return this.getXDomainMinMax(t,"max")},getXDomainPadding:function(t){var e=this,n=e.axis,i=e.config,r=t[1]-t[0],a=i.axis_x_padding,s,o;n.isCategorized()?o=0:e.hasType("bar")?(s=e.getMaxDataCount(),o=s>1?r/(s-1)/2:.5):o=r*.01;var u=o,l=o;return it(a)&&ut(a)?(u=B(a.left)?a.left:o,l=B(a.right)?a.right:o):j(i.axis_x_padding)&&(u=a,l=a),{left:u,right:l}},getXDomain:function(t){var e=this,n=e.scale.x.type==="log",i=[e.getXDomainMin(t),e.getXDomainMax(t)],r=0,a=0;if(n)r=i[0],a=i[1];else{var s=e.axis.isCategorized(),o=e.axis.isTimeSeries(),u=e.getXDomainPadding(i),l=i[0],c=i[1];l-c===0&&!s&&(o?(l=new Date(l.getTime()*.5),c=new Date(c.getTime()*1.5)):(l=l===0?1:l*.5,c=c===0?-1:c*1.5)),(l||l===0)&&(r=o?new Date(l.getTime()-u.left):l-u.left),(c||c===0)&&(a=o?new Date(c.getTime()+u.right):c+u.right)}return[r,a]},updateXDomain:function(t,e,n,i,r){var a=this,s=a.config,o=a.org,u=a.scale,l=u.x,c=u.subX,f=s.zoom_enabled;if(n&&(l.domain(r||ye(a.getXDomain(t))),o.xDomain=l.domain(),f&&a.zoom.updateScaleExtent(),c.domain(l.domain()),a.brush&&a.brush.scale(c)),e){var h=r||!a.brush||vd(a)?o.xDomain:Ms(a).map(c.invert);l.domain(h),f&&a.zoom.updateScaleExtent()}return i&&l.domain(a.trimXDomain(l.orgDomain())),l.domain()},trimXDomain:function(t){var e=this.getZoomDomain(),n=e[0],i=e[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),i<=t[1]&&(t[0]=+t[0]-(t[1]-i),t[1]=i),t},getZoomDomain:function(){var t=this,e=t.config,n=t.org,i=n.xDomain,r=i[0],a=i[1];return nt(e.zoom_x_min)&&(r=Mt("min",[r,e.zoom_x_min])),nt(e.zoom_x_max)&&(a=Mt("max",[a,e.zoom_x_max])),[r,a]}};function qr(t,e,n){var i=t.config,r="axis_"+e+"_tick_format",a=i[r]?i[r]:t.defaultValueFormat;return a(n)}var Ed={getYFormat:function(t){var e=this,n=e.yFormat,i=e.y2Format;return t&&!e.hasType("gauge")&&(n=e.defaultArcValueFormat,i=e.defaultArcValueFormat),function(r,a,s){var o=e.axis&&e.axis.getId(s)==="y2"?i:n;return o.call(e,r,a)}},yFormat:function(t){return qr(this,"y",t)},y2Format:function(t){return qr(this,"y2",t)},defaultValueFormat:function(t){return B(t)?+t:""},defaultArcValueFormat:function(t,e){return(e*100).toFixed(1)+"%"},dataLabelFormat:function(t){var e=this,n=e.config.data_labels,i=function(a){return B(a)?+a:""},r=i;return H(n.format)?r=n.format:It(n.format)&&(n.format[t]?r=n.format[t]===!0?i:n.format[t]:r=function(){return""}),r.bind(e.api)}},Dd={initLegend:function(){var t=this,e=t.config,n=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(e.legend_contents_bindto||(n.legend=t.$el.svg.append("g").classed(x.legend,!0).attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,n){var i=this,r=i.config,a=i.state,s=i.scale,o=i.$el,u=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};u.withTransition=Yt(u,"withTransition",!0),u.withTransitionForTransform=Yt(u,"withTransitionForTransform",!0),r.legend_contents_bindto&&r.legend_contents_template?i.updateLegendTemplate():i.updateLegendElement(t||i.mapToIds(i.data.targets),u,n),o.legend.selectAll("."+x.legendItem).classed(x.legendItemHidden,function(l){var c=!i.isTargetToShow(l);return c&&(this.style.opacity=null),c}),i.updateScales(!1,!s.zoom),i.updateSvgSize(),i.transformAll(u.withTransitionForTransform,n),a.legendHasRendered=!0},updateLegendTemplate:function(){var t=this,e=t.config,n=t.$el,i=P(e.legend_contents_bindto),r=e.legend_contents_template;if(!i.empty()){var a=t.mapToIds(t.data.targets),s=[],o="";a.forEach(function(l){var c=H(r)?r.bind(t.api)(l,t.color(l),t.api.data(l)[0].values):wi(r,{COLOR:t.color(l),TITLE:l});c&&(s.push(l),o+=c)});var u=i.html(o).selectAll(function(){return this.childNodes}).data(s);t.setLegendItem(u),n.legend=i}},updateSizeForLegend:function(t){var e=this,n=e.config,i=e.state,r=i.isLegendTop,a=i.isLegendLeft,s=i.isLegendRight,o=i.isLegendInset,u=i.current,l=t.width,c=t.height,f={top:r?e.getCurrentPaddingTop()+n.legend_inset_y+5.5:u.height-c-e.getCurrentPaddingBottom()-n.legend_inset_y,left:a?e.getCurrentPaddingLeft()+n.legend_inset_x+.5:u.width-l-e.getCurrentPaddingRight()-n.legend_inset_x+.5};e.state.margin3={top:s?0:o?f.top:u.height-c,right:NaN,bottom:0,left:s?u.width-l:o?f.left:0}},transformLegend:function(t){var e=this,n=e.$el.legend;(t?n.transition():n).attr("transform",e.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){var n=this.$el.legend;n&&n.select("."+x.legendItem+"-"+t+" line").style("stroke",e)},getLegendWidth:function(){var t=this,e=t.state,n=e.current.width,i=e.isLegendRight,r=e.isLegendInset,a=e.legendItemWidth,s=e.legendStep;return t.config.legend_show?i||r?a*(s+1):n:0},getLegendHeight:function(){var t=this,e=t.state,n=e.current,i=e.isLegendRight,r=e.legendItemHeight,a=e.legendStep;return t.config.legend_show?i?n.height:Math.max(20,r)*(a+1):0},opacityForLegend:function(t){return t.classed(x.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function(t){return t.classed(x.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var n=this,i=n.$el.legend,r=n.mapToTargetIds(t);i&&i.selectAll("."+x.legendItem).filter(function(a){return r.indexOf(a)>=0}).classed(x.legendItemFocused,e).transition().duration(100).style("opacity",function(){return(e?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,P(this))})},revertLegend:function(){var t=this,e=t.$el.legend;e&&e.selectAll("."+x.legendItem).classed(x.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(P(this))})},showLegend:function(t){var e=this,n=e.config,i=e.$el;n.legend_show||(n.legend_show=!0,i.legend?i.legend.style("visibility","visible"):e.initLegend(),!e.state.legendHasRendered&&e.updateLegend()),e.removeHiddenLegendIds(t),i.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(P(this))})},hideLegend:function(t){var e=this,n=e.config,i=e.$el.legend;n.legend_show&&Sn(t)&&(n.legend_show=!1,i.style("visibility","hidden")),e.addHiddenLegendIds(t),i.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var n=this,i=n.cache,r=n.state,a,s=At.legendItemTextBox;return t&&(a=!r.redrawing&&i.get(s)||{},a[t]||(a[t]=n.getTextRect(e,x.legendItem),i.add(s,a)),a=a[t]),a},setLegendItem:function(t){var e=this,n=e.api,i=e.config,r=e.state,a=r.inputType==="touch",s=e.hasType("gauge");t.attr("class",function(o){var u=P(this),l=!u.empty()&&u.attr("class")||"";return l+e.generateClass(x.legendItem,o)}).style("visibility",function(o){return e.isLegendToShow(o)?"visible":"hidden"}),i.interaction_enabled&&(t.style("cursor","pointer").on("click",function(o,u){st(i.legend_item_onclick,n,u)||(o.altKey?(n.hide(),n.show(u)):(n.toggle(u),P(this).classed(x.legendItemFocused,!1).style("opacity",null))),a&&e.hideTooltip()}),!a&&t.on("mouseout",function(o,u){st(i.legend_item_onout,n,u)||(P(this).classed(x.legendItemFocused,!1),s&&e.undoMarkOverlapped(e,"."+x.gaugeValue),e.api.revert())}).on("mouseover",function(o,u){st(i.legend_item_onover,n,u)||(P(this).classed(x.legendItemFocused,!0),s&&e.markOverlapped(u,e,"."+x.gaugeValue),!r.transiting&&e.isTargetToShow(u)&&n.focus(u))}))},updateLegendElement:function(t,e){var n=this,i=n.config,r=n.state,a=n.$el.legend,s=4,o=10,u=10,l=i.legend_item_tile_width+5,c=0,f=0,h,d,g=0,v={},p={},_={},y=[0],b={},m=0,w,T=r.isLegendRight||r.isLegendInset,$=t.filter(function(M){return!nt(i.data_names[M])||i.data_names[M]!==null}),S=e.withTransition,E=function(M,I,tt){var ct=tt===0,L=tt===$.length-1,N=n.getLegendItemTextBox(I,M),Y=N.width+l+(L&&!T?0:o)+i.legend_padding,k=N.height+s,lt=T?k:Y,V=T?n.getLegendHeight():n.getLegendWidth(),at,pt=function(kt,Ns){Ns||(at=(V-g-lt)/2,at<u&&(at=(V-lt)/2,g=0,m++)),b[kt]=m,y[m]=r.isLegendInset?10:at,v[kt]=g,g+=lt};if(ct&&(g=0,m=0,c=0,f=0),i.legend_show&&!n.isLegendToShow(I)){p[I]=0,_[I]=0,b[I]=0,v[I]=0;return}p[I]=Y,_[I]=k,(!c||Y>=c)&&(c=Y),(!f||k>=f)&&(f=k);var Xt=T?f:c;i.legend_equally?(Object.keys(p).forEach(function(kt){return p[kt]=c}),Object.keys(_).forEach(function(kt){return _[kt]=f}),at=(V-Xt*$.length)/2,at<u?(g=0,m=0,$.forEach(function(kt){return pt(kt)})):pt(I,!0)):pt(I)};r.isLegendInset&&(m=i.legend_inset_step?i.legend_inset_step:$.length,n.updateLegendStep(m)),r.isLegendRight?(h=function(M){return c*b[M]},d=function(M){return y[b[M]]+v[M]}):r.isLegendInset?(h=function(M){return c*b[M]+10},d=function(M){return y[b[M]]+v[M]}):(h=function(M){return y[b[M]]+v[M]},d=function(M){return f*b[M]});var F=function(M,I){return h(M,I)+4+i.legend_item_tile_width},C=function(M,I){return h(M,I)},A=function(M,I){return h(M,I)-2},R=function(M,I){return h(M,I)-2+i.legend_item_tile_width},D=function(M,I){return d(M,I)+9},X=function(M,I){return d(M,I)-5},G=function(M,I){return d(M,I)+4},W=-200,K=a.selectAll("."+x.legendItem).data($).enter().append("g");n.setLegendItem(K),K.append("text").text(function(M){return nt(i.data_names[M])?i.data_names[M]:M}).each(function(M,I){E(this,M,I)}).style("pointer-events","none").attr("x",T?F:W).attr("y",T?W:D),K.append("rect").attr("class",x.legendItemEvent).style("fill-opacity","0").attr("x",T?C:W).attr("y",T?W:X);var O=function(M){var I=n.getDataById(M);return n.levelColor?n.levelColor(I.values[0].value):n.color(I)},rt=i.legend_usePoint;if(rt){var U=[];K.append(function(M){var I=ut(i.point_pattern)?i.point_pattern:[i.point_type];U.indexOf(M)===-1&&U.push(M);var tt=I[U.indexOf(M)%I.length];return tt==="rectangle"&&(tt="rect"),xt.createElementNS(ve.svg,"hasValidPointType"in n&&n.hasValidPointType(tt)?tt:"use")}).attr("class",x.legendItemPoint).style("fill",O).style("pointer-events","none").attr("href",function(M,I,tt){var ct=tt[I],L=ct.nodeName.toLowerCase();return L==="use"?"#"+r.datetimeId+"-point-"+M:void 0})}else K.append("line").attr("class",x.legendItemTile).style("stroke",O).style("pointer-events","none").attr("x1",T?A:W).attr("y1",T?W:G).attr("x2",T?R:W).attr("y2",T?W:G).attr("stroke-width",i.legend_item_tile_height);w=a.select("."+x.legendBackground+" rect"),r.isLegendInset&&c>0&&w.size()===0&&(w=a.insert("g","."+x.legendItem).attr("class",x.legendBackground).append("rect"));var Q=a.selectAll("text").data($).text(function(M){return nt(i.data_names[M])?i.data_names[M]:M}).each(function(M,I){E(this,M,I)});(S?Q.transition():Q).attr("x",F).attr("y",D);var dt=a.selectAll("rect."+x.legendItemEvent).data($);if((S?dt.transition():dt).attr("width",function(M){return p[M]}).attr("height",function(M){return _[M]}).attr("x",C).attr("y",X),rt){var J=a.selectAll("."+x.legendItemPoint).data($);(S?J.transition():J).each(function(){var M=this.nodeName.toLowerCase(),I=i.point_r,tt="x",ct="y",L=2,N=2.5,Y,k,lt;if(M==="circle"){var V=I*.2;tt="cx",ct="cy",Y=I+V,L=I*2,N=-V}else if(M==="rect"){var V=I*2.5;k=V,lt=V,N=3}P(this).attr(tt,function(at){return A(at)+L}).attr(ct,function(at){return G(at)-N}).attr("r",Y).attr("width",k).attr("height",lt)})}else{var J=a.selectAll("line."+x.legendItemTile).data($);(S?J.transition():J).style("stroke",O).attr("x1",A).attr("y1",G).attr("x2",R).attr("y2",G)}w&&(S?w.transition():w).attr("height",n.getLegendHeight()-12).attr("width",c*(m+1)+10),n.updateLegendItemWidth(c),n.updateLegendItemHeight(f),n.updateLegendStep(m)}},Fd={redraw:function(t){t===void 0&&(t={});var e=this,n=e.config,i=e.state,r=e.$el,a=r.main;i.redrawing=!0;var s=e.filterTargetsToShow(e.data.targets),o=t.initializing,u=t.flow,l=e.getWithOption(t),c=l.Transition?n.transition_duration:0,f=l.TransitionForExit?c:0,h=l.TransitionForAxis?c:0,d=e.axis&&e.axis.generateTransitions(h);e.updateSizes(o),l.Legend&&n.legend_show?(t.withTransition=!!c,e.updateLegend(e.mapToIds(e.data.targets),t,d)):l.Dimension&&e.updateDimension(!0),(!e.hasArcType()||i.hasRadar)&&e.updateCircleY&&(e.circleY=e.updateCircleY()),i.hasAxis?(e.axis.redrawAxis(s,l,d,u,o),n.data_empty_label_text&&a.select("text."+x.text+"."+x.empty).attr("x",i.width/2).attr("y",i.height/2).text(n.data_empty_label_text).style("display",s.length?"none":null),e.hasGrid()&&e.updateGrid(c),n.regions.length&&e.updateRegion(c),["bar","candlestick","line","area"].forEach(function(g){var v=Ot(g);(/^(line|area)$/.test(g)&&e.hasTypeOf(v)||e.hasType(g))&&e["update"+v](f)}),r.text&&a.selectAll("."+x.selectedCircles).filter(e.isBarType.bind(e)).selectAll("circle").remove(),n.interaction_enabled&&!u&&l.EventRect&&(e.redrawEventRect(),e.bindZoomEvent&&e.bindZoomEvent())):(r.arcs&&e.redrawArc(c,f,l.Transform),r.radar&&e.redrawRadar(f)),!i.resizing&&(e.hasPointType()||i.hasRadar)&&e.updateCircle(),e.hasDataLabel()&&!e.hasArcType(null,["radar"])&&e.updateText(f),e.redrawTitle&&e.redrawTitle(),o&&e.updateTypesElements(),e.generateRedrawList(s,u,c,l.Subchart),e.callPluginHook("$redraw",t,c)},generateRedrawList:function(t,e,n,i){var r=this,a=r.config,s=r.state,o=r.getDrawShape();s.hasAxis&&a.subchart_show&&r.redrawSubchart(i,n,o);var u=e&&r.generateFlow({targets:t,flow:e,duration:e.duration,shape:o,xv:r.xv.bind(r)}),l=(n||u)&&Ss(),c=r.getRedrawList(o,e,u,l),f=e||a.onrendered?function(){u&&u(),s.redrawing=!1,st(a.onrendered,r.api)}:null;if(f)if(l&&c.length){var h=Es();ja().duration(n).each(function(){c.reduce(function(d,g){return d.concat(g)},[]).forEach(function(d){return h.add(d)})}).call(h,f)}else s.transiting||f();r.mapToIds(r.data.targets).forEach(function(d){s.withoutFadeIn[d]=!0})},getRedrawList:function(t,e,n,i){var r=this,a=r.config,s=r.state,o=s.hasAxis,u=s.hasRadar,l=r.$el.grid,c=t.pos,f=c.cx,h=c.cy,d=c.xForText,g=c.yForText,v=[];return o&&((a.grid_x_lines.length||a.grid_y_lines.length)&&v.push(r.redrawGrid(i)),a.regions.length&&v.push(r.redrawRegion(i)),Object.keys(t.type).forEach(function(p){var _=Ot(p),y=t.type[p];(/^(area|line)$/.test(p)&&r.hasTypeOf(_)||r.hasType(p))&&v.push(r["redraw"+_](y,i))}),!e&&l.main&&v.push(r.updateGridFocus())),(!r.hasArcType()||u)&&ut(a.data_labels)&&a.data_labels!==!1&&v.push(r.redrawText(d,g,e,i)),(r.hasPointType()||u)&&!a.point_focus_only&&r.redrawCircle&&v.push(r.redrawCircle(f,h,i,n)),v},updateAndRedraw:function(t){t===void 0&&(t={});var e=this,n=e.config,i=e.state,r;t.withTransition=Yt(t,"withTransition",!0),t.withTransform=Yt(t,"withTransform",!1),t.withLegend=Yt(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=Yt(t,"withTransitionForTransform",t.withTransition),t.withLegend&&n.legend_show||(i.hasAxis&&(r=e.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0)),e.updateScales(),e.updateSvgSize(),e.transformAll(t.withTransitionForTransform,r)),e.redraw(t,r)},redrawWithoutRescale:function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}};function te(t,e,n){t===void 0&&(t="linear"),e===void 0&&(e=0),n===void 0&&(n=1);var i={linear:os,log:cs,_log:ls,time:_h}[t]();return i.type=t,/_?log/.test(t)&&i.clamp(!0),i.range([e,n])}var Id={getXScale:function(t,e,n,i){var r=this,a=r.scale.zoom||te(r.axis.getAxisType("x"),t,e);return r.getCustomizedScale(n?a.domain(n):a,i)},getYScale:function(t,e,n,i){var r=this,a=te(r.axis.getAxisType(t),e,n);return i&&a.domain(i),a},getYScaleById:function(t,e){e===void 0&&(e=!1);var n=this.axis.getId(t)==="y2",i=e?n?"subY2":"subY":n?"y2":"y";return this.scale[i]},getCustomizedScale:function(t,e){var n=this,i=e||function(){return n.axis.x.tickOffset()},r=function(s,o){var u=t(s)+i();return o?u:Math.ceil(u)};for(var a in t)r[a]=t[a];return r.orgDomain=function(){return t.domain()},r.orgScale=function(){return t},n.axis.isCategorized()&&(r.domain=function(s){var o=s;return arguments.length?(t.domain(o),r):(o=this.orgDomain(),[o[0],o[1]+1])}),r},updateScales:function(t,e){e===void 0&&(e=!0);var n=this,i=n.axis,r=n.config,a=n.format,s=n.org,o=n.scale,u=n.state,l=u.width,c=u.height,f=u.width2,h=u.height2,d=u.hasAxis;if(d){var g=r.axis_rotated,v={x:g?1:0,y:g?0:c,subX:g?1:0,subY:g?0:h},p={x:g?c:l,y:g?l:1,subX:g?c:l,subY:g?f:1},_=e&&o.x&&o.x.orgDomain(),y=e&&s.xDomain;o.x=n.getXScale(v.x,p.x,_,function(){return i.x.tickOffset()}),o.subX=n.getXScale(v.x,p.x,y,function(b){return b%1?0:i.subX.tickOffset()}),a.xAxisTick=i.getXAxisTickFormat(),i.setAxis("x",o.x,r.axis_x_tick_outer,t),r.subchart_show&&i.setAxis("subX",o.subX,r.axis_x_tick_outer,t),o.y=n.getYScale("y",v.y,p.y,o.y?o.y.domain():r.axis_y_default),o.subY=n.getYScale("y",v.subY,p.subY,o.subY?o.subY.domain():r.axis_y_default),i.setAxis("y",o.y,r.axis_y_tick_outer,t),r.axis_y2_show&&(o.y2=n.getYScale("y2",v.y,p.y,o.y2?o.y2.domain():r.axis_y2_default),o.subY2=n.getYScale("y2",v.subY,p.subY,o.subY2?o.subY2.domain():r.axis_y2_default),i.setAxis("y2",o.y2,r.axis_y2_tick_outer,t))}else n.updateArc&&n.updateArc()},xx:function(t){var e=this,n=e.config,i=e.scale,r=i.x,a=i.zoom,s=n.zoom_enabled&&a?a:r;return t?s(B(t.x)?t.x:t):null},xv:function(t){var e=this,n=e.axis,i=e.config,r=e.scale.x,a=e.getBaseValue(t);return n.isTimeSeries()?a=Pt.call(e,a):n.isCategorized()&&ht(a)&&(a=i.axis_x_categories.indexOf(a)),Math.ceil(r(a))},yv:function(t){var e=this,n=e.scale,i=n.y,r=n.y2,a=t.axis&&t.axis==="y2"?r:i;return Math.ceil(a(e.getBaseValue(t)))},subxx:function(t){return t?this.scale.subX(t.x):null}},Od={getDrawShape:function(){var t=this,e=t.config.axis_rotated,n=t.state.hasRadar,i={type:{},indices:{},pos:{}};if(["bar","candlestick","line","area"].forEach(function(s){var o=Ot(/^(bubble|scatter)$/.test(s)?"line":s);if(t.hasType(s)||t.hasTypeOf(o)||s==="line"&&(t.hasType("bubble")||t.hasType("scatter"))){var u=t.getShapeIndices(t["is"+o+"Type"]),l=t["generateDraw"+o];i.indices[s]=u,i.type[s]=l?l.bind(t)(u,!1):void 0}}),!t.hasArcType()||n){var r=n?t.radarCircleX:e?t.circleY:t.circleX,a=n?t.radarCircleY:e?t.circleX:t.circleY;i.pos={xForText:t.generateXYForText(i.indices,!0),yForText:t.generateXYForText(i.indices,!1),cx:(r||function(){}).bind(t),cy:(a||function(){}).bind(t)}}return i},getShapeIndices:function(t){var e=this,n=e.config,i=n.data_xs,r=ut(i),a={},s=r?{}:0;return r&&Ti(Object.keys(i).map(function(o){return i[o]})).forEach(function(o){s[o]=0,a[o]={}}),e.filterTargetsToShow(e.data.targets.filter(t,e)).forEach(function(o){for(var u=(o.id in i)?i[o.id]:"",l=u?a[u]:a,c=0,f=void 0;f=n.data_groups[c];c++)if(!(f.indexOf(o.id)<0)){for(var h=0,d=void 0;d=f[h];h++)if(d in l){l[o.id]=l[d];break}}ot(l[o.id])&&(l[o.id]=u?s[u]++:s++,l.__max__=(u?s[u]:s)-1)}),a},getIndices:function(t,e){var n=this.config.data_xs;return ut(n)?t[n[e]]:t},getIndicesMax:function(t){return ut(this.config.data_xs)?Object.keys(t).map(function(e){return t[e].__max__||0}).reduce(function(e,n){return e+n}):t.__max__},getShapeX:function(t,e,n){var i=this,r=i.config,a=i.scale,s=n?a.subX:a.zoom||a.x,o=r.bar_padding,u=function(c,f){return c+f},l=It(t)&&(t._$total.length?t._$total.reduce(u)/2:0);return function(c){var f=i.getIndices(e,c.id),h=c.id in f?f[c.id]:0,d=(f.__max__||0)+1,g=0;if(ut(c.x)){var v=s(c.x,!0);l?g=v-(t[c.id]||t._$width)+t._$total.slice(0,h+1).reduce(u)-l:g=v-(j(t)?t:t._$width)*(d/2-h)}return t&&g&&d>1&&o&&(h&&(g+=o*h),d>2?g-=(d-1)*o/2:d===2&&(g-=o/2)),g}},getShapeY:function(t){var e=this,n=e.isStackNormalized();return function(i){var r=i.value;return j(i)?r=i:n?r=e.getRatio("index",i,!0):e.isBubbleZType(i)&&(r=e.getBubbleZData(i.value,"y")),e.getYScaleById(i.id,t)(r)}},getShapeYMin:function(t){var e=this,n=e.scale[e.axis.getId(t)],i=n.domain()[0];return!e.isGrouped(t)&&i>0?i:0},getShapeOffsetData:function(t){var e=this,n=e.orderTargets(e.filterTargetsToShow(e.data.targets.filter(t,e))),i=e.isStackNormalized(),r=n.map(function(s){var o=s.values,u={};e.isStepType(s)&&(o=e.convertValuesToStep(o));var l=o.reduce(function(c,f){var h=Number(f.x);return c[h]=f,u[h]=i?e.getRatio("index",f,!0):f.value,c},{});return{id:s.id,rowValues:o,rowValueMapByXValue:l,values:u}}),a=n.reduce(function(s,o,u){var l=o.id;return s[l]=u,s},{});return{indexMapByTargetId:a,shapeOffsetTargets:r}},getShapeOffset:function(t,e,n){var i=this,r=i.getShapeOffsetData(t),a=r.shapeOffsetTargets,s=r.indexMapByTargetId;return function(o,u){var l=i.getIndices(e,o.id),c=i.getYScaleById(o.id,n),f=c(i.getShapeYMin(o.id)),h=Number(o.x),d=f;return a.filter(function(g){return g.id!==o.id}).forEach(function(g){if(l[g.id]===l[o.id]&&s[g.id]<s[o.id]){var v=g.rowValues[u];(!v||Number(v.x)!==h)&&(v=g.rowValueMapByXValue[h]),v&&v.value*o.value>=0&&(d+=c(g.values[h])-f)}}),d}},getBarW:function(t,e,n){var i=this,r=i.config,a=i.org,s=i.scale,o=i.getMaxDataCount(),u=t==="bar"&&r.data_groups.length,l=t+"_width",c=s.zoom&&!i.axis.isCategorized()?a.xDomain.map(function(d){return s.zoom(d)}).reduce(function(d,g){return Math.abs(d)+g})/o:e.tickInterval(o),f=function(d){var g=d?r[l][d]:r[l],v=d?g.ratio:r[l+"_ratio"],p=d?g.max:r[l+"_max"],_=j(g)?g:n?c*v/n:0;return p&&_>p?p:_},h=f();return!u&&It(r[l])&&(h={_$width:h,_$total:[]},i.filterTargetsToShow(i.data.targets).forEach(function(d){r[l][d.id]&&(h[d.id]=f(d.id),h._$total.push(h[d.id]||h._$width))})),h},getShapeByIndex:function(t,e,n){var i=this,r=i.$el.main,a=B(e)?"-"+e:"";return(n?r.selectAll("."+x[t+"s"]+i.getTargetSelectorSuffix(n)):r).selectAll("."+x[t]+a)},isWithinShape:function(t,e){var n=this,i=P(t),r;return n.isTargetToShow(e.id)?"hasValidPointType"in n&&n.hasValidPointType(t.nodeName)?r=n.isStepType(e)?n.isWithinStep(t,n.getYScaleById(e.id)(e.value)):n.isWithinCircle(t,n.isBubbleType(e)?n.pointSelectR(e)*1.5:0):t.nodeName==="path"&&(r=i.classed(x.bar)?n.isWithinBar(t):!0):r=!1,r},getInterpolate:function(t){var e=this,n=e.getInterpolateType(t);return{basis:Eh,"basis-closed":Dh,"basis-open":Fh,bundle:Ih,cardinal:Oh,"cardinal-closed":Ph,"cardinal-open":Nh,"catmull-rom":Xh,"catmull-rom-closed":zh,"catmull-rom-open":Bh,"monotone-x":Uh,"monotone-y":Vh,natural:Hh,"linear-closed":Yh,linear:Hi,step:Gh,"step-after":qh,"step-before":Wh}[n]},getInterpolateType:function(t){var e=this,n=e.config,i=n.spline_interpolation_type,r=e.isInterpolationType(i)?i:"cardinal";return e.isSplineType(t)?r:e.isStepType(t)?n.line_step_type:"linear"}},Pd={setContainerSize:function(){var t=this,e=t.state;e.current.width=t.getCurrentWidth(),e.current.height=t.getCurrentHeight()},getCurrentWidth:function(){var t=this;return t.config.size_width||t.getParentWidth()},getCurrentHeight:function(){var t=this,e=t.config,n=e.size_height||t.getParentHeight();return n>0?n:320/(t.hasType("gauge")&&!e.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var t=this,e=t.config,n=t.state.hasAxis,i=t.$el,r=n?e.axis_y2_axes.length:0,a=B(e.padding_top)?e.padding_top:0;return i.title&&i.title.node()&&(a+=t.getTitlePadding()),r&&e.axis_rotated&&(a+=t.getHorizontalAxisHeight("y2")*r),a},getCurrentPaddingBottom:function(){var t=this,e=t.config,n=t.state.hasAxis,i=e.axis_rotated?"y":"x",r=n?e["axis_"+i+"_axes"].length:0,a=B(e.padding_bottom)?e.padding_bottom:0;return a+(r?t.getHorizontalAxisHeight(i)*r:0)},getCurrentPaddingLeft:function(t){var e=this,n=e.config,i=e.state.hasAxis,r=n.axis_rotated,a=r?"x":"y",s=i?n["axis_"+a+"_axes"].length:0,o=i?e.getAxisWidthByAxisId(a,t):0,u;return B(n.padding_left)?u=n.padding_left:i&&r?u=n.axis_x_show?Math.max(Qn(o),40):1:i&&(!n.axis_y_show||n.axis_y_inner)?u=e.axis.getAxisLabelPosition("y").isOuter?30:1:u=Qn(o),u+o*s},getCurrentPaddingRight:function(t){t===void 0&&(t=!1);var e=this,n=e.config,i=e.state.hasAxis,r=10,a=e.state.isLegendRight?e.getLegendWidth()+20:0,s=i?n.axis_y2_axes.length:0,o=i?e.getAxisWidthByAxisId("y2"):0,u=t?e.axis.getXAxisTickTextY2Overflow(r):0,l;return B(n.padding_right)?l=n.padding_right+1:e.axis&&n.axis_rotated?l=r+a:e.axis&&(!n.axis_y2_show||n.axis_y2_inner)?l=Math.max(2+a+(e.axis.getAxisLabelPosition("y2").isOuter?20:0),u):l=Math.max(Qn(o)+a,u),l+o*s},getParentRectValue:function(t){for(var e="offset"+Ot(t),n=this.$el.chart.node(),i;!i&&n&&n.tagName!=="BODY";){try{i=n.getBoundingClientRect()[t]}catch{e in n&&(i=n[e])}n=n.parentNode}if(t==="width"){var r=xt.body.offsetWidth;i>r&&(i=r)}return i},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height");return t.indexOf("px")>0?parseInt(t,10):0},getSvgLeft:function(t){var e=this,n=e.config,i=e.$el,r=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,a=n.axis_rotated?x.axisX:x.axisY,s=i.main.select("."+a).node(),o=s&&r?s.getBoundingClientRect():{right:0},u=i.chart.node().getBoundingClientRect(),l=e.hasArcType(),c=o.right-u.left-(l?0:e.getCurrentPaddingLeft(t));return c>0?c:0},updateDimension:function(t){var e=this,n=e.config,i=e.state.hasAxis,r=e.$el;i&&!t&&e.axis.x&&n.axis_rotated&&e.axis.subX&&e.axis.subX.create(r.axis.subX),e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)},updateSvgSize:function(){var t=this,e=t.state,n=e.clip,i=e.current,r=e.hasAxis,a=e.width,s=e.height,o=t.$el.svg;if(o.attr("width",i.width).attr("height",i.height),r){var u=o.select("."+x.brush+" .overlay"),l={width:0,height:0};u.size()&&(l.width=+u.attr("width"),l.height=+u.attr("height")),o.selectAll(["#"+n.id,"#"+n.idGrid]).select("rect").attr("width",a).attr("height",s),o.select("#"+n.idXAxis).select("rect").call(t.setXAxisClipPath.bind(t)),o.select("#"+n.idYAxis).select("rect").call(t.setYAxisClipPath.bind(t)),n.idSubchart&&o.select("#"+n.idSubchart).select("rect").attr("width",a).attr("height",l.height)}},updateSizes:function(t){var e=this,n=e.config,i=e.state,r=e.$el.legend,a=n.axis_rotated,s=e.hasArcType();!t&&e.setContainerSize();var o={width:r?e.getLegendWidth():0,height:r?e.getLegendHeight():0};!s&&n.axis_x_show&&n.axis_x_tick_autorotate&&e.updateXAxisTickClip();var u=i.isLegendRight||i.isLegendInset?0:o.height,l=a||s?0:e.getHorizontalAxisHeight("x"),c=n.subchart_axis_x_show&&n.subchart_axis_x_tick_text_show?l:30,f=n.subchart_show&&!s?n.subchart_size_height+c:0;i.margin=!s&&a?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:s?0:e.getCurrentPaddingRight(!0),bottom:e.getHorizontalAxisHeight("y")+u+e.getCurrentPaddingBottom(),left:f+(s?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:s?0:e.getCurrentPaddingRight(!0),bottom:l+f+u+e.getCurrentPaddingBottom(),left:s?0:e.getCurrentPaddingLeft()},i.margin2=a?{top:i.margin.top,right:NaN,bottom:20+u,left:e.state.rotatedPadding.left}:{top:i.current.height-f-u,right:NaN,bottom:c+u,left:i.margin.left},i.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(o),i.width=i.current.width-i.margin.left-i.margin.right,i.height=i.current.height-i.margin.top-i.margin.bottom,i.width<0&&(i.width=0),i.height<0&&(i.height=0),i.width2=a?i.margin.left-i.rotatedPadding.left-i.rotatedPadding.right:i.width,i.height2=a?i.height:i.current.height-i.margin2.top-i.margin2.bottom,i.width2<0&&(i.width2=0),i.height2<0&&(i.height2=0);var h=e.hasType("gauge"),d=n.legend_show&&i.isLegendRight;i.arcWidth=i.width-(d?o.width+10:0),i.arcHeight=i.height-(d&&!h?0:10),h&&!n.gauge_fullCircle&&(i.arcHeight+=i.height-e.getPaddingBottomForGauge()),e.updateRadius&&e.updateRadius(),i.isLegendRight&&s&&(i.margin3.left=i.arcWidth/2+i.radiusExpanded*1.1)}},Nd={opacityForText:function(t){var e=this;return e.isBarType(t)&&!e.meetsLabelThreshold(Math.abs(e.getRatio("bar",t)),"bar")?"0":e.hasDataLabel?"1":"0"},initText:function(){var t=this.$el;t.main.select("."+x.chart).append("g").attr("class",x.chartTexts)},updateTargetsForText:function(t){var e=this,n=e.getChartClass("Text"),i=e.getClass("texts","id"),r=e.classFocus.bind(e),a=e.$el.main.select("."+x.chartTexts).selectAll("."+x.chartText).data(t).attr("class",function(o){return n(o)+r(o)}),s=a.enter().append("g").style("opacity","0").attr("class",n).style("pointer-events","none");s.append("g").attr("class",i)},updateText:function(t){var e=this,n=e.config,i=e.$el,r=e.getClass("text","index"),a=i.main.selectAll("."+x.texts).selectAll("."+x.text).data(e.labelishData.bind(e));a.exit().transition().duration(t).style("fill-opacity","0").remove(),i.text=a.enter().append("text").merge(a).attr("class",r).attr("text-anchor",function(s){var o=s.value<0;if(e.isCandlestickType(s)){var u=e.getCandlestickData(s);o=u&&!u._isUp}return n.axis_rotated?o?"end":"start":"middle"}).style("fill",e.updateTextColor.bind(e)).style("fill-opacity","0").each(function(s,o,u){var l=P(this),c=s.value;if(e.isBubbleZType(s))c=e.getBubbleZData(c,"z");else if(e.isCandlestickType(s)){var f=e.getCandlestickData(s);f&&(c=f.close)}c=e.dataLabelFormat(s.id)(c,s.id,o,u),j(c)?this.textContent=c:ze(l,c)})},updateTextColor:function(t){var e=this,n=e.config,i=n.data_labels_colors,r=e.isArcType(t)&&!e.isRadarType(t)?null:e.color(t),a;if(ht(i))a=i;else if(it(i)){var s=(t.data||t).id;a=i[s]}else H(i)&&(a=i.bind(e.api)(r,t));if(e.isCandlestickType(t)&&!H(i)){var o=e.getCandlestickData(t);if(o&&!o._isUp){var u=n.candlestick_color_down;a=it(u)?u[t.id]:u}}return a||r},redrawText:function(t,e,n,i){var r=this,a=Te(!0);return r.$el.text.style("fill",r.updateTextColor.bind(r)).style("fill-opacity",n?0:r.opacityForText.bind(r)).each(function(s,o){var u=i&&this.getAttribute("x")?P(this).transition(a):P(this),l=t.bind(this)(s,o),c=e.bind(this)(s,o);this.childElementCount?u.attr("transform","translate("+l+" "+c+")"):u.attr("x",l).attr("y",c)}),!0},getTextRect:function(t,e){var n=this,i=t.node?t.node():t;/text/i.test(i.tagName)||(i=i.querySelector("text"));var r=i.textContent,a=At.textRect+"-"+r.replace(/\W/g,"_"),s=n.cache.get(a);return s||(n.$el.svg.append("text").style("visibility","hidden").style("font",P(i).style("font")).classed(e,!0).text(r).call(function(o){s=Ie(o.node())}).remove(),n.cache.add(a,s)),s},generateXYForText:function(t,e){var n=this,i=Object.keys(t),r={},a=e?n.getXForText:n.getYForText;return n.hasType("radar")&&i.push("radar"),i.forEach(function(s){r[s]=n["generateGet"+Ot(s)+"Points"](t[s],!1)}),function(s,o){var u=n.isAreaType(s)&&"area"||n.isBarType(s)&&"bar"||n.isCandlestickType(s)&&"candlestick"||n.isRadarType(s)&&"radar"||"line";return a.call(n,r[u](s,o),s,this)}},getCenteredTextPos:function(t,e,n){var i=this,r=i.config,a=r.axis_rotated;if(r.data_labels.centered&&i.isBarType(t)){var s=Ie(n),o=t.value>=0;if(a){var u=(o?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+s.width/2;return o?-u-3:u+2}else{var l=(o?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+s.height/2;return o?l:-l-2}}return 0},getTextPos:function(t,e){var n=this.config.data_labels_position;return(t in n?n[t]:n)[e]||0},getXForText:function(t,e,n){var i=this,r=i.config,a=i.state,s=r.axis_rotated,o=t[0][0];if(i.hasType("candlestick"))s?o=i.getCandlestickData(e)._isUp?t[2][2]+4:t[2][1]-4:o+=(t[1][0]-o)/2;else if(s){var u=i.isBarType(e)?4:6;o=t[2][1]+u*(e.value<0?-1:1)}else o=i.hasType("bar")?(t[2][0]+t[0][0])/2:o;if(e.value===null)if(o>a.width){var l=Ie(n).width;o=a.width-l}else o<0&&(o=4);return s&&(o+=i.getCenteredTextPos(e,t,n)),o+i.getTextPos(e.id,"x")},getYForText:function(t,e,n){var i=this,r=i.config,a=i.state,s=r.axis_rotated,o=r.point_r,u=Ie(n),l=e.value,c=3,f;if(i.isCandlestickType(e))l=i.getCandlestickData(e),s?(f=t[0][0],f+=(t[1][0]-f)/2+c):f=l&&l._isUp?t[2][2]-c:t[2][1]+c*4;else if(s)f=(t[0][0]+t[2][0]+u.height*.6)/2;else if(f=t[2][1],j(o)&&o>5&&(i.isLineType(e)||i.isScatterType(e))&&(c+=r.point_r/2.3),l<0||l===0&&!a.hasPositiveValue&&a.hasNegativeValue)f+=u.height+(i.isBarType(e)?-c:c);else{var h=-c*2;i.isBarType(e)?h=-c:i.isBubbleType(e)&&(h=c),f+=h}if(e.value===null&&!s){var d=u.height;f<d?f=d:f>a.height&&(f=a.height-4)}return s||(f+=i.getCenteredTextPos(e,t,n)),f+i.getTextPos(e.id,"y")},markOverlapped:function(t,e,n){var i=e.$el.arcs.selectAll(n),r=i.filter(function(u){return u.data.id!==t}),a=i.filter(function(u){return u.data.id===t}),s=Wr(a.node()),o=function(u,l){return Math.sqrt(Math.pow(u,2)+Math.pow(l,2))};a.node()&&r.each(function(){var u=Wr(this),l=P(this),c=o(s.e,s.f)>o(u.e,u.f)?a:l,f=Math.ceil(Math.abs(s.e-u.e))<Math.ceil(c.node().getComputedTextLength()),h=Math.ceil(Math.abs(s.f-u.f))<parseInt(a.style("font-size"),10);l.classed(x.TextOverlapping,f&&h)})},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each(function(){Pa([this,this.previousSibling]).classed(x.TextOverlapping,!1)})},meetsLabelThreshold:function(t,e){t===void 0&&(t=0);var n=this,i=n.config,r=i[e+"_label_threshold"]||0;return t>=r}};function Zr(t,e){t===void 0&&(t="left");var n=j(e),i;return t.indexOf("center")>-1?i=n?e/2:"middle":t.indexOf("right")>-1?i=n?e:"end":i=n?0:"start",i}var Xd={initTitle:function(){var t=this,e=t.config,n=t.$el;if(e.title_text){n.title=n.svg.append("g");var i=n.title.append("text").style("text-anchor",Zr(e.title_position)).attr("class",x.title);ze(i,e.title_text,[.3,1.5])}},redrawTitle:function(){var t=this,e=t.config,n=t.state.current,i=t.$el.title;if(i){var r=t.yForTitle.call(t);/g/i.test(i.node().tagName)?i.attr("transform","translate("+Zr(e.title_position,n.width)+", "+r+")"):i.attr("x",t.xForTitle.call(t)).attr("y",r)}},xForTitle:function(){var t=this,e=t.config,n=t.state.current,i=e.title_position||"left",r=t.getTextRect(t.$el.title,x.title).width,a;return/(right|center)/.test(i)?(a=n.width-r,i.indexOf("right")>=0?a=n.width-r-e.title_padding.right:i.indexOf("center")>=0&&(a=(n.width-r)/2)):a=e.title_padding.left||0,a},yForTitle:function(){var t=this;return(t.config.title_padding.top||0)+t.getTextRect(t.$el.title,x.title).height},getTitlePadding:function(){var t=this;return t.yForTitle()+(t.config.title_padding.bottom||0)}},zd={initTooltip:function(){var t=this,e=t.config,n=t.$el;n.tooltip=P(e.tooltip_contents.bindto),n.tooltip.empty()&&(n.tooltip=n.chart.style("position","relative").append("div").attr("class",x.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),t.bindTooltipResizePos()},initShowTooltip:function(){var t=this,e=t.config,n=t.$el,i=t.state,r=i.hasAxis,a=i.hasRadar;if(e.tooltip_init_show){var s=!(r&&a);if(t.axis&&t.axis.isTimeSeries()&&ht(e.tooltip_init_x)){var o=t.data.targets[0],u=void 0,l=void 0;for(e.tooltip_init_x=Pt.call(t,e.tooltip_init_x),u=0;(l=o.values[u])&&l.x-e.tooltip_init_x!==0;u++);e.tooltip_init_x=u}var c=t.data.targets.map(function(f){var h=s?0:e.tooltip_init_x;return t.addName(f.values[h])});s&&(c=[c[e.tooltip_init_x]]),n.tooltip.html(t.getTooltipHTML(c,t.axis&&t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType(null,["radar"])),t.color)),e.tooltip_contents.bindto||n.tooltip.style("top",e.tooltip_init_position.top).style("left",e.tooltip_init_position.left).style("display","block")}},getTooltipHTML:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this,i=n.api,r=n.config;return H(r.tooltip_contents)?r.tooltip_contents.bind(i).apply(void 0,t):n.getTooltipContent.apply(n,t)},getTooltipContent:function(t,e,n,i){var r=this,a=r.api,s=r.config,o=r.state,u=["title","name","value"].map(function(A){var R=s["tooltip_format_"+A];return H(R)?R.bind(a):R}),l=u[0],c=u[1],f=u[2];l=l||e,c=c||function(A){return A},f=f||(r.isStackNormalized()?function(A,R){return(R*100).toFixed(2)+"%"}:n);var h=s.tooltip_order,d=function(A){return r.axis&&r.isBubbleZType(A)?r.getBubbleZData(A.value,"z"):r.getBaseValue(A)},g=r.levelColor?function(A){return r.levelColor(A.value)}:function(A){return i(A)},v=s.tooltip_contents,p=v.template,_=r.mapToTargetIds();if(h===null&&s.data_groups.length){var y=r.orderTargets(r.data.targets).map(function(A){return A.id}).reverse();t.sort(function(A,R){var D=A?A.value:null,X=R?R.value:null;return D>0&&X>0&&(D=A.id?y.indexOf(A.id):null,X=R.id?y.indexOf(R.id):null),D-X})}else if(/^(asc|desc)$/.test(h)){var b=h==="asc";t.sort(function(A,R){var D=A?d(A):null,X=R?d(R):null;return b?D-X:X-D})}else H(h)&&t.sort(h.bind(a));var m=r.getTooltipContentTemplate(p),w=t.length,T,$,S,E,F,C=function(){if($=t[F],!$||!(d($)||d($)===0))return"continue";if(ot(T)){var A=(o.hasAxis||o.hasRadar)&&Re(l?l($.x):$.x);T=wi(m[0],{CLASS_TOOLTIP:x.tooltip,TITLE:B(A)?p?A:'<tr><th colspan="2">'+A+"</th></tr>":""})}if(!$.ratio&&r.$el.arcs&&($.ratio=r.getRatio("arc",r.$el.arcs.select("path."+x.arc+"-"+$.id).data()[0])),S=[$.ratio,$.id,$.index,t],E=Re(f.apply(void 0,bt([d($)],S))),r.isAreaRangeType($)){var R=["high","low"].map(function(J){return Re(f.apply(void 0,bt([r.getRangedData($,J)],S)))}),D=R[0],X=R[1];E="<b>Mid:</b> "+E+" <b>High:</b> "+D+" <b>Low:</b> "+X}else if(r.isCandlestickType($)){var G=["open","high","low","close","volume"].map(function(I){return Re(f.apply(void 0,bt([r.getRangedData($,I,"candlestick")],S)))}),W=G[0],D=G[1],X=G[2],K=G[3],O=G[4];E="<b>Open:</b> "+W+" <b>High:</b> "+D+" <b>Low:</b> "+X+" <b>Close:</b> "+K+(O?" <b>Volume:</b> "+O:"")}if(E!==void 0){if($.name===null)return"continue";var rt=Re(c.apply(void 0,bt([$.name],S))),U=g($),Q={CLASS_TOOLTIP_NAME:x.tooltipName+r.getTargetSelectorSuffix($.id),COLOR:p||!r.patterns?U:'<svg><rect style="fill:'+U+'" width="10" height="10"></rect></svg>',NAME:rt,VALUE:E};if(p&&it(v.text)){var dt=_.indexOf($.id);Object.keys(v.text).forEach(function(J){Q[J]=v.text[J][dt]})}T+=wi(m[1],Q)}};for(F=0;F<w;F++)C();return T+"</table>"},getTooltipContentTemplate:function(t){return(t||`<table class="{=CLASS_TOOLTIP}"><tbody>
				{=TITLE}
				{{<tr class="{=CLASS_TOOLTIP_NAME}">
					<td class="name">`+(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+`{=NAME}</td>
					<td class="value">{=VALUE}</td>
				</tr>}}
			</tbody></table>`).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(t,e,n,i){var r=this,a=r.config,s=r.scale,o=r.state,u=o.width,l=o.height,c=o.current,f=o.isLegendRight,h=o.inputType,d=o.event,g=r.hasType("gauge")&&!a.gauge_fullCircle,v=r.getSvgLeft(!0),p=v+c.width-r.getCurrentPaddingRight(),_=r.getCurrentPaddingLeft(!0),y=20,b=Ut(d,i),m=b[0],w=b[1];if(r.hasArcType()){var T=h==="touch"||r.hasType("radar");T||(w+=g?l:l/2,m+=(u-(f?r.getLegendWidth():0))/2)}else{var $=s.x(t[0].x);a.axis_rotated?(w=$+y,m+=v+100,p-=v):(w-=5,m=v+_+y+(r.zoomScale?m:$))}m+e+15>p&&(m-=e+_),w+n>c.height&&(w-=g?n*3:n+30);var S={top:w,left:m};return Object.keys(S).forEach(function(E){S[E]<0&&(S[E]=0)}),S},showTooltip:function(t,e){var n=this,i=n.config,r=n.state,a=n.$el.tooltip,s=i.tooltip_contents.bindto,o=n.hasArcType(null,["radar"]),u=t.filter(function(b){return b&&B(n.getBaseValue(b))});if(!(!a||u.length===0||!i.tooltip_show)){var l=a.datum(),c=l||{},f=c.width,h=f===void 0?0:f,d=c.height,g=d===void 0?0:d,v=JSON.stringify(t);if(!l||l.current!==v){var p=t.concat().sort()[0].index;st(i.tooltip_onshow,n.api,t),a.html(n.getTooltipHTML(t,n.axis?n.axis.getXAxisTickFormat():n.categoryName.bind(n),n.getYFormat(o),n.color)).style("display",null).style("visibility",null).datum(l={index:p,current:v,width:h=a.property("offsetWidth"),height:g=a.property("offsetHeight")}),st(i.tooltip_onshown,n.api,t),n._handleLinkedCharts(!0,p)}if(!s){var _=i.tooltip_position||n.tooltipPosition,y=_.call(this,u,h,g,e);["top","left"].forEach(function(b){var m=y[b];a.style(b,m+"px"),b==="left"&&!l.xPosInPercent&&(l.xPosInPercent=m/r.current.width*100)})}}},bindTooltipResizePos:function(){var t=this,e=t.resizeFunction,n=t.state,i=t.$el.tooltip;e.add(function(){if(i.style("display")==="block"){var r=n.current,a=i.datum(),s=a.width,o=a.xPosInPercent,u=r.width/100*o,l=r.width-(u+s);l<0&&(u+=l),i.style("left",u+"px")}})},hideTooltip:function(t){var e=this,n=e.api,i=e.config,r=e.$el.tooltip;if(r&&r.style("display")!=="none"&&(!i.tooltip_doNotHide||t)){var a=JSON.parse(r.datum().current);st(i.tooltip_onhide,n,a),r.style("display","none").style("visibility","hidden").datum(null),st(i.tooltip_onhidden,n,a)}},_handleLinkedCharts:function(t,e){var n=this,i=n.charts,r=n.config,a=n.state.event;if(a&&a.isTrusted&&r.tooltip_linked&&i.length>1){var s=r.tooltip_linked_name;i.filter(function(o){return o!==n.api}).forEach(function(o){var u=o.internal,l=u.config,c=u.$el,f=l.tooltip_linked,h=l.tooltip_linked_name,d=xt.body.contains(c.chart.node());if(f&&s===h&&d){var g=c.tooltip.data()[0],v=e!==(g&&g.index);try{o.tooltip[t&&v?"show":"hide"]({index:e})}catch{}}})}}},Bd={getTranslate:function(t,e){e===void 0&&(e=0);var n=this,i=n.config,r=n.state,a=i.axis_rotated,s=0,o,u;if(e&&/^(x|y2?)$/.test(t)&&(s=n.getAxisSize(t)*e),t==="main")o=Se(r.margin.left),u=Se(r.margin.top);else if(t==="context")o=Se(r.margin2.left),u=Se(r.margin2.top);else if(t==="legend")o=r.margin3.left,u=r.margin3.top;else if(t==="x")o=a?-s:0,u=a?0:r.height+s;else if(t==="y")o=a?0:-s,u=a?r.height+s:0;else if(t==="y2")o=a?0:r.width+s,u=a?1-s:0;else if(t==="subX")o=0,u=a?0:r.height2;else if(t==="arc")o=r.arcWidth/2,u=r.arcHeight/2;else if(t==="radar"){var l=n.getRadarSize()[0];o=r.width/2-l,u=Se(r.margin.top)}return"translate("+o+", "+u+")"},transformMain:function(t,e){var n=this,i=n.$el.main,r,a,s;e&&e.axisX?r=e.axisX:(r=i.select("."+x.axisX),t&&(r=r.transition())),e&&e.axisY?a=e.axisY:(a=i.select("."+x.axisY),t&&(a=a.transition())),e&&e.axisY2?s=e.axisY2:(s=i.select("."+x.axisY2),t&&(s=s.transition())),(t?i.transition():i).attr("transform",n.getTranslate("main")),r.attr("transform",n.getTranslate("x")),a.attr("transform",n.getTranslate("y")),s.attr("transform",n.getTranslate("y2")),i.select("."+x.chartArcs).attr("transform",n.getTranslate("arc"))},transformAll:function(t,e){var n=this,i=n.config,r=n.state.hasAxis,a=n.$el;n.transformMain(t,e),r&&i.subchart_show&&n.transformContext(t,e),a.legend&&n.transformLegend(t)}},Yd={setTargetType:function(t,e){var n=this,i=n.config,r=n.state.withoutFadeIn;n.mapToTargetIds(t).forEach(function(a){r[a]=e===i.data_types[a],i.data_types[a]=e}),t||(i.data_type=e)},updateTypesElements:function(){var t=this,e=t.state.current;Object.keys(z).forEach(function(n){var i=z[n],r=t.hasType(i,null,!0),a=e.types.indexOf(i);a===-1&&r?e.types.push(i):a>-1&&!r&&e.types.splice(a,1)}),t.setChartElements()},hasType:function(t,e,n){n===void 0&&(n=!1);var i=this,r=i.config,a=i.state.current,s=r.data_types,o=e||i.data.targets,u=!1;return!n&&a.types.length&&a.types.indexOf(t)>-1?u=!0:o&&o.length?o.forEach(function(l){var c=s[l.id];(c===t||!c&&t==="line")&&(u=!0)}):Object.keys(s).length?Object.keys(s).forEach(function(l){s[l]===t&&(u=!0)}):u=r.data_type===t,u},hasTypeOf:function(t,e,n){var i=this;return n===void 0&&(n=[]),t in Ht?!Ht[t].filter(function(r){return n.indexOf(r)===-1}).every(function(r){return!i.hasType(r,e)}):!1},isTypeOf:function(t,e){var n=ht(t)?t:t.id,i=this.config.data_types[n]||this.config.data_type;return et(e)?e.indexOf(i)>=0:i===e},hasPointType:function(){var t=this;return t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&this.config.gauge_type==="multi"},isLineType:function(t){var e=ht(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,Ht.Line)},isStepType:function(t){return this.isTypeOf(t,Ht.Step)},isSplineType:function(t){return this.isTypeOf(t,Ht.Spline)},isAreaType:function(t){return this.isTypeOf(t,Ht.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,Ht.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isCandlestickType:function(t){return this.isTypeOf(t,"candlestick")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,n=e.point_pattern,i=!1;return t&&t.tagName==="circle"?i=!0:i=e.point_type==="circle"&&(!n||et(n)&&n.length===0),i},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},labelishData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isCandlestickType(t)||this.isRadarType(t)?t.values.filter(function(e){return j(e.value)||Boolean(e.value)}):[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}},Ln=function(){function t(e){this.data={xs:{},targets:[]},this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};var n=this;n.api=e,n.config=new Rn,n.cache=new yd;var i=new ad;n.$el=i.getStore("element"),n.state=i.getStore("state")}return t.prototype.beforeInit=function(){var e=this;e.callPluginHook("$beforeInit"),st(e.config.onbeforeinit,e.api)},t.prototype.afterInit=function(){var e=this;e.callPluginHook("$afterInit"),st(e.config.onafterinit,e.api)},t.prototype.init=function(){var e=this,n=e.config,i=e.state,r=e.$el;i.hasAxis=!e.hasArcType(),i.hasRadar=!i.hasAxis&&e.hasType("radar"),e.initParams();var a={element:n.bindto,classname:"bb"};it(n.bindto)&&(a.element=n.bindto.element||"#chart",a.classname=n.bindto.classname||a.classname),r.chart=H(a.element.node)?n.bindto.element:P(a.element||[]),r.chart.empty()&&(r.chart=P(xt.body.appendChild(xt.createElement("div")))),r.chart.html("").classed(a.classname,!0),e.initToRender()},t.prototype.initToRender=function(e){var n=this,i=n.config,r=n.state,a=n.$el.chart,s=function(){return a.style("display")==="none"||a.style("visibility")==="hidden"},o=i.render.lazy||s(),u=ft.MutationObserver;if(o&&u&&i.render.observe!==!1&&!e&&new u(function(c,f){s()||(f.disconnect(),!r.rendered&&n.initToRender(!0))}).observe(a.node(),{attributes:!0,attributeFilter:["class","style"]}),!o||e){var l=n.convertData(i,n.initWithData);l&&n.initWithData(l),n.afterInit()}},t.prototype.initParams=function(){var e=this,n=e,i=n.config,r=n.format,a=n.state,s=i.axis_rotated;if(a.datetimeId="bb-"+ +new Date,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.hasPointType()&&(e.point=e.generatePoint()),a.hasAxis){e.initClip(),r.extraLineClasses=e.generateExtraLineClass(),r.dataTime=i.data_xLocaltime?wa:Aa,r.axisTime=i.axis_x_localtime?Ri:$a;var o=e.config.zoom_enabled&&e.config.zoom_type==="drag";r.defaultAxisTime=function(u){var l=e.scale,c=l.x,f=l.zoom,h=o?f:f&&c.orgDomain().toString()!==f.domain().toString(),d=u.getMilliseconds()&&".%L"||u.getSeconds()&&".:%S"||u.getMinutes()&&"%I:%M"||u.getHours()&&"%I %p"||u.getDate()!==1&&"%b %d"||h&&u.getDate()===1&&"%b'%y"||u.getMonth()&&"%-m/%-d"||"%Y";return r.axisTime(d)(u)}}a.isLegendRight=i.legend_position==="right",a.isLegendInset=i.legend_position==="inset",a.isLegendTop=i.legend_inset_anchor==="top-left"||i.legend_inset_anchor==="top-right",a.isLegendLeft=i.legend_inset_anchor==="top-left"||i.legend_inset_anchor==="bottom-left",a.rotatedPaddingRight=s&&!i.axis_x_show?0:30,a.inputType=md(i.interaction_inputType_mouse,i.interaction_inputType_touch)},t.prototype.initWithData=function(e){var n=this,i=n.config,r=n.scale,a=n.state,s=n.$el,o=n.org,u=a.hasAxis,l=i.interaction_enabled;u&&(n.axis=n.getAxisInstance(),i.zoom_enabled&&n.initZoom()),n.data.xs={},n.data.targets=n.convertDataToTargets(e),i.data_filter&&(n.data.targets=n.data.targets.filter(i.data_filter.bind(n.api))),i.data_hide&&n.addHiddenTargetIds(i.data_hide===!0?n.mapToIds(n.data.targets):i.data_hide),i.legend_hide&&n.addHiddenLegendIds(i.legend_hide===!0?n.mapToIds(n.data.targets):i.legend_hide),n.updateSizes(),n.updateScales(!0);var c=r.x,f=r.y,h=r.y2,d=r.subX,g=r.subY,v=r.subY2;if(c&&(c.domain(ye(n.getXDomain(n.data.targets))),d.domain(c.domain()),o.xDomain=c.domain()),f&&(f.domain(n.getYDomain(n.data.targets,"y")),g.domain(f.domain())),h&&(h.domain(n.getYDomain(n.data.targets,"y2")),v&&v.domain(h.domain())),s.svg=s.chart.append("svg").style("overflow","hidden").style("display","block"),l&&a.inputType){var p=a.inputType==="touch";s.svg.on(p?"touchstart":"mouseenter",function(){return st(i.onover,n.api)}).on(p?"touchend":"mouseleave",function(){return st(i.onout,n.api)})}i.svg_classname&&s.svg.attr("class",i.svg_classname);var _=H(i.color_tiles)&&n.patterns;(u||_)&&(s.defs=s.svg.append("defs"),u&&["id","idXAxis","idYAxis","idGrid"].forEach(function(m){n.appendClip(s.defs,a.clip[m])}),_&&n.patterns.forEach(function(m){return s.defs.append(function(){return m.node})})),n.updateSvgSize(),n.bindResize();var y=s.svg.append("g").classed(x.main,!0).attr("transform",n.getTranslate("main"));if(s.main=y,i.subchart_show&&n.initSubchart(),i.tooltip_show&&n.initTooltip(),i.title_text&&n.initTitle(),i.legend_show&&n.initLegend(),i.data_empty_label_text&&y.append("text").attr("class",x.text+" "+x.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),u&&(i.regions.length&&n.initRegion(),!i.clipPath&&n.axis.init()),y.append("g").attr("class",x.chart).attr("clip-path",a.clip.path),n.callPluginHook("$init"),u&&(l&&n.initEventRect&&n.initEventRect(),n.initGrid(),i.clipPath&&n.axis&&n.axis.init()),n.initChartElements(),n.updateTargets(n.data.targets),n.updateDimension(),st(i.oninit,n.api),n.setBackground(),n.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),i.data_onmin||i.data_onmax){var b=n.getMinMaxData();st(i.data_onmin,n.api,b.min),st(i.data_onmax,n.api,b.max)}i.tooltip_show&&n.initShowTooltip(),a.rendered=!0},t.prototype.initChartElements=function(){var e=this,n=e.state,i=n.hasAxis,r=n.hasRadar,a=[];i?["bar","bubble","candlestick","line"].forEach(function(s){var o=Ot(s);(s==="line"&&e.hasTypeOf(o)||e.hasType(s))&&a.push(o)}):(r||a.push("Arc","Pie"),e.hasType("gauge")?a.push("Gauge"):r&&a.push("Radar")),a.forEach(function(s){e["init"+s]()}),ut(e.config.data_labels)&&!e.hasArcType(null,["radar"])&&e.initText()},t.prototype.setChartElements=function(){var e=this,n=e.$el,i=n.chart,r=n.svg,a=n.defs,s=n.main,o=n.tooltip,u=n.legend,l=n.title,c=n.grid,f=n.arcs,h=n.circle,d=n.bar,g=n.candlestick,v=n.line,p=n.area,_=n.text;e.api.$={chart:i,svg:r,defs:a,main:s,tooltip:o,legend:u,title:l,grid:c,arc:f,circles:h,bar:{bars:d},candlestick:g,line:{lines:v,areas:p},text:{texts:_}}},t.prototype.setBackground=function(){var e=this,n=e.config.background,i=e.state,r=e.$el.svg;if(ut(n)){var a=r.select("g").insert(n.imgUrl?"image":"rect",":first-child");n.imgUrl?a.attr("href",n.imgUrl):n.color&&a.style("fill",n.color).attr("clip-path",i.clip.path),a.attr("class",n.class||null).attr("width","100%").attr("height","100%")}},t.prototype.updateTargets=function(e){var n=this,i=n.state,r=i.hasAxis,a=i.hasRadar;n.updateTargetsForText(e),r?(["bar","candlestick","line"].forEach(function(s){var o=Ot(s);(s==="line"&&n.hasTypeOf(o)||n.hasType(s))&&n["updateTargetsFor"+o](e.filter(n["is"+o+"Type"].bind(n)))}),n.updateTargetsForSubchart&&n.updateTargetsForSubchart(e)):n.hasArcType(e)&&(a?n.updateTargetsForRadar(e.filter(n.isRadarType.bind(n))):n.updateTargetsForArc(e.filter(n.isArcType.bind(n)))),(n.hasType("bubble")||n.hasType("scatter"))&&n.updateTargetForCircle&&n.updateTargetForCircle(),n.showTargets()},t.prototype.showTargets=function(){var e=this,n=e.config,i=e.$el.svg;i.selectAll("."+x.target).filter(function(r){return e.isTargetToShow(r.id)}).transition().duration(n.transition_duration).style("opacity","1")},t.prototype.getWithOption=function(e){var n={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return Object.keys(n).forEach(function(i){var r=n[i];ht(r)&&(r=n[r]),n[i]=Yt(e,"with"+i,r)}),n},t.prototype.initialOpacity=function(e){var n=this,i=n.state.withoutFadeIn;return n.getBaseValue(e)!==null&&i[e.id]?"1":"0"},t.prototype.bindResize=function(){var e=this,n=e.config,i=e.state,r=bd(),a=[];a.push(function(){return st(n.onresize,e,e.api)}),n.resize_auto&&a.push(function(){i.resizing=!0,e.api.flush(!1)}),a.push(function(){st(n.onresized,e,e.api),i.resizing=!1}),a.forEach(function(s){return r.add(s)}),e.resizeFunction=r,ft.addEventListener("resize",e.resizeFunction=r)},t.prototype.callPluginHook=function(e){for(var n=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];this.config.plugins.forEach(function(a){e==="$beforeInit"&&(a.$$=n,n.api.plugins.push(a)),a[e].apply(a,i)})},t}();Rt(Ln.prototype,[Td,wd,$d,Cd,kd,Rd,Ld,Ad,Ed,Dd,Fd,Id,Od,Pd,Nd,Xd,zd,Bd,Yd]);function Ud(t){var e=this.config,n,i,r,a=function(){var s=i.shift();if(s&&n&&It(n)&&s in n)return n=n[s],a();if(!s)return n};Object.keys(e).forEach(function(s){n=t,i=s.split("_"),r=a(),nt(r)&&(e[s]=r)})}var Vd={resize:function(t){var e=this.internal,n=e.config,i=e.state;i.rendered&&(n.size_width=t?t.width:null,n.size_height=t?t.height:null,i.resizing=!0,this.flush(!1,!0),e.resizeFunction())},flush:function(t){var e=this.internal,n=e.state;n.rendered?(n.resizing?e.brush&&e.brush.updateResize():e.axis&&e.axis.setOrient(),e.scale.zoom=null,t?e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!n.resizing&&e.brush&&(e.brush.getSelection().call(e.brush.move),e.unselectRect())):e.initToRender(!0)},destroy:function(){var t=this,e=this.internal,n=e.$el,i=n.chart,r=n.svg;if(ut(e)){e.callPluginHook("$willDestroy"),e.charts.splice(e.charts.indexOf(this),1),r.select("*").interrupt(),e.resizeFunction.clear(),ft.removeEventListener("resize",e.resizeFunction),i.classed("bb",!1).html(""),Object.keys(this).forEach(function(s){s==="internal"&&Object.keys(e).forEach(function(o){e[o]=null}),t[s]=null,delete t[s]});for(var a in this)this[a]=function(){}}return null},config:function(t,e,n){var i=this.internal,r=i.config,a=t&&t.replace(/\./g,"_"),s;return a in r&&(nt(e)?(r[a]=e,s=e,n&&this.flush()):s=r[a]),s}},Hd={color:function(t){return this.internal.color(t)}};function Ds(t){var e=this.internal.data.targets;if(!ot(t)){var n=et(t)?t:[t];return e.filter(function(i){return n.some(function(r){return r===i.id})})}return e}Rt(Ds,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,e){e===void 0&&(e=!0);var n=null;if(t){var i=this.data(t);i&&et(i)&&(n=[],i.forEach(function(r){var a=r.values.map(function(s){return s.value});e?n=n.concat(a):n.push(a)}))}return n},names:function(t){var e=this.internal;return e.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var Gd={data:Ds},Wd=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,n){return String.fromCharCode(Number("0x"+n))}))};function qd(t,e,n){var i=e||n,r=i.width,a=i.height,s=new XMLSerializer,o=t.cloneNode(!0),u=xd(we(xt.styleSheets)).filter(function(d){return d.cssText}).map(function(d){return d.cssText});o.setAttribute("xmlns",ve.xhtml);var l=s.serializeToString(o),c=xt.createElement("style");c.appendChild(xt.createTextNode(u.join(`
`)));var f=s.serializeToString(c),h=('<svg xmlns="'+ve.svg+'" width="'+r+'" height="'+a+`" 
		viewBox="0 0 `+n.width+" "+n.height+`" 
		preserveAspectRatio="`+(e&&e.preserveAspectRatio===!1?"none":"xMinYMid meet")+`">
			<foreignObject width="100%" height="100%">
				`+f+`
				`+l.replace(/(url\()[^#]+/g,"$1")+`
			</foreignObject></svg>`).replace(`/
/g`,"%0A");return"data:image/svg+xml;base64,"+Wd(h)}var Zd={export:function(t,e){var n=this,i=this.internal,r=i.state,a=i.$el.chart,s=r.current,o=s.width,u=s.height,l=me({width:o,height:u,preserveAspectRatio:!0,mimeType:"image/png"},t),c=qd(a.node(),l,{width:o,height:u});if(e&&H(e)){var f=new Image;f.crossOrigin="Anonymous",f.onload=function(){var h=xt.createElement("canvas"),d=h.getContext("2d");h.width=l.width||o,h.height=l.height||u,d.drawImage(f,0,0),e.bind(n)(h.toDataURL(l.mimeType))},f.src=c}return c}},jd={focus:function(t){var e=this.internal,n=e.state,i=e.mapToTargetIds(t),r=e.$el.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),r.classed(x.focused,!0).classed(x.defocused,!1),e.hasArcType()&&!n.hasRadar&&(e.expandArc(i),e.hasType("gauge")&&e.markOverlapped(t,e,"."+x.gaugeValue)),e.toggleFocusLegend(i,!0),n.focusedTargetIds=i,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(a){return i.indexOf(a)<0})},defocus:function(t){var e=this.internal,n=e.state,i=e.mapToTargetIds(t),r=e.$el.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e)));r.classed(x.focused,!1).classed(x.defocused,!0),e.hasArcType()&&(e.unexpandArc(i),e.hasType("gauge")&&e.undoMarkOverlapped(e,"."+x.gaugeValue)),e.toggleFocusLegend(i,!1),n.focusedTargetIds=n.focusedTargetIds.filter(function(a){return i.indexOf(a)<0}),n.defocusedTargetIds=i},revert:function(t){var e=this.internal,n=e.config,i=e.state,r=e.$el,a=e.mapToTargetIds(t),s=r.svg.selectAll(e.selectorTargets(a));s.classed(x.focused,!1).classed(x.defocused,!1),e.hasArcType()&&e.unexpandArc(a),n.legend_show&&(e.showLegend(a.filter(e.isLegendToShow.bind(e))),r.legend.selectAll(e.selectorLegends(a)).filter(function(){return P(this).classed(x.legendItemFocused)}).classed(x.legendItemFocused,!1)),i.focusedTargetIds=[],i.defocusedTargetIds=[]}},Kd={show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}},Jd={legend:Kd},Qd={load:function(t){var e=this.internal,n=e.config;t.xs&&e.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach(function(i){n.data_classes[i]=t.classes[i]}),"categories"in t&&e.axis.isCategorized()&&(n.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(i){n.data_axes[i]=t.axes[i]}),"colors"in t&&Object.keys(t.colors).forEach(function(i){n.data_colors[i]=t.colors[i]}),"unload"in t&&t.unload!==!1?e.unload(e.mapToTargetIds(t.unload===!0?null:t.unload),function(){return e.loadFromArgs(t)}):e.loadFromArgs(t)},unload:function(t){var e=this,n=this.internal,i=t||{};et(i)?i={ids:i}:ht(i)&&(i={ids:[i]});var r=n.mapToTargetIds(i.ids);n.unload(r,function(){n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.cache.remove(r),i.done&&i.done.call(e)})}};function jr(t,e,n){var i=this.internal,r=i.mapToTargetIds(e);i.state.toggling=!0,i[(t?"remove":"add")+"HiddenTargetIds"](r);var a=i.$el.svg.selectAll(i.selectorTargets(r)),s=t?"1":"0";t&&a.style("display",null),a.transition().style("opacity",s,"important").call(ji,function(){!t&&a.style("display","none"),a.style("opacity",s)}),n.withLegend&&i[(t?"show":"hide")+"Legend"](r),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.state.toggling=!1}var tg={show:function(t,e){e===void 0&&(e={}),jr.call(this,!0,t,e)},hide:function(t,e){e===void 0&&(e={}),jr.call(this,!1,t,e)},toggle:function(t,e){var n=this;e===void 0&&(e={});var i=this.internal,r={show:[],hide:[]};i.mapToTargetIds(t).forEach(function(a){return r[i.isTargetToShow(a)?"hide":"show"].push(a)}),r.show.length&&this.show(r.show,e),r.hide.length&&setTimeout(function(){return n.hide(r.hide,e)},0)}},eg={show:function(t){var e=this.internal,n=e.config,i=e.state.inputType,r,a;if(t.mouse&&(a=t.mouse),t.data){var s=t.data,o=e.getYScaleById(s.id)(s.value);e.isMultipleX()?a=[e.scale.x(s.x),o]:(n.tooltip_grouped||(a=[0,o]),r=B(s.index)?s.index:e.getIndexByX(s.x))}else nt(t.x)?r=e.getIndexByX(t.x):nt(t.index)&&(r=t.index);(i==="mouse"?["mouseover","mousemove"]:["touchstart"]).forEach(function(u){e.dispatchEvent(u,r,a)})},hide:function(){var t=this.internal,e=t.state.inputType,n=t.$el.tooltip,i=n&&n.datum();if(i){var r=JSON.parse(i.current)[0].index;(e==="mouse"?["mouseout"]:["touchend"]).forEach(function(a){t.dispatchEvent(a,r)})}e==="touch"&&t.callOverOutForTouch(),t.hideTooltip(!0),t.hideGridFocus(),t.unexpandCircles&&t.unexpandCircles(),t.expandBarTypeShapes(!1)}},ng={tooltip:eg},Ki=function(){function t(e){this.plugins=[];var n=new Ln(this);this.internal=n,function i(r,a,s){Object.keys(r).forEach(function(o){var u=H(r[o]),l=a!==s,c=Object.keys(r[o]).length>0;u&&(!l&&c||l)?a[o]=r[o].bind(s):u||(a[o]={}),c&&i(r[o],a[o],s)})}(t.prototype,this,this),Ud.call(n,e),n.beforeInit(),n.init()}return t}();Rt(Ki.prototype,[Vd,Hd,Gd,Zd,jd,Jd,Qd,tg,ng]);function Kr(t,e,n){var i=t.config,r="axis_x_"+e,a="axis_y_"+e,s="axis_y2_"+e;nt(n)&&(It(n)?(B(n.x)&&(i[r]=n.x),B(n.y)&&(i[a]=n.y),B(n.y2)&&(i[s]=n.y2)):(i[a]=n,i[s]=n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function Jr(t,e){var n=t.config;return{x:n["axis_x_"+e],y:n["axis_y_"+e],y2:n["axis_y2_"+e]}}var ig={labels:function(t){var e=this.internal,n;return t&&(Object.keys(t).forEach(function(i){e.axis.setLabelText(i,t[i])}),e.axis.updateLabels()),["x","y","y2"].forEach(function(i){var r=e.axis.getLabelText(i);r&&(!n&&(n={}),n[i]=r)}),n},min:function(t){var e=this.internal;return B(t)?Kr(e,"min",t):Jr(e,"min")},max:function(t){var e=this.internal;return arguments.length?Kr(e,"max",t):Jr(e,"max")},range:function(t){var e=this.axis;if(arguments.length)nt(t.max)&&e.max(t.max),nt(t.min)&&e.min(t.min);else return{max:e.max(),min:e.min()}}},rg={axis:ig},ag={category:function(t,e){var n=this.internal,i=n.config;return arguments.length>1&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},categories:function(t){var e=this.internal,n=e.config;return arguments.length&&(n.axis_x_categories=t,e.redraw()),n.axis_x_categories}};function Fs(t){var e=this.internal,n=e.config;return t&&(n.grid_x_lines=t,e.redrawWithoutRescale()),n.grid_x_lines}Rt(Fs,{add:function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!0)}});var sg={xgrids:Fs};function Is(t){var e=this.internal,n=e.config;return t&&(n.grid_y_lines=t,e.redrawWithoutRescale()),n.grid_y_lines}Rt(Is,{add:function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!1)}});var og={ygrids:Is},ug={groups:function(t){var e=this.internal,n=e.config;return ot(t)||(n.data_groups=t,e.redraw()),n.data_groups}};function Os(t){var e=this.internal,n=e.config;return t?(n.regions=t,e.redrawWithoutRescale(),t):n.regions}Rt(Os,{add:function(t){var e=this.internal,n=e.config;return t&&(n.regions=n.regions.concat(t),e.redrawWithoutRescale()),n.regions},remove:function(t){var e=this.internal,n=e.config,i=t||{},r=Yt(i,"duration",n.transition_duration),a=Yt(i,"classes",[x.region]),s=e.$el.main.select("."+x.regions).selectAll(a.map(function(o){return"."+o}));return(r?s.transition().duration(r):s).style("opacity","0").remove(),s=n.regions,Object.keys(i).length?(s=s.filter(function(o){var u=!1;return o.class?(o.class.split(" ").forEach(function(l){a.indexOf(l)>=0&&(u=!0)}),!u):!0}),n.regions=s):n.regions=[],s}});var lg={regions:Os},cg={x:function(t){var e=this.internal,n=e.axis,i=e.data,r=n.isCustomX()&&n.isCategorized();return et(t)&&(r?this.categories(t):(e.updateTargetX(i.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),r?this.categories():i.xs},xs:function(t){var e=this.internal;return it(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}},fg={flow:function(t){var e=this.internal,n,i,r=0,a=0,s,o;if((t.json||t.rows||t.columns)&&(n=e.convertData(t)),!(!n||!Ss())){var u=[],l=e.getMaxDataCount(),c=e.convertDataToTargets(n,!0),f=e.axis.isTimeSeries();e.data.targets.forEach(function(g){for(var v=!1,p=0;p<c.length;p++)if(g.id===c[p].id){v=!0,g.values[g.values.length-1]&&(a=g.values[g.values.length-1].index+1),r=c[p].values.length;for(var _=0;_<r;_++)c[p].values[_].index=a+_,f||(c[p].values[_].x=a+_);g.values=g.values.concat(c[p].values),c.splice(p,1);break}!v&&u.push(g.id)}),e.data.targets.forEach(function(g){for(var v=0;v<u.length;v++)if(g.id===u[v]){a=g.values[g.values.length-1].index+1;for(var p=0;p<r;p++)g.values.push({id:g.id,index:a+p,x:f?e.getOtherTargetX(a+p):a+p,value:null})}}),e.data.targets.length&&c.forEach(function(g){for(var v=[],p=e.data.targets[0].values[0].index;p<a;p++)v.push({id:g.id,index:p,x:f?e.getOtherTargetX(p):p,value:null});g.values.forEach(function(_){_.index+=a,f||(_.x+=a)}),g.values=v.concat(g.values)}),e.data.targets=e.data.targets.concat(c);var h=e.data.targets[0],d=h.values[0];nt(t.to)?(r=0,o=f?Pt.call(e,t.to):t.to,h.values.forEach(function(g){g.x<o&&r++})):nt(t.length)&&(r=t.length),l?l===1&&f&&(s=(h.values[h.values.length-1].x-d.x)/2,i=[new Date(+d.x-s),new Date(+d.x+s)]):(f?s=h.values.length>1?h.values[h.values.length-1].x-d.x:d.x-e.getXDomain(e.data.targets)[0]:s=1,i=[d.x-s,d.x]),i&&e.updateXDomain(null,!0,!0,!1,i),e.updateTargets(e.data.targets),e.redraw({flow:{index:d.index,length:r,duration:B(t.duration)?t.duration:e.config.transition_duration,done:t.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}},Qr=function(){function t(e){var n=te(),i=e.config,r=e.params;this.owner=e,this.config=i,this.scale=n,(i.noTransition||!r.config.transition_duration)&&(i.withoutTransition=!0),i.range=this.scaleExtent((r.orgXScale||n).range())}return t.getSizeFor1Char=function(e){var n={w:5.5,h:11.5};return!e.empty()&&e.select("text").text("0").call(function(i){try{var r=i.node().getBBox(),a=r.width,s=r.height;a&&s&&(n.w=a,n.h=s)}catch{}finally{i.text("")}}),this.getSizeFor1Char=function(){return n},n},t.prototype.getTickTransformSetter=function(e){var n=this.config,i=e==="x"?function(r){return"translate("+(r+n.tickOffset)+",0)"}:function(r){return"translate(0,"+r+")"};return function(r,a){r.attr("transform",function(s){return i(Math.ceil(a(s)))})}},t.prototype.scaleExtent=function(e){var n=e[0],i=e[e.length-1];return n<i?[n,i]:[i,n]},t.prototype.generateTicks=function(e,n){var i=this.owner.params.tickStepSize,r=e.domain(),a=r[0],s=r[1],o=[];if(n&&i)for(var u=a;u<=s;)o.push(u),u+=i;else if(e.ticks){var l=this.config.tickArguments;if(e.type==="log"&&!l){var c=te("_log").domain([a>0?a:1,s]).range(e.range());o=c.ticks();for(var f=s.toFixed().length;o.length>15;f--)o=c.ticks(f);o.splice(0,1,a),o.splice(o.length-1,1,s)}else o=e.ticks.apply(e,this.config.tickArguments||[]);o=o.map(function(d){var g=ht(d)&&j(d)&&!isNaN(d)&&Math.round(d*10)/10||d;return g})}else{for(var h=Math.ceil(a);h<s;h++)o.push(h);o.length>0&&o[0]>0&&o.unshift(o[0]-(o[1]-o[0]))}return o},t.prototype.copyScale=function(){var e=this.scale.copy();return e.domain().length||e.domain(this.scale.domain()),e.type=this.scale.type,e},t.prototype.textFormatted=function(e){var n=this.config.tickFormat,i=/\d+\.\d+0{5,}\d$/.test(e)?+String(e).replace(/0+\d$/,""):e,r=n?n(i):i;return nt(r)?r:""},t.prototype.transitionise=function(e){var n=this.config;return n.withoutTransition?e.interrupt():e.transition(n.transition)},t}(),hg=function(){function t(e){e===void 0&&(e={});var n={innerTickSize:6,outerTickSize:e.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:e.noTransition};n.tickLength=Math.max(n.innerTickSize,0)+n.tickPadding,this.config=n,this.params=e,this.helper=new Qr(this)}return t.prototype.create=function(e){var n=this,i=this,r=i.config,a=i.helper,s=i.params,o=a.scale,u=r.orient,l=this.splitTickText.bind(this),c=/^(left|right)$/.test(u),f=/^(top|bottom)$/.test(u),h=a.getTickTransformSetter(f?"x":"y"),d=h===a.axisX?"y":"x",g=/^(top|left)$/.test(u)?-1:1,v=s.tickTextRotate;this.config.range=o.rangeExtent?o.rangeExtent():a.scaleExtent((s.orgXScale||o).range());var p=r.innerTickSize,_=r.tickLength,y=r.range,b=s.id,m=b&&/^(x|y|y2)$/.test(b)?s.config["axis_"+b+"_tick_text_position"]:{x:0,y:0},w=b==="subX"?"subchart_axis_x":"axis_"+b,T=s.config[w+"_show"],$={tick:T?s.config[w+"_tick_show"]:!1,text:T?s.config[w+"_tick_text_show"]:!1},S;e.each(function(){var E=P(this),F=this.__chart__||o,C=a.copyScale();S=E,this.__chart__=C,r.tickOffset=s.isCategory?Math.ceil((C(1)-C(0))/2):0;var A=E.selectAll(".domain").data([0]);if(A.enter().append("path").attr("class","domain").merge(a.transitionise(A).selection()).attr("d",function(){var M=r.outerTickSize*g;return f?"M"+y[0]+","+M+"V0H"+y[1]+"V"+M:"M"+M+","+y[0]+"H0V"+y[1]+"H"+M}),$.tick||$.text){var R=r.tickValues||a.generateTicks(C,c),D=E.selectAll(".tick").data(R,C),X=D.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),G=D.exit().remove();D=X.merge(D),$.tick&&X.append("line"),$.text&&X.append("text");var W=Qr.getSizeFor1Char(D),K=[],O=D.select("text").selectAll("tspan").data(function(M,I){var tt=s.tickMultiline?l(M,C,R,c,W.w):et(a.textFormatted(M))?a.textFormatted(M).concat():[a.textFormatted(M)];return K[I]=tt.length,tt.map(function(ct){return{index:I,splitted:ct}})});O.exit().remove(),O=O.enter().append("tspan").merge(O).text(function(M){return M.splitted}),O.attr("x",f?0:_*g).attr("dx",function(){var M=0;return/(top|bottom)/.test(u)&&v&&(M=8*Math.sin(Math.PI*(v/180))*(u==="top"?-1:1)),M+(m.x||0)}()).attr("dy",function(M,I){var tt=".71em",ct=0;return u!=="top"&&(ct=W.h,I===0&&(ct=c?-((K[M.index]-1)*(W.h/2)-3):m.y===0?tt:0)),j(ct)&&m.y?ct+m.y:ct||tt});var rt=D.select("line"),U=D.select("text");if(X.select("line").attr(d+"2",p*g),X.select("text").attr(d,_*g),n.setTickLineTextPosition(rt,U),s.tickTitle){var Q=U.select("title");(Q.empty()?U.append("title"):Q).text(function(M){return s.tickTitle[M]})}if(C.bandwidth){var dt=C,J=dt.bandwidth()/2;F=function(M){return dt(M)+J},C=F}else F.bandwidth?F=C:h(G,C);h(X,F),h(a.transitionise(D).style("opacity","1"),C)}}),this.g=S},t.prototype.getTickXY=function(){var e=this.config,n={x:0,y:0};return this.params.isCategory&&(n.x=e.tickCentered?0:e.tickOffset,n.y=e.tickCentered?e.tickOffset:0),n},t.prototype.getTickSize=function(e){var n=this.helper.scale,i=this.config,r=i.innerTickSize,a=i.range,s=n(e)+(i.tickCentered?0:i.tickOffset);return a[0]<s&&s<a[1]?r:0},t.prototype.setTickLineTextPosition=function(e,n){var i=this.getTickXY(),r=this.config,a=r.innerTickSize,s=r.orient,o=r.tickLength,u=r.tickOffset,l=this.params.tickTextRotate,c=function(d){var g=["start","end"];return s==="top"&&g.reverse(),d?d>0?g[0]:g[1]:"middle"},f=function(d){return d?"rotate("+d+")":null},h=function(d){var g=d/(s==="bottom"?15:23);return d?11.5-2.5*g*(d>0?1:-1):o};switch(s){case"bottom":e.attr("x1",i.x).attr("x2",i.x).attr("y2",this.getTickSize.bind(this)),n.attr("x",0).attr("y",h(l)).style("text-anchor",c(l)).attr("transform",f(l));break;case"top":e.attr("x2",0).attr("y2",-a),n.attr("x",0).attr("y",-h(l)*2).style("text-anchor",c(l)).attr("transform",f(l));break;case"left":e.attr("x2",-a).attr("y1",i.y).attr("y2",i.y),n.attr("x",-o).attr("y",u).style("text-anchor","end");break;case"right":e.attr("x2",a).attr("y2",0),n.attr("x",o).attr("y",0).style("text-anchor","start")}},t.prototype.splitTickText=function(e,n,i,r,a){var s=this.params,o=this.helper.textFormatted(e),u=ht(o)&&o.indexOf(`
`)>-1?o.split(`
`):[];if(u.length)return u;if(et(o))return o;var l=s.tickWidth;(!l||l<=0)&&(l=r?95:s.isCategory?Math.ceil(n(i[1])-n(i[0]))-12:110);function c(f,h){for(var d,g,v,p=1;p<h.length;p++)if(h.charAt(p)===" "&&(g=p),d=h.substr(0,p+1),v=a*d.length,l<v)return c(f.concat(h.substr(0,g||p)),h.slice(g?g+1:p));return f.concat(h)}return c(u,String(o))},t.prototype.scale=function(e){return arguments.length?(this.helper.scale=e,this):this.helper.scale},t.prototype.orient=function(e){return arguments.length?(this.config.orient=e in{top:1,right:1,bottom:1,left:1}?String(e):"bottom",this):this.config.orient},t.prototype.tickFormat=function(e){var n=this.config;return arguments.length?(n.tickFormat=e,this):n.tickFormat},t.prototype.tickCentered=function(e){var n=this.config;return arguments.length?(n.tickCentered=e,this):n.tickCentered},t.prototype.tickOffset=function(){return this.config.tickOffset},t.prototype.tickInterval=function(e){var n=this,i;if(this.params.isCategory)i=this.config.tickOffset*2;else{var r=this.g.select("path.domain").node().getTotalLength()-this.config.outerTickSize*2;i=r/(e||this.g.selectAll("line").size());var a=this.config.tickValues.map(function(s,o,u){var l=o+1;return l<u.length?n.helper.scale(u[l])-n.helper.scale(s):null}).filter(Boolean);i=Math.min.apply(Math,bt(bt([],a),[i]))}return i===1/0?0:i},t.prototype.ticks=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=this.config;return e.length?(i.tickArguments=we(e),this):i.tickArguments},t.prototype.tickCulling=function(e){var n=this.config;return arguments.length?(n.tickCulling=e,this):n.tickCulling},t.prototype.tickValues=function(e){var n=this,i=this.config;if(H(e))i.tickValues=function(){return e(n.helper.scale.domain())};else{if(!arguments.length)return i.tickValues;i.tickValues=e}return this},t.prototype.setTransition=function(e){return this.config.transition=e,this},t}(),dg={getAxisInstance:function(){return this.axis||new gg(this)}},gg=function(){function t(e){this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=e,this.setOrient()}return t.prototype.getAxisClassName=function(e){return x.axis+" "+x["axis"+Ot(e)]},t.prototype.isHorizontal=function(e,n){var i=e.config.axis_rotated;return n?i:!i},t.prototype.isCategorized=function(){var e=this.owner,n=e.config,i=e.state;return n.axis_x_type.indexOf("category")>=0||i.hasRadar},t.prototype.isCustomX=function(){var e=this.owner.config;return!this.isTimeSeries()&&(e.data_x||ut(e.data_xs))},t.prototype.isTimeSeries=function(e){return e===void 0&&(e="x"),this.owner.config["axis_"+e+"_type"]==="timeseries"},t.prototype.isLog=function(e){return e===void 0&&(e="x"),this.owner.config["axis_"+e+"_type"]==="log"},t.prototype.isTimeSeriesY=function(){return this.isTimeSeries("y")},t.prototype.getAxisType=function(e){e===void 0&&(e="x");var n="linear";return this.isTimeSeries(e)?n="time":this.isLog(e)&&(n="log"),n},t.prototype.init=function(){var e=this,n=this.owner,i=n.config,r=n.$el,a=r.main,s=r.axis,o=n.state.clip,u=i.axis_rotated,l=["x","y"];i.axis_y2_show&&l.push("y2"),l.forEach(function(c){var f=e.getAxisClassName(c),h=x["axis"+c.toUpperCase()+"Label"];s[c]=a.append("g").attr("class",f).attr("clip-path",function(){var d=null;return c==="x"?d=o.pathXAxis:c==="y"&&(d=o.pathYAxis),d}).attr("transform",n.getTranslate(c)).style("visibility",i["axis_"+c+"_show"]?"visible":"hidden"),s[c].append("text").attr("class",h).attr("transform",["rotate(-90)",null][c==="x"?+!u:+u]).style("text-anchor",function(){return e.textAnchorForAxisLabel(c)}),e.generateAxes(c)})},t.prototype.setOrient=function(){var e=this.owner,n=e.config,i=n.axis_rotated,r=n.axis_y_inner,a=n.axis_y2_inner;this.orient={x:i?"left":"bottom",y:i?r?"top":"bottom":r?"right":"left",y2:i?a?"bottom":"top":a?"left":"right",subX:i?"left":"bottom"}},t.prototype.generateAxes=function(e){var n=this.owner,i=n.config,r=[],a=i["axis_"+e+"_axes"],s=i.axis_rotated,o;e==="x"?o=s?Hr:Vr:e==="y"?o=s?Vr:Hr:e==="y2"&&(o=s?ed:nd),a.length&&a.forEach(function(u){var l=u.tick||{},c=n.scale[e].copy();u.domain&&c.domain(u.domain),r.push(o(c).ticks(l.count).tickFormat(H(l.format)?l.format.bind(n.api):function(f){return f}).tickValues(l.values).tickSizeOuter(l.outer===!1?0:6))}),this.axesList[e]=r},t.prototype.updateAxes=function(){var e=this,n=this.owner,i=n.config,r=n.$el.main;Object.keys(this.axesList).forEach(function(a){var s=i["axis_"+a+"_axes"],o=n.scale[a].copy(),u=o.range();e.axesList[a].forEach(function(l,c){var f=l.scale().range();u.every(function(g,v){return g===f[v]})||l.scale().range(u);var h=e.getAxisClassName(a)+"-"+(c+1),d=r.select("."+h.replace(/\s/,"."));d.empty()?d=r.append("g").attr("class",h).style("visibility",i["axis_"+a+"_show"]?"visible":"hidden").call(l):(s[c].domain&&o.domain(s[c].domain),e.x.helper.transitionise(d).call(l.scale(o))),d.attr("transform",n.getTranslate(a,c+1))})})},t.prototype.setAxis=function(e,n,i,r){var a=this.owner;e!=="subX"&&(this.tick[e]=this.getTickValues(e)),this[e]=this.getAxis(e,n,i,e==="x"&&(a.scale.zoom||a.config.subchart_show||a.state.resizing)?!0:r)},t.prototype.getAxis=function(e,n,i,r,a){var s=this.owner,o=s.config,u=/^(x|subX)$/.test(e),l=u?"x":e,c=u&&this.isCategorized(),f=this.orient[e],h=a?0:s.getAxisTickRotate(l),d;if(u)d=s.format.xAxisTick;else{var g=o["axis_"+e+"_tick_format"];H(g)&&(d=g.bind(s.api))}var v=this.tick[l],p=me({outerTick:i,noTransition:r,config:o,id:e,tickTextRotate:h},u&&{isCategory:c,tickMultiline:o.axis_x_tick_multiline,tickWidth:o.axis_x_tick_width,tickTitle:c&&o.axis_x_tick_tooltip&&s.api.categories(),orgXScale:s.scale.x});u||(p.tickStepSize=o["axis_"+l+"_tick_stepSize"]);var _=new hg(p).scale(u&&s.scale.zoom||n).orient(f);if(u&&this.isTimeSeries()&&v&&!H(v)){var y=Pt.bind(s);v=v.map(function(m){return y(m)})}else!u&&this.isTimeSeriesY()&&(_.ticks(o.axis_y_tick_time_value),v=null);v&&_.tickValues(v),_.tickFormat(d||!u&&s.isStackNormalized()&&function(m){return m+"%"}),c&&(_.tickCentered(o.axis_x_tick_centered),Sn(o.axis_x_tick_culling)&&(o.axis_x_tick_culling=!1));var b=o["axis_"+l+"_tick_count"];return b&&_.ticks(b),_},t.prototype.updateXAxisTickValues=function(e,n){var i=this.owner,r=i.config,a=r.axis_x_tick_fit,s=r.axis_x_tick_count,o;return(a||s&&a)&&(o=i.mapTargetsToUniqueXs(e),this.isCategorized()&&s>o.length&&(s=o.length),o=this.generateTickValues(o,s,this.isTimeSeries())),n?n.tickValues(o):this.x&&(this.x.tickValues(o),this.subX&&this.subX.tickValues(o)),o},t.prototype.getId=function(e){var n=this.owner,i=n.config,r=n.scale,a=i.data_axes[e];return(!a||!r[a])&&(a="y"),a},t.prototype.getXAxisTickFormat=function(){var e=this.owner,n=e.config,i=e.format,r=n.axis_x_tick_format,a=this.isTimeSeries(),s=this.isCategorized(),o;return r?H(r)?o=r.bind(e.api):a&&(o=function(u){return u?i.axisTime(r)(u):""}):o=a?i.defaultAxisTime:s?e.categoryName:function(u){return u<0?u.toFixed(0):u},H(o)?function(u){return o.apply(e,s?[u,e.categoryName(u)]:[u])}:o},t.prototype.getTickValues=function(e){var n=this.owner,i=n.config["axis_"+e+"_tick_values"],r=n[e+"Axis"];return(H(i)?i.call(n.api):i)||(r?r.tickValues():void 0)},t.prototype.getLabelOptionByAxisId=function(e){return this.owner.config["axis_"+e+"_label"]},t.prototype.getLabelText=function(e){var n=this.getLabelOptionByAxisId(e);return ht(n)?n:n?n.text:null},t.prototype.setLabelText=function(e,n){var i=this.owner,r=i.config,a=this.getLabelOptionByAxisId(e);ht(a)?r["axis_"+e+"_label"]=n:a&&(a.text=n)},t.prototype.getLabelPosition=function(e,n){var i=this.owner.config.axis_rotated,r=this.getLabelOptionByAxisId(e),a=It(r)&&r.position?r.position:n[+!i],s=function(o){return!!~a.indexOf(o)};return{isInner:s("inner"),isOuter:s("outer"),isLeft:s("left"),isCenter:s("center"),isRight:s("right"),isTop:s("top"),isMiddle:s("middle"),isBottom:s("bottom")}},t.prototype.getAxisLabelPosition=function(e){return this.getLabelPosition(e,e==="x"?["inner-top","inner-right"]:["inner-right","inner-top"])},t.prototype.getLabelPositionById=function(e){return this.getAxisLabelPosition(e)},t.prototype.xForAxisLabel=function(e){var n=this.owner,i=n.state,r=i.width,a=i.height,s=this.getAxisLabelPosition(e),o=s.isMiddle?-a/2:0;return this.isHorizontal(n,e!=="x")?o=s.isLeft?0:s.isCenter?r/2:r:s.isBottom&&(o=-a),o},t.prototype.dxForAxisLabel=function(e){var n=this.owner,i=this.getAxisLabelPosition(e),r=i.isBottom?"0.5em":"0";return this.isHorizontal(n,e!=="x")?r=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(r="-0.5em"),r},t.prototype.textAnchorForAxisLabel=function(e){var n=this.owner,i=this.getAxisLabelPosition(e),r=i.isMiddle?"middle":"end";return this.isHorizontal(n,e!=="x")?r=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(r="start"),r},t.prototype.dyForAxisLabel=function(e){var n=this.owner,i=n.config,r=i.axis_rotated,a=this.getAxisLabelPosition(e).isInner,s=i["axis_"+e+"_tick_rotate"]?n.getHorizontalAxisHeight(e):0,o=this.getMaxTickWidth(e),u;if(e==="x"){var l=i.axis_x_height;r?u=a?"1.2em":-25-o:a?u="-0.5em":l?u=l-10:s?u=s-10:u="3em"}else u={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[e],r?a?u=u[0]:s?u=s*(e==="y2"?-1:1)-u[1]:u=u[2]:u=a?u[3]:(u[4]+(i["axis_"+e+"_inner"]?0:o+u[4]))*(e==="y"?-1:1);return u},t.prototype.getMaxTickWidth=function(e,n){var i=this.owner,r=i.config,a=i.state.current,s=i.$el,o=s.svg,u=s.chart,l=a.maxTickWidths[e],c=0;if(n||!r["axis_"+e+"_show"]||i.filterTargetsToShow().length===0)return l.size;if(o){var f=/^y2?$/.test(e),h=i.filterTargetsToShow(i.data.targets),d=i.scale[e].copy().domain(i["get"+(f?"Y":"X")+"Domain"](h,e)),g=d.domain(),v=g[0]===g[1]&&g.every(function(w){return w>0}),p=et(l.domain)&&l.domain[0]===l.domain[1]&&l.domain.every(function(w){return w>0});if(v||p)return l.size;l.domain=g,f||l.ticks.splice(0);var _=this.getAxis(e,d,!1,!1,!0),y=r["axis_"+e+"_tick_count"],b=r["axis_"+e+"_tick_values"];!b&&y&&_.tickValues(this.generateTickValues(g,y,f?this.isTimeSeriesY():this.isTimeSeries())),!f&&this.updateXAxisTickValues(h,_);var m=u.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");_.create(m),m.selectAll("text").each(function(w,T){var $=this.getBoundingClientRect().width;c=Math.max(c,$),f||(l.ticks[T]=$)}),m.remove()}return c>0&&(l.size=c),l.size},t.prototype.getXAxisTickTextY2Overflow=function(e){var n=this.owner,i=n.axis,r=n.config,a=n.state,s=n.getAxisTickRotate("x"),o=s>0&&s<90;if((i.isCategorized()||i.isTimeSeries())&&r.axis_x_tick_fit&&!r.axis_x_tick_culling&&!r.axis_x_tick_multiline&&o){var u=a.current.width-n.getCurrentPaddingLeft(),l=this.getXAxisTickMaxOverflow(s,u-e),c=Math.max(0,l)+e;return Math.min(c,u/2)}return 0},t.prototype.getXAxisTickMaxOverflow=function(e,n){for(var i=this.owner,r=i.axis,a=i.config,s=i.state,o=r.isTimeSeries(),u=s.current.maxTickWidths.x.ticks,l=u.length,c=s.axis.x.padding,f=c.left,h=c.right,d=0,g=l-(o&&a.axis_x_tick_fit?.5:0),v=0;v<l;v++){var p=v+1,_=Math.cos(Math.PI*e/180)*u[v],y=p-(o?1:.5)+f;if(!(y<=0)){var b=n-_,m=b/y,w=g-p,T=h*m,$=w*m+T,S=_-m/2-$;d=Math.max(d,S)}}var E=i.filterTargetsToShow(i.data.targets),F=0;if(!o&&a.axis_x_tick_count<=E.length&&E[0].values.length){var C=te(i.axis.getAxisType("x"),0,n-d).domain([f*-1,i.getXDomainMax(i.data.targets)+1+h]);F=Math.ceil((C(1)-C(0))/2)}return d+F},t.prototype.getXAxisPadding=function(e){var n=this.owner,i=n.config.axis_x_padding,r=j(i)?{left:i,right:i}:i,a=r.left,s=a===void 0?0:a,o=r.right,u=o===void 0?0:o;if(n.axis.isTimeSeries()){var l=+n.getXDomainMin(n.data.targets),c=+n.getXDomainMax(n.data.targets),f=c-l,h=f+s+u;if(e&&h){var d=f/e/h;s=s/h/d,u=u/h/d}}return{left:s,right:u}},t.prototype.updateLabels=function(e){var n=this,i=this.owner,r=i.$el.main,a={x:r.select("."+x.axisX+" ."+x.axisXLabel),y:r.select("."+x.axisY+" ."+x.axisYLabel),y2:r.select("."+x.axisY2+" ."+x.axisY2Label)};Object.keys(a).filter(function(s){return!a[s].empty()}).forEach(function(s){var o=a[s];(e?o.transition():o).attr("x",function(){return n.xForAxisLabel(s)}).attr("dx",function(){return n.dxForAxisLabel(s)}).attr("dy",function(){return n.dyForAxisLabel(s)}).text(function(){return n.getLabelText(s)})})},t.prototype.getPadding=function(e,n,i,r){var a=j(e)?e:e[n];return B(a)?this.convertPixelsToAxisPadding(a,r):i},t.prototype.convertPixelsToAxisPadding=function(e,n){var i=this.owner,r=i.config,a=i.state,s=a.width,o=a.height,u=r.axis_rotated?s:o;return n*(e/u)},t.prototype.generateTickValues=function(e,n,i){var r=e;if(n){var a=H(n)?n():n;if(a===1)r=[e[0]];else if(a===2)r=[e[0],e[e.length-1]];else if(a>2){var s=this.isCategorized(),o=a-2,u=e[0],l=e[e.length-1],c=(l-u)/(o+1),f=void 0;r=[u];for(var h=0;h<o;h++)f=+u+c*(h+1),r.push(i?new Date(f):s?Math.round(f):f);r.push(l)}}return i||(r=r.sort(function(d,g){return d-g})),r},t.prototype.generateTransitions=function(e){var n=this.owner,i=n.$el.axis,r=["x","y","y2","subX"].map(function(l){var c=i[l];return c&&e&&(c=c.transition().duration(e)),c}),a=r[0],s=r[1],o=r[2],u=r[3];return{axisX:a,axisY:s,axisY2:o,axisSubX:u}},t.prototype.redraw=function(e,n,i){var r=this,a=this.owner,s=a.config,o=a.$el,u=n?"0":"1";["x","y","y2","subX"].forEach(function(l){var c=r[l],f=o.axis[l];c&&f&&(!i&&!s.transition_duration&&(c.config.withoutTransition=!0),f.style("opacity",u),c.create(e["axis"+Ot(l)]))}),this.updateAxes()},t.prototype.redrawAxis=function(e,n,i,r,a){var s=this,o=this.owner,u=o.config,l=o.scale,c=o.$el,f=!!l.zoom,h;!f&&this.isCategorized()&&e.length===0&&l.x.domain([0,c.axis.x.selectAll(".tick").size()]),l.x&&e.length?(!f&&o.updateXDomain(e,n.UpdateXDomain,n.UpdateOrgXDomain,n.TrimXDomain),u.axis_x_tick_values||this.updateXAxisTickValues(e)):this.x&&(this.x.tickValues([]),this.subX&&this.subX.tickValues([])),u.zoom_rescale&&!r&&(h=l.x.orgDomain()),["y","y2"].forEach(function(d){var g=l[d];if(g){var v=u["axis_"+d+"_tick_values"],p=u["axis_"+d+"_tick_count"];if(g.domain(o.getYDomain(e,d,h)),!v&&p){var _=o.axis[d],y=g.domain();_.tickValues(s.generateTickValues(y,y.every(function(b){return b===0})?1:p,s.isTimeSeriesY()))}}}),this.redraw(i,o.hasArcType(),a),this.updateLabels(n.Transition),(n.UpdateXDomain||n.UpdateXAxis||n.Y)&&e.length&&this.setCulling(),n.Y&&(l.subY&&l.subY.domain(o.getYDomain(e,"y")),l.subY2&&l.subY2.domain(o.getYDomain(e,"y2")))},t.prototype.setCulling=function(){var e=this.owner,n=e.config,i=e.state,r=i.clip,a=i.current,s=e.$el;["subX","x","y","y2"].forEach(function(o){var u=s.axis[o],l=o==="subX"?"x":o,c=n["axis_"+l+"_tick_culling"];if(u&&c){var f=u.selectAll(".tick text"),h=ye(f.data()),d=h.length,g=n["axis_"+l+"_tick_culling_max"],v;if(d){for(var p=1;p<d;p++)if(d/p<g){v=p;break}f.each(function(y){this.style.display=h.indexOf(y)%v?"none":"block"})}else f.style("display","block");if(o==="x"){var _=a.maxTickWidths.x.clipPath?r.pathXAxisTickTexts:null;s.svg.selectAll("."+x.axisX+" .tick text").attr("clip-path",_)}}})},t}(),vg={initEventRect:function(){var t=this;t.$el.main.select("."+x.chart).append("g").attr("class",x.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t=this,e=t.config,n=t.state,i=t.$el,r=t.isMultipleX();if(i.eventRect)t.updateEventRect(i.eventRect,!0);else{var a=t.$el.main.select("."+x.eventRects).style("cursor",e.zoom_enabled&&e.zoom_type!=="drag"?e.axis_rotated?"ns-resize":"ew-resize":null).classed(x.eventRectsMultiple,r).classed(x.eventRectsSingle,!r),s=a.selectAll("."+x.eventRect).data([0]).enter().append("rect");t.updateEventRect(s),r?t.generateEventRectsForMultipleXs(s):t.generateEventRectsForSingleX(s),s.call(t.getDraggableSelection()),i.eventRect=s,t.state.inputType==="touch"&&!i.svg.on("touchstart.eventRect")&&!t.hasArcType()&&t.bindTouchOnEventRect(r)}if(!r){var o=t.getMaxDataCountTarget();t.updateDataIndexByX(o),t.updateXs(o),t.updatePointClass&&t.updatePointClass(!0),n.eventReceiver.data=o}t.updateEventRectData()},bindTouchOnEventRect:function(t){var e=this,n=e.config,i=e.state,r=e.$el,a=r.eventRect,s=r.svg,o=function(g){if(t)e.selectRectForMultipleXs(g);else{var v=e.getDataIndexFromEvent(i.event);e.callOverOutForTouch(v),v===-1?e.unselectRect():e.selectRectForSingle(g,a,v)}},u=function(){e.unselectRect(),e.callOverOutForTouch()},l=n.interaction_inputType_touch.preventDefault,c=ks(l)&&l||!1,f=!isNaN(l)&&l||null,h,d=function(g){var v=g.type,p=g.changedTouches[0],_=p["client"+(n.axis_rotated?"Y":"X")];v==="touchstart"?c?g.preventDefault():f!==null&&(h=_):v==="touchmove"&&(c||h===!0||f!==null&&Math.abs(h-_)>=f)&&(h=!0,g.preventDefault())};a.on("touchstart",function(g){i.event=g,e.updateEventRect()}).on("touchstart.eventRect touchmove.eventRect",function(g){if(i.event=g,!a.empty()&&a.classed(x.eventRect)){if(i.dragging||i.flowing||e.hasArcType()||g.touches.length>1)return;d(g),o(a.node())}else u()},!0).on("touchend.eventRect",function(g){i.event=g,!a.empty()&&a.classed(x.eventRect)&&(e.hasArcType()||!e.toggleShape||i.cancelClick)&&i.cancelClick&&(i.cancelClick=!1)},!0),s.on("touchstart",function(g){i.event=g;var v=g.target;v&&v!==a.node()&&u()})},updateEventRect:function(t,e){e===void 0&&(e=!1);var n=this,i=n.state,r=n.$el,a=i.eventReceiver,s=i.width,o=i.height,u=i.rendered,l=i.resizing,c=t||r.eventRect,f=function(){a&&(a.rect=c.node().getBoundingClientRect())};(!u||l||e)&&(c.attr("x",0).attr("y",0).attr("width",s).attr("height",o),u||c.attr("class",x.eventRect)),f()},updateEventRectData:function(){var t=this,e=t.config,n=t.scale,i=t.state,r=n.zoom||n.x,a=e.axis_rotated,s,o,u,l;if(t.isMultipleX())s=0,o=0,u=i.width,l=i.height;else{var c,f=void 0;if(t.axis.isCategorized())c=t.getEventRectWidth(),f=function(v){return r(v.x)-c/2};else{var h=function(v){var p=v.index;return{prev:t.getPrevX(p),next:t.getNextX(p)}};c=function(v){var p=h(v);return p.prev===null&&p.next===null?a?i.height:i.width:(p.prev===null&&(p.prev=r.domain()[0]),p.next===null&&(p.next=r.domain()[1]),Math.max(0,(r(p.next)-r(p.prev))/2))},f=function(v){var p=h(v),_=v.x;return p.prev===null&&p.next===null?0:(p.prev===null&&(p.prev=r.domain()[0]),(r(_)+r(p.prev))/2)}}s=a?0:f,o=a?f:0,u=a?i.width:c,l=a?c:i.height}var d=i.eventReceiver,g=function(v,p){return H(v)?v(p):v};d.coords.splice(d.data.length),d.data.forEach(function(v,p){d.coords[p]={x:g(s,v),y:g(o,v),w:g(u,v),h:g(l,v)}})},selectRectForMultipleXs:function(t){var e=this,n=e.config,i=e.state,r=e.filterTargetsToShow(e.data.targets);if(!(i.dragging||e.hasArcType(r))){var a=Ut(i.event,t),s=e.findClosestFromTargets(r,a);if(i.mouseover&&(!s||s.id!==i.mouseover.id)&&(n.data_onout.call(e.api,i.mouseover),i.mouseover=void 0),!s){e.unselectRect();return}var o=e.isBubbleType(s)||e.isScatterType(s)||!n.tooltip_grouped?[s]:e.filterByX(r,s.x),u=o.map(function(l){return e.addName(l)});e.showTooltip(u,t),e.setExpand(s.index,s.id,!0),e.showGridFocus(u),(e.isBarType(s.id)||e.dist(s,a)<n.point_sensitivity)&&(e.$el.svg.select("."+x.eventRect).style("cursor","pointer"),i.mouseover||(n.data_onover.call(e.api,s),i.mouseover=s))}},unselectRect:function(){var t=this,e=t.config,n=t.$el,i=n.circle,r=n.tooltip;t.$el.svg.select("."+x.eventRect).style("cursor",null),t.hideGridFocus(),r&&(t.hideTooltip(),t._handleLinkedCharts(!1)),i&&!e.point_focus_only&&t.unexpandCircles(),t.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(t){var e=this,n=e.config,i=e.state,r=i.eventReceiver,a=t.style("cursor",n.data_selection_enabled&&n.data_selection_grouped?"pointer":null).on("click",function(o){i.event=o;var u=r.currentIdx,l=r.data,c=l[u===-1?e.getDataIndexFromEvent(o):u];e.clickHandlerForSingleX.bind(this)(c,e)});if(i.inputType==="mouse"){var s=function(o){var u=o?e.getDataIndexFromEvent(o):r.currentIdx;return u>-1?r.data[u]:null};a.on("mouseover",function(o){i.event=o,e.updateEventRect()}).on("mousemove",function(o){var u=s(o);if(i.event=o,!(i.dragging||i.flowing||e.hasArcType()||!u||n.tooltip_grouped&&u&&u.index===r.currentIdx)){var l=u.index;e.isStepType(u)&&n.line_step_type==="step-after"&&Ut(o,this)[0]<e.scale.x(e.getXValue(u.id,l))&&(l-=1),l!==r.currentIdx&&(e.setOverOut(!1,r.currentIdx),r.currentIdx=l),l===-1?e.unselectRect():e.selectRectForSingle(this,a,l),e.setOverOut(l!==-1,l)}}).on("mouseout",function(o){i.event=o,!(!n||e.hasArcType()||r.currentIdx===-1)&&(e.unselectRect(),e.setOverOut(!1,r.currentIdx),r.currentIdx=-1)})}return a},clickHandlerForSingleX:function(t,e){var n=e,i=n.config,r=n.state,a=n.$el.main;if(!t||n.hasArcType()||r.cancelClick){r.cancelClick&&(r.cancelClick=!1);return}var s=t.index;a.selectAll("."+x.shape+"-"+s).each(function(o){(i.data_selection_grouped||n.isWithinShape(this,o))&&(n.toggleShape&&n.toggleShape(this,o,s),i.data_onclick.bind(n.api)(o,this))})},generateEventRectsForMultipleXs:function(t){var e=this,n=e.state;t.on("click",function(i){n.event=i,e.clickHandlerForMultipleXS.bind(this)(e)}),n.inputType==="mouse"&&t.on("mouseover mousemove",function(i){n.event=i,e.selectRectForMultipleXs(this)}).on("mouseout",function(i){n.event=i,!(!e.config||e.hasArcType())&&e.unselectRect()})},clickHandlerForMultipleXS:function(t){var e=t,n=e.config,i=e.state,r=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(r)){var a=Ut(i.event,this),s=e.findClosestFromTargets(r,a);!s||(e.isBarType(s.id)||e.dist(s,a)<n.point_sensitivity)&&e.$el.main.selectAll("."+x.shapes+e.getTargetSelectorSuffix(s.id)).selectAll("."+x.shape+"-"+s.index).each(function(){(n.data_selection_grouped||e.isWithinShape(this,s))&&(e.toggleShape&&e.toggleShape(this,s,s.index),n.data_onclick.bind(e.api)(s,this))})}}},pg={generateFlow:function(t){var e=this,n=e.data,i=e.state,r=e.$el;return function(){var a=t.flow.length;i.flowing=!0,n.targets.forEach(function(o){o.values.splice(0,a)}),e.updateXGrid&&e.updateXGrid(!0);var s={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(o){var u=o.split("."),l=r[u[0]];l&&u.length>1&&(l=l[u[1]]),l&&l.size()&&(s[o]=l)}),e.hideGridFocus(),e.setFlowList(s,t)}},setFlowList:function(t,e){var n=this,i=e.flow,r=e.targets,a=i.duration,s=a===void 0?e.duration:a,o=i.index,u=i.length,l=i.orgDataCount,c=n.getFlowTransform(r,l,o,u),f=Es(),h;f.add(Object.keys(t).map(function(d){return h=t[d].transition().ease(Df).duration(s),d==="axis.x"?h=h.call(function(g){n.axis.x.setTransition(g).create(g)}):d==="region.list"?h=h.filter(n.isRegionOnX).attr("transform",c):h=h.attr("transform",c),h})),h.call(f,function(){n.cleanUpFlow(t,e)})},cleanUpFlow:function(t,e){var n=this,i=n.config,r=n.state,a=n.$el.svg,s=i.axis_rotated,o=e.flow,u=e.shape,l=e.xv,c=u.pos,f=c.cx,h=c.cy,d=c.xForText,g=c.yForText,v=o.done,p=v===void 0?function(){}:v,_=o.length;_&&(["circle","text","shape","eventRect"].forEach(function(y){for(var b=[],m=0;m<_;m++)b.push("."+x[y]+"-"+m);a.selectAll("."+x[y+"s"]).selectAll(b).remove()}),a.select("."+x.xgrid).remove()),Object.keys(t).forEach(function(y){var b=t[y];if(y!=="axis.x"&&b.attr("transform",null),y==="grid.x")b.attr(r.xgridAttr);else if(y==="gridLines.x")b.attr("x1",s?0:l).attr("x2",s?r.width:l);else if(y==="gridLines.x")b.select("line").attr("x1",s?0:l).attr("x2",s?r.width:l),b.select("text").attr("x",s?r.width:0).attr("y",l);else if(/^(area|bar|line)$/.test(y))b.attr("d",u.type[y]);else if(y==="text")b.attr("x",d).attr("y",g).style("fill-opacity",n.opacityForText.bind(n));else if(y==="circle")if(n.isCirclePoint())b.attr("cx",f).attr("cy",h);else{var m=function(T){return f(T)-i.point_r},w=function(T){return h(T)-i.point_r};b.attr("x",m).attr("y",w).attr("cx",f).attr("cy",h)}else y==="region.list"&&b.select("rect").filter(n.isRegionOnX).attr("x",n.regionX.bind(n)).attr("width",n.regionWidth.bind(n))}),i.interaction_enabled&&n.redrawEventRect(),p.call(n.api),r.flowing=!1},getFlowTransform:function(t,e,n,i){var r=this,a=r.data,s=r.scale.x,o=a.targets[0].values,u=r.getValueOnIndex(o,n),l=r.getValueOnIndex(o,n+i),c,f=s.domain(),h=r.updateXDomain(t,!0,!0);e?e===1||(u&&u.x)===(l&&l.x)?c=s(f[0])-s(h[0]):c=r.axis.isTimeSeries()?s(f[0])-s(h[0]):s(u.x)-s(l.x):o.length!==1?c=s(f[0])-s(h[0]):r.axis.isTimeSeries()?(u=r.getValueOnIndex(o,0),l=r.getValueOnIndex(o,o.length-1),c=s(u.x)-s(l.x)):c=tn(h)/2;var d=tn(f)/tn(h);return"translate("+c+",0) scale("+d+",1)"}},xg={initClip:function(){var t=this,e=t.state.clip;e.id=t.state.datetimeId+"-clip",e.idXAxis=e.id+"-xaxis",e.idYAxis=e.id+"-yaxis",e.idGrid=e.id+"-grid",e.path=t.getClipPath(e.id),e.pathXAxis=t.getClipPath(e.idXAxis),e.pathYAxis=t.getClipPath(e.idYAxis),e.pathGrid=t.getClipPath(e.idGrid)},getClipPath:function(t){var e=this,n=e.config;if(!n.clipPath&&/-clip$/.test(t)||!n.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!n.axis_y_clipPath&&/-clip-yaxis$/.test(t))return null;var i=ft.navigator?ft.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0:!1;return"url("+(i?"":xt.URL.split("#")[0])+"#"+t+")"},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){var e=this,n=e.config,i=e.state,r=i.margin,a=i.width,s=i.height,o=n.axis_rotated,u=Math.max(30,r.left)-(o?0:20),l=o?-(1+u):-(u-1),c=-Math.max(15,r.top),f=o?r.left+20:a+10+u,h=(o?r.top+s+10:r.bottom)+20;t.attr("x",l).attr("y",c).attr("width",f).attr("height",h)},setYAxisClipPath:function(t){var e=this,n=e.config,i=e.state,r=i.margin,a=i.width,s=i.height,o=n.axis_rotated,u=Math.max(30,r.left)-(o?20:0),l=n.axis_y_inner,c=l?-1:o?-(1+u):-(u-1),f=-(o?20:r.top),h=(o?a+15+u:r.left+20)+(l?20:0),d=(o?r.bottom:r.top+s)+10;t.attr("x",c).attr("y",f).attr("width",h).attr("height",d)},updateXAxisTickClip:function(){var t=this,e=t.config,n=t.state,i=n.clip,r=n.xAxisHeight,a=t.$el.defs,s=t.getHorizontalAxisHeight("x");if(a&&!i.idXAxisTickTexts){var o=i.id+"-xaxisticktexts";t.appendClip(a,o),i.pathXAxisTickTexts=t.getClipPath(i.idXAxisTickTexts),i.idXAxisTickTexts=o}!e.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&s!==r&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.state.xAxisHeight=s},setXAxisTickClipWidth:function(){var t=this,e=t.config,n=t.state.current.maxTickWidths,i=t.getAxisTickRotate("x");if(!e.axis_x_tick_multiline&&i){var r=Math.sin(Math.PI/180*Math.abs(i));n.x.clipPath=(t.getHorizontalAxisHeight("x")-20)/r}else n.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var t=this,e=t.state,n=e.clip,i=e.current,r=t.$el.svg;r&&r.select("#"+n.idXAxisTickTexts+" rect").attr("width",i.maxTickWidths.x.clipPath).attr("height",30)}},ta=function(t){return B(t.position)||"end"},ea=function(t){return t.position==="start"?4:t.position==="middle"?0:-4};function na(t,e,n){return function(i){var r=t?0:e;return i.position==="start"?r=t?-n:0:i.position==="middle"&&(r=(t?-n:e)/2),r}}function ia(t,e){e==="grid"&&t.each(function(){var n=P(this);["x1","x2","y1","y2"].forEach(function(i){return n.attr(i,Math.ceil(+n.attr(i)))})})}var _g={hasGrid:function(){var t=this.config;return["x","y"].some(function(e){return t["grid_"+e+"_show"]||t["grid_"+e+"_lines"].length})},initGrid:function(){var t=this;t.hasGrid()&&t.initGridLines(),t.initFocusGrid()},initGridLines:function(){var t=this,e=t.config,n=t.state.clip,i=t.$el;(e.grid_x_lines.length||e.grid_y_lines.length)&&(i.gridLines.main=i.main.insert("g","."+x.chart+(e.grid_lines_front?" + *":"")).attr("clip-path",n.pathGrid).attr("class",x.grid+" "+x.gridLines),i.gridLines.main.append("g").attr("class",x.xgridLines),i.gridLines.main.append("g").attr("class",x.ygridLines),i.gridLines.x=Pa([]))},updateXGrid:function(t){var e=this,n=e.config,i=e.scale,r=e.state,a=e.$el,s=a.main,o=a.grid,u=n.axis_rotated,l=e.generateGridData(n.grid_x_type,i.x),c=e.axis.isCategorized()?e.axis.x.tickOffset():0,f=function(h){return(i.zoom||i.x)(h)+c*(u?-1:1)};r.xgridAttr=u?{x1:0,x2:r.width,y1:f,y2:f}:{x1:f,x2:f,y1:0,y2:r.height},o.x=s.select("."+x.xgrids).selectAll("."+x.xgrid).data(l),o.x.exit().remove(),o.x=o.x.enter().append("line").attr("class",x.xgrid).merge(o.x),t||o.x.each(function(){var h=P(this);Object.keys(r.xgridAttr).forEach(function(d){h.attr(d,r.xgridAttr[d]).style("opacity",function(){return h.attr(u?"y1":"x1")===(u?r.height:0)?"0":"1"})})})},updateYGrid:function(){var t=this,e=t.config,n=t.state,i=t.$el,r=i.grid,a=i.main,s=e.axis_rotated,o=t.axis.y.tickValues()||t.scale.y.ticks(e.grid_y_ticks),u=function(l){return Math.ceil(t.scale.y(l))};r.y=a.select("."+x.ygrids).selectAll("."+x.ygrid).data(o),r.y.exit().remove(),r.y=r.y.enter().append("line").attr("class",x.ygrid).merge(r.y),r.y.attr("x1",s?u:0).attr("x2",s?u:n.width).attr("y1",s?0:u).attr("y2",s?n.height:u),ia(r.y,"grid")},updateGrid:function(t){var e=this,n=e.$el,i=n.grid,r=n.gridLines;!r.main&&e.initGridLines(),i.main.style("visibility",e.hasArcType()?"hidden":"visible"),e.hideGridFocus(),e.updateXGridLines(t),e.updateYGridLines(t)},updateXGridLines:function(t){var e=this,n=e.config,i=e.$el,r=i.gridLines,a=i.main,s=n.axis_rotated;n.grid_x_show&&e.updateXGrid();var o=a.select("."+x.xgridLines).selectAll("."+x.xgridLine).data(n.grid_x_lines);o.exit().transition().duration(t).style("opacity","0").remove();var u=o.enter().append("g");u.append("line").style("opacity","0"),u.append("text").attr("transform",s?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),o=u.merge(o),o.attr("class",function(l){return(x.xgridLine+" "+(l.class||"")).trim()}).select("text").attr("text-anchor",ta).attr("dx",ea).transition().duration(t).text(function(l){return l.text}).transition().style("opacity","1"),r.x=o},updateYGridLines:function(t){var e=this,n=e.config,i=e.state,r=i.width,a=i.height,s=e.$el,o=n.axis_rotated;n.grid_y_show&&e.updateYGrid();var u=s.main.select("."+x.ygridLines).selectAll("."+x.ygridLine).data(n.grid_y_lines);u.exit().transition().duration(t).style("opacity","0").remove();var l=u.enter().append("g");l.append("line").style("opacity","0"),l.append("text").attr("transform",o?"rotate(-90)":"").style("opacity","0"),u=l.merge(u);var c=e.yv.bind(e);u.attr("class",function(f){return(x.ygridLine+" "+(f.class||"")).trim()}).select("line").transition().duration(t).attr("x1",o?c:0).attr("x2",o?c:r).attr("y1",o?0:c).attr("y2",o?a:c).transition().style("opacity","1"),u.select("text").attr("text-anchor",ta).attr("dx",ea).transition().duration(t).attr("dy",-5).attr("x",na(o,r,a)).attr("y",c).text(function(f){return f.text}).transition().style("opacity","1"),s.gridLines.y=u},redrawGrid:function(t){var e=this,n=e.config.axis_rotated,i=e.state,r=i.width,a=i.height,s=e.$el.gridLines,o=e.xv.bind(e),u=s.x.select("line"),l=s.x.select("text");return u=(t?u.transition():u).attr("x1",n?0:o).attr("x2",n?r:o).attr("y1",n?o:0).attr("y2",n?o:a),l=(t?l.transition():l).attr("x",na(!n,r,a)).attr("y",o).text(function(c){return c.text}),[u.style("opacity","1"),l.style("opacity","1")]},initFocusGrid:function(){var t=this,e=t.config,n=t.state.clip,i=t.$el,r=e.grid_front,a="."+x[r&&i.gridLines.main?"gridLines":"chart"]+(r?" + *":""),s=i.main.insert("g",a).attr("clip-path",n.pathGrid).attr("class",x.grid);i.grid.main=s,e.grid_x_show&&s.append("g").attr("class",x.xgrids),e.grid_y_show&&s.append("g").attr("class",x.ygrids),e.interaction_enabled&&e.grid_focus_show&&(s.append("g").attr("class",x.xgridFocus).append("line").attr("class",x.xgridFocus),e.grid_focus_y&&!e.tooltip_grouped&&s.append("g").attr("class",x.ygridFocus).append("line").attr("class",x.ygridFocus))},showGridFocus:function(t){var e=this,n=e.config,i=e.state,r=i.width,a=i.height,s=n.axis_rotated,o=e.$el.main.selectAll("line."+x.xgridFocus+", line."+x.ygridFocus),u=(t||[o.datum()]).filter(function(f){return f&&B(e.getBaseValue(f))});if(!(!n.tooltip_show||u.length===0||e.hasType("bubble")||e.hasArcType())){var l=n.grid_focus_edge&&!n.tooltip_grouped,c=e.xx.bind(e);o.style("visibility","visible").data(u.concat(u)).each(function(f){var h=P(this),d={x:c(f),y:e.getYScaleById(f.id)(f.value)},g;if(h.classed(x.xgridFocus))g=s?[null,d.x,l?d.y:r,d.x]:[d.x,l?d.y:null,d.x,a];else{var v=e.axis.getId(f.id)==="y2";g=s?[d.y,l&&!v?d.x:null,d.y,l&&v?d.x:a]:[l&&v?d.x:null,d.y,l&&!v?d.x:r,d.y]}["x1","y1","x2","y2"].forEach(function(p,_){return h.attr(p,g[_])})}),ia(o,"grid"),e.showCircleFocus&&e.showCircleFocus(t)}},hideGridFocus:function(){var t=this,e=t.state,n=e.inputType,i=e.resizing,r=t.$el.main;(n==="mouse"||!i)&&(r.selectAll("line."+x.xgridFocus+", line."+x.ygridFocus).style("visibility","hidden"),t.hideCircleFocus&&t.hideCircleFocus())},updateGridFocus:function(){var t=this,e=t.state,n=e.inputType,i=e.width,r=e.height,a=e.resizing,s=t.$el.grid,o=s.main.select("line."+x.xgridFocus);if(n==="touch")o.empty()?a&&t.showCircleFocus():t.showGridFocus();else{var u=t.config.axis_rotated;o.attr("x1",u?0:-10).attr("x2",u?i:-10).attr("y1",u?-10:0).attr("y2",u?-10:r)}return!0},generateGridData:function(t,e){var n=this,i=n.$el.main.select("."+x.axisX).selectAll(".tick").size(),r=[];if(t==="year")for(var a=n.getXDomain(),s=a[0].getFullYear(),o=a[1].getFullYear(),u=s;u<=o;u++)r.push(new Date(u+"-01-01 00:00:00"));else r=e.ticks(10),r.length>i&&(r=r.filter(function(l){return String(l).indexOf(".")<0}));return r},getGridFilterToRemove:function(t){return t?function(e){var n=!1;return(et(t)?t.concat():[t]).forEach(function(i){("value"in i&&e.value===i.value||"class"in i&&e.class===i.class)&&(n=!0)}),n}:function(){return!0}},removeGridLines:function(t,e){var n=this,i=n.config,r=n.getGridFilterToRemove(t),a=function(l){return!r(l)},s=e?x.xgridLines:x.ygridLines,o=e?x.xgridLine:x.ygridLine;n.$el.main.select("."+s).selectAll("."+o).filter(r).transition().duration(i.transition_duration).style("opacity","0").remove();var u="grid_"+(e?"x":"y")+"_lines";i[u]=i[u].filter(a)}},mg={initRegion:function(){var t=this,e=t.$el;e.region.main=e.main.append("g").attr("clip-path",t.state.clip.path).attr("class",x.regions)},updateRegion:function(t){var e=this,n=e.config,i=e.$el;i.region.main||e.initRegion(),i.region.main.style("visibility",e.hasArcType()?"hidden":"visible");var r=i.main.select("."+x.regions).selectAll("."+x.region).data(n.regions);r.exit().transition().duration(t).style("opacity","0").remove(),r=r.enter().append("g").merge(r).attr("class",e.classRegion.bind(e)),r.append("rect").style("fill-opacity","0"),i.region.list=r},redrawRegion:function(t){var e=this,n=e.$el.region.list.select("rect");return n=(t?n.transition():n).attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)),[(t?n.transition():n).style("fill-opacity",function(i){return B(i.opacity)?i.opacity:"0.1"}).on("end",function(){P(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function(t,e){var n=this,i=n.config,r=n.scale,a=i.axis_rotated,s=t==="x",o="start",u,l=0;return e.axis==="y"||e.axis==="y2"?(s||(o="end"),(s?a:!a)&&o in e&&(u=r[e.axis],l=u(e[o]))):(s?!a:a)&&o in e&&(u=r.zoom||r.x,l=u(n.axis.isTimeSeries()?Pt.call(n,e[o]):e[o])),l},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var n=this,i=n.config,r=n.scale,a=n.state,s=i.axis_rotated,o=t==="width",u=n[o?"regionX":"regionY"](e),l,c="end",f=a[t];return e.axis==="y"||e.axis==="y2"?(o||(c="start"),(o?s:!s)&&c in e&&(l=r[e.axis],f=l(e[c]))):(o?!s:s)&&c in e&&(l=r.zoom||r.x,f=l(n.axis.isTimeSeries()?Pt.call(n,e[c]):e[c])),f<u?0:f-u},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||t.axis==="x"}},yg={getAxisSize:function(t){var e=this,n=e.config.axis_rotated;return n&&t==="x"||!n&&/y2?/.test(t)?e.getAxisWidthByAxisId(t,!0):e.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){var n=this;if(n.axis){var i=n.axis&&n.axis.getLabelPositionById(t);return n.axis.getMaxTickWidth(t,e)+(i.isInner?20:40)}else return 40},getHorizontalAxisHeight:function(t){var e=this,n=e.config,i=e.state,r=i.current,a=i.rotatedPadding,s=i.isLegendRight,o=i.isLegendInset,u=n.axis_rotated,l=30;if(t==="x"&&!n.axis_x_show)return 8;if(t==="x"&&n.axis_x_height)return n.axis_x_height;if(t==="y"&&!n.axis_y_show)return n.legend_show&&!s&&!o?10:1;if(t==="y2"&&!n.axis_y2_show)return a.top;var c=e.getAxisTickRotate(t);return(t==="x"&&!u||/y2?/.test(t)&&u)&&c&&(l=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(c))/180),!n.axis_x_tick_multiline&&r.height&&l>r.height/2&&(l=r.height/2)),l+(e.axis.getLabelPositionById(t).isInner?0:10)+(t==="y2"&&!u?-10:0)},getEventRectWidth:function(){return Math.max(0,this.axis.x.tickInterval())},getAxisTickRotate:function(t){var e=this,n=e.axis,i=e.config,r=e.state,a=e.$el,s=i["axis_"+t+"_tick_rotate"];if(t==="x"){var o=n.isCategorized()||n.isTimeSeries();if(i.axis_x_tick_fit&&o){var u=i.axis_x_tick_count,l=r.current.maxTickWidths.x.ticks.length,c=0;u?c=u>l?l:u:l&&(c=l),c!==r.axis.x.tickCount&&(r.axis.x.padding=e.axis.getXAxisPadding(c)),r.axis.x.tickCount=c}a.svg&&i.axis_x_tick_fit&&!i.axis_x_tick_multiline&&!i.axis_x_tick_culling&&i.axis_x_tick_autorotate&&o&&(s=e.needToRotateXAxisTickTexts()?i.axis_x_tick_rotate:0)}return s},needToRotateXAxisTickTexts:function(){var t=this,e=t.state,n=e.axis,i=e.current,r=i.width-t.getCurrentPaddingLeft(!1)-t.getCurrentPaddingRight(),a=n.x.tickCount+n.x.padding.left+n.x.padding.right,s=t.axis.getMaxTickWidth("x"),o=a?r/a:0;return s>o}},bg={data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},Tg={axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]},wg={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},$g={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]},Ag=St(St(St({axis_rotated:!1},Tg),wg),$g),kg={grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0},Cg=[rg,ag,sg,og,fg,ug,lg,cg],Mg=[dg,xg,vg,pg,_g,mg,yg],Sg=[bg,Ag,kg],Rg={initPie:function(){var t=this,e=t.config,n=e.data_type,i=e.pie_padding,r=e[n+"_startingAngle"]||0,a=(t.hasType("pie")&&i?i*.01:e[n+"_padAngle"])||0;t.pie=Lh().startAngle(r).endAngle(r+2*Math.PI).padAngle(a).value(function(s){return s.values.reduce(function(o,u){return o+u.value},0)}).sort(t.getSortCompareFn.bind(t)(!0))},updateRadius:function(){var t=this,e=t.config,n=t.state,i=e.pie_padding,r=e.gauge_width||e.donut_width,a=t.filterTargetsToShow(t.data.targets).length*e.gauge_arcs_minWidth;n.radiusExpanded=Math.min(n.arcWidth,n.arcHeight)/2*(t.hasMultiArcGauge()?.85:1),n.radius=n.radiusExpanded*.95,n.innerRadiusRatio=r?(n.radius-r)/n.radius:.6,n.gaugeArcWidth=r||(a<=n.radius-n.innerRadius?n.radius-n.innerRadius:a<=n.radius?a:n.radius);var s=e.pie_innerRadius||(i?i*(n.innerRadiusRatio+.1):0);n.outerRadius=e.pie_outerRadius,n.innerRadius=t.hasType("donut")||t.hasType("gauge")?n.radius*n.innerRadiusRatio:s},getRadius:function(t){var e=this,n=t&&t.data,i=e.state,r=i.innerRadius,a=i.outerRadius;return!j(r)&&n&&(r=r[n.id]||0),it(a)&&n&&n.id in a?a=a[n.id]:j(a)||(a=e.state.radius),{innerRadius:r,outerRadius:a}},updateArc:function(){var t=this;t.updateRadius(),t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded()},getArcLength:function(){var t=this,e=t.config,n=e.gauge_arcLength*3.6,i=2*(n/360);return n<-360?i=-2:n>360&&(i=2),i*Math.PI},getStartAngle:function(){var t=this,e=t.config,n=e.gauge_fullCircle,i=-1*Math.PI/2,r=Math.PI/2,a=e.gauge_startingAngle;return!n&&a<=i?a=i:!n&&a>=r?a=r:(a>Math.PI||a<-1*Math.PI)&&(a=Math.PI),a},updateAngle:function(t){var e=this,n=e.config,i=e.state,r=e.pie,a=t,s=!1;if(!n)return null;var o=e.getStartAngle(),u=n.gauge_fullCircle?e.getArcLength():o*-2;if(a.data&&e.isGaugeType(a.data)&&!e.hasMultiArcGauge()){var l=e.getTotalDataSum(i.rendered),c=u*(l/(n.gauge_max-n.gauge_min));r=r.startAngle(o).endAngle(c+o)}if(r(e.filterTargetsToShow()).forEach(function(v,p){!s&&v.data.id===a.data.id&&(s=!0,a=v,a.index=p)}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),a.data&&e.hasMultiArcGauge()){var f=n.gauge_min,h=n.gauge_max,d=u/(h-f),g=a.value<f?0:a.value<h?a.value-f:h-f;a.startAngle=o,a.endAngle=o+d*g}return s?a:null},getSvgArc:function(){var t=this,e=t.state,n=e.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,i=t.hasMultiArcGauge(),r=Nr().innerRadius(function(s){var o=t.getRadius(s).innerRadius;return i?e.radius-n*(s.index+1):j(o)?o:0}).outerRadius(function(s){var o=t.getRadius(s).outerRadius;return i?e.radius-n*s.index:o}),a=function(s,o){var u="M 0 0";if(s.value||s.data){var l=!o&&t.updateAngle(s);o?u=r(s):l&&(u=r(l))}return u};return a.centroid=r.centroid,a},getSvgArcExpanded:function(t){var e=this,n=e.state,i=t||1,r=n.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,a=e.hasMultiArcGauge(),s=Math.min(n.radiusExpanded*i-n.radius,r*.8-(1-i)*100),o=Nr().innerRadius(function(u){return a?n.radius-r*(u.index+1):e.getRadius(u).innerRadius}).outerRadius(function(u){var l;if(a)l=n.radius-r*u.index+s;else{var c=e.getRadius(u).outerRadius,f=n.radiusExpanded;n.radius!==c&&(f-=Math.abs(n.radius-c)),l=f*i}return l});return function(u){var l=e.updateAngle(u);return l?o(l):"M 0 0"}},getArc:function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function(t){var e=this,n=e.config,i=e.state.radiusExpanded,r=e.updateAngle(t),a="";if(r){if(e.hasMultiArcGauge()){var s=Math.sin(r.endAngle-Math.PI/2),o=Math.cos(r.endAngle-Math.PI/2)*(i+25),u=s*(i+15-Math.abs(s*10))+3;a="translate("+o+","+u+")"}else if(!e.hasType("gauge")||e.data.targets.length>1){var l=e.getRadius(t).outerRadius,c=this.svgArc.centroid(r),o=isNaN(c[0])?0:c[0],u=isNaN(c[1])?0:c[1],f=Math.sqrt(o*o+u*u),h=e.hasType("donut")&&n.donut_label_ratio||e.hasType("pie")&&n.pie_label_ratio;h?h=H(h)?h.bind(e.api)(t,l,f):h:h=l&&(f?(36/l>.375?1.175-36/l:.8)*l/f:0),a="translate("+o*h+","+u*h+")"}}return a},convertToArcData:function(t){return this.addName({id:t.data?t.data.id:t.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function(t){var e=this,n=e.hasType("gauge");e.shouldShowArcLabel()&&t.style("fill",e.updateTextColor.bind(e)).each(function(i){var r=P(this),a=e.updateAngle(i),s=e.getRatio("arc",a),o=e.meetsLabelThreshold(s,e.hasType("donut")&&"donut"||e.hasType("gauge")&&"gauge"||e.hasType("pie")&&"pie");if(o){var u=(a||i).value,l=(e.getArcLabelFormat()||e.defaultArcValueFormat)(u,s,i.data.id).toString();ze(r,l,[-1,1],n)}else r.text("")})},expandArc:function(t){var e=this,n=e.state.transiting,i=e.$el;if(n){var r=setInterval(function(){n||(clearInterval(r),i.legend.selectAll("."+x.legendItemFocused).size()>0&&e.expandArc(t))},10);return}var a=e.mapToTargetIds(t);i.svg.selectAll(e.selectorTargets(a,"."+x.chartArc)).each(function(s){if(!!e.shouldExpand(s.data.id)){var o=e.getExpandConfig(s.data.id,"duration"),u=e.getSvgArcExpanded(e.getExpandConfig(s.data.id,"rate"));P(this).selectAll("path").transition().duration(o).attr("d",e.svgArcExpanded).transition().duration(o*2).attr("d",u)}})},unexpandArc:function(t){var e=this,n=e.state.transiting,i=e.$el.svg;if(!n){var r=e.mapToTargetIds(t);i.selectAll(e.selectorTargets(r,"."+x.chartArc)).selectAll("path").transition().duration(function(a){return e.getExpandConfig(a.data.id,"duration")}).attr("d",e.svgArc),i.selectAll(""+x.arc).style("opacity","1")}},getExpandConfig:function(t,e){var n=this,i=n.config,r={duration:50,rate:.98},a;return n.isDonutType(t)?a="donut":n.isGaugeType(t)?a="gauge":n.isPieType(t)&&(a="pie"),a?i[a+"_expand_"+e]:r[e]},shouldExpand:function(t){var e=this,n=e.config;return e.isDonutType(t)&&n.donut_expand||e.isGaugeType(t)&&n.gauge_expand||e.isPieType(t)&&n.pie_expand},shouldShowArcLabel:function(){var t=this,e=t.config;return["pie","donut","gauge"].some(function(n){return t.hasType(n)&&e[n+"_label_show"]})},getArcLabelFormat:function(){var t=this,e=t.config,n=e.pie_label_format;return t.hasType("gauge")?n=e.gauge_label_format:t.hasType("donut")&&(n=e.donut_label_format),H(n)?n.bind(t.api):n},getArcTitle:function(){var t=this,e=t.hasType("donut")&&"donut"||t.hasType("gauge")&&"gauge";return e?t.config[e+"_title"]:""},updateTargetsForArc:function(t){var e=this,n=e.$el,i=e.hasType("gauge"),r=e.getChartClass("Arc"),a=e.getClass("arcs",!0),s=e.classFocus.bind(e),o=n.main.select("."+x.chartArcs),u=o.selectAll("."+x.chartArc).data(e.pie(t)).attr("class",function(c){return r(c)+s(c.data)}),l=u.enter().append("g").attr("class",r);l.append("g").attr("class",a).merge(u),l.append("text").attr("dy",i&&!e.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor","middle").style("pointer-events","none"),n.text=o.selectAll("."+x.target+" text")},initArc:function(){var t=this,e=t.$el;e.arcs=e.main.select("."+x.chart).append("g").attr("class",x.chartArcs).attr("transform",t.getTranslate("arc")),t.setArcTitle()},setArcTitle:function(){var t=this,e=t.getArcTitle(),n=t.hasType("gauge");if(e){var i=t.$el.arcs.append("text").attr("class",x[n?"chartArcsGaugeTitle":"chartArcsTitle"]).style("text-anchor","middle");n&&i.attr("dy","-0.3em").style("font-size","27px"),ze(i,e,n?void 0:[-.6,1.35],!0)}},redrawArc:function(t,e,n){var i=this,r=i.config,a=i.state,s=i.$el.main,o=r.interaction_enabled,u=o&&r.data_selection_isselectable,l=s.selectAll("."+x.arcs).selectAll("."+x.arc).data(i.arcData.bind(i));l.exit().transition().duration(e).style("opacity","0").remove(),l=l.enter().append("path").attr("class",i.getClass("arc",!0)).style("fill",function(c){return i.color(c.data)}).style("cursor",function(c){return u&&u.bind(i.api)(c)?"pointer":null}).style("opacity","0").each(function(c){i.isGaugeType(c.data)&&(c.startAngle=r.gauge_startingAngle,c.endAngle=r.gauge_startingAngle),this._current=c}).merge(l),i.hasType("gauge")&&(i.updateGaugeMax(),i.hasMultiArcGauge()&&i.redrawMultiArcGauge()),l.attr("transform",function(c){return!i.isGaugeType(c.data)&&n?"scale(0)":""}).style("opacity",function(c){return c===this._current?"0":"1"}).each(function(){a.transiting=!0}).transition().duration(t).attrTween("d",function(c){var f=i.updateAngle(c);if(!f)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var h=bn(this._current,f);return this._current=h(0),function(d){var g=h(d);return g.data=c.data,i.getArc(g,!0)}}).attr("transform",n?"scale(1)":"").style("fill",function(c){var f;return i.levelColor?(f=i.levelColor(c.data.values[0].value),r.data_colors[c.data.id]=f):f=i.color(c.data),f}).style("opacity","1").call(ji,function(){if(i.levelColor){var c=P(this),f=c.datum();i.updateLegendItemColor(f.data.id,c.style("fill"))}a.transiting=!1,st(r.onrendered,i.api)}),o&&i.bindArcEvent(l),i.hasType("gauge")&&i.redrawBackgroundArcs(),i.redrawArcText(t)},redrawBackgroundArcs:function(){var t=this,e=t.config,n=t.state,i=t.hasMultiArcGauge(),r=e.gauge_fullCircle,a=t.getStartAngle(),s=r?a+t.getArcLength():a*-1,o=t.$el.arcs.select((i?"g":"")+"."+x.chartArcsBackground);if(i){var u=0;o=o.selectAll("path."+x.chartArcsBackground).data(t.data.targets),o.enter().append("path").attr("class",function(l,c){return x.chartArcsBackground+" "+x.chartArcsBackground+"-"+c}).merge(o).style("fill",e.gauge_background||null).attr("d",function(l){var c=l.id;if(n.hiddenTargetIds.indexOf(c)>=0)return"M 0 0";var f={data:[{value:e.gauge_max}],startAngle:a,endAngle:s,index:u++};return t.getArc(f,!0,!0)}),o.exit().remove()}else o.attr("d",function(){var l={data:[{value:e.gauge_max}],startAngle:a,endAngle:s};return t.getArc(l,!0,!0)})},bindArcEvent:function(t){var e=this,n=e.config,i=e.state,r=i.inputType==="touch",a=i.inputType==="mouse";function s(l,c,f){e.expandArc(f),e.api.focus(f),e.toggleFocusLegend(f,!0),e.showTooltip([c],l)}function o(l){var c=l&&l.id||void 0;e.unexpandArc(c),e.api.revert(),e.revertLegend(),e.hideTooltip()}if(t.on("click",function(l,c,f){var h=e.updateAngle(c),d;h&&(d=e.convertToArcData(h),e.toggleShape&&e.toggleShape(this,d,f),n.data_onclick.bind(e.api)(d,this))}),a&&t.on("mouseover",function(l,c){if(!i.transiting){i.event=l;var f=e.updateAngle(c),h=f?e.convertToArcData(f):null,d=h&&h.id||void 0;s(this,h,d),e.setOverOut(!0,h)}}).on("mouseout",function(l,c){if(!i.transiting){i.event=l;var f=e.updateAngle(c),h=f?e.convertToArcData(f):null;o(),e.setOverOut(!1,h)}}).on("mousemove",function(l,c){var f=e.updateAngle(c),h=f?e.convertToArcData(f):null;i.event=l,e.showTooltip([h],this)}),r&&e.hasArcType()&&!e.radars){var u=function(l){var c=l.changedTouches[0],f=P(xt.elementFromPoint(c.clientX,c.clientY));return f};e.$el.svg.on("touchstart touchmove",function(l){if(!i.transiting){var c=u(l),f=c.datum(),h=f&&f.data&&f.data.id?e.updateAngle(f):null,d=h?e.convertToArcData(h):null,g=d&&d.id||void 0;e.callOverOutForTouch(d),ot(g)?o():s(this,d,g)}})}},redrawArcText:function(t){var e=this,n=e.config,i=e.state,r=e.$el,a=r.main,s=r.arcs,o=e.hasType("gauge"),u=e.hasMultiArcGauge(),l;if(o&&e.data.targets.length===1&&n.gauge_title||(l=a.selectAll("."+x.chartArc).select("text").style("opacity","0").attr("class",function(f){return e.isGaugeType(f.data)?x.gaugeValue:null}).call(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(f){return e.isGaugeType(f.data)&&e.data.targets.length===1&&!u?Math.round(i.radius/5)+"px":null}).transition().duration(t).style("opacity",function(f){return e.isTargetToShow(f.data.id)&&e.isArcType(f.data)?"1":"0"}),u&&l.attr("dy","-.1em")),a.select("."+x.chartArcsTitle).style("opacity",e.hasType("donut")||o?"1":"0"),o){var c=n.gauge_fullCircle;c&&l&&l.attr("dy",""+(u?0:Math.round(i.radius/14))),n.gauge_label_show&&(s.select("."+x.chartArcsGaugeUnit).attr("dy",(c?1.5:.75)+"em").text(n.gauge_units),s.select("."+x.chartArcsGaugeMin).attr("dx",-1*(i.innerRadius+(i.radius-i.innerRadius)/(c?1:2))+"px").attr("dy","1.2em").text(e.textForGaugeMinMax(n.gauge_min,!1)),!c&&s.select("."+x.chartArcsGaugeMax).attr("dx",i.innerRadius+(i.radius-i.innerRadius)/2+"px").attr("dy","1.2em").text(e.textForGaugeMinMax(n.gauge_max,!0)))}}},En={initArea:function(t){var e=this,n=e.config;t.insert("g","."+x[n.area_front?"circles":"lines"]).attr("class",e.getClass("areas",!0))},updateAreaGradient:function(){var t=this,e=t.config,n=t.state.datetimeId,i=t.$el.defs;t.data.targets.forEach(function(r){var a=n+"-areaGradient"+t.getTargetSelectorSuffix(r.id);if(t.isAreaType(r)&&i.select("#"+a).empty()){var s=t.color(r),o=e.area_linearGradient,u=o.x,l=u===void 0?[0,0]:u,c=o.y,f=c===void 0?[0,1]:c,h=o.stops,d=h===void 0?[[0,s,1],[1,s,0]]:h,g=i.append("linearGradient").attr("id",""+a).attr("x1",l[0]).attr("x2",l[1]).attr("y1",f[0]).attr("y2",f[1]);d.forEach(function(v){var p=H(v[1])?v[1].bind(t.api)(r.id):v[1];g.append("stop").attr("offset",v[0]).attr("stop-color",p||s).attr("stop-opacity",v[2])})}})},updateAreaColor:function(t){var e=this;return e.config.area_linearGradient?"url(#"+e.state.datetimeId+"-areaGradient"+e.getTargetSelectorSuffix(t.id)+")":e.color(t)},updateArea:function(t,e){e===void 0&&(e=!1);var n=this,i=n.config,r=n.state,a=n.$el,s=e?a.subchart:a;i.area_linearGradient&&n.updateAreaGradient();var o=s.main.selectAll("."+x.areas).selectAll("."+x.area).data(n.lineData.bind(n));o.exit().transition().duration(t).style("opacity","0").remove(),s.area=o.enter().append("path").attr("class",n.getClass("area",!0)).style("fill",n.updateAreaColor.bind(n)).style("opacity",function(){return r.orgAreaOpacity=P(this).style("opacity"),"0"}).merge(o),o.style("opacity",r.orgAreaOpacity)},redrawArea:function(t,e,n){n===void 0&&(n=!1);var i=this,r=(n?this.$el.subchart:this.$el).area,a=i.state.orgAreaOpacity;return[(e?r.transition(Te()):r).attr("d",t).style("fill",i.updateAreaColor.bind(i)).style("opacity",function(s){return String(i.isAreaRangeType(s)?a/1.75:a)})]},generateDrawArea:function(t,e){var n=this,i=n.config,r=i.line_connectNull,a=i.axis_rotated,s=n.generateGetAreaPoints(t,e),o=n.getYScaleById.bind(n),u=function(f){return(e?n.subxx:n.xx).call(n,f)},l=function(f,h){return n.isGrouped(f.id)?s(f,h)[0][1]:o(f.id,e)(n.isAreaRangeType(f)?n.getRangedData(f,"high"):n.getShapeYMin(f.id))},c=function(f,h){return n.isGrouped(f.id)?s(f,h)[1][1]:o(f.id,e)(n.isAreaRangeType(f)?n.getRangedData(f,"low"):f.value)};return function(f){var h=r?n.filterRemoveNull(f.values):f.values,d=0,g=0,v;if(n.isAreaType(f)){var p=Mh();p=a?p.y(u).x0(l).x1(c):p.x(u).y0(i.area_above?0:l).y1(c),r||(p=p.defined(function(_){return n.getBaseValue(_)!==null})),n.isStepType(f)&&(h=n.convertValuesToStep(h)),v=p.curve(n.getCurve(f))(h)}else h[0]&&(d=n.scale.x(h[0].x),g=n.getYScaleById(f.id)(h[0].value)),v=a?"M "+g+" "+d:"M "+d+" "+g;return v||"M 0 0"}},generateGetAreaPoints:function(t,e){var n=this,i=n.config,r=n.getShapeX(0,t,e),a=n.getShapeY(!!e),s=n.getShapeOffset(n.isAreaType,t,e),o=n.getYScaleById.bind(n);return function(u,l){var c=o.call(n,u.id,e)(n.getShapeYMin(u.id)),f=s(u,l)||c,h=r(u),d=a(u);return i.axis_rotated&&(u.value>0&&d<c||u.value<0&&c<d)&&(d=c),[[h,f],[h,d-(c-f)],[h,d-(c-f)],[h,f]]}}},Lg={initBar:function(){var t=this.$el;t.bar=t.main.select("."+x.chart).insert("g",":first-child").attr("class",x.chartBars)},updateTargetsForBar:function(t){var e=this,n=e.config,i=e.$el,r=e.getChartClass("Bar"),a=e.getClass("bars",!0),s=e.classFocus.bind(e),o=n.interaction_enabled&&n.data_selection_isselectable;i.bar||e.initBar();var u=e.$el.main.select("."+x.chartBars).selectAll("."+x.chartBar).data(t).attr("class",function(c){return r(c)+s(c)}),l=u.enter().append("g").attr("class",r).style("opacity","0").style("pointer-events","none");l.append("g").attr("class",a).style("cursor",function(c){return o&&o.bind(e.api)(c)?"pointer":null})},updateBar:function(t,e){e===void 0&&(e=!1);var n=this,i=e?n.$el.subchart:n.$el,r=n.getClass("bar",!0),a=n.initialOpacity.bind(n),s=i.main.selectAll("."+x.bars).selectAll("."+x.bar).data(n.labelishData.bind(n));s.exit().transition().duration(t).style("opacity","0").remove(),i.bar=s.enter().append("path").attr("class",r).style("fill",n.color).merge(s).style("opacity",a)},redrawBar:function(t,e,n){n===void 0&&(n=!1);var i=(n?this.$el.subchart:this.$el).bar;return[(e?i.transition(Te()):i).attr("d",t).style("fill",this.color).style("opacity","1")]},generateDrawBar:function(t,e){var n=this,i=n.config,r=n.generateGetBarPoints(t,e),a=i.axis_rotated,s=i.data_groups.length,o=i.bar_radius,u=i.bar_radius_ratio,l=j(o)&&o>0?function(){return o}:j(u)?function(c){return c*u}:null;return function(c,f){var h=r(c,f),d=+a,g=+!d,v=c.value<0,p=["",""],_=0;if(l&&!s){var y=a?g:d,b=h[2][y]-h[0][y];_=l(b);var m="a"+_+","+_+" "+(v?"1 0 0":"0 0 1")+" ";p[+!a]=""+m+_+","+_,p[+a]=""+m+[-_,_][a?"sort":"reverse"](),v&&p.reverse()}var w=a?"H"+(h[1][d]-_)+" "+p[0]+"V"+(h[2][g]-_)+" "+p[1]+"H"+h[3][d]:"V"+(h[1][g]+(v?-_:_))+" "+p[0]+"H"+(h[2][d]-_)+" "+p[1]+"V"+h[3][g];return"M"+h[0][d]+","+h[0][g]+w+"z"}},generateGetBarPoints:function(t,e){var n=this,i=n.config,r=e?n.axis.subX:n.axis.x,a=n.getIndicesMax(t)+1,s=n.getBarW("bar",r,a),o=n.getShapeX(s,t,!!e),u=n.getShapeY(!!e),l=n.getShapeOffset(n.isBarType,t,!!e),c=n.getYScaleById.bind(n);return function(f,h){var d=c.call(n,f.id,e)(n.getShapeYMin(f.id)),g=l(f,h)||d,v=j(s)?s:s[f.id]||s._$width,p=o(f),_=u(f);i.axis_rotated&&(f.value>0&&_<d||f.value<0&&d<_)&&(_=d),_-=d-g;var y=p+v;return[[p,g],[p,_],[y,_],[y,g]]}},isWithinBar:function(t){var e=Ut(this.state.event,t),n=Cs(t),i=n[0],r=n[1],a=Math.min(i.x,r.x),s=Math.min(i.y,r.y),o=this.config.bar_sensitivity,u=t.getBBox(),l=u.width,c=u.height,f=a-o,h=a+l+o,d=s+c+o,g=s-o,v=f<e[0]&&e[0]<h&&g<e[1]&&e[1]<d;return v}},Eg={initGauge:function(){var t=this,e=t.config,n=t.$el.arcs,i=function(a){n.append("text").attr("class",a).style("text-anchor","middle").style("pointer-events","none")};if(t.hasType("gauge")){var r=t.hasMultiArcGauge();n.append(r?"g":"path").attr("class",x.chartArcsBackground).style("fill",!r&&e.gauge_background||null),e.gauge_units&&i(x.chartArcsGaugeUnit),e.gauge_label_show&&(i(x.chartArcsGaugeMin),!e.gauge_fullCircle&&i(x.chartArcsGaugeMax))}},updateGaugeMax:function(){var t=this,e=t.config,n=t.state,i=t.hasMultiArcGauge(),r=i?t.getMinMaxData().max[0].value:t.getTotalDataSum(n.rendered);r>e.gauge_max&&(e.gauge_max=r)},redrawMultiArcGauge:function(){var t=this,e=t.config,n=t.state,i=t.$el,r=t.state.hiddenTargetIds,a=i.main.selectAll("."+x.arcs).selectAll("."+x.arcLabelLine).data(t.arcData.bind(t)),s=a.enter().append("rect").attr("class",function(o){return x.arcLabelLine+" "+x.target+" "+x.target+"-"+o.data.id}).merge(a);s.style("fill",function(o){return t.levelColor?t.levelColor(o.data.values[0].value):t.color(o.data)}).style("display",e.gauge_label_show?"":"none").each(function(o){var u=0,l=2,c=0,f=0,h="";if(r.indexOf(o.data.id)<0){var d=t.updateAngle(o),g=n.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length*(d.index+1),v=d.endAngle-Math.PI/2,p=n.radius-g,_=v-(p===0?0:1/p);u=n.radiusExpanded-n.radius+g,c=Math.cos(_)*p,f=Math.sin(_)*p,h="rotate("+v*180/Math.PI+", "+c+", "+f+")"}P(this).attr("x",c).attr("y",f).attr("width",u).attr("height",l).attr("transform",h).style("stroke-dasharray","0, "+(u+l)+", 0")})},textForGaugeMinMax:function(t,e){var n=this,i=n.config,r=i.gauge_label_extents;return H(r)?r.bind(n.api)(t,e):t},getGaugeLabelHeight:function(){var t=this.config;return this.config.gauge_label_show&&!t.gauge_fullCircle?20:0},getPaddingBottomForGauge:function(){var t=this;return t.getGaugeLabelHeight()*(t.config.gauge_label_show?2:2.5)}},Dg={initBubble:function(){var t=this,e=t.config;t.hasType("bubble")&&(e.point_show=!0,e.point_type="circle",e.point_sensitivity=25)},getBaseLength:function(){var t=this,e=t.state,n=e.width,i=e.height,r=At.bubbleBaseLength,a=t.cache.get(r);return a||t.cache.add(r,a=Mt("min",[n,i])),a},getBubbleR:function(t){var e=this,n=e.config.bubble_maxR;H(n)?n=n.bind(e.api)(t):j(n)||(n=e.getBaseLength()/(e.getMaxDataCount()*2)+12);var i=Mt("max",e.getMinMaxData().max.map(function(s){return e.isBubbleZType(s)?e.getBubbleZData(s.value,"y"):it(s.value)?s.value.mid:s.value})),r=n*n*Math.PI,a=(e.isBubbleZType(t)?e.getBubbleZData(t.value,"z"):t.value)*(r/i);return Math.sqrt(a/Math.PI)},getBubbleZData:function(t,e){return it(t)?t[e]:t[e==="y"?0:1]}},Fg={initLine:function(){var t=this.$el;t.line=t.main.select("."+x.chart).append("g").attr("class",x.chartLines)},updateTargetsForLine:function(t){var e=this,n=e.$el,i=n.area,r=n.line,a=n.main,s=e.getChartClass("Line"),o=e.getClass("lines",!0),u=e.classFocus.bind(e);r||e.initLine();var l=t.filter(function(h){return!(e.isScatterType(h)||e.isBubbleType(h))}),c=a.select("."+x.chartLines).selectAll("."+x.chartLine).data(l).attr("class",function(h){return s(h)+u(h)}),f=c.enter().append("g").attr("class",s).style("opacity","0").style("pointer-events","none");f.append("g").attr("class",o),e.hasTypeOf("Area")&&e.initArea(!i&&f.empty()?c:f),e.updateTargetForCircle(l,f)},updateLine:function(t,e){e===void 0&&(e=!1);var n=this,i=n.format.extraLineClasses,r=n.$el,a=e?r.subchart:r,s=a.main.selectAll("."+x.lines).selectAll("."+x.line).data(n.lineData.bind(n));s.exit().transition().duration(t).style("opacity","0").remove(),a.line=s.enter().append("path").attr("class",function(o){return n.getClass("line",!0)(o)+" "+(i(o)||"")}).style("stroke",n.color).merge(s).style("opacity",n.initialOpacity.bind(n)).style("shape-rendering",function(o){return n.isStepType(o)?"crispEdges":""}).attr("transform",null)},redrawLine:function(t,e,n){n===void 0&&(n=!1);var i=(n?this.$el.subchart:this.$el).line;return[(e?i.transition(Te()):i).attr("d",t).style("stroke",this.color).style("opacity","1")]},getCurve:function(t){var e=this,n=e.config.axis_rotated&&e.isStepType(t);return n?function(i){var r=e.getInterpolate(t)(i);return r.orgPoint=r.point,r.pointRotated=function(a,s){this._point===1&&(this._point=2);var o=this._y*(1-this._t)+s*this._t;this._context.lineTo(this._x,o),this._context.lineTo(a,o),this._x=a,this._y=s},r.point=function(a,s){this._point===0?this.orgPoint(a,s):this.pointRotated(a,s)},r}:e.getInterpolate(t)},generateDrawLine:function(t,e){var n=this,i=n.config,r=n.scale,a=i.line_connectNull,s=i.axis_rotated,o=n.generateGetLinePoints(t,e),u=n.getYScaleById.bind(n),l=function(d){return(e?n.subxx:n.xx).call(n,d)},c=function(d,g){return n.isGrouped(d.id)?o(d,g)[0][1]:u(d.id,e)(n.getBaseValue(d))},f=vs();f=s?f.x(c).y(l):f.x(l).y(c),a||(f=f.defined(function(d){return n.getBaseValue(d)!==null}));var h=e?r.subX:r.x;return function(d){var g=u(d.id,e),v=a?n.filterRemoveNull(d.values):d.values,p=0,_=0,y;if(n.isLineType(d)){var b=i.data_regions[d.id];b?y=n.lineWithRegions(v,h,g,b):(n.isStepType(d)&&(v=n.convertValuesToStep(v)),y=f.curve(n.getCurve(d))(v))}else v[0]&&(p=h(v[0].x),_=g(v[0].value)),y=s?"M "+_+" "+p:"M "+p+" "+_;return y||"M 0 0"}},lineWithRegions:function(t,e,n,i){var r=this,a=r.config,s=a.axis_rotated,o=r.axis.isTimeSeries(),u=r.axis.isCategorized()?.5:0,l=[],c="2 2",f,h,d,g,v=function(O,rt){for(var U=0,Q=void 0;Q=rt[U];U++)if(Q.start<O&&O<=Q.end)return Q.style;return!1};if(nt(i))for(var p=function(O,rt){return ot(O)?rt:o?Pt.call(r,O):O},_=0,y=void 0;y=i[_];_++){var b=p(y.start,t[0].x),m=p(y.end,t[t.length-1].x),w=y.style||{dasharray:c};l[_]={start:b,end:m,style:w}}for(var T=s?function(O){return n(O.value)}:function(O){return e(O.x)},$=s?function(O){return e(O.x)}:function(O){return n(O.value)},S=function(O){return"M"+O[0][0]+","+O[0][1]+"L"+O[1][0]+","+O[1][1]},E=o?function(O,rt,U,Q){var dt=O.x.getTime(),J=rt.x-O.x,M=new Date(dt+J*U),I=new Date(dt+J*(U+Q)),tt=s?[[n(h(U)),e(M)],[n(h(U+d)),e(I)]]:[[e(M),n(h(U))],[e(I),n(h(U+d))]];return S(tt)}:function(O,rt,U,Q){var dt=s?[[n(h(U),!0),e(f(U))],[n(h(U+Q),!0),e(f(U+Q))]]:[[e(f(U),!0),n(h(U))],[e(f(U+Q),!0),n(h(U+Q))]];return S(dt)},F={x:r.axis.getAxisType("x"),y:r.axis.getAxisType("y")},C="",_=0,A=void 0;A=t[_];_++){var R=t[_-1],D=R&&B(R.value),w=v(A.x,l);if(!!B(A.value)){if(ot(l)||!w||!D)C+=(_&&D?"L":"M")+T(A)+","+$(A);else if(D){try{w=w.dasharray.split(" ")}catch{w=c.split(" ")}f=te(F.x,R.x+u,A.x+u),h=te(F.y,R.value,A.value);var X=e(A.x)-e(R.x),G=n(A.value)-n(R.value),W=Math.sqrt(Math.pow(X,2)+Math.pow(G,2));d=w[0]/W,g=d*w[1];for(var K=d;K<=1;K+=g)C+=E(R,A,K,d),K+g>=1&&(C+=E(R,A,1,0))}}}return C},isWithinStep:function(t,e){return Math.abs(e-Ut(this.state.event,t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return e===!0||et(e)&&e.indexOf(t.id)!==-1}},ae=function(){return Te()},Dn={hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function(t){var e=t||this.config.point_type;return It(e)&&H(e.create)&&H(e.update)},initialOpacityForCircle:function(t){var e=this,n=e.config,i=e.state.withoutFadeIn,r=n.point_opacity;return ot(r)&&(r=this.getBaseValue(t)!==null&&i[t.id]?this.opacityForCircle(t):"0"),r},opacityForCircle:function(t){var e=this.config,n=e.point_opacity;return ot(n)&&(n=e.point_show&&!e.point_focus_only?"1":"0",n=B(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":n:"0"),n},initCircle:function(){var t=this,e=t.$el.main;t.point=t.generatePoint(),(t.hasType("bubble")||t.hasType("scatter"))&&e.select("."+x.chartCircles).empty()&&e.select("."+x.chart).append("g").attr("class",x.chartCircles)},updateTargetForCircle:function(t,e){var n=this,i=this,r=i.config,a=i.data,s=i.$el,o=r.interaction_enabled&&r.data_selection_enabled,u=o&&r.data_selection_isselectable,l=i.getClass("circles",!0);if(!!r.point_show){!s.circle&&i.initCircle();var c=t,f=e;if(!c){c=a.targets.filter(function(d){return n.isScatterType(d)||n.isBubbleType(d)});var h=s.main.select("."+x.chartCircles).style("pointer-events","none").selectAll("."+x.circles).data(c).attr("class",l);h.exit().remove(),f=h.enter()}o&&f.append("g").attr("class",function(d){return i.generateClass(x.selectedCircles,d.id)}),f.append("g").attr("class",l).style("cursor",function(d){return u&&u(d)?"pointer":null}),o&&c.forEach(function(d){s.main.selectAll("."+x.selectedCircles+i.getTargetSelectorSuffix(d.id)).selectAll(""+x.selectedCircle).each(function(g){g.value=d.values[g.index].value})})}},updateCircle:function(t){t===void 0&&(t=!1);var e=this,n=e.config,i=e.state,r=e.$el,a=n.point_focus_only,s=t?r.subchart:r;if(n.point_show&&!i.toggling){var o=s.main.selectAll("."+x.circles).selectAll("."+x.circle).data(function(u){return e.isLineType(u)&&e.shouldDrawPointsForLine(u)||e.isBubbleType(u)||e.isRadarType(u)||e.isScatterType(u)?a?[u.values[0]]:u.values:[]});o.exit().remove(),o.enter().filter(Boolean).append(e.point("create",this,e.pointR.bind(e),e.color)),s.circle=s.main.selectAll("."+x.circles+" ."+x.circle).style("stroke",e.color).style("opacity",e.initialOpacityForCircle.bind(e))}},redrawCircle:function(t,e,n,i,r){r===void 0&&(r=!1);var a=this,s=a.state.rendered,o=a.$el,u=r?o.subchart:o,l=u.main.selectAll("."+x.selectedCircle);if(!a.config.point_show)return[];var c=a.point("update",a,t,e,a.color,n,i,l),f=a.isCirclePoint()?"c":"",h=Te(),d=a.opacityForCircle.bind(a),g=[];return u.circle.each(function(v){var p=c.bind(this)(v);p=(n||!s?p.transition(h):p).style("opacity",d),g.push(p)}),[g,(n?l.transition():l).attr(f+"x",t).attr(f+"y",e)]},showCircleFocus:function(t){var e=this,n=e.config,i=e.state,r=i.hasRadar,a=i.resizing,s=i.toggling,o=i.transiting,u=e.$el,l=u.circle;if(o===!1&&n.point_focus_only&&l){var c=(r?e.radarCircleX:e.circleX).bind(e),f=(r?e.radarCircleY:e.circleY).bind(e),h=s||ot(t),d=e.point("update",e,c,f,e.color,a?!1:h);t&&(l=l.filter(function(g){var v=t.filter(function(p){return p.id===g.id});return v.length?P(this).datum(v[0]):!1})),l.attr("class",this.updatePointClass.bind(this)).style("opacity","1").each(function(g){var v=g.id,p=g.index,_=g.value,y="hidden";B(_)&&(d.bind(this)(g),e.expandCircles(p,v),y=""),this.style.visibility=y})}},hideCircleFocus:function(){var t=this,e=t.config,n=t.$el.circle;e.point_focus_only&&n&&(t.unexpandCircles(),n.style("visibility","hidden"))},circleX:function(t){return this.xx(t)},updateCircleY:function(t){t===void 0&&(t=!1);var e=this,n=e.generateGetLinePoints(e.getShapeIndices(e.isLineType),t);return function(i,r){var a=i.id;return e.isGrouped(a)?n(i,r)[0][1]:e.getYScaleById(a,t)(e.getBaseValue(i))}},getCircles:function(t,e){var n=this,i=B(t)?"-"+t:"";return(e?n.$el.main.selectAll("."+x.circles+n.getTargetSelectorSuffix(e)):n.$el.main).selectAll("."+x.circle+i)},expandCircles:function(t,e,n){var i=this,r=i.pointExpandedR.bind(i);n&&i.unexpandCircles();var a=i.getCircles(t,e).classed(x.EXPANDED,!0),s=r(a)/i.config.point_r,o=1-s;i.isCirclePoint()?a.attr("r",r):a.each(function(){var u=P(this);if(this.tagName==="circle")u.attr("r",r);else{var l=this.getBBox(),c=l.width,f=l.height,h=o*(+u.attr("x")+c/2),d=o*(+u.attr("y")+f/2);u.attr("transform","translate("+h+" "+d+") scale("+s+")")}})},unexpandCircles:function(t){var e=this,n=e.pointR.bind(e),i=e.getCircles(t).filter(function(){return P(this).classed(x.EXPANDED)}).classed(x.EXPANDED,!1);i.attr("r",n),!e.isCirclePoint()&&i.attr("transform","scale("+n(i)/e.config.point_r+")")},pointR:function(t){var e=this,n=e.config,i=n.point_r,r=i;return e.isBubbleType(t)?r=e.getBubbleR(t):H(i)&&(r=i.bind(e.api)(t)),r},pointExpandedR:function(t){var e=this,n=e.config,i=e.isBubbleType(t)?1.15:1.75;return n.point_focus_expand_enabled?n.point_focus_expand_r||e.pointR(t)*i:e.pointR(t)},pointSelectR:function(t){var e=this,n=e.config.point_select_r;return H(n)?n(t):n||e.pointR(t)*4},isWithinCircle:function(t,e){var n=Ut(this.state.event,t),i=P(t),r=this.isCirclePoint(t)?"c":"",a=+i.attr(r+"x"),s=+i.attr(r+"y");if(!(a||s)&&t.nodeType===1){var o=Ie(t),u=o.x,l=o.y;a=u,s=l}return Math.sqrt(Math.pow(a-n[0],2)+Math.pow(s-n[1],2))<(e||this.config.point_sensitivity)},insertPointInfoDefs:function(t,e){var n=this,i=function(u,l){for(var c=u.attributes,f=0,h;h=c[f];f++)h=h.name,l.setAttribute(h,u.getAttribute(h))},r=new DOMParser().parseFromString(t,"image/svg+xml"),a=r.documentElement,s=xt.createElementNS(ve.svg,a.nodeName.toLowerCase());if(s.id=e,s.style.fill="inherit",s.style.stroke="inherit",i(a,s),a.childNodes&&a.childNodes.length){var o=P(s);"innerHTML"in s?o.html(a.innerHTML):we(a.childNodes).forEach(function(u){i(u,o.append(u.tagName).node())})}n.$el.defs.node().appendChild(s)},pointFromDefs:function(t){return this.$el.defs.select("#"+t)},updatePointClass:function(t){var e=this,n=e.$el.circle,i=!1;return(it(t)||n)&&(i=t===!0?n.each(function(r){var a=e.getClass("circle",!0)(r);this.getAttribute("class").indexOf(x.EXPANDED)>-1&&(a+=" "+x.EXPANDED),this.setAttribute("class",a)}):e.getClass("circle",!0)(t)),i},generateGetLinePoints:function(t,e){var n=this,i=n.config,r=n.getShapeX(0,t,e),a=n.getShapeY(e),s=n.getShapeOffset(n.isLineType,t,e),o=n.getYScaleById.bind(n);return function(u,l){var c=o.call(n,u.id,e)(n.getShapeYMin(u.id)),f=s(u,l)||c,h=r(u),d=a(u);i.axis_rotated&&(u.value>0&&d<c||u.value<0&&c<d)&&(d=c);var g=[h,d-(c-f)];return[g,g,g,g]}},generatePoint:function(){var t=this,e=t.config,n=t.state.datetimeId,i=[],r=ut(e.point_pattern)?e.point_pattern:[e.point_type];return function(a,s){for(var o=[],u=2;u<arguments.length;u++)o[u-2]=arguments[u];return function(l){var c=t.getTargetSelectorSuffix(l.id||l.data&&l.data.id||l),f=P(this);i.indexOf(c)<0&&i.push(c);var h=r[i.indexOf(c)%r.length];if(t.hasValidPointType(h))h=t[h];else if(!t.hasValidPointDrawMethods(h)){var d=n+"-point"+c,g=t.pointFromDefs(d);if(g.size()<1&&t.insertPointInfoDefs(h,d),a==="create")return t.custom.create.bind(s).apply(void 0,bt([f,d],o));if(a==="update")return t.custom.update.bind(s).apply(void 0,bt([f],o))}return h[a].bind(s).apply(void 0,bt([f],o))}}},custom:{create:function(t,e,n,i){return t.append("use").attr("xlink:href","#"+e).attr("class",this.updatePointClass.bind(this)).style("fill",i).node()},update:function(t,e,n,i,r,a,s){var o=t.node().getBBox(),u=o.width,l=o.height,c=function(g){return e(g)-u/2},f=function(g){return n(g)-l/2},h=t;if(r){var d=ae();a&&h.attr("x",c),h=h.transition(d),s&&s.transition(ae())}return h.attr("x",c).attr("y",f).style("fill",i)}},circle:{create:function(t,e,n){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",n).node()},update:function(t,e,n,i,r,a,s){var o=this,u=t;if(o.hasType("bubble")&&u.attr("r",o.pointR.bind(o)),r){var l=ae();a&&u.attr("cx",e),u.attr("cx")&&(u=u.transition(l)),s&&s.transition(ae())}return u.attr("cx",e).attr("cy",n).style("fill",i)}},rectangle:{create:function(t,e,n){var i=function(r){return e(r)*2};return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",i).attr("height",i).style("fill",n).node()},update:function(t,e,n,i,r,a,s){var o=this,u=o.config.point_r,l=function(d){return e(d)-u},c=function(d){return n(d)-u},f=t;if(r){var h=ae();a&&f.attr("x",l),f=f.transition(h),s&&s.transition(ae())}return f.attr("x",l).attr("y",c).style("fill",i)}}};function Ig(t,e,n,i,r,a){var s=t&&i>0?n-i:i,o=2*Math.PI,u=e==="x"?Math.sin:Math.cos;return r*(1-a*u(s*o/n))}var se=At.radarPoints,Og={initRadar:function(){var t=this,e=t.config,n=t.state.current,i=t.$el;t.hasType("radar")&&(i.radar=i.main.select("."+x.chart).append("g").attr("class",x.chartRadars),i.radar.levels=i.radar.append("g").attr("class",x.levels),i.radar.axes=i.radar.append("g").attr("class",x.axis),i.radar.shapes=i.radar.append("g").attr("class",x.shapes),n.dataMax=e.radar_axis_max||t.getMinMaxData().max[0].value)},getRadarSize:function(){var t=this,e=t.config,n=t.state,i=n.arcWidth,r=n.arcHeight,a=e.axis_x_categories.length<4?-20:10,s=(Math.min(i,r)-a)/2;return[s,s]},updateTargetsForRadar:function(t){var e=this,n=e.config;Sn(n.axis_x_categories)&&(n.axis_x_categories=ei(0,Mt("max",t.map(function(i){return i.values.length})))),e.generateRadarPoints()},getRadarPosition:function(t,e,n,i){var r=this,a=r.config,s=r.getRadarSize(),o=s[0],u=s[1],l=a.axis_x_categories.length,c=a.radar_direction_clockwise,f=we(t).map(function(h){return Ig(c,h,l,e,nt(n)?n:t==="x"?o:u,j(i)?i:a.radar_size_ratio)});return f.length===1?f[0]:f},generateRadarPoints:function(){var t=this,e=t.data.targets,n=t.getRadarSize(),i=n[0],r=n[1],a=t.cache.get(se)||{},s=a._size;(!s||s.width!==i&&s.height!==r)&&(e.forEach(function(o){a[o.id]=o.values.map(function(u,l){return t.getRadarPosition(["x","y"],l,void 0,t.getRatio("radar",u))})}),a._size={width:i,height:r},t.cache.add(se,a))},redrawRadar:function(t){var e=this,n=e.$el,i=n.radar,r=n.main,a=e.getTranslate("radar");a&&(i.attr("transform",a),r.select("."+x.chartTexts).attr("transform",a),e.generateRadarPoints(),e.updateRadarLevel(),e.updateRadarAxes(),e.updateRadarShape(t))},generateGetRadarPoints:function(){var t=this.cache.get(se);return function(e,n){var i=t[e.id][n];return[i,i,i,i]}},updateRadarLevel:function(){var t=this,e=t.config,n=t.state,i=t.$el.radar,r=t.getRadarSize(),a=r[0],s=r[1],o=e.radar_level_depth,u=e.axis_x_categories.length,l=e.radar_level_text_show,c=i.levels,f=ei(0,o),h=e.radar_size_ratio*Math.min(a,s),d=f.map(function(y){return h*((y+1)/o)}),g=(e.radar_level_text_format||function(){}).bind(t.api),v=f.map(function(y){var b=d[y],m=ei(0,u).map(function(w){return t.getRadarPosition(["x","y"],w,b,1).join(",")});return m.join(" ")}),p=c.selectAll("."+x.level).data(f);p.exit().remove();var _=p.enter().append("g").attr("class",function(y,b){return x.level+" "+x.level+"-"+b});_.append("polygon").style("visibility",e.radar_level_show?null:"hidden"),l&&(c.select("text").empty()&&c.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return g(0)}),_.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(y){return g(n.current.dataMax/f.length*(y+1))})),_.merge(p).attr("transform",function(y){return"translate("+(a-d[y])+", "+(s-d[y])+")"}).selectAll("polygon").attr("points",function(y){return v[y]}),l&&c.selectAll("text").attr("x",function(y){return ot(y)?a:v[y].split(",")[0]}).attr("y",function(y){return ot(y)?s:0})},updateRadarAxes:function(){var t=this,e=t.config,n=t.$el.radar,i=t.getRadarSize(),r=i[0],a=i[1],s=e.axis_x_categories,o=n.axes.selectAll("g").data(s);o.exit().remove();var u=o.enter().append("g").attr("class",function(g,v){return x.axis+"-"+v});if(e.radar_axis_line_show&&u.append("line"),e.radar_axis_text_show&&u.append("text"),o=u.merge(o),e.radar_axis_line_show&&o.select("line").attr("x1",r).attr("y1",a).attr("x2",function(g,v){return t.getRadarPosition("x",v)}).attr("y2",function(g,v){return t.getRadarPosition("y",v)}),e.radar_axis_text_show){var l=e.radar_axis_text_position,c=l.x,f=c===void 0?0:c,h=l.y,d=h===void 0?0:h;o.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(g){g.each(function(v){ze(P(this),String(v),[-.6,1.2])})}).datum(function(g,v){return{index:v}}).attr("transform",function(g){ot(this.width)&&(this.width=this.getBoundingClientRect().width/2);var v=t.getRadarPosition("x",g.index,void 0,1),p=Math.round(t.getRadarPosition("y",g.index,void 0,1));return v>r?v+=this.width+f:Math.round(v)<r&&(v-=this.width+f),p>a?(p/2===a&&this.firstChild.tagName==="tspan"&&this.firstChild.setAttribute("dy","0em"),p+=d):p<a&&(p-=d),"translate("+v+" "+p+")"})}t.bindEvent()},bindEvent:function(){var t=this,e=t.config,n=t.state,i=t.$el,r=i.radar,a=i.svg,s=e.point_focus_only,o=n.inputType,u=n.transiting;if(e.interaction_enabled){var l=o==="mouse",c=function(h){var d=h.target;/tspan/i.test(d.tagName)&&(d=d.parentNode);var g=P(d).datum();return g&&Object.keys(g).length===1?g.index:void 0},f=function(h){var d=c(h),g=ot(d);(l||g)&&(t.hideTooltip(),s?t.hideCircleFocus():t.unexpandCircles(),l?t.setOverOut(!1,d):g&&t.callOverOutForTouch())};r.axes.selectAll("text").on(l?"mouseover ":"touchstart",function(h){if(!u){n.event=h;var d=c(h);t.selectRectForSingle(a.node(),null,d),l?t.setOverOut(!0,d):t.callOverOutForTouch(d)}}).on("mouseout",l?f:null),l||a.on("touchstart",f)}},updateRadarShape:function(t){var e=this,n=e.data.targets.filter(function(s){return e.isRadarType(s)}),i=e.cache.get(se),r=e.$el.radar.shapes.selectAll("polygon").data(n),a=r.enter().append("g").attr("class",e.getChartClass("Radar"));r.exit().transition().duration(t).remove(),a.append("polygon").merge(r).style("fill",e.color).style("stroke",e.color).attr("points",function(s){return i[s.id].join(" ")}),e.updateTargetForCircle(n,a)},radarCircleX:function(t){return this.cache.get(se)[t.id][t.index][0]},radarCircleY:function(t){return this.cache.get(se)[t.id][t.index][1]}},Fn={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},In={area_above:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},Pg={bar_label_threshold:0,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},Ng={bubble_maxR:35,bubble_zerobased:!1},Xg={line_connectNull:!1,line_step_type:"step",line_zerobased:!1,line_classes:void 0,line_point:!0},zg={scatter_zerobased:!1},Ps={spline_interpolation_type:"cardinal"},Bg={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},Yg={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_label_extents:void 0,gauge_label_threshold:0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},Ug={pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},Vg={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return t%1===0?t:t.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1};function On(t,e){Rt(Ln.prototype,Mg.concat(t)),Rt(Ki.prototype,Cg),Rn.setOptions(Sg.concat(e||[]))}function ie(t,e){On([Dn,Fg].concat(t||[])),Rn.setOptions([Fn,Xg].concat(e||[]))}function Pn(t,e){Rt(Ln.prototype,[Rg].concat(t||[])),Rn.setOptions(e)}var Hg=function(){return ie(En,[In]),(Hg=function(){return z.AREA})()},Gg=function(){return ie(En,[In]),(Gg=function(){return z.AREA_LINE_RANGE})()},Wg=function(){return ie(En,[In,Ps]),(Wg=function(){return z.AREA_SPLINE_RANGE})()},qg=function(){return ie(En,[In]),(qg=function(){return z.AREA_STEP})()},Zg=function(){return ie(),(Zg=function(){return z.LINE})()},jg=function(){return ie(void 0,[Ps]),(jg=function(){return z.SPLINE})()},Kg=function(){return ie(),(Kg=function(){return z.STEP})()},Jg=function(){return Pn(void 0,[Bg]),(Jg=function(){return z.DONUT})()},Qg=function(){return Pn([Eg],[Yg]),(Qg=function(){return z.GAUGE})()},tv=function(){return Pn(void 0,[Ug]),(tv=function(){return z.PIE})()},ev=function(){return Pn([Dn,Og],[Fn,Vg]),(ev=function(){return z.RADAR})()},nv=function(){return On([Lg],Pg),(nv=function(){return z.BAR})()},iv=function(){return On([Dn,Dg],[Ng,Fn]),(iv=function(){return z.BUBBLE})()},rv=function(){return On([Dn],[Fn,zg]),(rv=function(){return z.SCATTER})()};function av(t,e){var n=e[0],i=e[1];return t.every(function(r,a){return a===0?r>=n:r<=i})}var sv=function(t){var e=this.internal,n=e.config,i=e.scale,r=t,a;if(n.zoom_enabled&&r){if(e.axis.isTimeSeries()&&(r=r.map(function(o){return Pt.bind(e)(o)})),av(r,e.getZoomDomain())){if(e.api.tooltip.hide(),n.subchart_show){var s=i.zoom||i.x;e.brush.getSelection().call(e.brush.move,[s(r[0]),s(r[1])]),a=r}else i.x.domain(r),i.zoom=i.x,e.axis.x.scale(i.zoom),a=i.zoom.orgDomain();e.redraw({withTransition:!0,withY:n.zoom_rescale,withDimension:!1}),e.setZoomResetButton(),st(n.zoom_onzoom,e.api,a)}}else a=i.zoom?i.zoom.domain():i.x.orgDomain();return a};Rt(sv,{enable:function(t){var e=this.internal,n=e.config;/^(drag|wheel)$/.test(t)&&(n.zoom_type=t),n.zoom_enabled=!!t,e.zoom?t===!1&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,n=e.config,i=e.org.xDomain;return(t===0||t)&&(n.zoom_x_max=Mt("max",[i[1],t])),n.zoom_x_max},min:function(t){var e=this.internal,n=e.config,i=e.org.xDomain;return(t===0||t)&&(n.zoom_x_min=Mt("min",[i[0],t])),n.zoom_x_min},range:function(t){var e=this.zoom;if(it(t)){var n=t.min,i=t.max;nt(n)&&e.min(n),nt(i)&&e.max(i)}return{min:e.min(),max:e.max()}}});var ov={drag:function(t){var e=this,n=e.config,i=e.state,r=e.$el.main,a=n.data_selection_grouped,s=n.interaction_enabled&&n.data_selection_isselectable;if(!(e.hasArcType()||!n.data_selection_enabled||n.zoom_enabled&&!e.zoom.altDomain||!n.data_selection_multiple)){var o=i.dragStart||[0,0],u=o[0],l=o[1],c=t[0],f=t[1],h=Math.min(u,c),d=Math.max(u,c),g=a?i.margin.top:Math.min(l,f),v=a?i.height:Math.max(l,f);r.select("."+x.dragarea).attr("x",h).attr("y",g).attr("width",d-h).attr("height",v-g),r.selectAll("."+x.shapes).selectAll("."+x.shape).filter(function(p){return s&&s.bind(e.api)(p)}).each(function(p,_){var y=P(this),b=y.classed(x.SELECTED),m=y.classed(x.INCLUDED),w=!1,T;if(y.classed(x.circle)){var $=+y.attr("cx")*1,S=+y.attr("cy")*1;T=e.togglePoint,w=h<$&&$<d&&g<S&&S<v}else if(y.classed(x.bar)){var E=gd(this),$=E.x,S=E.y,F=E.width,C=E.height;T=e.togglePath,w=!(d<$||$+F<h)&&!(v<S||S+C<g)}else return;w^m&&(y.classed(x.INCLUDED,!m),y.classed(x.SELECTED,!b),T.call(e,!b,y,p,_))})}},dragstart:function(t){var e=this,n=e.config,i=e.state,r=e.$el.main;e.hasArcType()||!n.data_selection_enabled||(i.dragStart=t,r.select("."+x.chart).append("rect").attr("class",x.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function(){var t=this,e=t.config,n=t.$el.main;t.hasArcType()||!e.data_selection_enabled||(n.select("."+x.dragarea).transition().duration(100).style("opacity","0").remove(),n.selectAll("."+x.shape).classed(x.INCLUDED,!1),t.setDragStatus(!1))}};St(St({},ov),{selectPoint:function(t,e,n){var i=this,r=i.config,a=i.$el.main,s=r.axis_rotated,o=(s?i.circleY:i.circleX).bind(i),u=(s?i.circleX:i.circleY).bind(i),l=i.pointSelectR.bind(i);st(r.data_onselected,i.api,e,t.node()),a.select("."+x.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+x.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return i.generateClass(x.selectedCircle,n)}).attr("cx",o).attr("cy",u).attr("stroke",i.color).attr("r",function(c){return i.pointSelectR(c)*1.4}).transition().duration(100).attr("r",l)},unselectPoint:function(t,e,n){var i=this,r=i.config,a=i.$el;st(r.data_onunselected,i.api,e,t.node()),a.main.select("."+x.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+x.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},togglePoint:function(t,e,n,i){var r=(t?"":"un")+"selectPoint";this[r](e,n,i)},selectPath:function(t,e){var n=this,i=n.config;st(i.data_onselected,n.api,e,t.node()),i.interaction_brighten&&t.transition().duration(100).style("fill",function(){return on(n.color(e)).brighter(.75)})},unselectPath:function(t,e){var n=this,i=n.config;st(i.data_onunselected,n.api,e,t.node()),i.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.color(e)})},togglePath:function(t,e,n,i){this[(t?"":"un")+"selectPath"](e,n,i)},getToggle:function(t,e){var n=this;return t.nodeName==="path"?n.togglePath:n.isStepType(e)?function(){}:n.togglePoint},toggleShape:function(t,e,n){var i=this,r=i.config,a=i.$el.main,s=P(t),o=s.classed(x.SELECTED),u=i.getToggle(t,e).bind(i),l;if(r.data_selection_enabled&&r.data_selection_isselectable.bind(i.api)(e)){if(!r.data_selection_multiple){var c="."+x.shapes;r.data_selection_grouped&&(c+=i.getTargetSelectorSuffix(e.id)),a.selectAll(c).selectAll("."+x.shape).each(function(f,h){var d=P(this);d.classed(x.SELECTED)&&(l=d,u(!1,d.classed(x.SELECTED,!1),f,h))})}(!l||l.node()!==s.node())&&(s.classed(x.SELECTED,!o),u(!o,s,e,n))}}});var ni={},uv={version:"3.0.3",generate:function(t){var e=me({},ni,t),n=new Ki(e);return n.internal.charts=this.instance,this.instance.push(n),n},defaults:function(t){return it(t)&&(ni=t),ni},instance:[],plugin:{}},cv=Xs({expose:[],props:{options:{type:Object,required:!0}},emits:["ready"],setup(t,{emit:e}){const n=t,i=zs(null);return Bs(()=>{if(i.value)try{const r=uv.generate({...n.options,bindto:i.value});e("ready",r),Vs(()=>{r.resize()})}catch(r){console.error(r)}}),(r,a)=>(Ys(),Us("div",{ref:i},null,512))}});export{cv as _,Hg as a,Gg as b,Wg as c,nv as d,qg as e,iv as f,rv as g,Jg as h,Qg as i,jg as j,Zg as l,tv as p,ev as r,Kg as s};
