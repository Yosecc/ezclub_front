import{_ as e}from"./V-Placeload.f8b8ec60.js";import{_ as t}from"./V-Avatar.vue_vue&type=script&setup=true&lang.00efb228.js";import{_ as a}from"./V-Card.vue_vue&type=script&setup=true&lang.11c3a205.js";import{m as s,b as l,c as n,d as i,i as o,e as r,f as u,h as c,j as m,k as d,l as p,p as v,n as h,o as b,q as y,r as f,t as _,u as g,v as k,w as M,x as C,y as x,z as w,A as Y,B as j,C as D,D as P,E as S,F as $,G as I,H as E,I as z,J as A,K as V,L as F,M as T,N as q,O as N,P as H}from"./Members.20cbfe85.js";import{b as L,P as R,A as B,F as W,c as O,v as G,g as U,m as K,n as J,p as X,h as Q,e as Z,a as ee,s as te}from"./index.95d72d05.js";import{d as ae,w as se,H as le,b as ne,r as ie,E as oe,o as re,h as ue,K as ce,P as me,j as de,k as pe,G as ve,R as he,S as be,W as ye,X as fe,a2 as _e,F as ge,A as ke,_ as Me,z as Ce,O as xe}from"./vendor.41bfc188.js";import{_ as we}from"./V-Button.vue_vue&type=script&setup=true&lang.b71f832b.js";import{_ as Ye}from"./V-Loader.vue_vue&type=script&setup=true&lang.4e7db0f0.js";import{_ as je}from"./V-Control.1c77a766.js";import{_ as De}from"./V-Field.vue_vue&type=script&setup=true&lang.76856fac.js";import{_ as Pe}from"./V-Modal.vue_vue&type=script&setup=true&lang.f8514cb3.js";import{_ as Se}from"./V-Tag.vue_vue&type=script&setup=true&lang.d1f062ed.js";import{_ as $e}from"./inputsLayaut.vue_vue&type=style&index=0&lang.67d0f0f9.js";import{_ as Ie}from"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.066d1ccf.js";import{_ as Ee,a as ze,b as Ae}from"./Presupuesto.vue_vue&type=script&setup=true&lang.ecf7cf02.js";import{_ as Ve}from"./MemberCards.vue_vue&type=script&setup=true&lang.246b746b.js";import{_ as Fe}from"./V-AvatarStack.vue_vue&type=script&setup=true&lang.b3b15f6f.js";import{_ as Te}from"./signComponent.vue_vue&type=script&setup=true&lang.ab4316b9.js";import{_ as qe}from"./pdf_icon.700ca8df.js";import{_ as Ne}from"./FlexTableDropdown.vue_vue&type=script&setup=true&lang.b4780617.js";import{_ as He}from"./V-Block.vue_vue&type=script&setup=true&lang.2cd1d3e1.js";import{_ as Le}from"./V-Tabs.vue_vue&type=script&setup=true&lang.bd708bba.js";import{_ as Re}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.4e85ad8a.js";import{p as Be}from"./sidebarLayoutState.454c18d7.js";import{g as We}from"./Discounts.82b17667.js";import{a as Oe}from"./Memberships.0384ff88.js";import{g as Ge}from"./Recurrences.ea6e5fa1.js";import{l as Ue}from"./Staffs.1e48cfbe.js";import{g as Ke}from"./Diciplines.438f5761.js";import{e as Je}from"./config.2db586ac.js";import{a as Xe,e as Qe}from"./Companies.a136b23c.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.705d779e.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.5c7c3de8.js";import"./V-Dropdown.badc33ca.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.3a9e98a1.js";import"./useDropdown.83054731.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.f973f2d5.js";import"./activePanelState.64e8f3f7.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.d68564b0.js";import"./video.97fb6e11.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.83e515e1.js";import"./darkModeState.fd1ad691.js";import"./AnimatedLogo.820f7b3b.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.d9ddefd6.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.c920d493.js";import"./userPopovers.f4b9fc60.js";const Ze={class:"d-flex justify-content-center align-items-center flex-column mb-4"},et={class:"mt-5 text-center"},tt={class:"title is-5 is-narrow"},at={class:"w-100 mt-5"},st=pe("i",{class:"iconify",style:{"font-size":"20px",color:"white"},"data-icon":"feather:arrow-right","aria-hidden":"true"},null,-1);var lt=ae({expose:[],props:{category:{type:String,default:"Adult"}},emits:["changeMenu"],setup(e,{emit:l}){const n=e,i=me();se((()=>i.hash),(e=>{m.value=o.findIndex((e=>e.component==i.hash.slice(1)))})),le((()=>{""!=i.hash&&(m.value=o.findIndex((e=>e.component==i.hash.slice(1))))}));const o=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Family Members",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"},{name:"Invoices",component:"memberInvoices"},{name:"Credit",component:"memberCredit"}],r=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Parent / Guardian",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"},{name:"Credit",component:"memberCredit"}],u=[{name:"Personal Information",component:"personalInformation"},{name:"Waiver",component:"memberWaiver"}],c=ne((()=>"Adult"==n.category?o:"Minor"==n.category?r:u)),m=ie(0),d=ie(null),p=ne((()=>null!=c.value[m.value]?c.value[m.value].component:d.value));return(e,n)=>{const i=t,o=a;return oe(s)?(re(),ue(o,{key:0,class:"cardprofile"},{default:de((()=>[pe("div",Ze,[pe(i,{picture:oe(s).photo?`${oe(L)}storage/${oe(s).photo}`:"",size:"xl"},null,8,["picture"]),pe("div",et,[pe("h2",tt,ve(oe(s).name)+" "+ve(oe(s).second_name)+" "+ve(oe(s).last_name),1)])]),pe("div",at,[pe("ul",null,[(re(!0),ue(he,null,be(oe(c),((e,t)=>(re(),ue("li",{key:`item-${t}`},[pe(o,{class:["\r\n              mb-3\r\n              item_menu\r\n              d-flex\r\n              justify-content-between\r\n              align-items-center\r\n            ",m.value==t?"active":""],color:m.value==t?"warning":void 0,elevated:m.value==t,onClick:e=>(e=>{m.value=e,l("changeMenu",p)})(t)},{default:de((()=>[pe("p",null,ve(e.name),1),st])),_:2},1032,["class","color","elevated","onClick"])])))),128))])])])),_:1})):ce("",!0)}}});const nt=pe("div",{id:"payment-element"},null,-1),it=ge(" Pay now "),ot=pe("div",{id:"payment-message",class:"hidden"},null,-1);var rt=ae({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},setup(t){const s=t,l=Stripe(R.value);se((()=>s.id),(e=>{console.log("cambio"),n.value=!0,m()}));const n=ie(!0);ie({id:s.id,amount:s.amount});const i=ie(),o=ne((()=>"stripe"!=s.url?{payment_type_id:3,amount:s.amount}:{id:s.id,member_mermship_id:s.member_membership,amount:s.amount,payment_type_id:1})),r=ie(null),u=ie(null),c=ie(!1),m=async()=>{let e=await B.post(s.url,o.value).then((e=>{r.value=e.data.clientSecret,i.value=l.elements({clientSecret:r.value}),u.value=i.value.create("payment"),u.value.mount("#payment-element")})).catch((e=>{}));return n.value=!1,e},d=async e=>{e.preventDefault(),c.value=!0,await l.confirmPayment({elements:i.value,confirmParams:{return_url:`${W.value}members/process?payment_type=3&id=`+s.id+`&membership=${s.member_membership}`}}),c.value=!1};return le((()=>{m()})),(t,s)=>{const l=e,i=we,o=Ye,r=a;return re(),ue(he,null,[n.value?(re(),ue(l,{key:0,height:"500px"})):ce("",!0),ye(pe(r,{class:"mt-6"},{default:de((()=>[pe("form",{onSubmit:_e(d,["prevent"]),id:"payment-form"},[nt,pe(o,{size:"small",active:c.value},{default:de((()=>[pe(i,{id:"submit",class:"mt-4",color:"success"},{default:de((()=>[it])),_:1})])),_:1},8,["active"]),ot],40,["onSubmit"])])),_:1},512),[[fe,!n.value]])],64)}}});const ut={class:"table is-hoverable is-striped is-fullwidth"},ct=pe("th",{scope:"col"},"Members",-1),mt=pe("th",{scope:"col"},"Membership Name",-1),dt=pe("th",{scope:"col"},"Recurrence",-1),pt=pe("th",{scope:"col"},"Prorated",-1),vt=pe("th",{scope:"col"},"Membership Cost",-1),ht=pe("th",{scope:"col"},"Initiation Fee",-1),bt=pe("th",{scope:"col"},"Discount",-1),yt=pe("th",{scope:"col"},"Taxes",-1),ft={key:0,scope:"col"},_t=pe("th",{scope:"col"},"Sub Total",-1),gt={key:0},kt={key:0},Mt={key:1},Ct={key:2},xt={key:0},wt=pe("br",null,null,-1),Yt={key:1},jt={key:0},Dt={key:1},Pt={key:0},St={key:0},$t={key:1},It={key:1},Et={key:3},zt={class:"is-end"},At={class:"d-flex justify-content-between"},Vt=ge(" Card Payment "),Ft=ge(" Cash Payment "),Tt={class:"d-flex mb-4 justify-content-between"},qt={class:"title is-5"},Nt=ge(" Total: "),Ht={class:"title is-5"},Lt=ge(" Cash Total: "),Rt={class:"\r\n            d-flex\r\n            justify-content-center\r\n            align-items-center\r\n            flex-column\r\n            mb-4\r\n          "},Bt=pe("p",{class:"title is-5 mb-4"},"Change Back:",-1),Wt={class:"title is-3 mb-0"},Ot={class:"d-flex justify-content-center flex-wrap mb-4"},Gt=pe("div",{class:"w-100"},null,-1),Ut={class:"d-flex justify-content-center"},Kt=ge("Reset"),Jt=ge("Confirm");var Xt=ae({expose:[],setup(e){ie(!1);const t=ie(!1);le((()=>{console.log("se monto el payment")}));const o=ne((()=>{let e=O(n,"memberships_id");return null!=e?e:[]})),r=ne((()=>{let e=O(n,"recurrences_id");return null!=e?e:[]})),u=ne((()=>{let e=G(n,"initiation_fee");return null!=e?e:[]})),c=ne((()=>{let e=U(n,"discount");return null!=e?e:[]})),m=ne((()=>{let e=parseFloat(ke().format("DD")),t=0,a=0;return r.value.days>=30&&(a=e-r.value.payday,t=r.value.amount/r.value.days*a),{days:a,amount:Math.abs(Math.round(t))}})),d=ne((()=>(e=>{if(""!=G(n,"memberships_id"))return"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:K(e.tax.value),value:e.tax.value}})(o))),p=ie(null),v=ne((()=>{let e=0;return e+=r.value.amount,G(n,"is_initiation_fee").length||(e+=u.value),e-=m.value.amount,c.value.data&&("dolar"==c.value.data.type?e-=c.value.data.value:"percentaje"==c.value.data.type&&(e-=e/100*c.value.data.value)),e+=e/100*d.value.value,s.value.penalty&&(p.value=o.value.penalty,e+=p.value),s.value.leo_vet_fr&&(e-=e/100*o.value.descuento_vet),e})),h=ne((()=>{let e=0;return e+=v.value,e})),b=ie(!1),y=ie(0),f=ne((()=>{const e=parseFloat(y.value)-parseFloat(h.value);return e>0?e:0}));ie(1);const _=async()=>{await i(l.value.id,{total:h.value,payment_type_id:1,cash:y.value,cash_back:f.value}).then((e=>{J.success("Payment Success"),window.location.reload()})).catch((e=>{}))};return(e,i)=>{const g=we,k=a,M=rt,C=je,x=De,w=Pe;return re(),ue("div",null,[pe(k,{class:""},{default:de((()=>{return[pe("table",ut,[pe("thead",null,[pe("tr",null,[ct,mt,dt,pt,vt,ht,bt,yt,p.value?(re(),ue("th",ft,"Penalty")):ce("",!0),_t])]),0!=oe(o).length?(re(),ue("tbody",gt,[pe("tr",null,[pe("td",null,[pe("p",null,[pe("b",null,ve(oe(s).name)+" "+ve(oe(s).second_name)+" "+ve(oe(s).last_name),1)])]),0!=oe(o).legnth?(re(),ue("td",kt,ve(oe(o).name),1)):ce("",!0),0!=oe(r).length?(re(),ue("td",Mt,ve(oe(r).descriptions),1)):ce("",!0),0!=oe(r).length?(re(),ue("td",Ct,[oe(r).days>=30?(re(),ue("span",xt,[ge(ve(oe(m).days)+" days : ",1),wt,ge(" - "+ve(oe(K)(oe(m).amount)),1)])):(re(),ue("span",Yt,"-"))])):ce("",!0),pe("td",null,ve(oe(K)((e=oe(r),e.amount))),1),pe("td",null,[oe(G)(oe(n),"is_initiation_fee").length?(re(),ue("span",Dt,ve(oe(K)(0)),1)):(re(),ue("span",jt,ve(oe(K)(oe(u))),1))]),pe("td",null,[null!=oe(c).data?(re(),ue("span",Pt,["dolar"==oe(c).data.type?(re(),ue("span",St," - "+ve(oe(K)(oe(c).data.value)),1)):ce("",!0),"percentaje"==oe(c).data.type?(re(),ue("span",$t,ve(oe(c).data.value)+"%",1)):ce("",!0)])):(re(),ue("span",It,"-"))]),pe("td",null,ve(oe(d).text),1),p.value?(re(),ue("td",Et,ve(oe(K)(p.value)),1)):ce("",!0),pe("td",null,ve(oe(K)(oe(v))),1)]),pe("tr",null,[pe("td",{style:{"text-align":"right"},colspan:p.value?"9":"8"}," Total ",8,["colspan"]),pe("td",zt,ve(oe(K)(oe(h))),1)])])):ce("",!0)]),pe("div",At,[pe(g,{color:"success",disabled:0==oe(o).length||isNaN(oe(h)),onClick:i[1]||(i[1]=e=>t.value=!0)},{default:de((()=>[Vt])),_:1},8,["disabled"]),pe(g,{disabled:0==oe(o).length||isNaN(oe(h)),color:"warning",onClick:i[2]||(i[2]=e=>b.value=!0)},{default:de((()=>[Ft])),_:1},8,["disabled"])])];var e})),_:1}),t.value?(re(),ue(M,{key:0,class:"",url:`new_payment/${oe(l).id}`,amount:oe(h),id:oe(s).id,member_membership:oe(l).id},null,8,["url","amount","id","member_membership"])):ce("",!0),pe(w,{open:b.value,actions:"center",onClose:i[6]||(i[6]=e=>b.value=!1)},{content:de((()=>[pe("div",Tt,[pe("p",qt,[Nt,pe("b",null,ve(oe(K)(oe(h))),1)]),pe("p",Ht,[Lt,pe("b",null,ve(oe(K)(y.value)),1)])]),pe("div",Rt,[Bt,pe("p",Wt,[pe("b",null,ve(oe(K)(oe(f))),1)])]),pe("div",Ot,[pe(g,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:i[3]||(i[3]=e=>y.value=oe(h))},{default:de((()=>[ge(" Full Payment "+ve(oe(K)(oe(h))),1)])),_:1}),Gt,(re(),ue(he,null,be([5,10,20,50,100],((e,t)=>pe(g,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>y.value+=e},{default:de((()=>[ge(" $"+ve(e),1)])),_:2},1032,["onClick"]))),64))]),pe("div",Ut,[pe(x,null,{default:de((()=>[pe(C,null,{default:de((()=>[ye(pe("input",{"onUpdate:modelValue":i[4]||(i[4]=e=>y.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[Me,y.value]])])),_:1})])),_:1})])])),action:de((()=>[pe(g,{onClick:i[5]||(i[5]=e=>y.value=0),class:"d-flex justify-content-center",raised:""},{default:de((()=>[Kt])),_:1}),pe(g,{color:"success",onClick:_,disabled:oe(h)>y.value,class:"d-flex justify-content-center",raised:""},{default:de((()=>[Jt])),_:1},8,["disabled"])])),_:1},8,["open"])])}}});const Qt=pe("div",null,[pe("h1",{class:"title is-4 mb-0"},"Personal Information"),pe("p",null,"Edit member's personal information")],-1),Zt=ge(" Save Changes "),ea=ge(" Convert to Members ");var ta=ae({expose:[],props:{category:{type:String,default:"Adult"}},setup(e){const t=e;ne((()=>"Prospect"==t.category));const a=ie(!1),s=()=>{a.value=!0;let e=X(o.value),t=new FormData;for(var s in e)t.append(s,e[s]);r(t).then((e=>{J.success("Edit Success"),a.value=!1})).catch((e=>{a.value=!1}))},l=ne((()=>o.value.filter((e=>e.categories.includes(t.category)))));return(e,n)=>{const i=we,r=Ye,u=$e,c=Ie;return re(),ue(c,null,{"header-left":de((()=>[Qt])),"header-right":de((()=>[pe(r,{size:"small",active:a.value},{default:de((()=>[pe(i,{onClick:s,color:"primary"},{default:de((()=>[Zt])),_:1}),"Prospect"==t.category?(re(),ue(i,{key:0,color:"info",class:"ml-3"},{default:de((()=>[ea])),_:1})):ce("",!0)])),_:1},8,["active"])])),content:de((()=>["Minor"==t.category?(re(),ue(u,{key:0,"inputs-step":oe(l)},null,8,["inputs-step"])):(re(),ue(u,{key:1,"inputs-step":oe(o)},null,8,["inputs-step"]))])),_:1})}}});const aa=pe("div",null,[pe("h1",{class:"title is-4 mb-0"},"Membership / Contract"),pe("p",null,"Edit member's membership and contract information")],-1),sa={class:"columns is-multiline justify-content-center"},la={key:0,class:"column is-12"},na=pe("p",null,[pe("small",null,"Membership")],-1),ia={class:"title is-4 mb-0"},oa={class:"text-right"},ra=pe("b",null,"Payment Method:",-1),ua={class:"title is-4"},ca=pe("br",null,null,-1),ma={key:0,class:"mr-1 mb-1"},da={key:1,class:"column is-2"},pa=pe("p",null,[pe("b",null,"HOLD Membership")],-1),va={key:0},ha=pe("p",null,"Hold end date last day of the month prior to the end of the hold",-1),ba=ge("Confirm"),ya={key:2,class:"column is-2"},fa=pe("p",null,[pe("b",null,"Pause Payment")],-1),_a={key:0},ga=ge("Confirm"),ka={key:3,class:"column is-2"},Ma=pe("p",null,[pe("b",null,"Cancel Membership")],-1),Ca={key:4,class:"column is-2"},xa=pe("p",null,[pe("b",null,"Payment Now")],-1),wa={key:5,class:"column is-2"},Ya=pe("p",null,[pe("b",null,"Pay Late Fee")],-1),ja={key:6,class:"column is-2"},Da=pe("p",null,[pe("b",null,"Sync Subscription")],-1),Pa={key:7,class:"mb-4 column is-12"},Sa=ge("Save Changes"),$a=ge(" New Membership "),Ia={key:9,class:"column is-12 mb-6 mt-4"},Ea={key:1},za={class:"d-flex justify-content-end w-100"},Aa=ge("Cancel"),Va={key:10,class:"columns is-multiline column mt-4 is-12"},Fa=pe("b",null,"Contract Date:",-1),Ta={class:"column is-12"},qa=pe("h1",{class:"title is-6"},"Active Waiver Information",-1),Na={class:"text-center"},Ha=pe("img",{src:qe,width:"40",alt:""},null,-1),La=ge(" View PDF ");var Ra=ae({expose:[],props:{},emits:["reload"],setup(t,{emit:i}){le((()=>{u(n)})),ie(null),ie(null),ie(null),ie(null),ie(null);const r=ie(!1);ie(null);const x=ie(!1),w=ne((()=>{if(n.unshift(c.value[0]),n.push(m.value[0]),U(n,"prorrateo").change=function(e){this.model?U(e,"schedules").disabled=!0:U(e,"schedules").disabled=!1},U(n,"recurrence").class="is-4",s.value&&l.value&&1==l.value.status){let e=["locations_id","diciplines","staff_id","discount"];return n.filter((t=>e.includes(t.name)))}return n})),Y=()=>{U(n,"amount").required=!1,U(n,"initiation_fee").required=!1,U(n,"diciplines").required=!1;const e=X(n);h(e).then((e=>{J.success("Success"),r.value=!1,U(n,"amount").required=!0,U(n,"initiation_fee").required=!0,U(n,"diciplines").required=!0}))},j=async()=>{r.value=!0,await b(w.value,o.value),r.value=!1},D=()=>{confirm("Are you sure you want to perform this action?")&&(r.value=!0,y().then((e=>{J.success("Memberships Cancel"),window.location.reload(),r.value=!1})))},P=e=>{f(e,l.value.id).then((e=>{if(e.data.status)J.success("Sign Success");else for(var t in J.error(e.data.mensaje),e.data.errores)e.data.errores[t].forEach((e=>{J.error(`${t} : ${e}`)}))})).catch((e=>{}))},S=e=>{},$=ie(!1),I=ie(null),E=()=>{confirm("Are you sure you want to perform this action?")&&(r.value=!0,_(l.value.id,I.value).then((e=>{J.success("Success Pause"),r.value=!1,i("reload")})).catch((e=>{for(var t in r.value=!1,e.response.data)e.response.data.errores[t].forEach((e=>{J.error(`${t}: ${e}`)}))})))},z=()=>{confirm("Are you sure you want to perform this action?")&&(r.value=!0,g(l.value.id,I.value).then((e=>{J.success("Success Hold"),r.value=!1,I.value=null,i("reload")})).catch((e=>{for(var t in r.value=!1,e.response.data)e.response.data[t].forEach((e=>{J.error(`${t}: ${e}`)}))})))},A=ie(!1),V=(e,t=3,a={})=>{if(!confirm("Do you want to try the payment?"))return;let n={payment_type_id:t,payment_method:e,total:s.value.subscription.total_invoice};1==t&&(n.changeBack=a.changeBack,n.cash=a.cash),r.value=!0,k(l.value.id,n).then((e=>{J.success("success"),window.location.reload()})).catch((e=>{if("object"==typeof e.response.data)for(var t in e.response.data)"array"==typeof e.response.data[t]||J.error(e.response.data[t]);else J.error(e.response.data)})).finally((()=>{r.value=!1}))},F=e=>{V(null,1,e)},T=()=>{r.value=!0,M().then((e=>{r.value=!1,J.success("Success"),i("reload")})).catch((e=>{r.value=!1}))},q=()=>{r.value=!0,C().then((e=>{r.value=!1,J.success("Success"),i("reload")})).catch((e=>{J.error(e.response.data),r.value=!1}))},N=()=>{if(null==l.value.hold_date_finish&&null==l.value.date_finish_pause)x.value=!0;else{if(null!=l.value.date_finish_pause)return void J.error("This membership is on pause. Activation is required to continue");z()}},H=()=>{if(null==s.value.subscription.pause_collection)$.value=!0;else{if(null!=l.value.hold_date_finish)return void J.error("This membership is on pause.");E()}};return(t,n)=>{const i=a,o=Ye,u=we,c=Pe,m=Ee,h=Ve,b=$e,y=Fe,f=we,_=e,g=ze,k=Ae,M=Te,C=Ie;return re(),ue(C,null,{"header-left":de((()=>[aa])),content:de((()=>[pe("div",sa,[oe(s)&&oe(l)&&1==oe(l).status?(re(),ue("div",la,[pe(i,{class:"d-flex justify-content-between",color:null!=oe(l).hold_date_finish?"warning":"info",style:null==oe(s).subscription.pause_collection?{}:{backgroundColor:"#404046 !important"}},{default:de((()=>[pe("span",null,[na,pe("p",ia,ve(oe(l).membership.name),1),pe("p",null,ve(oe(l).recurrence.descriptions),1)]),pe("span",oa,[pe("p",null,[pe("small",null,[ra,ge(" "+ve(oe(l).payment_type.name),1)])]),pe("p",null,[pe("small",null,ve(oe(l).recurrence.is_recurrence?"Recurrence":"no recurrence"),1)]),pe("p",ua,[ge(ve(oe(K)(oe(s).subscription.total_invoice/100)),1),ca,oe(s).subscription&&oe(s).subscription.subscription&&!oe(s).subscription.subscription.upcoming_total?(re(),ue("small",ma,"No upcoming bill")):ce("",!0)])])])),_:1},8,["color","style"])])):ce("",!0),oe(s)&&oe(l)&&1==oe(l).status?(re(),ue("div",da,[oe(s).membership_members.is_recurrence?(re(),ue(o,{key:0,size:"small",active:r.value},{default:de((()=>[oe(l)&&oe(s).subscription?(re(),ue(i,{key:0,color:"warning",outlined:null==oe(l).hold_date_finish,onClick:N,class:"mr-4 btn-card text-center px-2",style:{"font-size":"12px"}},{default:de((()=>[pa,pe("p",null,[null!=oe(l).hold_date_finish?(re(),ue("span",va,"Active until: "+ve(oe(ke)(oe(l).hold_date_finish).format("MM/DD/YYYY")),1)):ce("",!0)])])),_:1},8,["outlined"])):ce("",!0)])),_:1},8,["active"])):ce("",!0),pe(c,{open:x.value,actions:"center",onClose:n[2]||(n[2]=e=>x.value=!1)},{content:de((()=>[ha,ye(pe("input",{type:"date","onUpdate:modelValue":n[1]||(n[1]=e=>I.value=e),class:"input mt-4"},null,512),[[Me,I.value]])])),action:de((()=>[pe(u,{onClick:z,color:"primary",raised:""},{default:de((()=>[ba])),_:1})])),_:1},8,["open"])])):ce("",!0),oe(s)&&oe(l)&&1==oe(l).status?(re(),ue("div",ya,[oe(s).membership_members.is_recurrence?(re(),ue(o,{key:0,size:"small",active:r.value},{default:de((()=>[oe(l)&&oe(s).subscription?(re(),ue(i,{key:0,color:"undefined",style:[{"font-size":"12px"},null==oe(s).subscription.pause_collection?{}:{backgroundColor:"#404046"}],outlined:null==oe(s).subscription.pause_collection,onClick:H,class:"mr-4 btn-card text-center px-2"},{default:de((()=>[fa,pe("p",null,[null!=oe(s).subscription.pause_collection?(re(),ue("span",_a,"Active until: "+ve(oe(ke)(oe(s).subscription.pause_collection).format("MM-DD-YYYY")),1)):ce("",!0)])])),_:1},8,["style","outlined"])):ce("",!0)])),_:1},8,["active"])):ce("",!0),pe(c,{open:$.value,actions:"center",onClose:n[4]||(n[4]=e=>$.value=!1)},{content:de((()=>[ye(pe("input",{type:"date","onUpdate:modelValue":n[3]||(n[3]=e=>I.value=e),class:"input"},null,512),[[Me,I.value]])])),action:de((()=>[pe(u,{onClick:E,color:"primary",raised:""},{default:de((()=>[ga])),_:1})])),_:1},8,["open"])])):ce("",!0),oe(s)&&oe(l)&&1==oe(l).status?(re(),ue("div",ka,[pe(o,{size:"small",active:r.value},{default:de((()=>[oe(l)?(re(),ue(i,{key:0,color:"danger",outlined:"",onClick:D,class:"mr-4 btn-card text-center px-2",style:{"font-size":"12px"}},{default:de((()=>[Ma])),_:1})):ce("",!0)])),_:1},8,["active"])])):ce("",!0),oe(s)&&oe(l)&&1==oe(l).status?(re(),ue("div",Ca,[pe(o,{size:"small",active:r.value},{default:de((()=>[oe(l)?(re(),ue(i,{key:0,color:"success",outlined:"",onClick:n[5]||(n[5]=e=>A.value=!A.value),class:"mr-4 btn-card text-center px-2",style:{"font-size":"12px"}},{default:de((()=>[xa])),_:1})):ce("",!0)])),_:1},8,["active"])])):ce("",!0),oe(s)&&oe(l)?(re(),ue("div",wa,[oe(s).membership_members.is_recurrence?(re(),ue(o,{key:0,size:"small",active:r.value},{default:de((()=>[oe(l)?(re(),ue(i,{key:0,color:"secondary",outlined:"",onClick:T,class:"mr-4 btn-card text-center px-2",style:{"font-size":"12px"}},{default:de((()=>[Ya])),_:1})):ce("",!0)])),_:1},8,["active"])):ce("",!0)])):ce("",!0),oe(s)&&oe(l)?(re(),ue("div",ja,[oe(s).membership_members.is_recurrence?(re(),ue(o,{key:0,size:"small",active:r.value},{default:de((()=>[oe(l)?(re(),ue(i,{key:0,color:void 0,outlined:"",onClick:q,class:"mr-4 btn-card text-center px-2",style:{"font-size":"12px"}},{default:de((()=>[Da])),_:1})):ce("",!0)])),_:1},8,["active"])):ce("",!0)])):ce("",!0),A.value?(re(),ue("div",Pa,[oe(s).user?(re(),ue(h,{key:0,onOnMethodPayment:V,memberid:oe(s).id,method_default:oe(s).user.pm_last_four,"show-new-card":!1,class:"mb-4",ancho:"is-4"},{default:de((()=>[pe(m,{total:oe(s).subscription.total_invoice,margin:"mx-0",class:"is-4",onOnPaymentCash:F},null,8,["total"])])),_:1},8,["memberid","method_default"])):ce("",!0)])):ce("",!0),oe(d).length?ce("",!0):(re(),ue(i,{key:8,class:"mb-4 column is-12"},{default:de((()=>[pe(b,{"inputs-step":oe(w)},null,8,["inputs-step"]),oe(s)&&oe(s).trainers?(re(),ue(y,{key:0,avatars:oe(p)(oe(s).trainers),size:"small"},null,8,["avatars"])):ce("",!0),oe(s)&&oe(l)&&1==oe(l).status?(re(),ue(o,{key:1,size:"small",active:r.value},{default:de((()=>[pe(f,{class:"mt-5",onClick:Y,color:"primary"},{default:de((()=>[Sa])),_:1})])),_:1},8,["active"])):ce("",!0),oe(v)?ce("",!0):(re(),ue(o,{key:2,size:"small",active:r.value},{default:de((()=>[oe(l)&&2!=oe(l).status?ce("",!0):(re(),ue(f,{key:0,class:"mt-5",onClick:j,color:"primary"},{default:de((()=>[$a])),_:1}))])),_:1},8,["active"]))])),_:1})),oe(l)&&2!=oe(l).status?ce("",!0):(re(),ue("div",Ia,[r.value?(re(),ue(_,{key:0,height:"300px",class:"mb-4"})):ce("",!0),oe(d).length?(re(),ue("div",Ea,[(re(!0),ue(he,null,be(oe(d),((e,a)=>(re(),ue(k,{key:`presupuesto-${a}`,class:"mb-4",presupuesto:e},{default:de((()=>[pe("div",za,[pe(g,{member:e.member,member_id:oe(s).id,membresia:e.membresia,contact:t.dataContact,presupuesto_id:e.presupuesto_id,"categories-members":t.categoriesMembers,"notas-input":t.notasInput,total:e.totales.upfront.amount_total,onPaymentAction:S,type:"edit"},null,8,["member","member_id","membresia","contact","presupuesto_id","categories-members","notas-input","total"])])])),_:2},1032,["presupuesto"])))),128)),pe(f,{onClick:n[6]||(n[6]=e=>d.value=[]),color:"danger"},{default:de((()=>[Aa])),_:1})])):ce("",!0)])),oe(s)&&oe(l)?(re(),ue("div",Va,[pe("div",null,[pe("p",null,[Fa,ge(" "+ve(oe(ke)(oe(s).membership_members.created_at).format("ddd - DD MMM yyyy")),1)])]),pe("div",Ta,[pe(M,{onOnSign:P,"is-sign":!oe(l).sign,contract:`contract_${oe(s).id}_${oe(s).membership_members.id}_${oe(s).personal_identifications}.pdf`,"url-contract":`generateContract/${oe(s).id}`},null,8,["is-sign","contract","url-contract"])])])):ce("",!0),ce("",!0),oe(s)&&oe(l)?(re(),ue(i,{key:12,class:"mb-4"},{default:de((()=>[qa,pe("div",Na,[pe("a",{target:"_blank",href:`${oe(L)}generateWeiver/${oe(s).id}`},[Ha,pe("p",null," weiver_"+ve(oe(s).id)+"_"+ve(oe(s).membership_members.id)+"_"+ve(oe(s).personal_identifications)+".pdf ",1),pe(u,{color:"success",outlined:"",class:"mt-4 py-1"},{default:de((()=>[La])),_:1})],8,["href"])])])),_:1})):ce("",!0)])])),_:1})}}});const Ba=pe("div",null,[pe("h1",{class:"title is-4 mb-0"},"Family Members"),pe("p",null,"Edit member's family members")],-1),Wa={class:"columns is-multiline"},Oa={key:0,class:"column is-4 mb-4"},Ga=pe("div",null,[pe("h1",{class:"title is-4 mb-0"},"Parent"),pe("p",null,"Edit parent contact")],-1),Ua=ge(" Save Changes "),Ka={class:""},Ja=pe("h1",{class:"title is-5"},"Parent Contact Information",-1),Xa={class:"d-flex justify-content-end mr-6"};var Qa=ae({expose:[],setup(e){ie([{id:1,name:"Wonder Woman",subtitle:"Mother/Adult",img:"https://picsum.photos/150/150"},{id:2,name:"Lionel Messi",subtitle:"Father/Minor",img:"https://picsum.photos/150/151"}]);const a=()=>{const e=X(x.value),t=new FormData;for(var a in e)t.append(a,e[a]);Q.value||j(t).then((e=>{J.success("Success")}))},l=ne((()=>(console.log("info",o.value),U(x.value,"city_id").model=U(o.value,"city_id").model,U(x.value,"state_id").model=U(o.value,"state_id").model,U(x.value,"postal_code").model=U(o.value,"postal_code").model,U(x.value,"country_id").model=U(o.value,"country_id").model,x.value)));return(e,n)=>{const i=t,o=Ne,r=He,u=Ie,c=we,m=$e;return re(),ue("div",null,[oe(s)&&"Adult"==oe(s).category?(re(),ue(u,{key:0},{"header-left":de((()=>[Ba])),"header-right":de((()=>[])),content:de((()=>[pe("div",Wa,[oe(w)?(re(),ue("div",Oa,[pe(r,{title:`${oe(w).name} ${oe(w).second_name} ${oe(w).last_name}`,class:"border-1 p-4 radius-small"},{icon:de((()=>[pe(i,{size:"medium",picture:`${oe(L)}storage/${oe(w).photo}`,subtitle:"Principal Family"},null,8,["picture"])])),action:de((()=>[pe(o,{"id-member":oe(w).id},null,8,["id-member"])])),_:1},8,["title"])])):ce("",!0),(re(!0),ue(he,null,be(oe(Y),((e,t)=>(re(),ue("div",{class:"column is-4 mb-4",key:`family-${t}`},[pe(r,{title:`${e.member.name} ${e.member.second_name} ${oe(s).last_name}`,subtitle:e.member.relationships,class:"border-1 p-4 radius-small"},{icon:de((()=>[pe(i,{size:"medium",picture:`${oe(L)}storage/${e.member.photo}`},null,8,["picture"])])),action:de((()=>[pe(o,{"id-member":e.members_id},null,8,["id-member"])])),_:2},1032,["title","subtitle"])])))),128))])])),_:1})):ce("",!0),oe(s)&&"Minor"==oe(s).category?(re(),ue(u,{key:1},{"header-left":de((()=>[Ga])),"header-right":de((()=>[pe(c,{onClick:a,color:"primary"},{default:de((()=>[Ua])),_:1})])),content:de((()=>[pe("div",Ka,[Ja,pe("div",Xa,[pe(i,{picture:`${oe(L)}storage/${oe(U)(oe(x),"parent_photo").data}`,size:"large"},null,8,["picture"])]),pe(m,{"inputs-step":oe(l)},null,8,["inputs-step"])])])),_:1})):ce("",!0)])}}});const Za=pe("div",null,[pe("h1",{class:"title is-4 mb-0"},"Emergency Contact"),pe("p",null,"Edit member's emergency contact")],-1),es=ge(" Save Changes "),ts={class:""},as=pe("h1",{class:"title is-5"},"Emergency Contact Information",-1);var ss=ae({expose:[],setup(e){const t=()=>{const e=X(D.value);console.log(e),P(e).then((e=>{J.success("Success")}))};return(e,a)=>{const s=we,l=$e,n=Ie;return re(),ue(n,null,{"header-left":de((()=>[Za])),"header-right":de((()=>[pe(s,{onClick:t,color:"primary"},{default:de((()=>[es])),_:1})])),content:de((()=>[pe("div",ts,[as,pe(l,{"inputs-step":oe(D)},null,8,["inputs-step"])])])),_:1})}}});const ls=pe("div",null,[pe("h1",{class:"title is-4 mb-0"},"Check-ins History"),pe("p",null,"Edit member's check-ins history")],-1),ns={class:"p-6"},is={class:"mt-4"},os={class:"table is-hoverable is-fullwidth"},rs=pe("thead",null,[pe("tr",null,[pe("th",{scope:"col"},"DATE"),pe("th",{scope:"col"},"TIME")])],-1);var us=ae({expose:[],setup:e=>(e,t)=>{const a=Ie;return oe(s)?(re(),ue(a,{key:0},{"header-left":de((()=>[ls])),"header-right":de((()=>[])),content:de((()=>[pe("div",ns,[pe("div",is,[pe("table",os,[rs,pe("tbody",null,[(re(!0),ue(he,null,be(oe(S),((e,t)=>(re(),ue("tr",{key:`access-${t}`},[pe("td",null,ve(oe(ke)(e.created_at).format("MM/DD/YYYY")),1),pe("td",null,ve(oe(ke)(e.created_at).format("HH:mm:ss")),1)])))),128))])])])])])),_:1})):ce("",!0)}});const cs=ie([{typeInput:"text",name:"description",placeholder:"Description",model:"",class:"is-12",isLabel:!0,required:!0},{typeInput:"text",name:"amount",placeholder:"Amount",model:"",class:"is-12",isLabel:!0,required:!0}]),ms=ge("Confirm");var ds=ae({expose:[],props:{openModal:{type:Boolean,default:!1},paymentMethodId:{type:String,default:""},paymentGateway:{type:Number,default:1}},emits:["closeModal","refreshTransactions"],setup(e,{emit:t}){const a=e,l=ie(!1),n=async()=>{const e=X(cs.value);await s.value;const n={amount:e.amount,description:e.description,payment_method_id:a.paymentGateway,payment_method_stripe_id:a.paymentMethodId,member_id:s.value.id};l.value=!0;try{await(async(e={})=>await B.post("make-manual-payment",e))(n),Z(cs.value),J.success("Success"),t("closeModal")}catch(i){"string"==typeof i.response.data.message?J.error(i.response.data.message):J.error(i)}finally{l.value=!1}},i=()=>{Z(cs.value),t("closeModal")};return(e,t)=>{const s=$e,o=we,r=Pe;return re(),ue(r,{open:a.openModal,title:"Create a new payment",size:"small",actions:"right",onClose:i},{content:de((()=>[pe(s,{"inputs-step":oe(cs)},null,8,["inputs-step"])])),action:de((()=>[pe(o,{color:"primary",raised:"",onClick:n,loading:l.value},{default:de((()=>[ms])),_:1},8,["loading"])])),_:1},8,["open"])}}});const ps=pe("div",null,[pe("h1",{class:"title is-4 mb-0"},"Purchases History"),pe("p",null,"Edit member's purchases history")],-1),vs=pe("p",{class:"title is-5"},"Card List",-1),hs=pe("div",{class:"d-flex align-items-center"},[pe("p",{class:"title is-1 mb-0"},[pe("i",{class:"fas fa-shopping-bag","aria-hidden":"true"})]),pe("div",{class:"ml-4"},[pe("p",{class:"title is-4 mb-2"},"Make a new payment with cash")])],-1);var bs=ae({expose:[],setup(e){const t=ie(null),l=ie(!1),n=ie(1),i=()=>{},o=e=>{t.value=e,n.value=1,l.value=!0},r=()=>{l.value=!0,n.value=2},u=()=>{l.value=!1};return(e,c)=>{const m=ds,d=Ve,p=a,v=Ie;return oe(s)?(re(),ue(v,{key:0},{"header-left":de((()=>[ps])),"header-right":de((()=>[])),content:de((()=>[vs,pe(m,{"payment-method-id":t.value,"open-modal":l.value,"payment-gateway":n.value,onCloseModal:u},null,8,["payment-method-id","open-modal","payment-gateway"]),oe(s).user?(re(),ue(d,{key:0,"show-option":!0,class:"mb-6",onMakePayment:o,onOnMethodPayment:i,method_default:oe(s).user.pm_last_four,"show-new-card":!0,memberid:oe(s).id},null,8,["method_default","memberid"])):ce("",!0),pe(p,{onClick:r,color:"success",class:"btn-card"},{default:de((()=>[hs])),_:1})])),_:1})):ce("",!0)}}});const ys=pe("div",null,[pe("h1",{class:"title is-4 mb-0"},"Subscription Invoice History"),pe("p")],-1),fs=pe("p",null,"Invoices",-1),_s={class:"table is-hoverable is-fullwidth"},gs=pe("thead",null,[pe("tr",null,[pe("th",{scope:"col"},"Description"),pe("th",{scope:"col"},"Created"),pe("th",{scope:"col"},"Amount"),pe("th",{scope:"col"},"Method"),pe("th",{scope:"col"},"Download"),pe("th",{scope:"col"},"Status")])],-1),ks={key:0},Ms=pe("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),Cs={key:1},xs=pe("td",null,"Subscription",-1),ws={key:0},Ys={key:1},js={key:0},Ds={key:1},Ps=pe("td",null,"Cash",-1),Ss=pe("td",null,null,-1);var $s=ae({expose:[],setup(e){const t=Ce({data:[]});return ne((()=>l.value.payments)),ne((()=>{let e=[];return I.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),le((async()=>{await $(s.value.id,{invoice_type:1}).then((e=>{t.data=e.data.invoices})).catch((e=>{}))})),(e,l)=>{const n=we,i=Se,o=a,r=Ie;return oe(s)?(re(),ue(r,{key:0},{"header-left":de((()=>[ys])),"header-right":de((()=>[])),content:de((()=>[pe(o,{class:"my-4"},{default:de((()=>[fs,pe("table",_s,[gs,oe(s).subscription&&oe(t).data?(re(),ue("tbody",ks,[(re(!0),ue(he,null,be(oe(t).data,((e,t)=>(re(),ue("tr",{key:`invoice-${t}`},[pe("td",null,[pe("p",null,ve(e.description),1)]),pe("td",null,ve(oe(ke)(e.created).format("MM/DD/YYYY")),1),pe("td",null,ve(oe(K)(e.total/100)),1),pe("td",null,ve(e.collection_method),1),pe("td",null,[pe("a",{href:e.invoice_pdf,target:"_blank"},[pe(n,null,{default:de((()=>[Ms])),_:1})],8,["href"])]),pe("td",null,[pe(i,{class:"mr-1 mb-1",label:e.status},null,8,["label"])])])))),128))])):oe(s).membership_members&&oe(s).membership_members.invoice_local?(re(),ue("tbody",Cs,[(re(!0),ue(he,null,be(oe(s).membership_members.invoice_local,((e,t)=>(re(),ue("tr",{key:`invoice-${t}`},[xs,pe("td",null,ve(oe(ke)(e.created).format("MM/DD/YYYY")),1),pe("td",null,[e.period_start?(re(),ue("span",ws,ve(oe(ke)(e.period_start).format("MM/DD/YYYY")),1)):(re(),ue("span",Ys))]),pe("td",null,[e.period_end?(re(),ue("span",js,ve(oe(ke)(e.period_end).format("MM/DD/YYYY")),1)):(re(),ue("span",Ds))]),pe("td",null,ve(oe(K)(e.amount/100)),1),Ps,Ss,pe("td",null,ve(e.status?"paid":"incomplete"),1)])))),128))])):ce("",!0)])])),_:1}),ce("",!0)])),_:1})):ce("",!0)}}});const Is=pe("div",null,[pe("h1",{class:"title is-4 mb-0"},"Product Invoice History"),pe("p")],-1),Es=pe("p",null,"Invoices",-1),zs={class:"table is-hoverable is-fullwidth"},As=pe("thead",null,[pe("tr",null,[pe("th",{scope:"col"},"Description"),pe("th",{scope:"col"},"Created"),pe("th",{scope:"col"},"Amount"),pe("th",{scope:"col"},"Method"),pe("th",{scope:"col"},"Download"),pe("th",{scope:"col"},"Status")])],-1),Vs={key:0},Fs=pe("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),Ts={key:1},qs=pe("td",null,"Subscription",-1),Ns={key:0},Hs={key:1},Ls={key:0},Rs={key:1},Bs=pe("td",null,"Cash",-1),Ws=pe("td",null,null,-1);var Os=ae({expose:[],setup(e){const t=Ce({data:[]});return ne((()=>l.value.payments)),ne((()=>{let e=[];return I.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),le((async()=>{const{data:e}=await $(s.value.id,{invoice_type:2});t.data=e.invoices})),(e,l)=>{const n=we,i=Se,o=a,r=Ie;return oe(s)?(re(),ue(r,{key:0},{"header-left":de((()=>[Is])),"header-right":de((()=>[])),content:de((()=>[pe(o,{class:"my-4"},{default:de((()=>[Es,pe("table",zs,[As,oe(s).subscription&&oe(t).data?(re(),ue("tbody",Vs,[(re(!0),ue(he,null,be(oe(t).data,((e,t)=>(re(),ue("tr",{key:`invoice-${t}`},[pe("td",null,[pe("p",null,ve(e.description),1)]),pe("td",null,ve(oe(ke)(e.created).format("MM/DD/YYYY")),1),pe("td",null,ve(oe(K)(e.total/100)),1),pe("td",null,ve(e.collection_method),1),pe("td",null,[pe("a",{href:e.invoice_pdf,target:"_blank"},[pe(n,null,{default:de((()=>[Fs])),_:1})],8,["href"])]),pe("td",null,[pe(i,{class:"mr-1 mb-1",label:e.status},null,8,["label"])])])))),128))])):oe(s).membership_members&&oe(s).membership_members.invoice_local?(re(),ue("tbody",Ts,[(re(!0),ue(he,null,be(oe(s).membership_members.invoice_local,((e,t)=>(re(),ue("tr",{key:`invoice-${t}`},[qs,pe("td",null,ve(oe(ke)(e.created).format("MM/DD/YYYY")),1),pe("td",null,[e.period_start?(re(),ue("span",Ns,ve(oe(ke)(e.period_start).format("MM/DD/YYYY")),1)):(re(),ue("span",Hs))]),pe("td",null,[e.period_end?(re(),ue("span",Ls,ve(oe(ke)(e.period_end).format("MM/DD/YYYY")),1)):(re(),ue("span",Rs))]),pe("td",null,ve(oe(K)(e.amount/100)),1),Bs,Ws,pe("td",null,ve(e.status?"paid":"incomplete"),1)])))),128))])):ce("",!0)])])),_:1}),ce("",!0)])),_:1})):ce("",!0)}}});const Gs=pe("div",null,[pe("h1",{class:"title is-4 mb-0"},"Charge Invoice History"),pe("p")],-1),Us=pe("p",null,"Invoices",-1),Ks={class:"table is-hoverable is-fullwidth"},Js=pe("thead",null,[pe("tr",null,[pe("th",{scope:"col"},"Description"),pe("th",{scope:"col"},"Created"),pe("th",{scope:"col"},"Amount"),pe("th",{scope:"col"},"Method"),pe("th",{scope:"col"},"Download"),pe("th",{scope:"col"},"Status")])],-1),Xs={key:0},Qs=pe("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),Zs={key:1},el=pe("td",null,"Subscription",-1),tl={key:0},al={key:1},sl={key:0},ll={key:1},nl=pe("td",null,"Cash",-1),il=pe("td",null,null,-1);var ol=ae({expose:[],setup(e){const t=Ce({data:[]});return ne((()=>l.value.payments)),ne((()=>{let e=[];return I.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),le((async()=>{const{data:e}=await $(s.value.id,{invoice_type:3});t.data=e.invoices})),(e,l)=>{const n=we,i=Se,o=a,r=Ie;return oe(s)?(re(),ue(r,{key:0},{"header-left":de((()=>[Gs])),"header-right":de((()=>[])),content:de((()=>[pe(o,{class:"my-4"},{default:de((()=>[Us,pe("table",Ks,[Js,oe(s).subscription&&oe(t).data?(re(),ue("tbody",Xs,[(re(!0),ue(he,null,be(oe(t).data,((e,t)=>(re(),ue("tr",{key:`invoice-${t}`},[pe("td",null,[pe("p",null,ve(e.description),1)]),pe("td",null,ve(oe(ke)(e.created).format("MM/DD/YYYY")),1),pe("td",null,ve(oe(K)(e.total/100)),1),pe("td",null,ve(e.collection_method),1),pe("td",null,[pe("a",{href:e.invoice_pdf,target:"_blank"},[pe(n,null,{default:de((()=>[Qs])),_:1})],8,["href"])]),pe("td",null,[pe(i,{class:"mr-1 mb-1",label:e.status},null,8,["label"])])])))),128))])):oe(s).membership_members&&oe(s).membership_members.invoice_local?(re(),ue("tbody",Zs,[(re(!0),ue(he,null,be(oe(s).membership_members.invoice_local,((e,t)=>(re(),ue("tr",{key:`invoice-${t}`},[el,pe("td",null,ve(oe(ke)(e.created).format("MM/DD/YYYY")),1),pe("td",null,[e.period_start?(re(),ue("span",tl,ve(oe(ke)(e.period_start).format("MM/DD/YYYY")),1)):(re(),ue("span",al))]),pe("td",null,[e.period_end?(re(),ue("span",sl,ve(oe(ke)(e.period_end).format("MM/DD/YYYY")),1)):(re(),ue("span",ll))]),pe("td",null,ve(oe(K)(e.amount/100)),1),nl,il,pe("td",null,ve(e.status?"paid":"incomplete"),1)])))),128))])):ce("",!0)])])),_:1}),ce("",!0)])),_:1})):ce("",!0)}}});const rl={},ul={key:0},cl={key:1},ml={key:2};rl.render=function(e,t){const a=$s,s=Os,l=ol,n=Le;return re(),ue(n,{selected:"subscription",tabs:[{label:"Subscription Invoice",value:"subscription"},{label:"Product Invoice",value:"product"},{label:"Charge Invoice",value:"charge"}]},{tab:de((({activeValue:e})=>["subscription"===e?(re(),ue("div",ul,[pe(a)])):"product"===e?(re(),ue("div",cl,[pe(s)])):"charge"===e?(re(),ue("div",ml,[pe(l)])):ce("",!0)])),_:1})};const dl=pe("div",null,[pe("h1",{class:"title is-4 mb-0"}," Waiver "),pe("p",null,"Edit member's waiver information")],-1),pl=ge(" Convert to Members "),vl={class:"columns is-multiline"},hl={class:"border-1 document_box p-4 d-flex justify-content-center radius-small"},bl={href:"234",class:"text-center"},yl=pe("img",{style:{width:"70px"},src:qe,alt:""},null,-1);var fl=ae({expose:[],setup(e){const t=ie([{name:"Waiver_010221.pdf",url:""},{name:"Waiver_010221.pdf",url:""}]);return(e,a)=>{const s=we,l=Ie;return re(),ue(l,null,{"header-left":de((()=>[dl])),"header-right":de((()=>[pe(s,{color:"info"},{default:de((()=>[pl])),_:1})])),content:de((()=>[pe("div",vl,[(re(!0),ue(he,null,be(t.value,((e,t)=>(re(),ue("div",{class:"column is-2 mb-4",key:`family-${t}`},[pe("div",hl,[pe("a",bl,[yl,pe("p",null,ve(e.name),1)])])])))),128))])])),_:1})}}});const _l=ge("Confirm");var gl=ae({expose:[],props:{openModal:{type:Boolean,default:!1}},emits:["closeModal","refreshTransactions"],setup(e,{emit:t}){const a=e,l=ie(!1),n=async()=>{const e=X(E.value),a={amount:e.amount,description:e.description};l.value=!0;try{"Add Credit"===e.transaction_type?await z(s.value.id,a):await A(s.value.id,a),Z(E.value),J.success("Success"),t("closeModal"),t("refreshTransactions")}catch(n){"string"==typeof n.response.data.message?J.error(n.response.data.message):J.error(n)}finally{l.value=!1}},i=()=>{Z(E.value),t("closeModal")};return(e,t)=>{const s=$e,o=we,r=Pe;return re(),ue(r,{open:a.openModal,title:"Create a new transaction",size:"small",actions:"right",onClose:i},{content:de((()=>[pe(s,{"inputs-step":oe(E)},null,8,["inputs-step"])])),action:de((()=>[pe(o,{color:"primary",raised:"",onClick:n,loading:l.value},{default:de((()=>[_l])),_:1},8,["loading"])])),_:1},8,["open"])}}});const kl=pe("div",null,[pe("h1",{class:"title is-4 mb-0"},"Credit History"),pe("p",null,"Edit member's credit history")],-1),Ml=ge(" New Transaction "),Cl={class:"title"},xl={class:"mt-4"},wl={class:"table is-hoverable is-fullwidth"},Yl=pe("thead",null,[pe("tr",null,[pe("th",{scope:"col"},"ID"),pe("th",{scope:"col"},"Description"),pe("th",{scope:"col"},"Date"),pe("th",{scope:"col"},"Type"),pe("th",{scope:"col"},"Amount")])],-1),jl={key:0};var Dl=ae({expose:[],setup(e){const t=Ce({open:!1}),l=ie(0);le((async()=>{n()}));const n=async()=>{await V(s.value.id),(async()=>{const{data:e}=await F(s.value.id);l.value=e.balance})()},i=()=>{t.open=!t.open},o=()=>{t.open=!1};return(e,r)=>{const u=we,c=gl,m=a,d=Ie;return oe(s)?(re(),ue(d,{key:0},{"header-left":de((()=>[kl])),"header-right":de((()=>[pe(u,{onClick:i,color:"primary"},{default:de((()=>[Ml])),_:1})])),content:de((()=>[pe(c,{"open-modal":oe(t).open,onCloseModal:o,onRefreshTransactions:n},null,8,["open-modal"]),pe("p",Cl,"Credit: "+ve(l.value)+"$",1),pe(m,{class:"p-"},{default:de((()=>[pe("div",xl,[pe("table",wl,[Yl,oe(T)?(re(),ue("tbody",jl,[(re(!0),ue(he,null,be(oe(T).data,((e,t)=>(re(),ue("tr",{key:`transaction-${t}`},[pe("td",null,ve(e.id),1),pe("td",null,ve(e.meta.description),1),pe("td",null,ve(oe(ke)(e.created_at).format("MM/DD/YYYY")),1),pe("td",null,ve(e.type),1),pe("td",null,ve(e.amount),1)])))),128))])):ce("",!0)])])])),_:1})])),_:1})):ce("",!0)}}});const Pl={key:0,class:"columns is-multiline"},Sl={class:"column is-3"},$l={class:"column is-9"},Il={class:"columns is-multiline column is-12"},El={class:"columns is-multiline column is-12"},zl={key:1,class:"columns is-multiline"},Al={class:"column is-3"},Vl={class:"column is-9"},Fl={class:"d-flex justify-content-between"},Tl=pe("b",null,"Member since.",-1),ql=pe("b",null,"Membership Active:",-1),Nl=pe("b",null,"Due Date: ",-1),Hl={key:0},Ll=pe("b",null,"Discount: ",-1),Rl={key:0};var Bl=ae({expose:[],setup(t){const i=me();Be.value="Member Profile",xe({title:"Members"});const r=ie(!1),u=ie("personalInformation"),c=e=>{u.value=e.value};se((()=>i.query),((e,t)=>{Object.keys(e).length>0&&(h(),v())}));const m=ie("ERROR MEMBERSHIP"),d=ie("");se(s,(e=>{e.sinMembresia&&(m.value="NO MEMBERSHIP",d.value="Please, select a membership"),e.isSolvente||e.sinMembresia||!e.subscription||(m.value=`Membership ${e.subscription.status}`,d.value=e.subscription.latest_invoice&&e.subscription.latest_invoice.payments_intents&&e.subscription.latest_invoice.payments_intents.length>0?`Last payment status : ${e.subscription.latest_invoice.payments_intents[0].status}`:""),e.subscription&&e.subscription.subscription&&!e.subscription.latest_invoice&&(d.value=`Last payment status : ${e.subscription.subscription.status}`),e.membership_members&&e.membership_members.cacelation_date&&(d.value=`Cancel date : ${ke(e.membership_members.cacelation_date).format("MM-DD-YYYY")}`)})),se((()=>i.hash),(e=>{u.value=i.hash.slice(1)})),se((()=>i.query.id),(e=>{u.value="personalInformation"}));const p=ie(!0),v=()=>{p.value=!0,setTimeout((()=>{p.value=!1}),500)};le((()=>{""!=i.hash&&(u.value=i.hash.slice(1)),Xe().then((e=>{ee(n,"locations_id",Qe.value)})),Je().then((e=>{ee(o,"country_id",e.contries),ee(o,"city_id",e.cities),ee(o,"state_id",e.states),ee(q,"city_id",e.cities),ee(q,"state_id",e.states),ee(q,"country_id",e.contries),ee(x.value,"city_id",e.cities),ee(x.value,"state_id",e.states),ee(x.value,"country_id",e.contries)})),Oe().then((e=>{ee(n,"memberships_id",e.data.memberships)})),We().then((e=>{ee(n,"discount",e.data.discounts)})),Ge().then((e=>{ee(n,"recurrences_id",e.data)})),Ue().then((e=>{ee(n,"staff_id",e.data)})),h()}));const h=async()=>{await N(i.query.id).then((e=>{for(var t in console.log("response.data",e.data),e.data)if("select_type"==t)"Individual"==e.data[t]?(U(o.value,"select_type").model=!1,U(o.value,"company_name").typeInput="hidden"):(U(o.value,"select_type").model=!0,U(o.value,"company_name").typeInput="text");else if("membership_members"==t)for(var a in e.data[t]||(m.value="Does not have a membership",d.value="Does not have a membership go to the Membership/Contract section and create a new membership and press New Membership",console.error("no posee una membresia :(")),e.data[t])"memberships_location"==a?e.data[t][a]?(U(n,"locations_id").model=e.data[t][a].companies_locations_id,Ke([e.data[t][a].companies_locations_id]).then((e=>{ee(n,"diciplines",e.data)}))):console.error("no posee una locacion :("):"diciplines"==a?(U(n,"diciplines").model=[],e.data[t][a].forEach((e=>{U(n,"diciplines").model.push(e.diciplines_id)}))):"discount"==a?e.data[t][a]&&(U(n,"discount").model=e.data[t][a].id):null!=U(n,a)&&te(n,a,e.data[t][a]);else if("trainers"==t){let a=[];e.data[t].forEach((e=>{a.push(e.id)})),te(n,"staff_id",a)}else if("emergency"==t)for(a in e.data[t])te(D,a,e.data[t][a]);else if("guardian"==t)for(a in e.data[t])"parent_address"==a?U(x.value,"address").model=e.data[t][a]:"parent_photo"==a?(""!=e.data[t][a]||null!=e.data[t][a]?U(x.value,"parent_photo").required=!1:U(x.value,"parent_photo").required=!0,U(x.value,"parent_photo").data=e.data[t][a]):te(x,a,e.data[t][a]);else te(o,t,"leo_vet_fr"==t?1==e.data[t]:e.data[t]);p.value=!1}))},b=ne((()=>{let e="";return s.value.subscription?(e=s.value.subscription.subscription&&"active"==s.value.subscription.subscription.status?"active":s.value.subscription.status,"active"==s.value.subscription.status||s.value.subscription.status,"canceled"==s.value.subscription.status&&ke()<=ke(s.value.membership_members.cacelation_date)&&(e="active")):s.value.sinMembresia&&(e=s.value.user&&s.value.user.pm_last_four?"nomembershipcontarjeta":"nomembership"),e})),y=()=>{p.value=!0,h()};return(t,n)=>{const i=e,o=lt,m=a,v=Xt,h=Se,f=ta,_=Ra,g=Qa,k=ss,M=us,C=bs,x=rl,w=fl,Y=Dl,j=Re;return re(),ue(j,null,{default:de((()=>[p.value?(re(),ue("div",Pl,[pe("div",Sl,[pe(i,{height:"700px"})]),pe("div",$l,[pe("div",Il,[pe(i,{height:"150px"})]),pe("div",El,[pe(i,{height:"420px"})])])])):ce("",!0),!p.value&&oe(s)?(re(),ue("div",zl,[pe("div",Al,[pe(o,{category:oe(s).category,onChangeMenu:c,class:oe(b)},null,8,["category","class"])]),pe("div",Vl,[oe(H)?ce("",!0):(re(),ue(m,{key:0,class:["\r\n            mb-4\r\n            d-flex\r\n            justify-content-between\r\n            align-items-center\r\n            cardprofile\r\n          ",oe(b)]},{default:de((()=>[pe("div",null,[pe("p",null,ve(d.value),1)])])),_:1},8,["class"])),r.value?(re(),ue(v,{key:1,class:"mb-4"})):ce("",!0),null!=oe(s).membership_members?(re(),ue(m,{key:2,class:"mb-4"},{default:de((()=>{var e;return[pe("div",Fl,[pe("div",null,[pe("p",null,[pe("b",null,[ge("Member #"+ve(oe(s).id)+" - ",1),pe("small",null,ve(oe(s).category),1)])]),pe("p",null,[pe("small",null,[Tl,ge(" "+ve(oe(ke)(oe(s).created_at).format("ddd - DD MMM YYYY")),1)])]),pe("p",null,[ql,ge(" "+ve(oe(l).membership.name),1)]),pe("p",null,[Nl,ge(" "+ve(oe(ke)(oe(s).subscription.proxima_factura).format("ddd - DD MMM YYYY")),1)]),(null==(e=oe(s).membership_members)?void 0:e.discount)?(re(),ue("p",Hl,[Ll,ge(" "+ve(oe(s).membership_members.discount.name),1)])):ce("",!0)]),oe(s).subscription?(re(),ue("div",Rl,[pe(h,{color:"info",label:oe(s).subscription.status,rounded:""},null,8,["label"])])):ce("",!0)])]})),_:1})):ce("",!0),ye(pe(f,{category:oe(s).category},null,8,["category"]),[[fe,"personalInformation"==u.value]]),ye(pe(_,{onReload:y},null,512),[[fe,"memberMembership"==u.value]]),"memberFamily"==u.value?(re(),ue(g,{key:3})):ce("",!0),"memberEmergency"==u.value?(re(),ue(k,{key:4})):ce("",!0),"memberCheckins"==u.value?(re(),ue(M,{key:5})):ce("",!0),"memberPurchases"==u.value?(re(),ue(C,{key:6})):ce("",!0),"memberInvoices"==u.value?(re(),ue(x,{key:7})):ce("",!0),"memberWaiver"==u.value?(re(),ue(w,{key:8})):ce("",!0),"memberCredit"==u.value?(re(),ue(Y,{key:9})):ce("",!0)])])):ce("",!0)])),_:1})}}});export default Bl;
