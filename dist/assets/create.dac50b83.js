import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.eba1148c.js";import{_ as t}from"./V-Control.b8419f45.js";import{_ as a}from"./V-Field.vue_vue&type=script&setup=true&lang.3d634e49.js";import{_ as s}from"./inputsLayaut.vue_vue&type=style&index=0&lang.70f5db92.js";import{_ as l}from"./formLayaut.vue_vue&type=style&index=0&lang.ee130016.js";import{p as u,h as n,g as i,s as r,v as o,m as p,P as c,A as m,n as d,a as v,e as y}from"./index.12404dd8.js";import{D as f,q as b,c as h,E as g,F as _,G as x,b as S,H as j,e as k,I as C,k as M,s as A,J as P,K as w,L as D,M as V,N,O as I,y as q,P as O,Q as $,R as E}from"./Members.b431adac.js";import{d as F,r as T,w as J,b as R,o as z,h as B,j as L,k as U,D as G,Q,R as K,J as H,S as Y,Y as W,E as X,y as Z,z as ee,F as te,G as ae,U as se,a8 as le,K as ue,A as ne,B as ie,L as re}from"./vendor.f3aa4145.js";import{_ as oe}from"./V-Card.vue_vue&type=script&setup=true&lang.eaaff5e4.js";import{_ as pe}from"./V-Placeload.fdcac8e0.js";import{_ as ce}from"./V-Loader.vue_vue&type=script&setup=true&lang.4de6e38d.js";import{_ as me}from"./V-Modal.vue_vue&type=script&setup=true&lang.52196853.js";import{_ as de}from"./signComponent.vue_vue&type=script&setup=true&lang.8711c407.js";import{_ as ve}from"./V-Progress.vue_vue&type=script&setup=true&lang.e0fc70a6.js";import{_ as ye}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.acff82bb.js";import{a as fe,m as be}from"./Memberships.b808c5d8.js";import{g as he}from"./Recurrences.88ef0043.js";import{g as ge}from"./Discounts.8a5f9f03.js";import{e as _e,c as xe,s as Se,d as je}from"./config.a589873a.js";import{h as ke}from"./Staffs.7b59333d.js";import{p as Ce}from"./sidebarLayoutState.1c67ab49.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.6e24c1ec.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.2d65ef4c.js";import"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.f04f6282.js";import"./pdf_icon.8800e24c.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.0e847bc8.js";import"./useDropdown.8ce53aab.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.8a941f7a.js";import"./V-Dropdown.f9a5cb09.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.1054d6be.js";import"./Companies.3ed9f88d.js";import"./activePanelState.a8e3292b.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.dd715d2a.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.79e41b52.js";import"./V-Message.vue_vue&type=script&setup=true&lang.c7e1c1ee.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.1ea131b1.js";import"./navbarLayoutState.d384bc21.js";import"./video.726f585e.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.6b8bba48.js";import"./darkModeState.aba9ca80.js";import"./AnimatedLogo.136e20ca.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.146a556b.js";import"./V-Block.vue_vue&type=script&setup=true&lang.894ccaf7.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.0655cbba.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.67ffc64b.js";var Me=F({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e,i=T(!1);J((()=>a.inputs),((e,t)=>{r()}));const r=()=>{i.value=!0,setTimeout((()=>{i.value=!1}),500)},o=R((()=>p.value?a.inputs.filter((e=>e.typeMember.includes("Company"))):a.inputs.filter((e=>e.typeMember.includes("Individual"))))),p=T(!1),c=e=>{p.value=!e.input.model,r()},m=e=>{let a=u(o.value);n.value||(a.select_type=a.select_type?"Company":"Individual",f.value=a,t("returData",a),t("changeStep",e))};return(t,a)=>{const u=s,n=l;return z(),B(n,{titles:{title:e.title},"is-loading":i.value,buttons:["next","back"],step:1,onChangeStep:m},{default:L((()=>[U(u,{"inputs-step":G(o),onChangeSwitch:c},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}}),Ae=F({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e=>{t("changeStep",e)};return(t,u)=>{const n=s,i=l;return z(),B(i,{titles:{title:e.title},buttons:["next","prev"],step:2,onChangeStep:a},{default:L((()=>[U(n,{"inputs-step":G(b)},null,8,["inputs-step"])])),_:1},8,["titles"])}}});const Pe={key:0},we=X(" Remove Family Member "),De={key:1,class:"column d-flex justify-content-center flex-column is-4 mx-auto"},Ve=X(" Add Another Family Member ");var Ne=F({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(u,{emit:n}){const p=u,c=T(!1);J((()=>p.inputs),((e,t)=>{m()}));const m=()=>{c.value=!0,setTimeout((()=>{c.value=!1}),500)},d=T([]);R((()=>(m(),d.value.forEach(((e,t)=>{y.value.includes(t)?d.value[t]=e.filter((e=>e.category.includes("Minor"))):d.value[t]=JSON.parse(JSON.stringify(p.inputs))})),d.value)));const v=e=>{n("returData",d),n("changeStep",e)},y=T([]),f=R((()=>d.value.length>0)),b=T(0),g=()=>{if(b.value>0)for(var e=0;e<b.value;++e){const e=Z(JSON.parse(JSON.stringify(p.inputs)));i(e,"misma_direccion").change=S,i(e,"category").change=_,d.value.push(e)}},_=function(e){console.log(e),e.forEach((e=>{this.model?e.category.includes("Adult")&&(e.typeInput=e.typeInputDefault):e.category.includes("Minor")||(e.typeInput="hidden")})),this.model||(x(e),r(e,"email",`family_${ee().format("hms")}_${o(h.value,"email")}`),r(e,"phone",o(h.value,"phone"))),console.log(this.model)},x=e=>{r(e,"address",o(h.value,"address")),r(e,"postal_code",o(h.value,"postal_code")),r(e,"country_id",o(h.value,"country_id")),r(e,"city_id",o(h.value,"city_id")),r(e,"state_id",o(h.value,"state_id"))},S=function(e){console.log("llejay"),this.model?(r(e,"postal_code",""),r(e,"country_id",""),r(e,"city_id",""),r(e,"state_id","")):x(e)};return(n,i)=>{const r=s,o=e,p=oe,m=t,h=a,_=l;return z(),B(_,{titles:{title:u.title},"is-loading":c.value,buttons:["next","prev"],step:2,onChangeStep:v},{default:L((()=>[G(f)?(z(),B("div",Pe,[(z(!0),B(Q,null,K(d.value,((e,t)=>(z(),B(p,{key:t,class:"mb-4"},{default:L((()=>[U(r,{"inputs-step":e,onChangeSwitch:e=>{return a=t,void y.value.findIndex((e=>e==a));var a}},null,8,["inputs-step","onChangeSwitch"]),U(o,{onClick:e=>d.value.splice(t,1),color:"danger",class:"mx-auto",icon:"fas fa-times"},{default:L((()=>[we])),_:2},1032,["onClick"])])),_:2},1024)))),128))])):H("",!0),G(f)?H("",!0):(z(),B("div",De,[U(h,{class:"mb-4"},{default:L((()=>[U(m,null,{default:L((()=>[Y(U("input",{type:"number","onUpdate:modelValue":i[1]||(i[1]=e=>b.value=e),class:"input text-center",placeholder:"Family quantity"},null,512),[[W,b.value]])])),_:1})])),_:1}),U(o,{onClick:g,color:"info",icon:"fas fa-check",raised:""},{default:L((()=>[Ve])),_:1})]))])),_:1},8,["titles","is-loading"])}}}),Ie=F({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep"],setup(e,{emit:t}){const a=e,u=T(!1);J((()=>a.inputs),((e,t)=>{i()}));const n=e=>{let a=[];r.value.forEach((e=>{e.values.forEach((e=>{let t=e.values.find((e=>"sms"==e.name)).model.length,s=e.values.find((e=>"email"==e.name)).model.length;a.push({[e.name]:e.value,sms:t>0,email:s>0})}))})),g.value=a,t("returnData",a),t("changeStep",e)},i=()=>{u.value=!0,setTimeout((()=>{u.value=!1}),500)},r=R((()=>a.inputs)),o=T(!1),p=e=>{o.value=!e.input.model,i()};return(t,a)=>{const i=s,o=l;return z(),B(o,{titles:{title:e.title},"is-loading":u.value,buttons:["next","prev"],step:3,onChangeStep:n},{default:L((()=>[U(i,{"inputs-step":G(r),onChangeSwitch:p},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}});const qe={class:""};var Oe=F({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberships:{type:Array,default:[]},notes:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(e,{emit:t}){const a=e,u=T(!1),r=T([]);J((()=>a.inputs),((e,t)=>{p()}));const p=()=>{u.value=!0,setTimeout((()=>{u.value=!1}),500)},c=e=>{let a=null;_.forEach(((e,t)=>{0==t?a=e.inputs:r.value.push(e)})),n.value||(x.value=a,t("returnData",{memberMembership:a,familyMembership:r}),t("changeStep",e))},m=R((()=>{const e=Z([]);_.value=[];let t=[];S.forEach((e=>{t.push(JSON.parse(JSON.stringify(e)))})),e.push(d(a.member,JSON.parse(JSON.stringify(t))));for(var s=0;s<a.familiares.length;++s)e.push(d(a.familiares[s],JSON.parse(JSON.stringify(t))));return _.value=e,e})),d=(e,t,a)=>{const s={member:null,membresia:null};return"Prospect"==j.value?i(t,"recurrence").model=!1:i(t,"recurrence").model=!0,s.member=e,s.membresia=t,k(s.membresia,s.member),s};return(t,a)=>{const n=s,i=oe,r=l;return z(),B(r,{titles:{title:e.title},isloading:u.value,buttons:["next","prev"],step:4,onChangeStep:c},{default:L((()=>[(z(!0),B(Q,null,K(G(m),((e,t)=>(z(),B(i,{key:`ss${t}`,class:"mb-4"},{default:L((()=>[U("p",qe,[U("b",null,te(G(o)(e.member,"name"))+" "+te(G(o)(e.member,"second_name"))+" "+te(G(o)(e.member,"last_name")),1)]),U(n,{"inputs-step":e.membresia},null,8,["inputs-step"])])),_:2},1024)))),128)),U(i,{class:"mb-4"},{default:L((()=>[U(n,{"inputs-step":e.notes},null,8,["inputs-step"])])),_:1})])),_:1},8,["titles","isloading"])}}});const $e=U("p",{class:"title is-3"},[U("i",{class:"fas fa-money-bill","aria-hidden":"true"})],-1),Ee=U("p",{class:"title is-5"},"Cash",-1),Fe={class:"d-flex mb-4 justify-content-between"},Te={class:"title is-5"},Je=X(" Total: "),Re={class:"title is-5"},ze=X(" Cash Total: "),Be={class:"\n          d-flex\n          justify-content-center\n          align-items-center\n          flex-column\n          mb-4\n        "},Le=U("p",{class:"title is-5 mb-4"},"Change Back:",-1),Ue={class:"title is-3 mb-0"},Ge={class:"d-flex justify-content-center flex-wrap mb-4"},Qe=U("div",{class:"w-100"},null,-1),Ke={class:"d-flex justify-content-center"},He=X("Reset"),Ye=X("Confirm");var We=F({expose:[],props:{total:{type:[Number,String],default:0}},emits:["onPaymentCash"],setup(s,{emit:l}){const u=s,n=T(!1),i=T(0),r=R((()=>{const e=parseFloat(i.value)-parseFloat(u.total/100);return e>0?e:0})),o=()=>{n.value=!1,l("onPaymentCash",{changeBack:r.value,cash:i.value})};return(l,u)=>{const c=oe,m=e,d=t,v=a,y=me;return z(),B(Q,null,[U(c,{color:"warning",class:"mx-2 btn-card w-100 justify-content-center column is-4",onClick:u[1]||(u[1]=e=>n.value=!0)},{default:L((()=>[$e,Ee])),_:1}),U(y,{title:"",open:n.value,actions:"center",onClose:u[5]||(u[5]=e=>n.value=!1)},{content:L((()=>[U("div",Fe,[U("p",Te,[Je,U("b",null,te(G(p)(s.total/100)),1)]),U("p",Re,[ze,U("b",null,te(G(p)(i.value)),1)])]),U("div",Be,[Le,U("p",Ue,[U("b",null,te(G(p)(G(r))),1)])]),U("div",Ge,[U(m,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:u[2]||(u[2]=e=>i.value=s.total)},{default:L((()=>[X(" Full Payment "+te(G(p)(s.total/100)),1)])),_:1}),Qe,(z(),B(Q,null,K([5,10,20,50,100],((e,t)=>U(m,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>(e=>{i.value=parseFloat(i.value)+parseFloat(e)})(e)},{default:L((()=>[X(" $"+te(e),1)])),_:2},1032,["onClick"]))),64))]),U("div",Ke,[U(v,null,{default:L((()=>[U(d,null,{default:L((()=>[Y(U("input",{"onUpdate:modelValue":u[3]||(u[3]=e=>i.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[W,i.value]])])),_:1})])),_:1})])])),action:L((()=>[U(m,{onClick:u[4]||(u[4]=e=>i.value=0),class:"d-flex justify-content-center",raised:""},{default:L((()=>[He])),_:1}),U(m,{color:"success",onClick:o,disabled:s.total/100>i.value,class:"d-flex justify-content-center",raised:""},{default:L((()=>[Ye])),_:1},8,["disabled"])])),_:1},8,["open"])],64)}}});const Xe=U("div",{id:"payment-element"},null,-1),Ze=X("Pay now "),et=U("div",{id:"payment-message",class:"hidden"},null,-1);var tt=F({expose:[],props:{amount:{type:[Number,String],required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0},variosMiembros:{type:Boolean,default:!1},miembros:{type:Array,default:[]}},emits:["PaymentAction"],setup(t,{emit:a}){const s=t,l=Stripe(c.value);J((()=>s.id),(e=>{u.value=!0,y()}));const u=T(!0);T({id:s.id,amount:s.amount});const n=T(),i=R((()=>"stripe"!=s.url?{payment_type_id:3,amount:s.amount}:{id:s.id,member_mermship_id:s.member_membership,amount:s.amount,payment_type_id:1}));T(null);const r=T(null),o=T(null),p=T(!1),v=T(null),y=async()=>{let e=await m.post(s.url,i.value).then((e=>{r.value=e.data.clientSecret,v.value=e.data.user_id,n.value=l.elements({clientSecret:r.value,appearance:{theme:"night",rules:{".Input":{boxShadow:"none"}}}}),o.value=n.value.create("card",{classes:{base:"base_card"}}),o.value.mount("#payment-element")})).catch((e=>{u.value=!1}));return u.value=!1,e},f=T(null),b=async e=>{e.preventDefault(),p.value=!0;const{setupIntent:t,error:u}=await l.confirmCardSetup(r.value,{payment_method:{card:o.value,billing_details:{name:f.value}}});if(u)p.value=!1,d.error(u.message);else{const{payment_method:e}=t;s.variosMiembros?s.miembros.forEach((t=>{m.post("paymentStripe",{payment_method:e,user_id:t.idMember,membership_member_id:t.idMemberMembership,payment_type_id:3}).catch((e=>{p.value=!1}))})):await m.post("paymentStripe",{payment_method:e,amount:s.amount,user_id:v.value,membership_member_id:s.member_membership,payment_type_id:3}).catch((e=>{p.value=!1})),i.value&&(a("PaymentAction",i),d.success("Success Payment"))}p.value=!1};return ae((()=>{p.value=!1,y()})),(t,a)=>{const s=pe,l=e,n=ce,i=oe;return z(),B(Q,null,[u.value?(z(),B(s,{key:0,height:"200px",class:"mt-6"})):H("",!0),Y(U(i,{class:"mt-6"},{default:L((()=>[U("form",{onSubmit:le(b,["prevent"]),id:"payment-form"},[Y(U("input",{id:"card-holder-name",class:"input mb-3","onUpdate:modelValue":a[1]||(a[1]=e=>f.value=e),placeholder:"Name",type:"text"},null,512),[[W,f.value]]),Xe,U(n,{size:"small",active:p.value},{default:L((()=>[U(l,{id:"submit",class:"mt-4",color:"info"},{default:L((()=>[Ze])),_:1})])),_:1},8,["active"]),et],40,["onSubmit"])])),_:1},512),[[se,!u.value]])],64)}}});const at={class:"w-100"},st={class:"my-4"},lt={key:0},ut=U("small",null,"Register the principal first",-1),nt=X(" Process Membership "),it={key:0,class:"columns is-multiline justify-content-center mt-6"},rt={class:"d-flex justify-content-between align-items-start"},ot=U("div",null,[U("p",{class:"title is-3"},[U("i",{class:"fas fa-credit-card","aria-hidden":"true"})]),U("p",{class:"title is-5"},"Debit Automatic")],-1),pt={key:0,class:"title is-6"},ct=U("i",{class:"fas fa-check","aria-hidden":"true"},null,-1),mt=U("p",{class:"title is-4"},"Payment Success",-1);var dt=F({expose:[],props:{member:{type:Array,required:!0},membresia:{type:Array,required:!0},contact:{type:Array,required:!0},presupuesto_id:{type:String},total:{type:[String,Number],required:!0},categoriesMembers:{type:Object,required:!0},notasInput:{type:Object,required:!0}},emits:["PaymentAction"],setup(t,{emit:a}){const s=t,l=T(null),u=T(!1),n=T(null),r=T(null);ae((()=>{u.value=!1,o.value=!1}));const o=T(!1),p=e=>{o.value=!0,a("PaymentAction",e)},c=R((()=>0==i(s.member,"is_family").model)),m=R((()=>!o.value&&!(!c.value&&!C.value))),v=e=>{M(e,r.value).then((e=>{if(e.data.status)d.success("Sign Success");else for(var t in d.error(e.data.mensaje),e.data.errores)e.data.errores[t].forEach((e=>{d.error(`${t} : ${e}`)}))})).catch((e=>{}))},y=e=>{if(l.value=1,r.value){const t={cash:e.cash,payment_type_id:l.value,total:s.total,cash_back:e.changeBack,membership_member_id:r.value};A(r.value,t).then((e=>{console.log(e.data),p(n.value),d.success("Success Payment")})).catch((e=>{console.log(e.response)}))}else d.error("The membership ID is required. Click on Process Membership to generate it automatically")};return(t,a)=>{const d=e,f=ce,b=oe,h=We,g=tt,_=de;return z(),B("div",at,[U("div",st,[U("p",null,te(G(i)(s.member,"name").model)+" "+te(G(i)(s.member,"last_name").model),1),U("p",null,[U("small",null,te(G(c)?"Main member":"Family"),1)]),G(c)||G(C)?H("",!0):(z(),B("p",lt,[ut]))]),U(f,{size:"small",active:u.value},{default:L((()=>[U(d,{color:"success",onClick:a[1]||(a[1]=e=>G(m)?(l.value=null,u.value=!0,n.value=null,r.value=null,P({member:s.member,contact:s.contact,membresia:s.membresia,total:s.total,categoriesMembers:s.categoriesMembers,notasInput:s.notasInput,presupuesto_id:s.presupuesto_id}).then((e=>{n.value=e.data.id,r.value=e.data.membership_members_id})).catch((e=>{})),void(u.value=!1)):null),style:G(m)?{}:{opacity:".5"}},{default:L((()=>[nt])),_:1},8,["style"])])),_:1},8,["active"]),n.value&&!o.value?(z(),B("div",it,[U(b,{color:"info",class:"mx-2 btn-card w-100 column is-4",style:1==l.value?{opacity:"0.4"}:{},onClick:a[2]||(a[2]=e=>l.value=3)},{default:L((()=>[U("div",rt,[ot,3==l.value?(z(),B("p",pt,[ct])):H("",!0)])])),_:1},8,["style"]),U(h,{total:s.total,onOnPaymentCash:y},null,8,["total"])])):H("",!0),3==l.value?(z(),B(g,{key:1,amount:s.total,id:n.value,member_membership:r.value,onPaymentAction:a[3]||(a[3]=e=>p(n.value))},null,8,["amount","id","member_membership"])):H("",!0),o.value?(z(),B(b,{key:2,color:"success",class:"my-6"},{default:L((()=>[mt])),_:1})):H("",!0),o.value?(z(),B(_,{key:3,onOnSign:v,"is-sign":!0,contract:`contract_${n.value}_${r.value}_${G(i)(s.member,"personal_identifications").model}.pdf`,"url-contract":`generateContract/${n.value}`},null,8,["contract","url-contract"])):H("",!0)])}}});const vt=U("h1",{class:"title is-6"},null,-1),yt={class:"table is-hoverable is-striped is-fullwidth"},ft=U("thead",null,[U("tr",null,[U("th",{scope:"col"},"Membership Name"),U("th",{scope:"col"},"Plan"),U("th",{scope:"col"},"Quantity"),U("th",{scope:"col"},"Cost"),U("th",{scope:"col"},"Import")])],-1),bt={class:"text-capitalize"},ht={style:{"text-align":"right"}},gt={style:{"text-align":"right"}},_t={style:{"text-align":"right"}},xt=U("td",{colspan:"4",style:{"text-align":"right"}},[U("b",null,"Subtotal")],-1),St={key:0,style:{"text-align":"right"}},jt={colspan:"4"},kt={key:0},Ct={key:1},Mt={style:{"text-align":"right"}},At=U("td",{colspan:"4",style:{"text-align":"right"}},"Tax 7%",-1),Pt={style:{"text-align":"right"}},wt=U("td",{colspan:"4",style:{"text-align":"right"}},[U("b",null,"Total to pay")],-1),Dt={key:1,style:{"text-align":"right"}},Vt=U("td",{colspan:"4",style:{"text-align":"right"}},"Recurring total",-1);var Nt=F({expose:[],props:{presupuesto:{type:Object,required:!0}},setup:e=>(t,a)=>{const s=oe;return e.presupuesto?(z(),B(s,{key:0,class:"mb-4"},{default:L((()=>[vt,U("table",yt,[ft,U("tbody",null,[(z(!0),B(Q,null,K(e.presupuesto.membresias,((e,t)=>(z(),B("tr",{key:`membresia-${t}`},[U("td",null,te(e.description),1),U("td",bt,te(e.type?e.type:"Initiation Fee"),1),U("td",null,te(e.quantity),1),U("td",ht,te(G(p)(e.amount_subtotal/e.quantity/100)),1),U("td",gt,te(G(p)(e.amount_subtotal/100)),1)])))),128)),U("tr",_t,[xt,U("td",null,te(G(p)(e.presupuesto.totales.upfront.amount_subtotal/100)),1)]),e.presupuesto.discount?(z(),B("tr",St,[U("td",jt,[X(te(e.presupuesto.discount.name)+" ",1),"percentaje"==e.presupuesto.discount.type?(z(),B("span",kt," ( "+te(e.presupuesto.discount.value)+"% off ) ",1)):(z(),B("span",Ct," ( $"+te(e.presupuesto.discount.value)+" off ) ",1))]),U("td",null," - "+te(G(p)(e.presupuesto.totales.upfront.total_details.amount_discount/100)),1)])):H("",!0),U("tr",Mt,[At,U("td",null,te(G(p)(e.presupuesto.totales.upfront.total_details.amount_tax/100)),1)]),U("tr",Pt,[wt,U("td",null,te(G(p)(e.presupuesto.totales.upfront.amount_total/100)),1)]),e.presupuesto.totales.recurring?(z(),B("tr",Dt,[Vt,U("td",null,te(G(p)(e.presupuesto.totales.recurring.amount_total/100)),1)])):H("",!0)])]),ue(t.$slots,"default")])),_:3})):H("",!0)}});const It={key:1},qt={class:"d-flex justify-content-end w-100"},Ot={class:"d-flex justify-content-between w-100"},$t=X(" Finish "),Et=X(" Cancel "),Ft=X(" Register another member ");var Tt=F({expose:[],props:{type:{type:String,default:"create"},title:{type:String,default:""}},emits:["changeStep","returnData"],setup(t,{emit:a}){T(!1);const s=T(!1),u=R((()=>_.value[0])),n=R((()=>{let e=[];return _.value.forEach(((t,a)=>{a>0&&e.push(t)})),e}));ae((()=>{i(w.value,"mismatarjeta").change=r,D.value=[],u.value?(V(u.value.membresia,u.value.member),n.value.length&&n.value.forEach((e=>{V(e.membresia,e.member)}))):(console.error("No tiene membresia"),d.error("Membership is required"))}));const r=function(){this.model},o=(e,t=3,s)=>{a("returnData",{total:s}),a("changeStep",e,t,{})},p=R((()=>{let e=[];return D.value.forEach((t=>{0==i(t.member,"is_family").model&&e.push(t)})),D.value.forEach((t=>{1==i(t.member,"is_family").model&&e.push(t)})),e}));T([]);const c=()=>{window.location.reload()},m=T([]),v=e=>{m.value.push(e)};return(a,u)=>{const n=pe,i=dt,r=Nt,d=e,y=l;return z(),B(y,{titles:{title:t.title},"is-loading":s.value,buttons:["prev"],step:5,onChangeStep:o},{default:L((()=>[G(D).length?H("",!0):(z(),B(n,{key:0,height:"300px",class:"mb-4"})),G(D)?(z(),B("div",It,[(z(!0),B(Q,null,K(G(p),((e,t)=>(z(),B(r,{key:`presupuesto-${t}`,class:"mb-4",presupuesto:e},{default:L((()=>[U("div",qt,[U(i,{member:e.member,membresia:e.membresia,contact:G(g),presupuesto_id:e.presupuesto_id,"categories-members":G(N),"notas-input":G(I),total:e.totales.upfront.amount_total,onPaymentAction:v},null,8,["member","membresia","contact","presupuesto_id","categories-members","notas-input","total"])])])),_:2},1032,["presupuesto"])))),128))])):H("",!0),U("div",Ot,[G(p).length>0&&m.value.length==G(p).length?(z(),B(d,{key:0,color:"danger",to:{name:"index"}},{default:L((()=>[$t])),_:1})):(z(),B(d,{key:1,color:"danger",to:{name:"index"}},{default:L((()=>[Et])),_:1})),G(p).length>0&&m.value.length==G(p).length?(z(),B(d,{key:2,color:"success",onClick:c},{default:L((()=>[Ft])),_:1})):H("",!0)])])),_:1},8,["titles","is-loading"])}}});ne("data-v-915b2888");const Jt={class:"content"},Rt={class:"content-text"};ie();var zt=F({expose:[],props:{active:{type:Boolean,default:!1,required:!0},step:{type:Number,default:0,required:!0},text:{type:String,default:""}},setup(e){const t=e,a=R((()=>t.active?100:0));return(t,s)=>{const l=ve;return z(),B("div",Jt,[U("div",{class:["circle",e.active?"active":""]},null,2),U(l,{class:"progressbar",value:G(a),size:"smaller"},null,8,["value"]),U("div",Rt,[U("p",null,"STEP "+te(e.step),1),U("p",null,[U("b",null,te(e.text),1)])])])}}});zt.__scopeId="data-v-915b2888";const Bt={class:"columns is-multiline"},Lt={class:"column is-12"},Ut={class:"column is-9"},Gt={class:"column is-3"};var Qt=F({expose:[],setup(s){Ce.value="Add New members",re({title:"Members"}),ae((()=>{A(),fe().then((e=>{v(S,"memberships_id",e.data.memberships)})),i(S,"memberships_id").disabled=!1,i(S,"recurrences_id").disabled=!1,i(S,"is_initiation_fee").disabled=!1,i(S,"discount").disabled=!1,ge(1,"membership").then((e=>{v(S,"discount",e.data.discounts)})),he(),_e().then((e=>{v(h,"city_id",xe.value),v(q,"city_id",xe.value),v(b,"city_id",xe.value),v(h,"state_id",Se.value),v(q,"state_id",Se.value),v(b,"state_id",Se.value),v(h,"country_id",je.value),v(q,"country_id",je.value),v(b,"country_id",je.value)})),ke().then((e=>{v(S,"staff_id",e.data)}))}));const l=T(1),n=T([{step:1,text:"Member Information",categories:["Adult","Minor","Prospect"]},{step:2,text:"Add Family Member",categories:["Adult"]},{step:2,text:"Parent / Guardian",categories:["Minor"]},{step:2,text:"Contact Preference",categories:["Prospect"]},{step:3,text:"Contact Preference",categories:["Adult","Minor"]},{step:4,text:"Select membership",categories:["Adult","Minor","Prospect"]},{step:5,text:"Add Payment Method",categories:["Adult","Minor","Prospect"]}]),r=R((()=>h.value.filter((e=>e.categories.includes(N.value.model))))),o=R((()=>n.value.find((e=>e.step==l.value&&e.categories.includes(N.value.model))))),p=R((()=>n.value.filter((e=>e.categories.includes(N.value.model)))));R((()=>u(b.value)));const c=(e,t=3,a={})=>{N.value.model,6==e?sendData(t,a):l.value=e},m=T(null),d=e=>{m.value=e},f=T(null),g=e=>{f.value=e},j=T([]),k=e=>{j.value=e.value},C=T([]),M=e=>{C.value=e.familyMembership.value,x.value=e.memberMembership};T(null),T(null),T(null);const A=()=>{O.value=null,$.value=null;let e=["is_family","principal_family"];y(h.value.filter((t=>!e.includes(t.name)))),e=["recurrence"],y(S.filter((t=>!e.includes(t.name)))),y(I.value),y(b.value)};return(s,u)=>{const n=e,i=t,m=a,v=Me,y=Ae,f=Ne,b=Ie,h=Oe,S=Tt,A=zt,P=ye;return z(),B(P,null,{default:L((()=>[U("div",Bt,[U("div",Lt,[1==l.value?(z(),B(m,{key:0,class:"w-100",addons:""},{default:L((()=>[(z(!0),B(Q,null,K(G(N).values,((e,t)=>(z(),B(i,{key:`categoymember-${t}`},{default:L((()=>[U(n,{onClick:t=>G(N).model=e,color:G(N).model==e?"primary":void 0,rounded:""},{default:L((()=>[X(te(e),1)])),_:2},1032,["onClick","color"])])),_:2},1024)))),128))])),_:1})):H("",!0)]),U("div",Ut,[Y(U(v,{type:"create",title:G(o).text,inputs:G(r),onChangeStep:c,onReturData:d},null,8,["title","inputs"]),[[se,1==l.value]]),Y(U(y,{title:G(o).text,onChangeStep:c},null,8,["title"]),[[se,2==l.value&&"Minor"==G(N).model]]),Y(U(f,{type:"create",title:G(o).text,inputs:G(q),onChangeStep:c,onReturData:k},null,8,["title","inputs"]),[[se,2==l.value&&"Adult"==G(N).model]]),Y(U(b,{type:"create",title:G(o).text,inputs:G(E),onChangeStep:c,onReturnData:g},null,8,["title","inputs"]),[[se,3==l.value||2==l.value&&"Prospect"==G(N).model]]),Y(U(h,{type:"create",member:G(r),familiares:j.value,title:G(o).text,inputs:G(_),memberships:G(be),notes:G(I),onChangeStep:c,onReturnData:M},null,8,["member","familiares","title","inputs","memberships","notes"]),[[se,4==l.value]]),5==l.value?(z(),B(S,{key:0,type:"create",title:G(o).text,member:G(r),familiares:j.value,inputs:G(_),"member-membership":G(x),"family-membership":C.value,onChangeStep:c},null,8,["title","member","familiares","inputs","member-membership","family-membership"])):H("",!0)]),U("div",Gt,[(z(!0),B(Q,null,K(G(p),((e,t)=>(z(),B(A,{key:t,active:e.step<=l.value,step:e.step,text:e.text},null,8,["active","step","text"])))),128))])])])),_:1})}}});export default Qt;
