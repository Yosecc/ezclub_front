import{d as e,s as t,e as s,l as a,f as l,n as o,_ as i}from"./Companies.27240485.js";import{_ as r}from"./V-Button.vue_vue&type=script&setup=true&lang.e4f3f19e.js";import{_ as n}from"./V-Card.vue_vue&type=script&setup=true&lang.e9093fe9.js";import{_ as u}from"./V-PlaceholderSection.vue_vue&type=script&setup=true&lang.c3d223fd.js";import{_ as c}from"./V-Modal.vue_vue&type=script&setup=true&lang.146bedbc.js";import{_ as p}from"./V-PlaceholderPage.vue_vue&type=script&setup=true&lang.c7710eae.js";import{_ as d}from"./V-FlexPagination.vue_vue&type=script&setup=true&lang.2b60b44f.js";import{_ as v}from"./V-Loader.vue_vue&type=script&setup=true&lang.bfc6d522.js";import{_ as m}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.46761ad3.js";import{d as f,u as y,r as g,b as _,y as h,z as b,w as j,o as x,h as k,B as w,j as V,k as C,D as P,K as D,J as S,a7 as I,L as T,N as A,G as Y}from"./vendor.685e53b0.js";import{_ as L,a as M}from"./search-4-dark.fb3880a5.js";import{p as E}from"./sidebarLayoutState.b1e70c1b.js";import{l as R,g as z,i as B,c as q,s as F}from"./Inventory.bdb94ab8.js";import{h as N}from"./moment.08a7f518.js";import{u as O}from"./index.d9e84969.js";import"./V-Control.2f65f00c.js";import"./V-Field.vue_vue&type=script&setup=true&lang.c6cf6183.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.0ae318bf.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.fbfe4d00.js";import"./index.6232fcd1.js";import"./notyf.es.f84e4201.js";import"./V-Placeload.e1b5c41e.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.e57f1a66.js";import"./useDropdown.0a27f828.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.119fc4d3.js";import"./V-Dropdown.4b56e22f.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.a7327817.js";import"./activePanelState.618a6e66.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.acdd413a.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.62f4b657.js";import"./V-Message.vue_vue&type=script&setup=true&lang.8a404c76.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.5d7a09f8.js";import"./navbarLayoutState.00429138.js";import"./video.89824664.js";import"./darkModeState.ac572066.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.7abfdf0e.js";import"./AnimatedLogo.77bc3feb.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.0d63a362.js";import"./V-Block.vue_vue&type=script&setup=true&lang.218e9dd3.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.9f34b4f7.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.0749519e.js";const G={class:"page-content-inner"},J={class:"d-flex justify-content-between align-items-center"},K={class:"w-100"},U={key:0,class:"w-100"},W=C("h1",{class:"title is-4"},"Select a location",-1),H=Y("New Inventory"),Q=Y("Confirm"),X=Y("Confirm"),Z={key:0,class:"title is-4"},$={class:"flex-list-wrapper flex-list-v1"},ee=C("img",{class:"light-image",src:L,alt:""},null,-1),te=C("img",{class:"dark-image",src:M,alt:""},null,-1),se={class:"flex-table"},ae=C("span",{class:""},"ID",-1),le=C("span",null,"Status",-1),oe=C("span",null,"Date Open",-1),ie=C("span",null,"Date Close",-1),re=C("span",null,"Products Total",-1),ne=C("span",{class:""},"Actions",-1),ue={class:"flex-list-inner"},ce={"data-th":"ID",class:"flex-table-cell"},pe={class:"item-name dark-inverted"},de={class:"flex-table-cell","data-th":"Status"},ve={key:0,class:"tag is-success is-rounded"},me={key:1,class:"tag is-rounded"},fe={key:2,class:"tag is-info is-rounded"},ye={class:"flex-table-cell","data-th":"Date Open"},ge={class:"light-text"},_e={class:"flex-table-cell","data-th":"Date Close"},he={key:0,class:"light-text"},be={key:1},je={class:"flex-table-cell","data-th":"Products Total"},xe={class:"light-text"},ke={class:"flex-table-cell","data-th":"Actions"},we=Y("Close Inventory"),Ve=Y("View");var Ce=f({expose:[],setup(f){const{cookies:Y}=y(),L=g(""),M=_((()=>L.value?O.filter((e=>e.username.match(new RegExp(L.value,"i"))||e.position.match(new RegExp(L.value,"i"))||e.industry.match(new RegExp(L.value,"i"))||e.status.match(new RegExp(L.value,"i"))||e.location.match(new RegExp(L.value,"i")))):B.value));E.value="Inventory",h({title:"Inventory"});const Ce=w(),Pe=g(!1),De=g(!1),Se=g(""),Ie=g(null),Te=g(!1);b((()=>{e().then((e=>{t(a,"locations_id",s.value.locations),l(a.value,"locations_id").change=Ae,null!=Y.get("locations_id")&&(l(a.value,"locations_id").model=Y.get("locations_id"),Ae(Y.get("locations_id")))}))}));const Ae=function(e){"object"==typeof e&&(e=this.model),Te.value=!0,R.value=e,z(e).then((e=>{Te.value=!1}))},Ye=()=>{De.value=!1,Te.value=!0,Se.value="Processing Inventory... Please do not close the browser window until the process is complete",q(Ie.value).then((e=>{o.success("Success"),Te.value=!1,Se.value="",z(),window.location.reload()})).catch((e=>{o.error(e.response.data),Te.value=!1,Se.value=""}))},Le=()=>{Pe.value=!1,Te.value=!0,Se.value="wait a moment, you will be redirected",F().then((e=>{Ce.push({name:"settings-inventory-create",query:{id:e.data.inventory,locations_id:R.value}})})).catch((e=>{o.error(e.response.data.message),Te.value=!1,Se.value=e.response.data.message}))},Me=_((()=>{let e=[];return B.value.forEach((t=>{e.push([t.id,t.status,t.created_at,t.updated_at,100,1])})),e}));return j(Me,(e=>{Te.value=!0,setTimeout((()=>{Te.value=!1}),500)})),(e,t)=>{const s=i,l=r,o=n,f=u,y=c,g=p,_=d,h=v,b=m;return x(),k(b,null,{default:V((()=>[C("div",G,[C(o,{class:"mb-6"},{default:V((()=>[C("div",J,[C("div",K,[P(R)?D("",!0):(x(),k("div",U,[W])),C(s,{"inputs-step":P(a)},null,8,["inputs-step"])]),!Te.value&&P(R)?(x(),k(l,{key:0,color:"primary",onClick:t[1]||(t[1]=e=>Pe.value=!0),raised:"",class:"mb-4"},{default:V((()=>[H])),_:1})):D("",!0)])])),_:1}),C(y,{open:De.value,actions:"center",onClose:t[2]||(t[2]=e=>De.value=!1)},{content:V((()=>[C(f,{title:" Are you sure you want to close inventory?",subtitle:"This action will modify the stock of all products for sale and cannot be undone"})])),action:V((()=>[C(l,{color:"primary",onClick:Ye,raised:""},{default:V((()=>[Q])),_:1})])),_:1},8,["open"]),C(y,{open:Pe.value,actions:"center",onClose:t[3]||(t[3]=e=>Pe.value=!1)},{content:V((()=>[C(f,{title:" Are you sure to create a new inventory?",subtitle:"This action blocks all movements related to sales, creation and editing of products in the system until the inventory is closed."})])),action:V((()=>[C(l,{color:"primary",onClick:Le,raised:""},{default:V((()=>[X])),_:1})])),_:1},8,["open"]),Te.value?(x(),k("h1",Z,S(Se.value),1)):D("",!0),C(h,{size:"large",active:Te.value},{default:V((()=>[C("div",$,[C(g,{class:[0!==P(M).length&&"is-hidden"],title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n            search terms you've entered. Please try different search terms or\n            criteria.",larger:""},{image:V((()=>[ee,te])),_:1},8,["class"]),C("div",se,[C("div",{class:["flex-table-header",[0===P(M).length&&"is-hidden"]]},[ae,le,oe,ie,re,ne],2),C("div",ue,[C(I,{name:"list",tag:"div"},{default:V((()=>[(x(!0),k(T,null,A(P(M),(e=>(x(),k("div",{key:e.id,class:"flex-table-item"},[C("div",ce,[C("div",null,[C("span",pe,S(e.id),1)])]),C("div",de,[1===e.status?(x(),k("span",ve,"Active")):D("",!0),0===e.status?(x(),k("span",me,"Close")):D("",!0),2===e.status?(x(),k("span",fe,"Process")):D("",!0)]),C("div",ye,[C("span",ge,S(P(N)(e.created_at).format("dd - DD/MM/YYYY")),1)]),C("div",_e,[e.close?(x(),k("span",he,S(P(N)(e.close).format("dd - DD/MM/YYYY")),1)):(x(),k("span",be,"-"))]),C("div",je,[C("span",xe,S(e.products.length),1)]),C("div",ke,[1==e.status?(x(),k(l,{key:0,color:"success",onClick:t=>{De.value=!0,Ie.value=e.id},raised:"",class:"mr-4"},{default:V((()=>[we])),_:2},1032,["onClick"])):D("",!0),C(l,{to:{name:"settings-inventory-create",query:{id:e.id,locations_id:P(R)}}},{default:V((()=>[Ve])),_:2},1032,["to"])])])))),128))])),_:1})])]),P(M).length>5?(x(),k(_,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":7})):D("",!0)])])),_:1},8,["active"])])])),_:1})}}});export default Ce;
