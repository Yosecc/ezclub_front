import{_ as e}from"./V-Placeload.410731c2.js";import{_ as t}from"./V-Avatar.vue_vue&type=script&setup=true&lang.e1ab07d1.js";import{_ as a}from"./V-Card.vue_vue&type=script&setup=true&lang.bff7be9b.js";import{d as s,L as l,w as n,H as i,b as r,r as o,D as u,o as c,i as m,G as d,j as p,k as v,F as f,Q as y,R as h,S as b,U as _,a8 as g,E as k,z as x,Y as j,O as M}from"./vendor.1faf4f77.js";import{m as C,i as w,b as P,c as D,d as $,e as S,p as Y,f as E,h as V,j as I,k as A,l as F,n as z,o as T,q,r as N,t as L,u as W,v as H,w as B,x as O,y as R,z as U,A as G,B as Q,C as J,D as K,E as X,F as Z}from"./Members.fd22ffdb.js";import{b as ee,P as te,A as ae,F as se,c as le,v as ne,g as ie,m as re,n as oe,p as ue,e as ce,h as me,a as de,s as pe}from"./index.6fffb7e6.js";import{_ as ve}from"./V-Button.vue_vue&type=script&setup=true&lang.94a80eab.js";import{_ as fe}from"./V-Loader.vue_vue&type=script&setup=true&lang.cf9645bd.js";import{_ as ye}from"./V-Control.4a6c84b4.js";import{_ as he}from"./V-Field.vue_vue&type=script&setup=true&lang.e3fe440b.js";import{_ as be}from"./V-Modal.vue_vue&type=script&setup=true&lang.ac2f5202.js";import{_ as _e}from"./V-Tag.vue_vue&type=script&setup=true&lang.b4486146.js";import{_ as ge}from"./inputsLayaut.vue_vue&type=style&index=0&lang.fe437b85.js";import{_ as ke}from"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.4ed7b4e8.js";import{_ as xe,a as je,b as Me}from"./Presupuesto.vue_vue&type=script&setup=true&lang.5c2288da.js";import{_ as Ce}from"./MemberCards.vue_vue&type=script&setup=true&lang.00c091fe.js";import{_ as we}from"./V-AvatarStack.vue_vue&type=script&setup=true&lang.88daa3f5.js";import{_ as Pe}from"./signComponent.vue_vue&type=script&setup=true&lang.6b1de5b3.js";import{_ as De}from"./pdf_icon.9f85fd04.js";import{_ as $e}from"./FlexTableDropdown.vue_vue&type=script&setup=true&lang.b8967918.js";import{_ as Se}from"./V-Block.vue_vue&type=script&setup=true&lang.95c8f17c.js";import{_ as Ye}from"./V-CreditCard.vue_vue&type=script&setup=true&lang.3e0a634e.js";import{p as Ee,f as Ve}from"./PaymentMethodsData.d7d12b26.js";import{_ as Ie}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.a24fd0ff.js";import{p as Ae}from"./sidebarLayoutState.8ddd6cce.js";import{g as Fe}from"./Discounts.fc25d7f4.js";import{a as ze}from"./Memberships.978d86c7.js";import{g as Te}from"./Recurrences.03f3df7f.js";import{h as qe}from"./Staffs.8d5d37cf.js";import{g as Ne}from"./Diciplines.f4e9dfba.js";import{e as Le}from"./config.ab652609.js";import{b as We,e as He}from"./Companies.6685ae15.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.1500d9d7.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.42dfc6e9.js";import"./V-Dropdown.1e9a7c40.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.a7e31a56.js";import"./useDropdown.105a6322.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.3629d2a1.js";import"./activePanelState.c2741883.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.305eeb86.js";import"./V-Message.vue_vue&type=script&setup=true&lang.78c2be1a.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.9823548d.js";import"./navbarLayoutState.3917eb04.js";import"./video.06d66946.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.c3ec473d.js";import"./darkModeState.b1f0037d.js";import"./AnimatedLogo.a3e359ee.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.9224d628.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.c7cbfbbf.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.879bfb5b.js";const Be={class:"d-flex justify-content-center align-items-center flex-column mb-4"},Oe={class:"mt-5 text-center"},Re={class:"title is-5 is-narrow"},Ue={class:"w-100 mt-5"},Ge=v("i",{class:"iconify",style:{"font-size":"20px",color:"white"},"data-icon":"feather:arrow-right","aria-hidden":"true"},null,-1);var Qe=s({expose:[],props:{category:{type:String,default:"Adult"}},emits:["changeMenu"],setup(e,{emit:s}){const b=e,_=l();n((()=>_.hash),(e=>{j.value=g.findIndex((e=>e.component==_.hash.slice(1)))})),i((()=>{""!=_.hash&&(j.value=g.findIndex((e=>e.component==_.hash.slice(1))))}));const g=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Family Members",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"}],k=[{name:"Personal Information",component:"personalInformation"},{name:"Waiver",component:"memberWaiver"}],x=r((()=>["Adult","Minor"].includes(b.category)?g:k)),j=o(0),M=o(null),P=r((()=>null!=x.value[j.value]?x.value[j.value].component:M.value));return(e,l)=>{const n=t,i=a;return u(C)?(c(),m(i,{key:0,color:u(w)?void 0:"danger"},{default:p((()=>[v("div",Be,[v(n,{picture:u(C).photo?`${u(ee)}storage/${u(C).photo}`:"",size:"xl"},null,8,["picture"]),v("div",Oe,[d(" <p>{{ member }}</p> "),v("h2",Re,f(u(C).name)+" "+f(u(C).second_name)+" "+f(u(C).last_name),1)])]),v("div",Ue,[v("ul",null,[(c(!0),m(y,null,h(u(x),((e,t)=>(c(),m("li",{key:`item-${t}`},[v(i,{class:["\n              mb-3\n              item_menu\n              d-flex\n              justify-content-between\n              align-items-center\n            ",j.value==t?"active":""],color:j.value==t?"warning":void 0,elevated:j.value==t,onClick:e=>(e=>{j.value=e,s("changeMenu",P)})(t)},{default:p((()=>[v("p",null,f(e.name),1),Ge])),_:2},1032,["class","color","elevated","onClick"])])))),128))])])])),_:1},8,["color"])):d("v-if",!0)}}});const Je=v("div",{id:"payment-element"},[d("Stripe.js injects the Payment Element")],-1),Ke=k(" Pay now "),Xe=v("div",{id:"payment-message",class:"hidden"},null,-1);var Ze=s({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},setup(t){const s=t,l=Stripe(te.value);n((()=>s.id),(e=>{console.log("cambio"),u.value=!0,M()}));const u=o(!0);o({id:s.id,amount:s.amount});const f=o(),h=r((()=>"stripe"!=s.url?{payment_type_id:3,amount:s.amount}:{id:s.id,member_mermship_id:s.member_membership,amount:s.amount,payment_type_id:1})),k=o(null),x=o(null),j=o(!1),M=async()=>{let e=await ae.post(s.url,h.value).then((e=>{k.value=e.data.clientSecret,f.value=l.elements({clientSecret:k.value}),x.value=f.value.create("payment"),x.value.mount("#payment-element")})).catch((e=>{}));return u.value=!1,e},C=async e=>{e.preventDefault(),j.value=!0,await l.confirmPayment({elements:f.value,confirmParams:{return_url:`${se.value}members/process?payment_type=3&id=`+s.id+`&membership=${s.member_membership}`}}),j.value=!1};return i((()=>{M()})),(t,s)=>{const l=e,n=ve,i=fe,r=a;return c(),m(y,null,[u.value?(c(),m(l,{key:0,height:"500px"})):d("v-if",!0),b(v(r,{class:"mt-6"},{default:p((()=>[d(" <p>{{ memberMermship }}</p> "),v("form",{onSubmit:g(C,["prevent"]),id:"payment-form"},[d(' <input id="card-holder-name" type="text"> '),Je,d(' <button id="submit">\r\n        <div class="spinner hidden" id="spinner"></div>\r\n        <span id="button-text">Pay now</span>\r\n      </button> '),v(i,{size:"small",active:j.value},{default:p((()=>[v(n,{id:"submit",class:"mt-4",color:"success"},{default:p((()=>[Ke])),_:1})])),_:1},8,["active"]),Xe],40,["onSubmit"])])),_:1},512),[[_,!u.value]])],64)}}});const et={class:"table is-hoverable is-striped is-fullwidth"},tt=v("th",{scope:"col"},"Members",-1),at=v("th",{scope:"col"},"Membership Name",-1),st=v("th",{scope:"col"},"Recurrence",-1),lt=v("th",{scope:"col"},"Prorated",-1),nt=v("th",{scope:"col"},"Membership Cost",-1),it=v("th",{scope:"col"},"Initiation Fee",-1),rt=v("th",{scope:"col"},"Discount",-1),ot=v("th",{scope:"col"},"Taxes",-1),ut={key:0,scope:"col"},ct=v("th",{scope:"col"},"Sub Total",-1),mt={key:0},dt={key:0},pt={key:1},vt={key:2},ft={key:0},yt=v("br",null,null,-1),ht={key:1},bt={key:0},_t={key:1},gt={key:0},kt={key:0},xt={key:1},jt={key:1},Mt={key:3},Ct={class:"is-end"},wt={class:"d-flex justify-content-between"},Pt=k(" Card Payment "),Dt=k(" Cash Payment "),$t={class:"d-flex mb-4 justify-content-between"},St={class:"title is-5"},Yt=k(" Total: "),Et={class:"title is-5"},Vt=k(" Cash Total: "),It={class:"\r\n            d-flex\r\n            justify-content-center\r\n            align-items-center\r\n            flex-column\r\n            mb-4\r\n          "},At=v("p",{class:"title is-5 mb-4"},"Change Back:",-1),Ft={class:"title is-3 mb-0"},zt={class:"d-flex justify-content-center flex-wrap mb-4"},Tt=v("div",{class:"w-100"},null,-1),qt={class:"d-flex justify-content-center"},Nt=k("Reset"),Lt=k("Confirm");var Wt=s({expose:[],setup(e){o(!1);const t=o(!1);i((()=>{console.log("se monto el payment")}));const s=r((()=>{let e=le(D,"memberships_id");return null!=e?e:[]})),l=r((()=>{let e=le(D,"recurrences_id");return null!=e?e:[]})),n=r((()=>{let e=ne(D,"initiation_fee");return null!=e?e:[]})),_=r((()=>{let e=ie(D,"discount");return null!=e?e:[]})),g=r((()=>{let e=parseFloat(x().format("DD")),t=0,a=0;return l.value.days>=30&&(a=e-l.value.payday,t=l.value.amount/l.value.days*a),{days:a,amount:Math.abs(Math.round(t))}})),M=r((()=>(e=>{if(""!=ne(D,"memberships_id"))return"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:re(e.tax.value),value:e.tax.value}})(s))),w=o(null),S=r((()=>{let e=0;return e+=l.value.amount,ne(D,"is_initiation_fee").length||(e+=n.value),e-=g.value.amount,_.value.data&&("dolar"==_.value.data.type?e-=_.value.data.value:"percentaje"==_.value.data.type&&(e-=e/100*_.value.data.value)),e+=e/100*M.value.value,C.value.penalty&&(w.value=s.value.penalty,e+=w.value),C.value.leo_vet_fr&&(e-=e/100*s.value.descuento_vet),e})),Y=r((()=>{let e=0;return e+=S.value,e})),E=o(!1),V=o(0),I=r((()=>{const e=parseFloat(V.value)-parseFloat(Y.value);return e>0?e:0}));o(1);const A=async()=>{await $(P.value.id,{total:Y.value,payment_type_id:1,cash:V.value,cash_back:I.value}).then((e=>{oe.success("Payment Success"),window.location.reload()})).catch((e=>{}))};return(e,i)=>{const r=ve,o=a,x=Ze,$=ye,F=he,z=be;return c(),m("div",null,[v(o,{class:""},{default:p((()=>{return[v("table",et,[v("thead",null,[v("tr",null,[tt,at,st,lt,nt,it,rt,ot,w.value?(c(),m("th",ut,"Penalty")):d("v-if",!0),ct])]),0!=u(s).length?(c(),m("tbody",mt,[v("tr",null,[v("td",null,[v("p",null,[v("b",null,f(u(C).name)+" "+f(u(C).second_name)+" "+f(u(C).last_name),1)])]),0!=u(s).legnth?(c(),m("td",dt,f(u(s).name),1)):d("v-if",!0),0!=u(l).length?(c(),m("td",pt,f(u(l).descriptions),1)):d("v-if",!0),0!=u(l).length?(c(),m("td",vt,[u(l).days>=30?(c(),m("span",ft,[k(f(u(g).days)+" days : ",1),yt,k(" - "+f(u(re)(u(g).amount)),1)])):(c(),m("span",ht,"-"))])):d("v-if",!0),v("td",null,f(u(re)((e=u(l),e.amount))),1),v("td",null,[u(ne)(u(D),"is_initiation_fee").length?(c(),m("span",_t,f(u(re)(0)),1)):(c(),m("span",bt,f(u(re)(u(n))),1))]),v("td",null,[null!=u(_).data?(c(),m("span",gt,["dolar"==u(_).data.type?(c(),m("span",kt," - "+f(u(re)(u(_).data.value)),1)):d("v-if",!0),"percentaje"==u(_).data.type?(c(),m("span",xt,f(u(_).data.value)+"%",1)):d("v-if",!0)])):(c(),m("span",jt,"-"))]),v("td",null,f(u(M).text),1),w.value?(c(),m("td",Mt,f(u(re)(w.value)),1)):d("v-if",!0),v("td",null,f(u(re)(u(S))),1)]),v("tr",null,[v("td",{style:{"text-align":"right"},colspan:w.value?"9":"8"}," Total ",8,["colspan"]),v("td",Ct,f(u(re)(u(Y))),1)])])):d("v-if",!0)]),v("div",wt,[v(r,{color:"success",disabled:0==u(s).length||isNaN(u(Y)),onClick:i[1]||(i[1]=e=>t.value=!0)},{default:p((()=>[Pt])),_:1},8,["disabled"]),v(r,{disabled:0==u(s).length||isNaN(u(Y)),color:"warning",onClick:i[2]||(i[2]=e=>E.value=!0)},{default:p((()=>[Dt])),_:1},8,["disabled"])])];var e})),_:1}),t.value?(c(),m(x,{key:0,class:"",url:`new_payment/${u(P).id}`,amount:u(Y),id:u(C).id,member_membership:u(P).id},null,8,["url","amount","id","member_membership"])):d("v-if",!0),v(z,{open:E.value,actions:"center",onClose:i[6]||(i[6]=e=>E.value=!1)},{content:p((()=>[v("div",$t,[v("p",St,[Yt,v("b",null,f(u(re)(u(Y))),1)]),v("p",Et,[Vt,v("b",null,f(u(re)(V.value)),1)])]),v("div",It,[At,v("p",Ft,[v("b",null,f(u(re)(u(I))),1)])]),v("div",zt,[v(r,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:i[3]||(i[3]=e=>V.value=u(Y))},{default:p((()=>[k(" Full Payment "+f(u(re)(u(Y))),1)])),_:1}),Tt,(c(),m(y,null,h([5,10,20,50,100],((e,t)=>v(r,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>V.value+=e},{default:p((()=>[k(" $"+f(e),1)])),_:2},1032,["onClick"]))),64))]),v("div",qt,[v(F,null,{default:p((()=>[v($,null,{default:p((()=>[b(v("input",{"onUpdate:modelValue":i[4]||(i[4]=e=>V.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[j,V.value]])])),_:1})])),_:1})])])),action:p((()=>[v(r,{onClick:i[5]||(i[5]=e=>V.value=0),class:"d-flex justify-content-center",raised:""},{default:p((()=>[Nt])),_:1}),v(r,{color:"success",onClick:A,disabled:u(Y)>V.value,class:"d-flex justify-content-center",raised:""},{default:p((()=>[Lt])),_:1},8,["disabled"])])),_:1},8,["open"])])}}});const Ht=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Personal Information"),v("p",null,"Edit member's personal information")],-1),Bt=k(" Save Changes "),Ot=k(" Convert to Members ");var Rt=s({expose:[],props:{category:{type:String,default:"Adult"}},setup(e){const t=e;r((()=>"Prospect"==t.category));const a=o(!1),s=()=>{a.value=!0;let e=ue(S.value),t=new FormData;for(var s in e)t.append(s,e[s]);Y(t).then((e=>{oe.success("Edit Success"),a.value=!1})).catch((e=>{a.value=!1}))};return(e,l)=>{const n=ve,i=fe,r=ge,o=ke;return c(),m(o,null,{"header-left":p((()=>[Ht])),"header-right":p((()=>[v(i,{size:"small",active:a.value},{default:p((()=>[v(n,{onClick:s,color:"primary"},{default:p((()=>[Bt])),_:1}),"Prospect"==t.category?(c(),m(n,{key:0,color:"info",class:"ml-3"},{default:p((()=>[Ot])),_:1})):d("v-if",!0)])),_:1},8,["active"])])),content:p((()=>[v(r,{"inputs-step":u(S)},null,8,["inputs-step"])])),_:1})}}});const Ut=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Membership / Contract"),v("p",null,"Edit member's membership and contract information")],-1),Gt={class:"columns is-multiline justify-content-center"},Qt={key:0,class:"column is-12"},Jt=v("p",null,[v("small",null,"Membership")],-1),Kt={class:"title is-4 mb-0"},Xt={key:0},Zt={key:0},ea={key:1},ta={class:"text-right"},aa=v("b",null,"Payment Method:",-1),sa={class:"title is-4"},la={key:1,class:"column is-3 mb-6 mt-4"},na=v("p",null,[v("b",null,"HOLD Membership")],-1),ia={key:0},ra={key:2,class:"column is-3 mb-6 mt-4"},oa=v("p",null,[v("b",null,"Pause Payment")],-1),ua={key:0},ca=k("Confirm"),ma={key:3,class:"column is-3 mb-6 mt-4"},da=v("p",null,[v("b",null,"Cancel Membership")],-1),pa={key:4,class:"column is-3 mb-6 mt-4"},va=v("p",null,[v("b",null,"Payment Now")],-1),fa={key:5,class:"mb-4 column is-12"},ya=k("Save Changes"),ha=k(" New Membership "),ba={key:7,class:"column is-12 mb-6 mt-4"},_a={key:1},ga={class:"d-flex justify-content-end w-100"},ka=k("Cancel"),xa={key:8,class:"columns is-multiline column mt-4 is-12"},ja=v("b",null,"Contract Date:",-1),Ma={class:"column is-12"},Ca=v("h1",{class:"title is-6"},"Active Waiver Information",-1),wa={class:"text-center"},Pa=v("img",{src:De,width:"40",alt:""},null,-1),Da=k(" View PDF ");var $a=s({expose:[],props:{},setup(t){i((()=>{E(D)})),o(null),o(null),o(null),o(null),o(null);const s=o(!1);o(null);const l=r((()=>{if(C.value&&P.value){let e=["locations_id","diciplines","staff_id","discount"];return D.filter((t=>e.includes(t.name)))}return D})),n=()=>{ie(D,"amount").required=!1,ie(D,"initiation_fee").required=!1,ie(D,"diciplines").required=!1;const e=ue(D);F(e).then((e=>{oe.success("Success"),s.value=!1,ie(D,"amount").required=!0,ie(D,"initiation_fee").required=!0,ie(D,"diciplines").required=!0}))},_=async()=>{s.value=!0,await z(D,S.value),s.value=!1},g=()=>{confirm("Are you sure you want to perform this action?")&&(s.value=!0,T().then((e=>{oe.success("Memberships Cancel"),window.location.reload(),s.value=!1})))},M=e=>{q(e,P.value.id).then((e=>{if(e.data.status)oe.success("Sign Success");else for(var t in oe.error(e.data.mensaje),e.data.errores)e.data.errores[t].forEach((e=>{oe.error(`${t} : ${e}`)}))})).catch((e=>{}))},w=e=>{},$=o(!1),Y=o(null),W=()=>{confirm("Are you sure you want to perform this action?")&&(s.value=!0,N(P.value.id,Y.value).then((e=>{oe.success("Success Pause"),s.value=!1})).catch((e=>{for(var t in s.value=!1,e.response.data.errores)e.response.data.errores[t].forEach((e=>{oe.error(`${t}: ${e}`)}))})))},H=o(!1),B=(e,t=3,a={})=>{if(!confirm("Do you want to try the payment?"))return;let s={invoice_id:C.value.subscription.latest_invoice,payment_type_id:t,payment_method:e,total:C.value.subscription.total_invoice};1==t&&(s.changeBack=a.changeBack,s.cash=a.cash),L(P.value.id,s).then((e=>{oe.success("success"),window.location.reload()})).catch((e=>{if("object"==typeof e.response.data)for(var t in e.response.data)"array"==typeof e.response.data[t]||oe.error(e.response.data[t]);else oe.error(e.response.data)}))},O=e=>{B(null,1,e)};return(t,i)=>{const r=a,o=fe,D=ve,S=be,E=xe,F=Ce,z=ge,T=we,q=ve,N=e,L=je,R=Me,U=Pe,G=ke;return c(),m(G,null,{"header-left":p((()=>[Ut])),content:p((()=>[v("div",Gt,[u(C)&&u(P)?(c(),m("div",Qt,[v(r,{class:"d-flex justify-content-between",color:"info"},{default:p((()=>[v("span",null,[Jt,v("p",Kt,f(u(P).membership.name),1),v("p",null,f(u(P).recurrence.descriptions),1),u(P).discount?(c(),m("p",Xt,[k(f(u(P).discount.value)+" ",1),"percentaje"==u(P).discount.type?(c(),m("span",Zt,"%")):(c(),m("span",ea,"$"))])):d("v-if",!0)]),v("span",ta,[v("p",null,[v("small",null,[aa,k(" "+f(u(P).payment_type.name),1)])]),v("p",null,[v("small",null,f(u(P).recurrence.is_recurrence?"Recurrence":"no recurrence"),1)]),v("p",sa,f(u(re)(u(C).subscription.total_invoice/100)),1)])])),_:1})])):d("v-if",!0),u(C)&&u(P)?(c(),m("div",la,[u(C).membership_members.is_recurrence?(c(),m(o,{key:0,size:"small",active:s.value},{default:p((()=>[u(P)&&u(C).subscription?(c(),m(r,{key:0,color:"info",outlined:null==u(C).subscription.pause_collection,onClick:W,class:"mr-4 btn-card text-center"},{default:p((()=>[na,null!=u(C).subscription.pause_collection?(c(),m("span",ia,"Active until: "+f(u(C).subscription.pause_collection.resumes_at),1)):d("v-if",!0)])),_:1},8,["outlined"])):d("v-if",!0)])),_:1},8,["active"])):d("v-if",!0)])):d("v-if",!0),u(C)&&u(P)?(c(),m("div",ra,[u(C).membership_members.is_recurrence?(c(),m(o,{key:0,size:"small",active:s.value},{default:p((()=>[u(P)&&u(C).subscription?(c(),m(r,{key:0,color:"warning",outlined:null==u(C).subscription.pause_collection,onClick:i[1]||(i[1]=e=>$.value=!0),class:"mr-4 btn-card text-center"},{default:p((()=>[oa,null!=u(C).subscription.pause_collection?(c(),m("span",ua,"Active until: "+f(u(C).subscription.pause_collection.resumes_at),1)):d("v-if",!0)])),_:1},8,["outlined"])):d("v-if",!0)])),_:1},8,["active"])):d("v-if",!0),v(S,{open:$.value,actions:"center",onClose:i[3]||(i[3]=e=>$.value=!1)},{content:p((()=>[b(v("input",{type:"date","onUpdate:modelValue":i[2]||(i[2]=e=>Y.value=e),class:"input"},null,512),[[j,Y.value]])])),action:p((()=>[v(D,{onClick:W,color:"primary",raised:""},{default:p((()=>[ca])),_:1})])),_:1},8,["open"])])):d("v-if",!0),u(C)&&u(P)?(c(),m("div",ma,[u(C).membership_members.is_recurrence?(c(),m(o,{key:0,size:"small",active:s.value},{default:p((()=>[u(P)?(c(),m(r,{key:0,color:"danger",outlined:"",onClick:g,class:"mr-4 btn-card text-center"},{default:p((()=>[da])),_:1})):d("v-if",!0)])),_:1},8,["active"])):d("v-if",!0)])):d("v-if",!0),u(C)&&u(P)?(c(),m("div",pa,[u(C).membership_members.is_recurrence?(c(),m(o,{key:0,size:"small",active:s.value},{default:p((()=>[u(P)?(c(),m(r,{key:0,color:"success",outlined:"",onClick:i[4]||(i[4]=e=>H.value=!H.value),class:"mr-4 btn-card text-center"},{default:p((()=>[va])),_:1})):d("v-if",!0)])),_:1},8,["active"])):d("v-if",!0)])):d("v-if",!0),H.value?(c(),m("div",fa,[u(C).user?(c(),m(F,{key:0,onOnMethodPayment:B,memberid:u(C).id,method_default:u(C).user.pm_last_four,"show-new-card":!1,class:"mb-4",ancho:"is-4"},{default:p((()=>[v(E,{total:u(C).subscription.total_invoice,margin:"mx-0",class:"is-4",onOnPaymentCash:O},null,8,["total"])])),_:1},8,["memberid","method_default"])):d("v-if",!0)])):d("v-if",!0),u(V).length?d("v-if",!0):(c(),m(r,{key:6,class:"mb-4 column is-12"},{default:p((()=>[v(z,{"inputs-step":u(l)},null,8,["inputs-step"]),u(C).trainers?(c(),m(T,{key:0,avatars:u(I)(u(C).trainers),size:"small"},null,8,["avatars"])):d("v-if",!0),u(C)&&u(P)?(c(),m(o,{key:1,size:"small",active:s.value},{default:p((()=>[v(q,{class:"mt-5",onClick:n,color:"primary"},{default:p((()=>[ya])),_:1})])),_:1},8,["active"])):d("v-if",!0),u(A)?d("v-if",!0):(c(),m(o,{key:2,size:"small",active:s.value},{default:p((()=>[u(P)?d("v-if",!0):(c(),m(q,{key:0,class:"mt-5",onClick:_,color:"primary"},{default:p((()=>[ha])),_:1}))])),_:1},8,["active"]))])),_:1})),d(" Presupuesto "),u(P)?d("v-if",!0):(c(),m("div",ba,[s.value?(c(),m(N,{key:0,height:"300px",class:"mb-4"})):d("v-if",!0),u(V).length?(c(),m("div",_a,[(c(!0),m(y,null,h(u(V),((e,a)=>(c(),m(R,{key:`presupuesto-${a}`,class:"mb-4",presupuesto:e},{default:p((()=>[v("div",ga,[v(L,{member:e.member,member_id:u(C).id,membresia:e.membresia,contact:t.dataContact,presupuesto_id:e.presupuesto_id,"categories-members":t.categoriesMembers,"notas-input":t.notasInput,total:e.totales.upfront.amount_total,onPaymentAction:w,type:"edit"},null,8,["member","member_id","membresia","contact","presupuesto_id","categories-members","notas-input","total"])])])),_:2},1032,["presupuesto"])))),128)),v(q,{onClick:i[5]||(i[5]=e=>V.value=[]),color:"danger"},{default:p((()=>[ka])),_:1})])):d("v-if",!0)])),d(" Contract "),u(C)&&u(P)?(c(),m("div",xa,[v("div",null,[v("p",null,[ja,k(" "+f(u(x)(u(C).membership_members.created_at).format("ddd - DD MMM yyyy")),1)])]),v("div",Ma,[v(U,{onOnSign:M,"is-sign":!u(P).sign,contract:`contract_${u(C).id}_${u(C).membership_members.id}_${u(C).personal_identifications}.pdf`,"url-contract":`generateContract/${u(C).id}`},null,8,["is-sign","contract","url-contract"])])])):d("v-if",!0),d("v-if",!0),d(" WAIVER "),u(C)&&u(P)?(c(),m(r,{key:10,class:"mb-4"},{default:p((()=>[Ca,v("div",wa,[v("a",{target:"_blank",href:`${u(ee)}generateWeiver/${u(C).id}`},[Pa,v("p",null," weiver_"+f(u(C).id)+"_"+f(u(C).membership_members.id)+"_"+f(u(C).personal_identifications)+".pdf ",1),v(D,{color:"success",outlined:"",class:"mt-4 py-1"},{default:p((()=>[Da])),_:1})],8,["href"])])])),_:1})):d("v-if",!0)])])),_:1})}}});const Sa=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Family Members"),v("p",null,"Edit member's family members")],-1),Ya={class:"columns is-multiline"},Ea={key:0,class:"column is-4 mb-4"},Va=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Parent"),v("p",null,"Edit parent contact")],-1),Ia=k(" Save Changes "),Aa={class:""},Fa=v("h1",{class:"title is-5"},"Parent Contact Information",-1),za={class:"d-flex justify-content-end mr-6"};var Ta=s({expose:[],setup(e){o([{id:1,name:"Wonder Woman",subtitle:"Mother/Adult",img:"https://picsum.photos/150/150"},{id:2,name:"Lionel Messi",subtitle:"Father/Minor",img:"https://picsum.photos/150/151"}]);const a=()=>{const e=perpareDataInputs(B.value);O(e).then((e=>{oe.success("Success")}))};return(e,s)=>{const l=t,n=$e,i=Se,r=ke,o=ve,f=ge;return c(),m("div",null,[u(C)&&"Adult"==u(C).category?(c(),m(r,{key:0},{"header-left":p((()=>[Sa])),"header-right":p((()=>[d(' <VButton color="primary"> Save Changes </VButton> ')])),content:p((()=>[v("div",Ya,[d(" <p>{{ memberParent.photo }}</p> "),u(W)?(c(),m("div",Ea,[v(i,{title:`${u(W).name} ${u(W).second_name} ${u(W).last_name}`,class:"border-1 p-4 radius-small"},{icon:p((()=>[v(l,{size:"medium",picture:`${u(ee)}storage/${u(W).photo}`,subtitle:"Principal Family"},null,8,["picture"])])),action:p((()=>[v(n,{"id-member":u(W).id},null,8,["id-member"])])),_:1},8,["title"])])):d("v-if",!0),(c(!0),m(y,null,h(u(H),((e,t)=>(c(),m("div",{class:"column is-4 mb-4",key:`family-${t}`},[v(i,{title:`${e.member.name} ${e.member.second_name} ${u(C).last_name}`,subtitle:e.member.relationships,class:"border-1 p-4 radius-small"},{icon:p((()=>[v(l,{size:"medium",picture:`${u(ee)}storage/${e.member.photo}`},null,8,["picture"])])),action:p((()=>[v(n,{"id-member":e.members_id},null,8,["id-member"])])),_:2},1032,["title","subtitle"])])))),128))])])),_:1})):d("v-if",!0),u(C)&&"Minor"==u(C).category?(c(),m(r,{key:1},{"header-left":p((()=>[Va])),"header-right":p((()=>[v(o,{onClick:a,color:"primary"},{default:p((()=>[Ia])),_:1})])),content:p((()=>[v("div",Aa,[Fa,v("div",za,[v(l,{picture:`${u(ee)}storage/${u(ne)(u(B),"parent_photo")}`,size:"large"},null,8,["picture"])]),v(f,{"inputs-step":u(B)},null,8,["inputs-step"])])])),_:1})):d("v-if",!0)])}}});const qa=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Emergency Contact"),v("p",null,"Edit member's emergency contact")],-1),Na=k(" Save Changes "),La={class:""},Wa=v("h1",{class:"title is-5"},"Emergency Contact Information",-1);var Ha=s({expose:[],setup(e){const t=()=>{const e=ue(R.value);console.log(e),U(e).then((e=>{oe.success("Success")}))};return(e,a)=>{const s=ve,l=ge,n=ke;return c(),m(n,null,{"header-left":p((()=>[qa])),"header-right":p((()=>[v(s,{onClick:t,color:"primary"},{default:p((()=>[Na])),_:1})])),content:p((()=>[v("div",La,[Wa,v(l,{"inputs-step":u(R)},null,8,["inputs-step"])])])),_:1})}}});const Ba=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Check-ins History"),v("p",null,"Edit member's check-ins history")],-1),Oa={class:"p-6"},Ra={class:"d-flex"},Ua=v("input",{type:"date",class:"input",placeholder:"input.placeholder"},null,-1),Ga=v("input",{type:"date",class:"input",placeholder:"input.placeholder"},null,-1),Qa=k(" Export "),Ja={class:"mt-4"},Ka={class:"table is-hoverable is-fullwidth"},Xa=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"DATE"),v("th",{scope:"col"},"TIME"),v("th",{scope:"col"},"STAFF")])],-1);var Za=s({expose:[],setup:e=>(e,t)=>{const a=ye,s=he,l=ve,n=ke;return u(C)?(c(),m(n,{key:0},{"header-left":p((()=>[Ba])),"header-right":p((()=>[])),content:p((()=>[v("div",Oa,[v("div",Ra,[v(s,{class:"field mr-3"},{default:p((()=>[v(a,null,{default:p((()=>[Ua])),_:1})])),_:1}),v(s,{class:"field mr-3"},{default:p((()=>[v(a,null,{default:p((()=>[Ga])),_:1})])),_:1}),v(l,{color:"primary"},{default:p((()=>[Qa])),_:1})]),v("div",Ja,[v("table",Ka,[Xa,v("tbody",null,[(c(!0),m(y,null,h(u(G),((e,t)=>(c(),m("tr",{key:`access-${t}`},[v("td",null,f(u(x)(e.created_at).format("DD/MM/YYYY")),1),v("td",null,f(u(x)(e.created_at).format("HH:mm:ss")),1),v("td",null,f(e.user.name),1)])))),128))])])])])])),_:1})):d("v-if",!0)}});const es=k(" New Card "),ts={class:"column is-8 mx-auto"};var as=s({expose:[],setup(e){const t=o(!1);i((()=>{ce(Ee.value)}));const a=()=>{const e=ue(Ee.value);me.value||(t.value=!0,Q(C.value.id,e).then((e=>{oe.success("Success"),t.value=!1,ce(Ee.value)})).catch((e=>{if("object"==typeof e.response.data)for(var a in e.response.data)e.response.data[a].forEach((e=>{oe.error(`${a} : ${e}`)}));else oe.error(e.response.data);t.value=!1})))};return(e,s)=>{const l=ve,n=fe,i=Ye,r=ye,o=he,d=ge,f=ke;return c(),m(f,null,{"header-right":p((()=>[v(n,{active:t.value,size:"small"},{default:p((()=>[v(l,{onClick:a,color:"primary"},{default:p((()=>[es])),_:1})])),_:1},8,["active"])])),content:p((()=>[v(o,null,{default:p((()=>[v(r,null,{default:p((()=>[v(i,{color:"orange",flipped:u(Ve),onFlip:s[1]||(s[1]=e=>Ve.value=!u(Ve)),number:u(ie)(u(Ee),"card_number").model,name:u(ie)(u(Ee),"card_name").model,expiry:`${u(ie)(u(Ee),"date_day_expired").model}/${u(ie)(u(Ee),"date_year_expired").model}`,cvc:u(ie)(u(Ee),"cvv").model},null,8,["flipped","number","name","expiry","cvc"])])),_:1})])),_:1}),v("div",ts,[v(d,{"inputs-step":u(Ee)},null,8,["inputs-step"])])])),_:1})}}});const ss=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Purchases History"),v("p",null,"Edit member's purchases history")],-1),ls=v("p",{class:"title is-5"},"Card List",-1),ns=v("p",null,"Invoices",-1),is={class:"table is-hoverable is-fullwidth"},rs=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Description"),v("th",{scope:"col"},"Created"),v("th",{scope:"col"},"Start Period"),v("th",{scope:"col"},"End Period"),v("th",{scope:"col"},"Mount"),v("th",{scope:"col"},"Method"),v("th",{scope:"col"},"Download"),v("th",{scope:"col"},"Status")])],-1),os={key:0},us={key:0},cs={key:1},ms={key:0},ds={key:1},ps=v("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),vs=v("p",null,"Payments",-1),fs={class:"table is-hoverable is-fullwidth"},ys=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Description"),v("th",{scope:"col"},"Created"),d(' <th scope="col">Start Period</th> '),d(' <th scope="col">End Period</th> '),v("th",{scope:"col"},"Mount"),v("th",{scope:"col"},"Method"),v("th",{scope:"col"},"Download"),v("th",{scope:"col"},"Status")])],-1),hs={key:0},bs=v("i",{class:"fas fa-download","aria-hidden":"true"},null,-1);var _s=s({expose:[],setup(e){r((()=>P.value.payments)),r((()=>{let e=[];return K.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),i((async()=>{await J(C.value.id)}));const t=e=>{};return(e,s)=>{const l=Ce,n=as,i=ve,r=a,o=ke;return u(C)?(c(),m(o,{key:0},{"header-left":p((()=>[ss])),"header-right":p((()=>[])),content:p((()=>[ls,u(C).user?(c(),m(l,{key:0,"show-option":!0,class:"mb-6",onOnMethodPayment:t,method_default:u(C).user.pm_last_four,"show-new-card":!1},null,8,["method_default"])):d("v-if",!0),v(n),v(r,{class:"mb-4"},{default:p((()=>[ns,v("table",is,[rs,u(P)?(c(),m("tbody",os,[(c(!0),m(y,null,h(u(C).invoices,((e,t)=>(c(),m("tr",{key:`invoice-${t}`},[v("td",null,f(e.description),1),v("td",null,f(u(x)(e.created).format("MM/DD/YYYY")),1),v("td",null,[e.period_start?(c(),m("span",us,f(u(x)(e.period_start).format("MM/DD/YYYY")),1)):(c(),m("span",cs))]),v("td",null,[e.period_end?(c(),m("span",ms,f(u(x)(e.period_end).format("MM/DD/YYYY")),1)):(c(),m("span",ds))]),v("td",null,f(u(re)(e.total/100)),1),v("td",null,f(e.collection_method),1),v("td",null,[v("a",{href:e.invoice_pdf,target:"_blank"},[v(i,null,{default:p((()=>[ps])),_:1})],8,["href"])]),v("td",null,f(e.status),1)])))),128))])):d("v-if",!0),d(" <tbody\n            v-for=\"(payment, key) in paymentsMemberchipsHistory\"\n            :key=\"`paymentHistory-${key}`\"\n          >\n            <tr v-for=\"(p, k) in payment.payments\" :key=\"`pay-${k}`\">\n              <td>{{ moment(p.created_at).format('DD/MM/YYYY') }}</td>\n              <td>{{ moment(p.created_at).format('HH:mm:ss') }}</td>\n              <td>{{ moneda(p.amount) }}</td>\n              <td>{{ p.payment_type.name }}</td>\n              <td>{{ payment.membership }}</td>\n              <td>{{ p.status ? 'succeded' : 'error' }}</td>\n            </tr>\n          </tbody> ")])])),_:1}),v(r,{class:"mb-4"},{default:p((()=>[vs,v("table",fs,[ys,u(P)?(c(),m("tbody",hs,[(c(!0),m(y,null,h(u(C).pagos,((e,t)=>(c(),m("tr",{key:`pagos-${t}`},[v("td",null,f(e.description),1),v("td",null,f(u(x)(e.created).format("MM/DD/YYYY")),1),v("td",null,f(u(re)(e.total/100)),1),v("td",null,f(e.collection_method),1),v("td",null,[v("a",{href:e.invoice_pdf,target:"_blank"},[v(i,null,{default:p((()=>[bs])),_:1})],8,["href"])]),v("td",null,f(e.status),1)])))),128))])):d("v-if",!0)])])),_:1})])),_:1})):d("v-if",!0)}}});const gs=v("div",null,[v("h1",{class:"title is-4 mb-0"}," Waiver "),v("p",null,"Edit member's waiver information")],-1),ks=k(" Convert to Members "),xs={class:"columns is-multiline"},js={class:"border-1 document_box p-4 d-flex justify-content-center radius-small"},Ms={href:"234",class:"text-center"},Cs=v("img",{style:{width:"70px"},src:De,alt:""},null,-1);var ws=s({expose:[],setup(e){const t=o([{name:"Waiver_010221.pdf",url:""},{name:"Waiver_010221.pdf",url:""}]);return(e,a)=>{const s=ve,l=ke;return c(),m(l,null,{"header-left":p((()=>[gs])),"header-right":p((()=>[v(s,{color:"info"},{default:p((()=>[ks])),_:1})])),content:p((()=>[v("div",xs,[(c(!0),m(y,null,h(t.value,((e,t)=>(c(),m("div",{class:"column is-2 mb-4",key:`family-${t}`},[v("div",js,[v("a",Ms,[Cs,v("p",null,f(e.name),1)])])])))),128))])])),_:1})}}});const Ps={key:0,class:"columns is-multiline"},Ds={class:"column is-3"},$s={class:"column is-9"},Ss={class:"columns is-multiline column is-12"},Ys={class:"columns is-multiline column is-12"},Es={key:1,class:"columns is-multiline"},Vs={class:"column is-3"},Is={class:"column is-9"},As={class:"title is-5 mb-0"},Fs={key:0},zs={class:"d-flex justify-content-between"},Ts=v("b",null,"Member since.",-1),qs=v("b",null,"Membership Active:",-1),Ns=v("b",null,"Due Date: ",-1),Ls={key:0};var Ws=s({expose:[],setup(t){const s=l();Ae.value="Member Profile",M({title:"Members"});const r=o(!1),y=o("personalInformation"),h=e=>{y.value=e.value};n((()=>s.query),((e,t)=>{Object.keys(e).length>0&&(E(),Y())}));const g=o("FAILED PAYMENT"),j=o("");n((()=>s.hash),(e=>{y.value=s.hash.slice(1)})),n((()=>s.query.id),(e=>{y.value="personalInformation"}));const $=o(!0),Y=()=>{$.value=!0,setTimeout((()=>{$.value=!1}),500)};i((()=>{""!=s.hash&&(y.value=s.hash.slice(1)),We().then((e=>{de(D,"locations_id",He.value)})),Le().then((e=>{de(S,"country_id",e.contries),de(S,"city_id",e.cities),de(S,"state_id",e.states),de(X,"city_id",e.cities),de(X,"state_id",e.states),de(X,"country_id",e.contries)})),ze().then((e=>{de(D,"memberships_id",e.data.memberships)})),Fe().then((e=>{de(D,"discount",e.data.discounts)})),Te().then((e=>{de(D,"recurrences_id",e.data)})),qe().then((e=>{de(D,"staff_id",e.data)})),E()}));const E=async()=>{await Z(s.query.id).then((e=>{for(var t in console.log("response.data",e.data),e.data)if("select_type"==t)"Individual"==e.data[t]?(ie(S.value,"select_type").model=!1,ie(S.value,"company_name").typeInput="hidden"):(ie(S.value,"select_type").model=!0,ie(S.value,"company_name").typeInput="text");else if("membership_members"==t)for(var a in e.data[t]||(g.value="Does not have a membership",j.value="Does not have a membership go to the Membership/Contract section and create a new membership and press New Membership",console.error("no posee una membresia :(")),e.data[t])"memberships_location"==a?e.data[t][a]?(ie(D,"locations_id").model=e.data[t][a].companies_locations_id,Ne([e.data[t][a].companies_locations_id]).then((e=>{de(D,"diciplines",e.data)}))):console.error("no posee una locacion :("):"diciplines"==a?(ie(D,"diciplines").model=[],e.data[t][a].forEach((e=>{ie(D,"diciplines").model.push(e.diciplines_id)}))):null!=ie(D,a)&&pe(D,a,e.data[t][a]);else if("trainers"==t){let a=[];e.data[t].forEach((e=>{a.push(e.id)})),pe(D,"staff_id",a)}else if("emergency"==t)for(a in e.data[t])pe(R,a,e.data[t][a]);else if("guardian"==t)for(a in e.data[t])pe(B,a,e.data[t][a]);else pe(S,t,"leo_vet_fr"==t?1==e.data[t]:e.data[t]);$.value=!1}))};return(t,l)=>{const n=e,i=Qe,o=a,M=Wt,D=_e,S=Rt,Y=$a,E=Ta,V=Ha,I=Za,A=_s,F=ws,z=Ie;return c(),m(z,null,{default:p((()=>[$.value?(c(),m("div",Ps,[v("div",Ds,[v(n,{height:"700px"})]),v("div",$s,[v("div",Ss,[v(n,{height:"150px"})]),v("div",Ys,[v(n,{height:"420px"})])])])):d("v-if",!0),!$.value&&u(C)?(c(),m("div",Es,[v("div",Vs,[v(i,{category:u(s).query.category,onChangeMenu:h},null,8,["category"])]),d(" <p>{{ isSolvente }}</p> "),v("div",Is,[u(w)?d("v-if",!0):(c(),m(o,{key:0,class:"mb-4 d-flex justify-content-between align-items-center",color:"danger"},{default:p((()=>[v("div",null,[v("h3",As,f(g.value),1),v("p",null,f(j.value),1),u(C).subscription?(c(),m("small",Fs,[v("p",null,f(u(C).subscription.status),1)])):d("v-if",!0)])])),_:1})),r.value?(c(),m(M,{key:1,class:"mb-4"})):d("v-if",!0),null!=u(C).membership_members?(c(),m(o,{key:2,class:"mb-4"},{default:p((()=>[v("div",zs,[v("div",null,[v("p",null,[v("b",null,"Member #"+f(u(C).id),1)]),v("p",null,[v("small",null,[Ts,k(" "+f(u(x)(u(C).created_at).format("ddd - DD MMM YYYY")),1)])]),v("p",null,[qs,k(" "+f(u(P).membership.name),1)]),v("p",null,[Ns,k(" "+f(u(x)(u(C).subscription.proxima_factura).format("ddd - DD MMM YYYY")),1)])]),u(C).subscription?(c(),m("div",Ls,[v(D,{color:"info",label:u(C).subscription.status,rounded:""},null,8,["label"])])):d("v-if",!0)])])),_:1})):d("v-if",!0),b(v(S,{category:u(s).query.category},null,8,["category"]),[[_,"personalInformation"==y.value]]),b(v(Y,null,null,512),[[_,"memberMembership"==y.value]]),b(v(E,null,null,512),[[_,"memberFamily"==y.value]]),b(v(V,null,null,512),[[_,"memberEmergency"==y.value]]),b(v(I,null,null,512),[[_,"memberCheckins"==y.value]]),b(v(A,null,null,512),[[_,"memberPurchases"==y.value]]),b(v(F,null,null,512),[[_,"memberWaiver"==y.value]])])])):d("v-if",!0)])),_:1})}}});export default Ws;
