import{_ as e}from"./V-Card.vue_vue&type=script&setup=true&lang.1618d39e.js";import{_ as t}from"./V-Button.vue_vue&type=script&setup=true&lang.667d2417.js";import{_ as a,a as s}from"./pdf_icon.3322afd7.js";import{d as n,H as r,r as i,o as u,i as l,j as o,k as m,D as p,F as c,G as d,E as v,O as y,L as _,a4 as f,Q as b,R as g}from"./vendor.512b7acb.js";import{b as j,A as h,F as x}from"./index.fa2868cb.js";import{i as V}from"./inputsLayaut.vue_vue&type=style&index=0&lang.b5a3a3a2.js";import{_ as w}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.89cc6b21.js";import{p as S}from"./sidebarLayoutState.08ab8119.js";import"./V-Placeload.982e0955.js";import"./V-Control.5136ae9f.js";import"./V-Field.vue_vue&type=script&setup=true&lang.5cc17432.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.65c51667.js";import"./V-Modal.vue_vue&type=script&setup=true&lang.b069e1cd.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.ba945660.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.913acdcb.js";import"./useDropdown.10df4d81.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.471307b0.js";import"./V-Dropdown.b805b674.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.f78f5288.js";import"./Companies.153102da.js";import"./activePanelState.53d13aa7.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.65aad7e6.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.8ff326ca.js";import"./V-Message.vue_vue&type=script&setup=true&lang.4f410568.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.14f85ffe.js";import"./navbarLayoutState.a9abea7f.js";import"./video.81ca49e0.js";import"./darkModeState.8ae54720.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.c6af2930.js";import"./AnimatedLogo.afd186e6.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.33fcd2c5.js";import"./V-Block.vue_vue&type=script&setup=true&lang.7ac5b30d.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.9114be65.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.9d07b6d1.js";const k={class:"columns is-multiline"},P={key:0,class:"d-flex justify-content-center column is-12 mb-4"},$=m("p",null,null,-1),C={class:"text-center mr-6"},q=m("img",{src:a,width:"40",alt:""},null,-1),F=v(" View PDF "),D={class:"text-center ml-6"},B=m("img",{src:a,width:"40",alt:""},null,-1),L=v(" View PDF "),A={key:1,class:"text-center mb-4 mt-5 mx-auto"},M=m("p",{class:"mb-4 title is-5"},"Saved signature",-1);var T=n({expose:[],props:{member:{type:Object,required:!0},loading:{type:Boolean,default:!1}},setup(a){const n=a;r((()=>{}));const v=i(!1),y=i(!1),_=i(null);i();const f=async e=>(_.value=e,v.value=!0,h.post(`sign/${n.member.membership_members.id}`,{sign:e}).then((e=>{y.value=!0,v.value=!1}))),b=()=>{f(V)};return(n,r)=>{const i=t,v=s,g=e;return u(),l(g,{radius:"small"},{default:o((()=>[m("div",k,[a.loading?d("v-if",!0):(u(),l("div",P,[$,m("div",C,[m("a",{target:"_blank",href:`${p(j)}generateContract/${a.member.id}`},[q,m("p",null," contract_"+c(a.member.id)+"_"+c(a.member.membership_members.id)+"_"+c(a.member.personal_identifications)+".pdf ",1),m(i,{color:"success",outlined:"",class:"mt-4 py-1"},{default:o((()=>[F])),_:1})],8,["href"])]),m("div",D,[m("a",{target:"_blank",href:`${p(j)}generateWeiver/${a.member.id}`},[B,m("p",null," weiver_"+c(a.member.id)+"_"+c(a.member.membership_members.id)+"_"+c(a.member.personal_identifications)+".pdf ",1),m(i,{color:"success",outlined:"",class:"mt-4 py-1"},{default:o((()=>[L])),_:1})],8,["href"])])])),d(' <VPlaceload\n        v-if="load && !firmado"\n        width="400px"\n        height="135px"\n        style="margin-top: 10px"\n        class="mx-auto"\n      /> '),d(' <VueDrawingCanvas\n        v-if="!firmado && !load"\n        class="column is-6 mx-auto"\n        ref="VueCanvasDrawing"\n        save-as="jpeg"\n        width="600"\n        height="200"\n      /> '),m(v,{onSinFirmar:b,onOnSignYes:f}),y.value?(u(),l("div",A,[M,m("img",{src:_.value,width:"400",height:"135",alt:""},null,8,["src"])])):d("v-if",!0),d(' <div\n        v-if="!firmado"\n        class="column is-12 mx-auto d-flex justify-content-center"\n      >\n        <V-Button color="info" class="text-center mx-auto" @click="viewFirma">\n          Sign and save\n        </V-Button>\n        <V-Button\n          color="danger"\n          class="text-center mx-auto"\n          @click="VueCanvasDrawing.reset()"\n        >\n          Reset\n        </V-Button>\n      </div> ')])])),_:1})}}});const O={class:"page-content-inner"},z=m("h1",{class:"title is-4"},"Successful Payment",-1),I={class:"title is-3"},R={key:1,class:"mt-6"},W={class:"title is-3"},E=v(" View and sign: Family ");var G=n({expose:[],setup(a){S.value="Add New members",y({title:"Members"});const s=_();f();const n=i([]),v=i(null),j=i(null),V=i(!0);let k=i([]);r((()=>{h.post(`payment/${s.query.id}`,{payment_intent_client_secret:s.query.payment_intent_client_secret,redirect_status:s.query.redirect_status,payment_type:s.query.payment_type,membership:s.query.membership}).then((e=>{e.data.status&&(v.value=s.query.redirect_status,j.value=e.data.urlPDF,n.value=e.data.member,k.value=e.data.familiares,V.value=!1)}))}));return(a,r)=>{const i=e,v=T,y=t,_=w;return u(),l(_,null,{default:o((()=>[d(" Content Wrapper "),m("div",O,[d(' <VPlaceload v-if="paymentStatus == null" height="500px" /> '),d(" v-if=\"paymentStatus == 'succeeded'\" "),m("div",null,[m(i,{class:"mb-4",color:"success"},{default:o((()=>[z])),_:1}),m("h2",I," Sign "+c(n.value.name)+" "+c(n.value.second_name)+" "+c(n.value.last_name),1),n.value?(u(),l(v,{key:0,loading:V.value,member:n.value},null,8,["loading","member"])):d("v-if",!0),p(k).length>0?(u(),l("div",R,[(u(!0),l(b,null,g(p(k),((e,t)=>(u(),l("div",{key:`familu${t}`},[m(i,{class:"mb-4",radius:"small"},{default:o((()=>[m("h2",W," Sign Family: "+c(e.name)+" "+c(e.second_name)+" "+c(e.last_name),1),m(y,{color:"warning",class:"text-center mx-auto",onClick:t=>(e=>{window.location.href=`${x.value}members/process?id=${e.id}&payment_intent=${s.query.payment_intent}&payment_intent_client_secret=${s.query.payment_intent_client_secret}&redirect_status=${s.query.redirect_status}&payment_type=${s.query.payment_type}`})(e)},{default:o((()=>[E])),_:2},1032,["onClick"])])),_:2},1024)])))),128))])):d("v-if",!0)])])])),_:1})}}});export default G;
