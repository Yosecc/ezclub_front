import{_ as W,a as j}from"./staffSystemPermitions.vue_vue_type_style_index_0_lang.2d38a8e6.js";import{_ as A}from"./inputsLayaut.vue_vue_type_style_index_0_lang.bc2ca8d6.js";import{_ as k}from"./formLayaut.vue_vue_type_style_index_0_lang.2638a67d.js";import{d as w,c as E,o as _,e as v,w as x,u as n,k as $,n as u,f as p,a7 as U,r as q,y as C,B as L,j as N,s as i,g as S,q as d,m as B,D as R,l as V}from"./index.4457215e.js";import{i as h,b as M,c,d as P,e as F,f as o,h as f,j as H,k as O,p as T}from"./Staffs.ad83113a.js";import{_ as z}from"./signComponent.vue_vue_type_script_setup_true_lang.4373d048.js";import{_ as G}from"./SidebarLayout.vue_vue_type_script_setup_true_lang.a7af6f4a.js";import{p as J}from"./sidebarLayoutState.d2b676a9.js";import{a as K}from"./Companies.4f645ec0.js";import{g as Q,c as X,a as Y,s as Z,b as tt,d as et}from"./config.f468f56a.js";import"./V-Avatar.vue_vue_type_script_setup_true_lang.b4183814.js";import"./V-Button.vue_vue_type_script_setup_true_lang.72d178c7.js";import"./V-Placeload.9684d098.js";import"./V-Control.92200beb.js";import"./V-Field.vue_vue_type_script_setup_true_lang.33752939.js";import"./V-SwitchSegment.vue_vue_type_script_setup_true_lang.96e64ac9.js";import"./V-Modal.vue_vue_type_script_setup_true_lang.f0368080.js";import"./V-Checkbox.vue_vue_type_script_setup_true_lang.70a8d51f.js";import"./V-Card.vue_vue_type_script_setup_true_lang.f80f1beb.js";import"./V-Loader.vue_vue_type_script_setup_true_lang.f82321d3.js";import"./V-CardAdvanced.vue_vue_type_script_setup_true_lang.66aff21d.js";import"./pdf_icon.c303a5d8.js";import"./ActivityPanel.vue_vue_type_style_index_0_lang.8acd0baa.js";import"./useDropdown.d2881c63.js";import"./V-Dropdown.c58eb584.js";import"./V-Icon.vue_vue_type_script_setup_true_lang.a0e27302.js";import"./activePanelState.d3359fb3.js";import"./fastpizza.70124fcb.js";import"./TaskPanel.vue_vue_type_style_index_0_lang.50493a6a.js";import"./V-Tag.vue_vue_type_script_setup_true_lang.0d8ff65f.js";import"./video.d6dbc99d.js";import"./SearchPanel.vue_vue_type_style_index_0_lang.63cec0b9.js";import"./darkModeState.1f6503fc.js";import"./AnimatedLogo.d670690a.js";import"./V-IconBox.vue_vue_type_script_setup_true_lang.772b752f.js";import"./V-Block.vue_vue_type_script_setup_true_lang.00657afe.js";import"./UserPopoverContent.vue_vue_type_script_setup_true_lang.5fb53f85.js";import"./userPopovers.f4b9fc60.js";var at=w({expose:[],props:{type:{type:String,default:"create"},buttons:{type:Array,default:["save","back"]},step:{type:Number,default:1}},setup(y){const r=y;U();const l=E(()=>r.type=="create"?{title:"Add a new User",subtitle:"Add User"}:{title:"Edit User",subtitle:"Edit User"}),m=()=>{const e=$(h.value);M(e).then(t=>{u.success("Success")}).catch(t=>{for(var a in t.response.data)u.error(`${a}: ${t.response.data[a]}`)})};return(e,t)=>{const a=A,s=k;return _(),v(s,{onSaveData:m,buttons:r.buttons,step:r.step,titles:n(l)},{default:x(()=>[p(a,{"inputs-step":n(h)},null,8,["inputs-step"])]),_:1},8,["buttons","step","titles"])}}});var st=w({expose:[],props:{type:{type:String,default:"create"},buttons:{type:Array,default:["save","back"]},step:{type:Number,default:1}},setup(y){const r=y;q([{name:"Waiver_010221.pdf",url:""}]);const l=E(()=>r.type=="create"?{title:"Create staff waiver",subtitle:"Add Waiver"}:{title:"Edit staff waiver",subtitle:"Edit Waiver"}),m=e=>{P(e,c.value.id).then(t=>{if(t.data.status)u.success("Sign Success");else{u.error(t.data.mensaje);for(var a in t.data.errores)t.data.errores[a].forEach(s=>{u.error(`${a} : ${s}`)})}}).catch(t=>{})};return(e,t)=>{const a=z,s=k;return _(),v(s,{buttons:r.buttons,step:r.step,titles:n(l)},{default:x(()=>[n(c)?(_(),v(a,{key:0,onOnSign:m,"is-sign":r.type=="create",waiver:`waiver_${n(c).id}.pdf`,"url-waiver":`staffs/generateWeiver/${n(c).id}`},null,8,["is-sign","waiver","url-waiver"])):C("",!0)]),_:1},8,["buttons","step","titles"])}}});const rt={class:"page-content-inner"},ot={class:"columns is-multiline"};var Ot=w({expose:[],setup(y){const r=U(),l=R();J.value="Edit Staff",L({title:"Staffs"}),N(()=>{F(l.query.id).then(e=>{for(var t in e.data)if(t=="rent_space")i(o,t,e.data[t]==null?"":e.data[t]);else if(t=="company_name_staff")i(o,t,e.data[t]==null?"":e.data[t]);else if(t=="ein")i(o,t,e.data[t]==null?"":e.data[t]);else if(t=="price_rent")i(o,t,e.data[t]==null?"":e.data[t]);else if(t=="locations"){let a=[];e.data[t].forEach(s=>{a.push(s.locations_id)}),i(f,t,a)}else if(t=="staff_roles"){let a=[];e.data[t].forEach(s=>{a.push(s.staff_roles_id)}),i(f,t,a)}else i(o,t,e.data[t]),i(f,t,e.data[t]);S(h.value,"email").model=S(o.value,"email").model}),K().then(e=>{d(f,"locations",e.data.locations)}),Q().then(e=>{d(o,"city_id",X.value)}),Y().then(e=>{d(o,"state_id",Z.value)}),tt().then(e=>{d(o,"country_id",et.value)}),H().then(e=>{d(f,"staff_roles",e.data.staff_roles)})}),B(()=>c.value,()=>{O(c.value.id).then(e=>{e.data&&(S(h.value,"email").model=e.data.email)})});const m=()=>{let e={...$(o.value),...$(f.value)};const t=new FormData;for(var a in e)t.append(a,e[a]);V.value||T(l.query.id,t).then(s=>{if(s.data.status)u.success("Succeeded"),r.back();else{u.error(s.data.mensaje);for(var b in s.data.errores)s.data.errores[b].forEach(g=>{u.error(`${b} : ${g}`)})}}).catch(s=>{console.log(s.response.data)})};return(e,t)=>{const a=W,s=j,b=at,g=st,I=G;return _(),v(I,null,{default:x(()=>{var D;return[p("div",rt,[p("div",ot,[p("div",{class:"column is-12",style:[{display:"flex"},(D=n(l).query)!=null&&D.sign?{flexDirection:"column-reverse"}:{flexDirection:"column"}]},[p(a,{type:"edit",buttons:["back","save"],step:1,class:"mb-3",onSaveData:m}),p(s,{type:"edit",buttons:[],step:2,class:"mb-3"}),p(b,{type:"edit",buttons:["save"],class:"mb-3"}),n(c)?(_(),v(g,{key:0,class:"mb-4",type:n(c).sign?"edit":"create",buttons:[],step:3},null,8,["type"])):C("",!0)],4)])])]}),_:1})}}});export{Ot as default};
