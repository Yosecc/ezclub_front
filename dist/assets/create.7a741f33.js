import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.dc9138c0.js";import{_ as t}from"./V-Control.70f7b974.js";import{_ as a}from"./V-Field.vue_vue&type=script&setup=true&lang.8caeb9ca.js";import{_ as l}from"./inputsLayaut.vue_vue&type=style&index=0&lang.78f9b3d5.js";import{_ as s}from"./formLayaut.vue_vue&type=style&index=0&lang.90f77f15.js";import{p as n,h as i,s as r,v as o,a as u,b as p,d,m}from"./Mixin.226dd76d.js";import{d as c,r as y,w as v,b as f,o as h,h as b,j as g,k as _,D as I,L as M,N as x,K as A,G as S,J as C,A as D,F as P,Q as j,a4 as q,Y as k,Z as N,z as T}from"./vendor.3b9a49d2.js";import{A as E,F as R}from"./index.f7cca200.js";import{_ as F}from"./V-Card.vue_vue&type=script&setup=true&lang.89bf5570.js";import{g as V}from"./Diciplines.921486d5.js";import{r as w,g as O}from"./Recurrences.2b1457e5.js";import{m as $,g as L}from"./Memberships.941607a8.js";import{t as B,f as J}from"./Staffs.e6816507.js";import{_ as G}from"./V-Placeload.ec1fe97e.js";import{h as z}from"./moment.08a7f518.js";import{_ as Z}from"./V-Progress.vue_vue&type=script&setup=true&lang.c8a00e1e.js";import{_ as W}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.dc7caf9f.js";import{g as K,c as U,s as Y,a as H}from"./config.b4fc7650.js";import{o as Q}from"./PaymentMethodsData.d85f1d0f.js";import{p as X}from"./sidebarLayoutState.9d5a55d2.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.441d7520.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.360f6b50.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.18dfabcd.js";import"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.020cd487.js";import"./notyf.es.f84e4201.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.87eb8c3e.js";import"./useDropdown.4b88246a.js";import"./V-Dropdown.5634df5b.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.725db5d0.js";import"./activePanelState.d422980e.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.2e4be4e2.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.5554d4bf.js";import"./V-Message.vue_vue&type=script&setup=true&lang.f4c30d64.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.db2a2ca9.js";import"./V-Modal.vue_vue&type=script&setup=true&lang.533d5625.js";import"./navbarLayoutState.ef28e5e8.js";import"./video.7e4ace56.js";import"./darkModeState.9048b099.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.9336f53f.js";import"./AnimatedLogo.d39560aa.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.5fbfe7cf.js";import"./V-Block.vue_vue&type=script&setup=true&lang.fd027cc2.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.7c436ff6.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.b8cff140.js";var ee=c({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e,r=y(!1);v((()=>a.inputs),((e,t)=>{o()}));const o=()=>{r.value=!0,setTimeout((()=>{r.value=!1}),500)},u=f((()=>p.value?a.inputs.filter((e=>e.typeMember.includes("Company"))):a.inputs.filter((e=>e.typeMember.includes("Individual"))))),p=y(!1),d=e=>{p.value=!e.input.model,o()},m=e=>{let a=n(u.value);i.value||(a.select_type=a.select_type?"Company":"Individual",t("returData",a),t("changeStep",e))};return(t,a)=>{const n=l,i=s;return h(),b(i,{titles:{title:e.title},"is-loading":r.value,buttons:["next","back"],step:1,onChangeStep:m},{default:g((()=>[_(n,{"inputs-step":I(u),onChangeSwitch:d},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}});const te=y(null),ae=y({name:"category",values:["Adult","Minor","Prospect"],model:"Adult",required:!0}),le=f((()=>ae.value.model)),se=y([{typeInput:"switchEventChange",name:"select_type",values:["Individual","Company"],model:!1,required:!1,class:"is-6",categories:["Adult"],typeMember:["Individual","Company"]},{typeInput:"file",name:"photo",placeholder:"Member Picture",model:"",required:!0,class:"is-12 d-flex justify-content-end",categories:["Adult","Minor"],typeMember:["Individual","Company"]},{typeInput:"text",name:"company_name",placeholder:"Company Name",model:"",class:"is-12",categories:["Adult"],typeMember:["Company"]},{typeInput:"text",name:"name",placeholder:"First Name",model:"",required:!0,class:"is-4",categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"text",name:"second_name",placeholder:"Middle Name",model:"",required:!0,class:"is-4",categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"text",name:"last_name",placeholder:"Last Name",model:"",required:!0,class:"is-4",categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"text",name:"bar_code",placeholder:"Client ID Card",model:"",required:!0,class:"is-6",categories:["Adult","Minor"],typeMember:["Individual","Company"]},{typeInput:"date",name:"date_birth",placeholder:"Date of Birth",model:"",required:!0,class:"Prospect"==le.value?"is-6":"is-3",categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"select",name:"gender",placeholder:"Gender",values:["Male","Female","Binario"],model:"",required:!0,class:"Prospect"==le.value?"is-6":"is-3",categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"select",name:"goverment_id",placeholder:"Goverment ID Type",values:["Card ID","Identification ID","Passport"],model:"",required:!0,class:"is-4",categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"number",name:"personal_identifications",placeholder:"ID #",model:"",required:!0,class:"is-8",categories:["Adult","Prospect","Minor"],typeMember:["Individual","Company"]},{typeInput:"number",name:"postal_code",placeholder:"Postal Code",model:"",class:"is-3",categories:["Adult","Prospect","Minor"],typeMember:["Individual","Company"]},{typeInput:"selectData",name:"country_id",placeholder:"Country",model:"",values:[""],class:"is-3",categories:["Adult","Prospect","Minor"],typeMember:["Individual","Company"],filterOptionText:function(e){return e.name}},{typeInput:"selectData",name:"city_id",placeholder:"City",model:"",values:[""],class:"is-3",categories:["Adult","Prospect","Minor"],typeMember:["Individual","Company"],filterOptionText:function(e){return e.name}},{typeInput:"selectData",name:"state_id",placeholder:"State",model:"",values:[""],class:"is-3",categories:["Adult","Prospect","Minor"],typeMember:["Individual","Company"],filterOptionText:function(e){return e.name}},{typeInput:"text",name:"address",placeholder:"Address",model:"",required:!0,class:"is-12",categories:["Adult","Prospect"],typeMember:["Individual","Company"]},{typeInput:"email",name:"email",placeholder:"Email",model:"",required:!0,class:"is-6",categories:["Adult","Prospect"],typeMember:["Individual","Company"]},{typeInput:"number",name:"phone",placeholder:"Phone Number",model:"",required:!0,class:"is-6",categories:["Adult","Prospect"],typeMember:["Individual","Company"]},{typeInput:"checkbox",name:"leo_vet_fr",placeholder:"LEO / VET / FR",model:[],required:!1,class:"is-6",categories:["Adult"],typeMember:["Individual"]},{typeInput:"text",name:"id_leo_vet_fr",placeholder:"LEO / VET / FR ID#",model:"",required:!1,class:"is-6",categories:["Adult"],typeMember:["Individual"]},{typeInput:"hidden",name:"is_family",placeholder:"LEO / VET / FR ID#",model:0,class:"is-6",categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"hidden",name:"principal_family",placeholder:"LEO / VET / FR ID#",model:0,class:"is-6",categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]}]),ne=y([{typeInput:"switchEventChange",name:"category",values:["Adult","Minor"],class:"is-6",model:!1,category:["Adult","Minor"]},{typeInput:"file",name:"photo",placeholder:"Member Picture",class:"is-6 d-flex justify-content-end",model:"",required:!1,category:["Adult","Minor"]},{typeInput:"select",name:"relationships",placeholder:"Relationship",values:["Sand","Dother","Wife","Girlfriend","Boyfriend","Father","Mother"],model:"",class:"is-6",required:!1,category:["Adult","Minor"]},{typeInput:"text",name:"bar_code",placeholder:"Client ID Card",model:"",class:"is-6",required:!1,category:["Adult","Minor"]},{typeInput:"date",name:"date_birth",placeholder:"Date of Birth",model:"",class:"is-6",required:!1,category:["Adult","Minor"]},{typeInput:"select",name:"gender",placeholder:"Gender",values:["Male","Female","Binario"],model:"",class:"is-6",required:!1,category:["Adult","Minor"]},{typeInput:"text",name:"name",placeholder:"First Name",model:"",class:"is-4",required:!1,category:["Adult","Minor"]},{typeInput:"text",name:"second_name",placeholder:"Middle Name",model:"",class:"is-4",required:!1,category:["Adult","Minor"]},{typeInput:"text",name:"last_name",placeholder:"Last Name",model:"",class:"is-4",required:!1,category:["Adult","Minor"]},{typeInput:"select",name:"goverment_id",placeholder:"Goverment ID Type",values:["Card ID","Identification ID","Passport"],model:"",class:"is-4",required:!1,category:["Adult"]},{typeInput:"number",name:"personal_identifications",placeholder:"ID #",model:"",class:"is-8",required:!1,category:["Adult"]},{typeInput:"number",name:"postal_code",placeholder:"Postal Code",model:"",class:"is-3",categories:["Adult","Prospect","Minor"],typeMember:["Individual","Company"]},{typeInput:"selectData",name:"country_id",placeholder:"Country",model:"",values:[""],class:"is-3",categories:["Adult","Prospect","Minor"],typeMember:["Individual","Company"]},{typeInput:"selectData",name:"city_id",placeholder:"City",model:"",values:[""],class:"is-3",categories:["Adult","Prospect","Minor"],typeMember:["Individual","Company"]},{typeInput:"selectData",name:"state_id",placeholder:"State",model:"",values:[""],class:"is-3",categories:["Adult","Prospect","Minor"],typeMember:["Individual","Company"]},{typeInput:"text",name:"address",placeholder:"Address",model:"",class:"is-12",required:!1,category:["Adult"]},{typeInput:"email",name:"email",placeholder:"Email",model:"",class:"is-6",required:!1,category:["Adult"]},{typeInput:"number",name:"phone",placeholder:"Phone Number",model:"",class:"is-6",required:!1,category:["Adult"]},{typeInput:"checkbox",name:"leo_vet_fr",placeholder:"LEO / VET / FR",model:[],required:!1,class:"is-6",categories:["Adult"],typeMember:["Individual"]},{typeInput:"text",name:"id_leo_vet_fr",placeholder:"LEO / VET / FR ID#",model:"",required:!1,class:"is-6",categories:["Adult"],typeMember:["Individual"]},{typeInput:"hidden",name:"is_family",placeholder:"LEO / VET / FR ID#",model:1,class:"is-6",categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"hidden",name:"principal_family",placeholder:"LEO / VET / FR ID#",model:0,class:"is-6",categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]}]),ie=f((()=>ne.value)),re=y([{typeInput:"checkboxGroup",name:"notifications",text:"When you ask clients to opt in, remind them that we'll still send receipts and anything critical",values:[{name:"notifications_types_id",value:1,placeholder:"Account Information",values:[{placeholder:"Email",name:"email",model:["email"]},{placeholder:"SMS",name:"sms",model:["sms"]}]},{name:"notifications_types_id",value:2,placeholder:"Reminders and schedule changes",values:[{placeholder:"Email",name:"email",model:["email"]},{placeholder:"SMS",name:"sms",model:["sms"]}]},{name:"notifications_types_id",value:3,placeholder:"News and promos",values:[{placeholder:"Email",name:"email",model:["email"]},{placeholder:"SMS",name:"sms",model:["sms"]}]}]}]),oe=y([{typeInput:"textarea",name:"notes",placeholder:"Notes",model:"",disabled:!1,class:"is-12"}]),ue=y([{typeInput:"file",name:"parent_photo",placeholder:"Parent/Guardian Picture",model:"",class:"is-12 d-flex justify-content-end",required:!1},{typeInput:"select",name:"parent_relationships",placeholder:"Parent Relationships",values:["Sand","Dother","Wife","Girlfriend","Boyfriend","Father","Mother"],model:"",class:"is-4",required:!1},{typeInput:"text",name:"parent_name",placeholder:"First Name",model:"",class:"is-4",required:!1},{typeInput:"text",name:"parent_second_name",placeholder:"Middle Name",model:"",class:"is-4",required:!1},{typeInput:"text",name:"parent_last_name",placeholder:"Last Name",model:"",class:"is-4",required:!1},{typeInput:"select",name:"parent_goverment_id",placeholder:"Goverment ID Type",values:["Card ID","Identification ID","Passport"],model:"",class:"is-4",required:!1},{typeInput:"number",name:"parent_personal_identifications",placeholder:"ID #",model:"",class:"is-4",required:!1},{typeInput:"text",name:"parent_address",placeholder:"Address",model:"",class:"is-4",required:!1},{typeInput:"email",name:"parent_email",placeholder:"Email",model:"",class:"is-4",required:!1},{typeInput:"number",name:"parent_phone",placeholder:"Phone Number",model:"",class:"is-4",required:!1}]),pe=y([{typeInput:"checkbox",name:"recurrence",placeholder:"Recurrence",model:["recurrence"],disabled:!1,class:"is-12"},{typeInput:"selectDataActionChange",name:"memberships_id",placeholder:"Membership Type",values:[],model:"",disabled:!1,class:"is-12"},{typeInput:"radioBoxs",name:"recurrences_id",placeholder:"Recurrence & Amount",values:[],model:"",disabled:!1,class:"is-12",filterName:"descriptions",otros:"amount"},{typeInput:"hidden",name:"amount",placeholder:"Amount",model:"",disabled:!1,class:"is-12"},{typeInput:"selectDataActionChange",name:"locations_id",placeholder:"Locations Sale",values:[],model:"",disabled:!1,class:"is-4"},{typeInput:"checkboxGroupSimple",name:"diciplines",text:"Diciplines",model:[],values:[],disabled:!1,class:"is-12"},{typeInput:"number",name:"initiation_fee",placeholder:"Initiation fee",model:[],disabled:!0,class:"is-4"},{typeInput:"checkbox",name:"is_initiation_fee",placeholder:"No initiation fee",model:[],disabled:!1,class:"is-4"},{typeInput:"selectData",name:"discount",placeholder:"Discount",values:[],model:"",disabled:!1,class:"is-6"},{typeInput:"selectData",name:"staff_id",placeholder:"Trainer",values:[],model:"",disabled:!1,class:"is-6",filterOptionText:function(e){return`${e.name} ${e.second_name} ${e.last_name}`}}]);var de=c({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e=>{t("changeStep",e)};return(t,n)=>{const i=l,r=s;return h(),b(r,{titles:{title:e.title},"is-loading":t.isLoading,buttons:["next","prev"],step:2,onChangeStep:a},{default:g((()=>[_(i,{"inputs-step":I(ue)},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}});const me=S(" Remove Family Member "),ce={class:"column d-flex justify-content-center is-12"},ye=S(" Add Another Family Member ");var ve=c({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(t,{emit:a}){const n=t,i=y(!1);v((()=>n.inputs),((e,t)=>{r()}));const r=()=>{i.value=!0,setTimeout((()=>{i.value=!1}),500)},o=y([JSON.parse(JSON.stringify(n.inputs))]),u=f((()=>(r(),o.value.forEach(((e,t)=>{m.value.includes(t)?o.value[t]=e.filter((e=>e.category.includes("Minor"))):o.value[t]=JSON.parse(JSON.stringify(n.inputs))})),o.value))),p=()=>{o.value.push(JSON.parse(JSON.stringify(n.inputs)))},d=e=>{a("returData",o),a("changeStep",e)},m=y([]);return(a,n)=>{const r=l,c=e,y=F,v=s;return h(),b(v,{titles:{title:t.title},"is-loading":i.value,buttons:["next","prev"],step:2,onChangeStep:d},{default:g((()=>[(h(!0),b(M,null,x(I(u),((e,t)=>(h(),b(y,{key:t,class:"mb-4"},{default:g((()=>[_(r,{"inputs-step":e,onChangeSwitch:e=>{return a=t,console.log("es este"),console.log(a),console.log(u.value),void m.value.findIndex((e=>e==a));var a}},null,8,["inputs-step","onChangeSwitch"]),t>0?(h(),b(c,{key:0,onClick:e=>o.value.splice(t,1),color:"danger",class:"mx-auto",icon:"fas fa-times"},{default:g((()=>[me])),_:2},1032,["onClick"])):A("",!0)])),_:2},1024)))),128)),_("div",ce,[_(c,{onClick:p,color:"info",icon:"fas fa-check",raised:""},{default:g((()=>[ye])),_:1})])])),_:1},8,["titles","is-loading"])}}}),fe=c({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep"],setup(e,{emit:t}){const a=e,n=y(!1);v((()=>a.inputs),((e,t)=>{r()}));const i=e=>{let a=[];o.value.forEach((e=>{e.values.forEach((e=>{let t=e.values.find((e=>"sms"==e.name)).model.length,l=e.values.find((e=>"email"==e.name)).model.length;a.push({[e.name]:e.value,sms:t>0,email:l>0})}))})),t("returnData",a),t("changeStep",e)},r=()=>{n.value=!0,setTimeout((()=>{n.value=!1}),500)},o=f((()=>a.inputs)),u=y(!1),p=e=>{u.value=!e.input.model,r()};return(t,a)=>{const r=l,u=s;return h(),b(u,{titles:{title:e.title},"is-loading":n.value,buttons:["next","prev"],step:3,onChangeStep:i},{default:g((()=>[_(r,{"inputs-step":I(o),onChangeSwitch:p},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}});const he=y([]);f((()=>JSON.parse(JSON.stringify(he.value))));const be={class:""},ge={class:"mb-5"};var _e=c({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberships:{type:Array,default:[]},notes:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(e,{emit:t}){const a=e,n=y(!1);v((()=>a.inputs),((e,t)=>{i()}));const i=()=>{n.value=!0,setTimeout((()=>{n.value=!1}),500)},p=f((()=>a.inputs)),d=[{typeInput:"checkbox",name:"recurrence",placeholder:"Recurrence",model:["recurrence"],disabled:!1,class:"is-12"},{typeInput:"selectDataActionChange",name:"memberships_id",placeholder:"Membership Type",values:[],model:"",disabled:!1,class:"is-12"},{typeInput:"radioBoxs",name:"recurrences_id",placeholder:"Recurrence & Amount",values:[],model:"",disabled:!1,class:"is-12",filterName:"descriptions",otros:"amount"},{typeInput:"hidden",name:"amount",placeholder:"Amount",model:"",disabled:!1,class:"is-12"},{typeInput:"selectDataActionChange",name:"locations_id",placeholder:"Locations Sale",values:[],model:"",disabled:!1,class:"is-4"},{typeInput:"checkboxGroupSimple",name:"diciplines",text:"Diciplines",model:[],values:[],disabled:!1,class:"is-12"},{typeInput:"number",name:"initiation_fee",placeholder:"Initiation fee",model:[],disabled:!0,class:"is-4"},{typeInput:"checkbox",name:"is_initiation_fee",placeholder:"No initiation fee",model:[],disabled:!1,class:"is-4"},{typeInput:"selectData",name:"discount",placeholder:"Discount",values:[],model:"",disabled:!1,class:"is-6"},{typeInput:"selectData",name:"staff_id",placeholder:"Trainer",values:[],model:"",disabled:!1,class:"is-6",filterOptionText:function(e){return`${e.name} ${e.second_name} ${e.last_name}`}}];f((()=>JSON.parse(JSON.stringify(d))));const m=f((()=>{let e=[];return a.familiares.forEach((t=>{if(""!=t.find((e=>"name"==e.name)).model){let a=JSON.parse(JSON.stringify(d));r(a,"memberships_id",$.value),r(a,"discount",he.value),r(a,"staff_id",B.value),e.push({family:t,inputs:a})}})),e})),c=e=>{t("returnData",{memberMembership:p,familyMembership:m}),t("changeStep",e)},A=e=>{if("memberships_id"==e.input.name){let t=e.input.values.find((t=>t.id==e.input.model));u(e.inputsStep,"initiation_fee",t.initiation_fee);let a=[];t.locations.forEach((e=>{1==e.sale&&a.push(e.company_locations)})),r(e.inputsStep,"locations_id",a);let l=[];t.amounts.forEach((e=>{let t=w.value.find((t=>t.id==e.recurrences_id));t.amount=e.amount,l.push(t)})),r(e.inputsStep,"recurrences_id",l),i()}"locations_id"==e.input.name&&V([e.input.model]).then((t=>{r(e.inputsStep,"diciplines",t.data),i()}))},S=(e,t)=>{u(p,"amount",e.values.find((t=>t.id==e.model)).amount)},D=(e,t)=>{u(t,"amount",e.values.find((t=>t.id==e.model)).amount)};return(t,a)=>{const r=l,u=F,d=s;return h(),b(d,{titles:{title:e.title},"is-loading":n.value,buttons:["next","prev"],step:4,onChangeStep:c},{default:g((()=>[_(u,{class:"mb-4"},{default:g((()=>[_("p",be,[_("b",null,C(I(o)(e.member,"name"))+" "+C(I(o)(e.member,"second_name"))+" "+C(I(o)(e.member,"last_name")),1)]),_(r,{"inputs-step":I(p),onChangeSelect:A,onChangeRadio:S},null,8,["inputs-step"])])),_:1}),(h(!0),b(M,null,x(I(m),((e,t)=>(h(),b(u,{class:"mb-4",key:`da${t}`},{default:g((()=>[_("p",ge,[_("b",null,C(I(o)(e.family,"name"))+" "+C(I(o)(e.family,"second_name"))+" "+C(I(o)(e.family,"last_name")),1)]),_(r,{"inputs-step":e.inputs,onChangeSelect:A,onChangeRadio:D,onChangeCheckbox:i},null,8,["inputs-step"])])),_:2},1024)))),128)),_(u,{class:"mb-4"},{default:g((()=>[_(r,{"inputs-step":e.notes},null,8,["inputs-step"])])),_:1})])),_:1},8,["titles","is-loading"])}}});const Ie=_("div",{id:"payment-element"},null,-1),Me=S(" Pay now "),xe=_("div",{id:"payment-message",class:"hidden"},null,-1);var Ae=c({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0}},setup(t){const a=t,l=Stripe("pk_test_51JFMxBFllRtR3x1gBilPZnRFAmn5t6vpZSYDOLR2A14zgdDZUiVvLorUwZiq1ummftz3ZKmWRb4X9DtoBkju4w3g00z410NK5H");v((()=>a.id),(e=>{console.log("to",e),s.value=!0,i()}));const s=y(!0);y({id:a.id,amount:a.amount});const n=y(),i=async()=>{let e=await E.post("stripe",{id:a.id,amount:a.amount}).then((e=>{n.value=l.elements({clientSecret:e.data.clientSecret,appearance:{theme:"night",rules:{".Input":{boxShadow:"none"}}}});n.value.create("payment").mount("#payment-element")})).catch((e=>{}));return s.value=!1,e},r=async e=>{e.preventDefault();const{error:t}=await l.confirmPayment({elements:n.value,confirmParams:{return_url:`${R.value}members/process?id=`+a.id}});"card_error"===t.type||"validation_error"===t.type?console.log(t.message):console.log("An unexpected error occured.")};return D((()=>{i()})),(t,a)=>{const l=G,n=e,i=F;return h(),b(M,null,[s.value?(h(),b(l,{key:0,height:"500px"})):A("",!0),P(_(i,{class:"mt-6"},{default:g((()=>[_("form",{onSubmit:q(r,["prevent"]),id:"payment-form"},[Ie,_(n,{id:"submit",class:"mt-4",color:"success"},{default:g((()=>[Me])),_:1}),xe],40,["onSubmit"])])),_:1},512),[[j,!s.value]])],64)}}});const Se={class:"table is-hoverable is-striped is-fullwidth"},Ce=_("thead",null,[_("tr",null,[_("th",{scope:"col"},"Members"),_("th",{scope:"col"},"Membership Name"),_("th",{scope:"col"},"Recurrence"),_("th",{scope:"col"},"Prorated"),_("th",{scope:"col"},"Membership Cost"),_("th",{scope:"col"},"Initiation Fee"),_("th",{scope:"col"},"Taxes"),_("th",{scope:"col"},"Sub Total")])],-1),De={key:0},Pe={key:1},je={key:2},qe={key:0},ke=_("br",null,null,-1),Ne={key:1},Te={key:0},Ee=_("br",null,null,-1),Re={key:1},Fe=_("td",{style:{"text-align":"right"},colspan:"7"},"Total",-1),Ve={class:"is-end"},we={class:"d-flex justify-content-between"},Oe=S(" Card Payment "),$e=S(" Cash Payment ");var Le=c({expose:[],props:{type:{type:String,default:"create"},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberMembership:{type:Array,default:[]},familyMembership:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(t,{emit:a}){const l=t,n=y(!1),i=e=>{a("returnData",{total:T}),a("changeStep",e)},r=f((()=>{let e=p(l.memberMembership,"memberships_id");return null!=e?e:[]})),u=f((()=>{let e=p(l.memberMembership,"recurrences_id");return null!=e?e:[]})),c=f((()=>{let e=o(l.memberMembership,"initiation_fee");return null!=e?e:[]})),D=f((()=>{let e=parseFloat(z().format("DD")),t=0,a=0;return u.value.days>=30&&(a=e-u.value.payday,t=u.value.amount/30*a),{days:a,amount:Math.abs(Math.round(t))}})),P=e=>{let t=parseFloat(z().format("DD")),a=0,l=0;return e.days>=30&&(l=t-e.payday,a=e.amount/30*l),{days:l,amount:Math.abs(Math.round(a))}},j=e=>"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:m(e.tax.value),value:e.tax.value},q=f((()=>j(r))),k=e=>d(e.days)>0?e.amount*d(e.days):e.amount,N=f((()=>{let e=0;return e+=u.value.amount*d(u.value.days),e+=c.value,e-=D.value.amount,e=e/100*q.value.value+e,e})),T=f((()=>{let e=0;return e+=N.value,e+=R.value,e})),E=e=>{let t=0;return t+=e.membershipCost,t+=e.initiation_fee,t-=e.prorated,t=t/100*e.objTax.value+t,t},R=f((()=>{let e=0;return l.familyMembership.forEach((t=>{let a=E({membershipCost:k(p(t.inputs,"recurrences_id")),initiation_fee:o(t.inputs,"initiation_fee"),objTax:j(p(t.inputs,"memberships_id")),prorated:P(p(t.inputs,"recurrences_id")).amount});e+=a})),e})),F=y(!1);return v((()=>te),((e,t)=>{F.value=!0})),(a,d)=>{const y=e,v=Ae,f=s;return h(),b(f,{titles:{title:t.title},"is-loading":n.value,buttons:["prev"],step:5,onChangeStep:i},{default:g((()=>[_("table",Se,[Ce,_("tbody",null,[_("tr",null,[_("td",null,[_("p",null,[_("b",null,C(I(o)(t.member,"name"))+" "+C(I(o)(t.member,"second_name"))+" "+C(I(o)(t.member,"last_name")),1)])]),0!=I(r).legnth?(h(),b("td",De,C(I(r).name),1)):A("",!0),0!=I(u).length?(h(),b("td",Pe,C(I(u).descriptions),1)):A("",!0),0!=I(u).length?(h(),b("td",je,[I(u).days>=30?(h(),b("span",qe,[S(C(I(D).days)+" days : ",1),ke,S(" - "+C(I(m)(I(D).amount)),1)])):(h(),b("span",Ne,"-"))])):A("",!0),_("td",null,C(I(m)(k(I(u)))),1),_("td",null,C(I(m)(I(c))),1),_("td",null,C(I(q).text),1),_("td",null,C(I(m)(I(N))),1)]),(h(!0),b(M,null,x(l.familyMembership,((e,t)=>(h(),b("tr",{key:`familiar${t}`},[_("td",null,C(I(o)(e.family,"name")),1),_("td",null,C(I(p)(e.inputs,"memberships_id").name),1),_("td",null,C(I(p)(e.inputs,"recurrences_id").descriptions),1),_("td",null,[I(p)(e.inputs,"recurrences_id").days>=30?(h(),b("span",Te,[S(C(P(I(p)(e.inputs,"recurrences_id")).days)+" days : ",1),Ee,S(" - "+C(I(m)(P(I(p)(e.inputs,"recurrences_id")).amount)),1)])):(h(),b("span",Re,"-"))]),_("td",null,C(I(m)(k(I(p)(e.inputs,"recurrences_id")))),1),_("td",null,C(I(m)(I(o)(e.inputs,"initiation_fee"))),1),_("td",null,C(j(I(p)(e.inputs,"memberships_id")).text),1),_("td",null,C(I(m)(E({membershipCost:k(I(p)(e.inputs,"recurrences_id")),initiation_fee:I(o)(e.inputs,"initiation_fee"),objTax:j(I(p)(e.inputs,"memberships_id")),prorated:P(I(p)(e.inputs,"recurrences_id")).amount}))),1)])))),128)),_("tr",null,[Fe,_("td",Ve,C(I(m)(I(T))),1)])])]),_("div",we,[_(y,{color:"success",onClick:d[1]||(d[1]=e=>i(6))},{default:g((()=>[Oe])),_:1}),_(y,{color:"warning"},{default:g((()=>[$e])),_:1})]),I(te)?(h(),b(v,{key:0,amount:I(T),id:I(te)},null,8,["amount","id"])):A("",!0)])),_:1},8,["titles","is-loading"])}}});k("data-v-915b2888");const Be={class:"content"},Je={class:"content-text"};N();var Ge=c({expose:[],props:{active:{type:Boolean,default:!1,required:!0},step:{type:Number,default:0,required:!0},text:{type:String,default:""}},setup(e){const t=e,a=f((()=>t.active?100:0));return(t,l)=>{const s=Z;return h(),b("div",Be,[_("div",{class:["circle",e.active?"active":""]},null,2),_(s,{class:"progressbar",value:I(a),size:"smaller"},null,8,["value"]),_("div",Je,[_("p",null,"STEP "+C(e.step),1),_("p",null,[_("b",null,C(e.text),1)])])])}}});Ge.__scopeId="data-v-915b2888";const ze={class:"columns is-multiline"},Ze={class:"column is-12"},We={class:"column is-9"},Ke={class:"column is-3"};var Ue=c({expose:[],setup(l){X.value="Add New members",T({title:"Members"}),D((()=>{L().then((e=>{r(pe,"memberships_id",e.data.memberships)})),(async()=>{const e=await E.get("discounts");return he.value=e.data.discounts,e})().then((e=>{r(pe,"discount",e.data.discounts)})),O().then((e=>{})),K().then((e=>{r(se,"city_id",U.value),r(ie,"city_id",U.value),r(se,"state_id",Y.value),r(ie,"state_id",Y.value),r(se,"country_id",H.value),r(ie,"country_id",H.value)})),J().then((e=>{r(pe,"staff_id",e.data)}))}));const s=y(1),i=y([{step:1,text:"Member Information",categories:["Adult","Minor","Prospect"]},{step:2,text:"Add Family Member",categories:["Adult","Prospect"]},{step:2,text:"Parent / Guardian",categories:["Minor"]},{step:3,text:"Contact Preference",categories:["Adult","Minor","Prospect"]},{step:4,text:"Select membership",categories:["Adult","Minor","Prospect"]},{step:5,text:"Add Payment Method",categories:["Adult","Minor","Prospect"]},{step:6,text:"Sing Contract & Waiver",categories:["Adult","Minor","Prospect"]}]),o=f((()=>se.value.filter((e=>e.categories.includes(ae.value.model))))),u=f((()=>i.value.find((e=>e.step==s.value&&e.categories.includes(ae.value.model))))),p=f((()=>i.value.filter((e=>e.categories.includes(ae.value.model))))),d=f((()=>n(ue.value))),m=e=>{console.log(e),ae.value.model,6==e?z():s.value=e},c=y(null),v=e=>{c.value=e},q=y(null),k=e=>{q.value=e},N=y([]),R=e=>{N.value=e.value},F=y([]),V=y([]),w=e=>{V.value=e.familyMembership.value,F.value=e.memberMembership.value};y(null),y(null);const B=y(null),G=e=>{B.value=e.total.value},z=()=>{const e=new FormData;((e,t)=>{for(var a in t)e.append(a,t[a])})(e,c.value);let t=q.value;for(var a=0;a<t.length;a++){var l=t[a];for(var s in l)e.append(`notifications[${a}][${s}]`,l[s])}let i=n(F.value);for(var a in i)if("diciplines"==a){let t=i[a];for(var r=0;r<t.length;++r)e.append("diciplines[]",t[r])}else e.append(a,i[a]);e.append("total",B.value);let o=n(ae.value,{array:!1});for(var a in o)e.append(a,o[a]);let u=n(oe.value);for(var a in u)e.append(a,u[a]);let p=n(Q.value);for(var a in p)e.append(a,p[a]);for(var a in V.value.forEach(((t,a)=>{let l=n(t.family);for(var s in l)"category"==s&&(l[s]?l[s]="Minor":l[s]="Adult"),e.append(`familiares[${a}][${s}]`,l[s]);let i=q.value;for(s=0;s<i.length;s++){var r=i[s];for(var o in r)e.append(`familiares[${a}][notifications][${s}][${o}]`,r[o])}let u=n(t.inputs);for(var s in u)if("diciplines"==s){let t=u[s];for(var p=0;p<t.length;++p)e.append(`familiares[${a}][diciplines][]`,t[p])}else e.append(`familiares[${a}][${s}]`,u[s]);e.append(`familiares[${a}][total]`,B.value);let d=n(oe.value);for(var s in d)e.append(`familiares[${a}][${s}]`,d[s]);let m=n(Q.value);for(var s in m)e.append(`familiares[${a}][${s}]`,m[s])})),d.value)e.append(a,d.value[a]);(async e=>await E.post("members",e))(e).then((e=>{console.log(e.data.member.id),te.value=e.data.member.id}))};return(l,n)=>{const i=e,r=t,d=a,c=ee,y=de,f=ve,D=fe,q=_e,T=Le,E=Ge,O=W;return h(),b(O,null,{default:g((()=>[_("div",ze,[_("div",Ze,[1==s.value?(h(),b(d,{key:0,class:"w-100",addons:""},{default:g((()=>[(h(!0),b(M,null,x(I(ae).values,((e,t)=>(h(),b(r,{key:`categoymember-${t}`},{default:g((()=>[_(i,{onClick:t=>I(ae).model=e,color:I(ae).model==e?"primary":void 0,rounded:""},{default:g((()=>[S(C(e),1)])),_:2},1032,["onClick","color"])])),_:2},1024)))),128))])),_:1})):A("",!0)]),_("div",We,[P(_(c,{type:"create",title:I(u).text,inputs:I(o),onChangeStep:m,onReturData:v},null,8,["title","inputs"]),[[j,1==s.value]]),P(_(y,{title:I(u).text,onChangeStep:m},null,8,["title"]),[[j,2==s.value&&"Minor"==I(ae).model]]),P(_(f,{type:"create",title:I(u).text,inputs:I(ie),onChangeStep:m,onReturData:R},null,8,["title","inputs"]),[[j,2==s.value]]),P(_(D,{type:"create",title:I(u).text,inputs:I(re),onChangeStep:m,onReturnData:k},null,8,["title","inputs"]),[[j,3==s.value]]),4==s.value?(h(),b(q,{key:0,type:"create",member:I(o),familiares:N.value,title:I(u).text,inputs:I(pe),memberships:I($),notes:I(oe),onChangeStep:m,onReturnData:w},null,8,["member","familiares","title","inputs","memberships","notes"])):A("",!0),5==s.value?(h(),b(T,{key:1,type:"create",title:I(u).text,member:I(o),familiares:N.value,inputs:I(pe),"member-membership":F.value,"family-membership":V.value,onChangeStep:m,onReturnData:G},null,8,["title","member","familiares","inputs","member-membership","family-membership"])):A("",!0)]),_("div",Ke,[(h(!0),b(M,null,x(I(p),((e,t)=>(h(),b(E,{key:t,active:e.step<=s.value,step:e.step,text:e.text},null,8,["active","step","text"])))),128))])])])),_:1})}}});export default Ue;
