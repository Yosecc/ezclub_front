import{_ as k}from"./inputsLayaut.vue_vue_type_style_index_0_lang.bc2ca8d6.js";import{_ as w}from"./formLayaut.vue_vue_type_style_index_0_lang.2638a67d.js";import{d as x,c as d,m as S,r as B,o as C,e as I,w as R,u as c,k as p,l as q,n as r,f as n,D as M,a7 as V,q as h,g as F}from"./index.4457215e.js";import{i as o,s as N,f as O,b as _,c as v,d as b,n as g}from"./Memberships.f99f3fde.js";import{g as U}from"./Diciplines.164662a5.js";const j={class:"columns is-multiline"},z={class:"column is-12"},G={class:"column is-6"},H={class:"column is-6"},J={class:"column is-12"},K={class:"column is-12"};var Y=x({expose:[],props:{type:{type:String,default:"create"},buttons:{type:Array,default:["save","back"]},isLoading:{type:Boolean,default:!1}},setup(m){const u=m,y=M(),$=V(),D=d(()=>u.type=="create"?{title:"Add a new membership",subtitle:"Add information for a new club membership"}:{title:"Edit membership",subtitle:"Edit information for a club membership"}),E=d(()=>o.find(s=>s.name=="locations_options")),f=d(()=>o.find(s=>s.name=="locations"));S(f.value,s=>{L(s)});const L=s=>{let l=[];s.model.length>0&&(s.model.forEach(e=>{let t=s.values.find(a=>a.id==e);u.type=="create"&&l.push({name:"locationsSaleOrAccess",value:t.id,placeholder:t.name,values:[{placeholder:"Access",name:"access",model:["access"]},{placeholder:"Sale",name:"sale",model:["sale"]}]})}),h(o,"locations_options",l)),U(f.value.model).then(e=>{h(o,"diciplines",e.data),F(o,"diciplines").values.push({id:0,name:"All"})})};d(()=>o.find(s=>s.name=="diciplines"));const i=B(!1),A=()=>{i.value=!0;let s={...p(o),...p(_),...p(v),...p(g),...p(b)},l=[];u.type=="create"&&s.locations.length>0&&(s.locations.forEach(e=>{let t=E.value.values.find(a=>a.value==e);l.push({id:e,access:t.values.find(a=>a.name=="access").model.length?1:0,sale:t.values.find(a=>a.name=="sale").model.length?1:0})}),s.locations=l,delete s.locations_options),q.value||(u.type=="create"?N(s).then(e=>{i.value=!1,$.back()}).catch(e=>{if(i.value=!1,typeof e.response.data!="string")for(var t in e.response.data)e.response.data[t].forEach(a=>{r.error(`${a}: ${t}`)});else r.error(`${e.response.data}`)}):O(y.query.id,s).then(e=>{r.success("Success"),i.value=!1}).catch(e=>{if(i.value=!1,typeof e.response.data!="string")for(var t in e.response.data)e.response.data[t].forEach(a=>{r.error(`${a}: ${t}`)});else r.error(`${e.response.data}`)}))};return(s,l)=>{const e=k,t=w;return C(),I(t,{buttons:u.buttons,titles:c(D),"is-loading":m.isLoading,"is-loader-active":i.value,onSaveData:A},{default:R(()=>[n("div",j,[n("div",z,[n(e,{"inputs-step":c(o)},null,8,["inputs-step"])]),n("div",G,[n(e,{"inputs-step":c(_)},null,8,["inputs-step"])]),n("div",H,[n(e,{"inputs-step":c(v)},null,8,["inputs-step"])]),n("div",J,[n(e,{"inputs-step":c(b)},null,8,["inputs-step"])]),n("div",K,[n(e,{"inputs-step":c(g)},null,8,["inputs-step"])])])]),_:1},8,["buttons","titles","is-loading","is-loader-active"])}}});export{Y as _};
