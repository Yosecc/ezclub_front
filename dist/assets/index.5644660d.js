import{_ as Ve}from"./V-Placeload.9684d098.js";import{_ as Be}from"./V-Avatar.vue_vue_type_script_setup_true_lang.b4183814.js";import{_ as K}from"./V-Card.vue_vue_type_script_setup_true_lang.f80f1beb.js";import{m as o,b as C,c as h,d as Ze,i as B,e as Xe,f as et,u as tt,h as st,j as nt,k as ot,l as ve,n as at,p as lt,o as rt,q as it,r as ct,t as ut,v as dt,w as mt,x as _t,y as pt,z as ht,A as ft,B as vt,C as bt,D as R,E as ne,F as yt,G as $t,H as Ye,I as gt,J as kt,K as Ae,L as Ee,M as be,N as Mt,O as Ct,P as xt,Q as wt,R as ze,S as Pe,T as Dt,U as Pt}from"./Members.3210ead2.js";import{d as L,m as ae,j as Z,c as j,r as g,u as t,o as s,e as n,w as a,y as d,D as je,f as e,C as le,t as u,F as W,G,P as Yt,H as re,I as Ie,A as Fe,S as It,i as D,al as St,Z as Le,ah as ye,g as x,h as T,ad as E,L as Se,n as Y,k as te,q as F,a7 as Vt,l as At,a8 as ge,a as ke,B as Et,s as oe}from"./index.4457215e.js";import{_ as q}from"./V-Button.vue_vue_type_script_setup_true_lang.72d178c7.js";import{_ as Me}from"./V-Loader.vue_vue_type_script_setup_true_lang.f82321d3.js";import{_ as jt}from"./V-Control.92200beb.js";import{_ as Tt}from"./V-Field.vue_vue_type_script_setup_true_lang.33752939.js";import{_ as fe}from"./V-Modal.vue_vue_type_script_setup_true_lang.f0368080.js";import{_ as Ce}from"./V-Tag.vue_vue_type_script_setup_true_lang.0d8ff65f.js";import{_ as se}from"./inputsLayaut.vue_vue_type_style_index_0_lang.bc2ca8d6.js";import{_ as J}from"./V-CardAdvanced.vue_vue_type_script_setup_true_lang.66aff21d.js";import{_ as zt,a as Lt,b as Bt}from"./Presupuesto.vue_vue_type_script_setup_true_lang.4c0b2df3.js";import{_ as Ne}from"./MemberCards.vue_vue_type_script_setup_true_lang.ec94bd88.js";import{_ as Ft}from"./V-AvatarStack.vue_vue_type_script_setup_true_lang.1904e987.js";import{a as He,h as he}from"./Memberships.f99f3fde.js";import{_ as Nt}from"./signComponent.vue_vue_type_script_setup_true_lang.4373d048.js";import{_ as Te}from"./pdf_icon.c303a5d8.js";import{_ as Ht}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang.dc4f832c.js";import{_ as Rt}from"./V-Block.vue_vue_type_script_setup_true_lang.00657afe.js";import{_ as qt}from"./V-Tabs.vue_vue_type_script_setup_true_lang.4e8d34aa.js";import{_ as Wt}from"./SidebarLayout.vue_vue_type_script_setup_true_lang.a7af6f4a.js";import{p as Ot}from"./sidebarLayoutState.d2b676a9.js";import{g as Ut}from"./Discounts.a9c8271e.js";import{g as Gt}from"./Recurrences.4c691414.js";import{g as Kt}from"./Staffs.ad83113a.js";import{g as Jt}from"./Diciplines.164662a5.js";import{e as Qt}from"./config.f468f56a.js";import{a as Zt,e as Xt}from"./Companies.4f645ec0.js";import"./V-SwitchSegment.vue_vue_type_script_setup_true_lang.96e64ac9.js";import"./V-Checkbox.vue_vue_type_script_setup_true_lang.70a8d51f.js";import"./V-Dropdown.c58eb584.js";import"./V-Icon.vue_vue_type_script_setup_true_lang.a0e27302.js";import"./useDropdown.d2881c63.js";import"./ActivityPanel.vue_vue_type_style_index_0_lang.8acd0baa.js";import"./activePanelState.d3359fb3.js";import"./fastpizza.70124fcb.js";import"./TaskPanel.vue_vue_type_style_index_0_lang.50493a6a.js";import"./video.d6dbc99d.js";import"./SearchPanel.vue_vue_type_style_index_0_lang.63cec0b9.js";import"./darkModeState.1f6503fc.js";import"./AnimatedLogo.d670690a.js";import"./V-IconBox.vue_vue_type_script_setup_true_lang.772b752f.js";import"./UserPopoverContent.vue_vue_type_script_setup_true_lang.5fb53f85.js";import"./userPopovers.f4b9fc60.js";const es={class:"d-flex justify-content-center align-items-center flex-column mb-4"},ts={class:"mt-5 text-center"},ss={class:"title is-5 is-narrow"},ns={class:"w-100 mt-5"},os=e("i",{class:"iconify",style:{"font-size":"20px",color:"white"},"data-icon":"feather:arrow-right","aria-hidden":"true"},null,-1);var as=L({expose:[],props:{category:{type:String,default:"Adult"}},emits:["changeMenu"],setup(I,{emit:m}){const l=I,c=je();ae(()=>c.hash,r=>{i.value=b.findIndex(y=>y.component==c.hash.slice(1))}),Z(()=>{c.hash!=""&&(i.value=b.findIndex(r=>r.component==c.hash.slice(1)))});const b=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Family Members",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"},{name:"Invoices",component:"memberInvoices"},{name:"Credit",component:"memberCredit"}],_=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Parent / Guardian",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"},{name:"Credit",component:"memberCredit"},{name:"Invoices",component:"memberInvoices"}],p=[{name:"Personal Information",component:"personalInformation"},{name:"Membership/Contract",component:"memberMembership"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Purchases",component:"memberPurchases"},{name:"Invoices",component:"memberInvoices"},{name:"Credit",component:"memberCredit"}],v=j(()=>l.category=="Adult"?b:l.category=="Minor"?_:p),i=g(0),M=g(null),S=j(()=>v.value[i.value]!=null?v.value[i.value].component:M.value),V=r=>{i.value=r,m("changeMenu",S)};return(r,y)=>{const $=Be,A=K;return t(o)?(s(),n(A,{key:0,class:"cardprofile"},{default:a(()=>[e("div",es,[e($,{picture:t(o).photo?`${t(le)}storage/${t(o).photo}`:"",size:"xl"},null,8,["picture"]),e("div",ts,[e("h2",ss,u(t(o).name)+" "+u(t(o).second_name)+" "+u(t(o).last_name),1)])]),e("div",ns,[e("ul",null,[(s(!0),n(W,null,G(t(v),(O,f)=>(s(),n("li",{key:`item-${f}`},[e(A,{class:[`\r
              mb-3\r
              item_menu\r
              d-flex\r
              justify-content-between\r
              align-items-center\r
            `,i.value==f?"active":""],color:i.value==f?"warning":void 0,elevated:i.value==f,onClick:z=>V(f)},{default:a(()=>[e("p",null,u(O.name),1),os]),_:2},1032,["class","color","elevated","onClick"])]))),128))])])]),_:1})):d("",!0)}}});const ls=e("div",{id:"payment-element"},null,-1),rs=D(" Pay now "),is=e("div",{id:"payment-message",class:"hidden"},null,-1);var cs=L({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},setup(I){const m=I,l=Stripe(Yt.value);ae(()=>m.id,V=>{console.log("cambio"),c.value=!0,M()});const c=g(!0);g({id:m.id,amount:m.amount});const b=g(),_=j(()=>m.url!="stripe"?{payment_type_id:3,amount:m.amount}:{id:m.id,member_mermship_id:m.member_membership,amount:m.amount,payment_type_id:1}),p=g(null),v=g(null),i=g(!1),M=async()=>{let V=await Fe.post(m.url,_.value).then(r=>{p.value=r.data.clientSecret,b.value=l.elements({clientSecret:p.value}),v.value=b.value.create("payment"),v.value.mount("#payment-element")}).catch(r=>{});return c.value=!1,V},S=async V=>{V.preventDefault(),i.value=!0,await l.confirmPayment({elements:b.value,confirmParams:{return_url:`${St.value}members/process?payment_type=3&id=`+m.id+`&membership=${m.member_membership}`}}),i.value=!1};return Z(()=>{M()}),(V,r)=>{const y=Ve,$=q,A=Me,O=K;return s(),n(W,null,[c.value?(s(),n(y,{key:0,height:"500px"})):d("",!0),re(e(O,{class:"mt-6"},{default:a(()=>[e("form",{onSubmit:It(S,["prevent"]),id:"payment-form"},[ls,e(A,{size:"small",active:i.value},{default:a(()=>[e($,{id:"submit",class:"mt-4",color:"success"},{default:a(()=>[rs]),_:1})]),_:1},8,["active"]),is],40,["onSubmit"])]),_:1},512),[[Ie,!c.value]])],64)}}});const us={class:"table is-hoverable is-striped is-fullwidth"},ds=e("th",{scope:"col"},"Members",-1),ms=e("th",{scope:"col"},"Membership Name",-1),_s=e("th",{scope:"col"},"Recurrence",-1),ps=e("th",{scope:"col"},"Prorated",-1),hs=e("th",{scope:"col"},"Membership Cost",-1),fs=e("th",{scope:"col"},"Initiation Fee",-1),vs=e("th",{scope:"col"},"Discount",-1),bs=e("th",{scope:"col"},"Taxes",-1),ys={key:0,scope:"col"},$s=e("th",{scope:"col"},"Sub Total",-1),gs={key:0},ks={key:0},Ms={key:1},Cs={key:2},xs={key:0},ws=e("br",null,null,-1),Ds={key:1},Ps={key:0},Ys={key:1},Is={key:0},Ss={key:0},Vs={key:1},As={key:1},Es={key:3},js={class:"is-end"},Ts={class:"d-flex justify-content-between"},zs=D(" Card Payment "),Ls=D(" Cash Payment "),Bs={class:"d-flex mb-4 justify-content-between"},Fs={class:"title is-5"},Ns=D(" Total: "),Hs={class:"title is-5"},Rs=D(" Cash Total: "),qs={class:`\r
            d-flex\r
            justify-content-center\r
            align-items-center\r
            flex-column\r
            mb-4\r
          `},Ws=e("p",{class:"title is-5 mb-4"},"Change Back:",-1),Os={class:"title is-3 mb-0"},Us={class:"d-flex justify-content-center flex-wrap mb-4"},Gs=e("div",{class:"w-100"},null,-1),Ks={class:"d-flex justify-content-center"},Js=D("Reset"),Qs=D("Confirm");var Zs=L({expose:[],setup(I){g(!1);const m=g(!1);Z(()=>{console.log("se monto el payment")});const l=j(()=>{let f=Le(C,"memberships_id");return f!=null?f:[]}),c=j(()=>{let f=Le(C,"recurrences_id");return f!=null?f:[]}),b=j(()=>{let f=ye(C,"initiation_fee");return f!=null?f:[]}),_=j(()=>{let f=x(C,"discount");return f!=null?f:[]}),p=j(()=>{let f=parseFloat(T().format("DD")),z=0,N=0;return c.value.days>=30&&(N=f-c.value.payday,z=c.value.amount/c.value.days*N),{days:N,amount:Math.abs(Math.round(z))}}),v=f=>{if(ye(C,"memberships_id")!="")return f.value?f=f.value:f=f,f.tax.type=="percentaje"?{text:`${f.tax.value}%`,value:f.tax.value,type:"procentaje"}:{text:E(f.tax.value),value:f.tax.value}},i=j(()=>v(l)),M=f=>f.amount,S=g(null),V=j(()=>{let f=0;return f+=c.value.amount,ye(C,"is_initiation_fee").length||(f+=b.value),f-=p.value.amount,_.value.data&&(_.value.data.type=="dolar"?f-=_.value.data.value:_.value.data.type=="percentaje"&&(f-=f/100*_.value.data.value)),f+=f/100*i.value.value,o.value.penalty&&(S.value=l.value.penalty,f+=S.value),o.value.leo_vet_fr&&(f-=f/100*l.value.descuento_vet),f}),r=j(()=>{let f=0;return f+=V.value,f}),y=g(!1),$=g(0),A=j(()=>{const f=parseFloat($.value)-parseFloat(r.value);return f>0?f:0});g(1);const O=async()=>{await Ze(h.value.id,{total:r.value,payment_type_id:1,cash:$.value,cash_back:A.value}).then(f=>{Y.success("Payment Success"),window.location.reload()}).catch(f=>{})};return(f,z)=>{const N=q,ie=K,ce=cs,ue=jt,de=Tt,me=fe;return s(),n("div",null,[e(ie,{class:""},{default:a(()=>[e("table",us,[e("thead",null,[e("tr",null,[ds,ms,_s,ps,hs,fs,vs,bs,S.value?(s(),n("th",ys,"Penalty")):d("",!0),$s])]),t(l).length!=0?(s(),n("tbody",gs,[e("tr",null,[e("td",null,[e("p",null,[e("b",null,u(t(o).name)+" "+u(t(o).second_name)+" "+u(t(o).last_name),1)])]),t(l).legnth!=0?(s(),n("td",ks,u(t(l).name),1)):d("",!0),t(c).length!=0?(s(),n("td",Ms,u(t(c).descriptions),1)):d("",!0),t(c).length!=0?(s(),n("td",Cs,[t(c).days>=30?(s(),n("span",xs,[D(u(t(p).days)+" days : ",1),ws,D(" - "+u(t(E)(t(p).amount)),1)])):(s(),n("span",Ds,"-"))])):d("",!0),e("td",null,u(t(E)(M(t(c)))),1),e("td",null,[t(ye)(t(C),"is_initiation_fee").length?(s(),n("span",Ys,u(t(E)(0)),1)):(s(),n("span",Ps,u(t(E)(t(b))),1))]),e("td",null,[t(_).data!=null?(s(),n("span",Is,[t(_).data.type=="dolar"?(s(),n("span",Ss," - "+u(t(E)(t(_).data.value)),1)):d("",!0),t(_).data.type=="percentaje"?(s(),n("span",Vs,u(t(_).data.value)+"%",1)):d("",!0)])):(s(),n("span",As,"-"))]),e("td",null,u(t(i).text),1),S.value?(s(),n("td",Es,u(t(E)(S.value)),1)):d("",!0),e("td",null,u(t(E)(t(V))),1)]),e("tr",null,[e("td",{style:{"text-align":"right"},colspan:S.value?"9":"8"}," Total ",8,["colspan"]),e("td",js,u(t(E)(t(r))),1)])])):d("",!0)]),e("div",Ts,[e(N,{color:"success",disabled:t(l).length==0||isNaN(t(r)),onClick:z[1]||(z[1]=U=>m.value=!0)},{default:a(()=>[zs]),_:1},8,["disabled"]),e(N,{disabled:t(l).length==0||isNaN(t(r)),color:"warning",onClick:z[2]||(z[2]=U=>y.value=!0)},{default:a(()=>[Ls]),_:1},8,["disabled"])])]),_:1}),m.value?(s(),n(ce,{key:0,class:"",url:`new_payment/${t(h).id}`,amount:t(r),id:t(o).id,member_membership:t(h).id},null,8,["url","amount","id","member_membership"])):d("",!0),e(me,{open:y.value,actions:"center",onClose:z[6]||(z[6]=U=>y.value=!1)},{content:a(()=>[e("div",Bs,[e("p",Fs,[Ns,e("b",null,u(t(E)(t(r))),1)]),e("p",Hs,[Rs,e("b",null,u(t(E)($.value)),1)])]),e("div",qs,[Ws,e("p",Os,[e("b",null,u(t(E)(t(A))),1)])]),e("div",Us,[e(N,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:z[3]||(z[3]=U=>$.value=t(r))},{default:a(()=>[D(" Full Payment "+u(t(E)(t(r))),1)]),_:1}),Gs,(s(),n(W,null,G([5,10,20,50,100],(U,_e)=>e(N,{key:`calculato-${_e}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:k=>$.value+=U},{default:a(()=>[D(" $"+u(U),1)]),_:2},1032,["onClick"])),64))]),e("div",Ks,[e(de,null,{default:a(()=>[e(ue,null,{default:a(()=>[re(e("input",{"onUpdate:modelValue":z[4]||(z[4]=U=>$.value=U),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[Se,$.value]])]),_:1})]),_:1})])]),action:a(()=>[e(N,{onClick:z[5]||(z[5]=U=>$.value=0),class:"d-flex justify-content-center",raised:""},{default:a(()=>[Js]),_:1}),e(N,{color:"success",onClick:O,disabled:t(r)>$.value,class:"d-flex justify-content-center",raised:""},{default:a(()=>[Qs]),_:1},8,["disabled"])]),_:1},8,["open"])])}}});const Xs=e("div",null,[e("h1",{class:"title is-4 mb-0"},"Personal Information"),e("p",null,"Edit member's personal information")],-1),en=D(" Save Changes "),tn=D(" Convert to Members ");var sn=L({expose:[],props:{category:{type:String,default:"Adult"}},setup(I){const m=I;j(()=>m.category=="Prospect");const l=g(!1),c=()=>{l.value=!0;let _=te(B.value),p=new FormData;for(var v in _)p.append(v,_[v]);Xe(p).then(i=>{Y.success("Edit Success"),l.value=!1}).catch(i=>{l.value=!1})},b=j(()=>B.value.filter(_=>_.categories.includes(m.category)));return(_,p)=>{const v=q,i=Me,M=se,S=J;return s(),n(S,null,{"header-left":a(()=>[Xs]),"header-right":a(()=>[e(i,{size:"small",active:l.value},{default:a(()=>[e(v,{onClick:c,color:"primary"},{default:a(()=>[en]),_:1}),m.category=="Prospect"?(s(),n(v,{key:0,color:"info",class:"ml-3"},{default:a(()=>[tn]),_:1})):d("",!0)]),_:1},8,["active"])]),content:a(()=>[m.category=="Minor"?(s(),n(M,{key:0,"inputs-step":t(b)},null,8,["inputs-step"])):(s(),n(M,{key:1,"inputs-step":t(B)},null,8,["inputs-step"]))]),_:1})}}});const nn=D("Confirm");var on=L({expose:[],props:{open:Boolean},emits:["closeModal"],setup(I,{emit:m}){const l=()=>{m("closeModal")},c=async()=>{const p=te(he);console.log(p);const v=o.value.membership_members.id;try{await tt(v,p),l(),Y.success("Success")}catch{Y.error("Error")}},b=_=>{const p=_.filter(v=>v.name==="memberships_id")[0].model;et(p,!0).then(v=>{x(he,"recurrences_id").values=v.data.filter(i=>i.id!==o.value.membership_members.recurrences_id)})};return Z(async()=>{const{data:_}=await He();F(he,"memberships_id",_.memberships),x(he,"memberships_id").change=b}),(_,p)=>{const v=se,i=q,M=fe;return s(),n(M,{open:I.open,size:"small",actions:"center",onClose:l},{content:a(()=>[e(v,{"inputs-step":t(he)},null,8,["inputs-step"])]),action:a(()=>[e(i,{color:"primary",onClick:c,raised:""},{default:a(()=>[nn]),_:1})]),_:1},8,["open"])}}});const an=e("p",null,[e("b",null,"Upgrade Subscription")],-1);var ln=L({expose:[],props:{isLoaderActive:Boolean},setup(I){const m=g(!1),l=()=>{m.value=!m.value};return(c,b)=>{const _=K,p=on,v=Me;return s(),n(v,{class:"h-100 w-100",size:"small",active:I.isLoaderActive},{default:a(()=>[e(_,{color:void 0,outlined:"",onClick:l,class:`\r
        mr-4\r
        btn-card\r
        text-center\r
        px-2\r
        h-100\r
        d-flex\r
        align-items-center\r
        justify-content-center\r
      `,style:{"font-size":"12px"}},{default:a(()=>[an]),_:1}),e(p,{open:m.value,onCloseModal:b[1]||(b[1]=i=>l())},null,8,["open"])]),_:1},8,["active"])}}});const rn=e("div",null,[e("h1",{class:"title is-4 mb-0"},"Membership / Contract"),e("p",null,"Edit member's membership and contract information")],-1),cn={class:"columns is-multiline justify-content-center"},un={key:0,class:"column is-12"},dn=e("p",null,[e("small",null,"Membership")],-1),mn={class:"title is-4 mb-0"},_n={class:"text-right"},pn=e("b",null,"Payment Method:",-1),hn={key:0},fn={class:"title is-4"},vn=e("br",null,null,-1),bn={key:0,class:"mr-1 mb-1"},yn={key:0,class:"mb-4 column is-12"},$n=D("Save Changes"),gn=D(" New Membership "),kn={key:2,class:"column is-12 mb-6 mt-4"},Mn={key:1},Cn={class:"d-flex justify-content-end w-100"},xn=D("Cancel"),wn={key:1,class:"column is-4"},Dn={style:{position:"sticky",top:"10px"},class:"columns is-multiline"},Pn={key:0,class:"column is-6"},Yn=e("p",null,[e("b",null,"HOLD Membership")],-1),In={key:0},Sn=e("p",null," Hold end date last day of the month prior to the end of the hold ",-1),Vn=D("Confirm"),An=e("p",null," Do you want to create an invoice with the prorated amount? ",-1),En={key:0,class:"table w-100"},jn=e("td",null,"Tax",-1),Tn=e("td",null,"Total",-1),zn=D("Confirm"),Ln={key:1,class:"column is-6"},Bn=e("p",null,[e("b",null,"Pause Payment")],-1),Fn={key:0},Nn=D("Confirm"),Hn={key:2,class:"column is-6"},Rn=e("p",null,[e("b",null,"Cancel Membership")],-1),qn={key:3,class:"column is-6"},Wn=e("p",null,[e("b",null,"Payment Now")],-1),On={key:4,class:"column is-6"},Un=e("p",null,[e("b",null,"Pay Late Fee")],-1),Gn={key:5,class:"column is-6"},Kn=e("p",null,[e("b",null,"Sync Subscription")],-1),Jn={class:"column is-6"},Qn=e("p",null,[e("b",null,"Send Email: Contract and Waiver")],-1),Zn={class:"column is-6"},Xn=e("p",null,[e("b",null,"Subscribe Debit Automatic")],-1),eo={class:"column is-6 mb-6"},to={class:"column is-12"},so=e("h1",{class:"title is-6"},"Active Waiver Information",-1),no={class:"text-center"},oo=e("img",{src:Te,class:"mr-3",width:"40",alt:""},null,-1),ao={class:"column is-12"},lo=e("h1",{class:"title is-6"},"Active Contract Information",-1),ro={class:"text-center"},io=e("img",{src:Te,class:"mr-3",width:"40",alt:""},null,-1),co={key:2,class:"columns is-multiline column mt-4 is-12"},uo={class:"column is-12"};var mo=L({expose:[],props:{},emits:["reload"],setup(I,{emit:m}){Z(()=>{st(C)}),g(null),g(null),g(null),g(null),g(null);const l=g(!1);g(null);const c=g(!1),b=g(!1),_=g({total:null}),p=g([{typeInput:"switchEventChangeInput",name:"prorrateo",values:["NO","Yes"],model:!0,required:!1,class:"is-12",isLabel:!0}]);Vt();const v=je(),i=j(()=>{if(v.fullPath.includes("/members/profile")){let k=C.findIndex(P=>P.name=="prorrateo"),w=C.findIndex(P=>P.name=="schedules");k==-1&&(C.unshift(nt.value[0]),x(C,"recurrence").class="is-4"),w==-1&&(C.push(ot.value[0]),x(C,"prorrateo").change=function(P){this.model?x(P,"schedules").disabled=!0:x(P,"schedules").disabled=!1})}if(o.value&&h.value&&h.value.status==1){let k=["locations_id","diciplines","staff_id","discount"];return C.filter(w=>k.includes(w.name))}return C}),M=()=>{x(C,"amount").required=!1,x(C,"initiation_fee").required=!1,x(C,"diciplines").required=!1;const k=te(C);rt(k).then(w=>{Y.success("Success"),l.value=!1,x(C,"amount").required=!0,x(C,"initiation_fee").required=!0,x(C,"diciplines").required=!0})},S=async()=>{l.value=!0,await it(i.value,B.value),l.value=!1},V=()=>{!confirm("Are you sure you want to perform this action?")||(l.value=!0,ct().then(k=>{Y.success("Memberships Cancel"),window.location.reload(),l.value=!1}))},r=k=>{ut(k,h.value.id).then(w=>{if(w.data.status)Y.success("Sign Success");else{Y.error(w.data.mensaje);for(var P in w.data.errores)w.data.errores[P].forEach(ee=>{Y.error(`${P} : ${ee}`)})}}).catch(w=>{})},y=k=>{},$=g(!1),A=g(null),O=()=>{!confirm("Are you sure you want to perform this action?")||(l.value=!0,dt(h.value.id,A.value).then(k=>{Y.success("Success Pause"),l.value=!1,m("reload")}).catch(k=>{l.value=!1;for(var w in k.response.data)k.response.data.errores[w].forEach(P=>{Y.error(`${w}: ${P}`)})}))},f=()=>{!confirm("Are you sure you want to perform this action?")||(l.value=!0,mt(h.value.id,A.value,x(p.value,"prorrateo").model).then(k=>{Y.success("Success Hold"),l.value=!1,A.value=null,m("reload")}).catch(k=>{l.value=!1;for(var w in k.response.data)k.response.data[w].forEach(P=>{Y.error(`${w}: ${P}`)})}))},z=g(!1),N=(k,w=3,P={})=>{if(!confirm("Do you want to try the payment?"))return;let ee={payment_type_id:w,payment_method:k,total:o.value.subscription.total_invoice};w==1&&(ee.changeBack=P.changeBack,ee.cash=P.cash),l.value=!0,_t(h.value.id,ee).then(X=>{Y.success("success"),window.location.reload()}).catch(X=>{if(typeof X.response.data=="object")for(var pe in X.response.data)typeof X.response.data[pe]=="array"||Y.error(X.response.data[pe]);else Y.error(X.response.data)}).finally(()=>{l.value=!1})},ie=k=>{N(null,1,k)},ce=()=>{!confirm("Are you sure you want to perform this action?")||(l.value=!0,pt().then(k=>{l.value=!1,Y.success("Success"),m("reload")}).catch(k=>{l.value=!1}))},ue=()=>{l.value=!0,ht().then(k=>{l.value=!1,Y.success("Success"),m("reload")}).catch(k=>{Y.error(k.response.data),l.value=!1})},de=()=>{if(h.value.hold_date_finish==null&&h.value.date_finish_pause==null)c.value=!0;else{if(h.value.date_finish_pause!=null){Y.error("This membership is on pause. Activation is required to continue");return}ft(h.value.id).then(k=>{console.log(k.data),_.value=k.data,b.value=!0}).catch(k=>{console.log(k.response.data)})}},me=()=>{if(o.value.subscription.pause_collection==null)$.value=!0;else{if(h.value.hold_date_finish!=null){Y.error("This membership is on pause.");return}O()}},U=()=>{l.value=!0,vt(h.value.id).then(k=>{l.value=!1,Y.success("Send Email")})},_e=()=>{l.value=!0,bt(o.value.id).then(k=>{l.value=!1,Y.success("Success"),m("reload")}).catch(k=>{l.value=!1,m("reload")})};return(k,w)=>{const P=K,ee=zt,X=Ne,pe=se,qe=Ft,xe=q,Q=Me,We=Ve,Oe=Lt,Ue=Bt,we=q,De=fe,Ge=ln,Ke=Nt,Je=J;return s(),n(Je,null,{"header-left":a(()=>[rn]),content:a(()=>[e("div",cn,[t(o)&&t(h)&&t(h).status==1?(s(),n("div",un,[e(P,{class:"d-flex justify-content-between",color:t(h).hold_date_finish!=null?"warning":"info",style:t(o).subscription.pause_collection==null?{}:{backgroundColor:"#404046 !important"}},{default:a(()=>[e("span",null,[dn,e("p",mn,u(t(h).membership.name),1),e("p",null,u(t(h).recurrence.descriptions),1)]),e("span",_n,[e("p",null,[e("small",null,[pn,D(" "+u(t(h).payment_type.name),1)])]),t(h)?(s(),n("p",hn,[e("small",null,u(t(h).recurrence.is_recurrence?"Recurrence":"no recurrence"),1)])):d("",!0),e("p",fn,[D(u(t(E)(t(o).subscription.total_invoice/100)),1),vn,t(o).subscription&&t(o).subscription.subscription&&!t(o).subscription.subscription.upcoming_total?(s(),n("small",bn,"No upcoming bill")):d("",!0)])])]),_:1},8,["color","style"])])):d("",!0),e("div",{class:["column is-8",t(o).membership_members?"is-8":"is-12"]},[z.value?(s(),n("div",yn,[t(o).user?(s(),n(X,{key:0,onOnMethodPayment:N,memberid:t(o).id,method_default:t(o).user.pm_last_four,"show-new-card":!1,class:"mb-4",ancho:"is-6"},{default:a(()=>[e(ee,{total:t(o).subscription.total_invoice,margin:"mx-0",class:"is-4",onOnPaymentCash:ie},null,8,["total"])]),_:1},8,["memberid","method_default"])):d("",!0)])):d("",!0),t(ve).length?d("",!0):(s(),n(P,{key:1,style:{position:"sticky",top:"10px"},class:"mb-4 column is-12"},{default:a(()=>[e(pe,{"inputs-step":t(i)},null,8,["inputs-step"]),t(o)&&t(o).trainers?(s(),n(qe,{key:0,avatars:t(at)(t(o).trainers),size:"small"},null,8,["avatars"])):d("",!0),t(o)&&t(h)&&t(h).status==1?(s(),n(Q,{key:1,size:"small",active:l.value},{default:a(()=>[e(xe,{class:"mt-5",onClick:M,color:"primary"},{default:a(()=>[$n]),_:1})]),_:1},8,["active"])):d("",!0),t(lt)?d("",!0):(s(),n(Q,{key:2,size:"small",active:l.value},{default:a(()=>[!t(h)||t(h).status==2?(s(),n(xe,{key:0,class:"mt-5",onClick:S,color:"primary"},{default:a(()=>[gn]),_:1})):d("",!0)]),_:1},8,["active"]))]),_:1})),!t(h)||t(h).status==2?(s(),n("div",kn,[l.value?(s(),n(We,{key:0,height:"300px",class:"mb-4"})):d("",!0),t(ve).length?(s(),n("div",Mn,[(s(!0),n(W,null,G(t(ve),(H,Qe)=>(s(),n(Ue,{key:`presupuesto-${Qe}`,class:"mb-4",presupuesto:H},{default:a(()=>[e("div",Cn,[e(Oe,{member:H.member,member_id:t(o).id,membresia:H.membresia,contact:k.dataContact,presupuesto:H,presupuesto_id:H.presupuesto_id,"categories-members":k.categoriesMembers,"notas-input":k.notasInput,total:H.totales.upfront.amount_total,onPaymentAction:y,type:"edit"},null,8,["member","member_id","membresia","contact","presupuesto","presupuesto_id","categories-members","notas-input","total"])])]),_:2},1032,["presupuesto"]))),128)),e(xe,{onClick:w[1]||(w[1]=H=>ve.value=[]),color:"danger"},{default:a(()=>[xn]),_:1})])):d("",!0)])):d("",!0)],2),t(o).membership_members?(s(),n("div",wn,[e("div",Dn,[t(o)&&t(h)&&t(h).status==1?(s(),n("div",Pn,[t(o).membership_members&&t(o).membership_members.is_recurrence?(s(),n(Q,{key:0,size:"small",class:"h-100",active:l.value},{default:a(()=>[t(h)&&t(o).subscription?(s(),n(P,{key:0,color:"warning",outlined:t(h).hold_date_finish==null,onClick:de,class:`\r
                    mr-4\r
                    btn-card\r
                    text-center\r
                    h-100\r
                    px-2\r
                    d-flex\r
                    align-items-center\r
                    justify-content-center\r
                  `,style:{"font-size":"12px"}},{default:a(()=>[Yn,e("p",null,[t(h).hold_date_finish!=null?(s(),n("span",In,"Active until: "+u(t(T)(t(h).hold_date_finish).format("MM/DD/YYYY")),1)):d("",!0)])]),_:1},8,["outlined"])):d("",!0)]),_:1},8,["active"])):d("",!0),e(De,{open:c.value,actions:"center",onClose:w[3]||(w[3]=H=>c.value=!1)},{content:a(()=>[Sn,re(e("input",{type:"date","onUpdate:modelValue":w[2]||(w[2]=H=>A.value=H),class:"input mt-4"},null,512),[[Se,A.value]])]),action:a(()=>[e(we,{onClick:f,color:"primary",raised:""},{default:a(()=>[Vn]),_:1})]),_:1},8,["open"]),e(De,{open:b.value,actions:"center",onClose:w[4]||(w[4]=H=>b.value=!1)},{content:a(()=>[An,e(pe,{"inputs-step":p.value},null,8,["inputs-step"]),_.value.total?(s(),n("table",En,[e("tr",null,[e("td",null," Subtotal ("+u(_.value.dias_restantes)+" days) ",1),e("td",null,u(t(E)(_.value.subtotal)),1)]),e("tr",null,[jn,e("td",null,u(t(E)(_.value.tax)),1)]),e("tr",null,[Tn,e("td",null,u(t(E)(_.value.total)),1)])])):d("",!0)]),action:a(()=>[e(we,{onClick:f,color:"primary",raised:""},{default:a(()=>[zn]),_:1})]),_:1},8,["open"])])):d("",!0),t(o)&&t(h)&&t(h).status==1?(s(),n("div",Ln,[t(o).membership_members&&t(o).membership_members.is_recurrence?(s(),n(Q,{key:0,size:"small",class:"h-100",active:l.value},{default:a(()=>[t(h)&&t(o).subscription?(s(),n(P,{key:0,color:"undefined",style:[{"font-size":"12px"},t(o).subscription.pause_collection==null?{}:{backgroundColor:"#404046"}],outlined:t(o).subscription.pause_collection==null,onClick:me,class:`\r
                    mr-4\r
                    btn-card\r
                    text-center\r
                    px-2\r
                    h-100\r
                    d-flex\r
                    align-items-center\r
                    justify-content-center\r
                  `},{default:a(()=>[Bn,e("p",null,[t(o).subscription.pause_collection!=null?(s(),n("span",Fn,"Active until: "+u(t(T)(t(o).subscription.pause_collection).format("MM-DD-YYYY")),1)):d("",!0)])]),_:1},8,["style","outlined"])):d("",!0)]),_:1},8,["active"])):d("",!0),e(De,{open:$.value,actions:"center",onClose:w[6]||(w[6]=H=>$.value=!1)},{content:a(()=>[re(e("input",{type:"date","onUpdate:modelValue":w[5]||(w[5]=H=>A.value=H),class:"input"},null,512),[[Se,A.value]])]),action:a(()=>[e(we,{onClick:O,color:"primary",raised:""},{default:a(()=>[Nn]),_:1})]),_:1},8,["open"])])):d("",!0),t(o)&&t(h)&&t(h).status==1?(s(),n("div",Hn,[e(Q,{class:"h-100",size:"small",active:l.value},{default:a(()=>[t(h)?(s(),n(P,{key:0,color:"danger",outlined:"",onClick:V,class:`\r
                    mr-4\r
                    btn-card\r
                    text-center\r
                    px-2\r
                    h-100\r
                    d-flex\r
                    align-items-center\r
                    justify-content-center\r
                  `,style:{"font-size":"12px"}},{default:a(()=>[Rn]),_:1})):d("",!0)]),_:1},8,["active"])])):d("",!0),t(o)&&t(h)&&t(h).status==1?(s(),n("div",qn,[e(Q,{size:"small",class:"h-100",active:l.value},{default:a(()=>[t(h)?(s(),n(P,{key:0,color:"success",outlined:"",onClick:w[7]||(w[7]=H=>z.value=!z.value),class:`\r
                    mr-4\r
                    btn-card\r
                    text-center\r
                    px-2\r
                    h-100\r
                    d-flex\r
                    align-items-center\r
                    justify-content-center\r
                  `,style:{"font-size":"12px"}},{default:a(()=>[Wn]),_:1})):d("",!0)]),_:1},8,["active"])])):d("",!0),t(o)&&t(h)?(s(),n("div",On,[t(o).membership_members&&t(o).membership_members.is_recurrence?(s(),n(Q,{key:0,size:"small",active:l.value,class:"h-100"},{default:a(()=>[t(h)?(s(),n(P,{key:0,color:"secondary",outlined:"",onClick:ce,class:`\r
                    mr-4\r
                    btn-card\r
                    text-center\r
                    px-2\r
                    h-100\r
                    d-flex\r
                    align-items-center\r
                    justify-content-center\r
                  `,style:{"font-size":"12px"}},{default:a(()=>[Un]),_:1})):d("",!0)]),_:1},8,["active"])):d("",!0)])):d("",!0),t(o)&&t(h)?(s(),n("div",Gn,[t(o).membership_members&&t(o).membership_members.is_recurrence?(s(),n(Q,{key:0,size:"small",active:l.value,class:"h-100"},{default:a(()=>[t(h)?(s(),n(P,{key:0,color:void 0,outlined:"",onClick:ue,class:`\r
                    mr-4\r
                    btn-card\r
                    text-center\r
                    px-2\r
                    h-100\r
                    d-flex\r
                    align-items-center\r
                    justify-content-center\r
                  `,style:{"font-size":"12px"}},{default:a(()=>[Kn]),_:1})):d("",!0)]),_:1},8,["active"])):d("",!0)])):d("",!0),e("div",Jn,[t(o).membership_members&&t(o).membership_members.is_recurrence?(s(),n(Q,{key:0,class:"w-100 h-100",size:"small",active:l.value},{default:a(()=>[t(h)&&t(o).subscription?(s(),n(P,{key:0,color:"info",outlined:!0,onClick:U,class:`\r
                    mr-4\r
                    btn-card\r
                    text-center\r
                    px-2\r
                    h-100\r
                    d-flex\r
                    align-items-center\r
                    justify-content-center\r
                  `,style:{"font-size":"12px"}},{default:a(()=>[Qn]),_:1})):d("",!0)]),_:1},8,["active"])):d("",!0)]),e("div",Zn,[t(o).membership_members&&t(o).membership_members.is_recurrence?(s(),n(Q,{key:0,class:"w-100 h-100",size:"small",active:l.value},{default:a(()=>[t(h)&&t(o).subscription?(s(),n(P,{key:0,color:"success",outlined:!0,onClick:_e,class:`\r
                    mr-4\r
                    btn-card\r
                    text-center\r
                    px-2\r
                    h-100\r
                    d-flex\r
                    align-items-center\r
                    justify-content-center\r
                  `,style:{"font-size":"12px"}},{default:a(()=>[Xn]),_:1})):d("",!0)]),_:1},8,["active"])):d("",!0)]),e("div",eo,[t(o)&&t(h)?(s(),n(Ge,{key:0,member:t(o),"member-mermship":t(h),"is-loader-active":l.value},null,8,["member","member-mermship","is-loader-active"])):d("",!0)]),e("div",to,[t(o)&&t(h)?(s(),n(P,{key:0,class:"mb-4 w-100"},{default:a(()=>[so,e("div",no,[e("a",{target:"_blank",href:`${t(le)}generateWeiver/${t(o).id}`,class:"d-flex justify-content-start align-items-center"},[oo,e("p",null," weiver_"+u(t(o).id)+"_"+u(t(o).membership_members.id)+"_"+u(t(o).personal_identifications)+".pdf ",1)],8,["href"])])]),_:1})):d("",!0)]),e("div",ao,[t(o)&&t(h)?(s(),n(P,{key:0,class:"mb-4 w-100"},{default:a(()=>[lo,e("div",ro,[e("a",{target:"_blank",href:`${t(le)}generateContract/${t(o).id}`,class:"d-flex justify-content-start align-items-center"},[io,e("p",null," contract_"+u(t(o).id)+"_"+u(t(o).membership_members.id)+"_"+u(t(o).personal_identifications)+".pdf ",1)],8,["href"])])]),_:1})):d("",!0)])])])):d("",!0),t(o)&&t(h)&&!t(h).sign?(s(),n("div",co,[e("div",uo,[e(Ke,{onOnSign:r,"is-sign":!t(h).sign,contract:`contract_${t(o).id}_${t(o).membership_members.id}_${t(o).personal_identifications}.pdf`,"url-contract":`generateContract/${t(o).id}`},null,8,["is-sign","contract","url-contract"])])])):d("",!0)])]),_:1})}}});const _o=e("div",null,[e("h1",{class:"title is-4 mb-0"},"Family Members"),e("p",null,"Edit member's family members")],-1),po={class:"columns is-multiline"},ho={key:0,class:"column is-4 mb-4"},fo=e("div",null,[e("h1",{class:"title is-4 mb-0"},"Parent"),e("p",null,"Edit parent contact")],-1),vo=D(" Save Changes "),bo={class:""},yo=e("h1",{class:"title is-5"},"Parent Contact Information",-1),$o={class:"d-flex justify-content-end mr-6"};var go=L({expose:[],setup(I){g([{id:1,name:"Wonder Woman",subtitle:"Mother/Adult",img:"https://picsum.photos/150/150"},{id:2,name:"Lionel Messi",subtitle:"Father/Minor",img:"https://picsum.photos/150/151"}]);const m=()=>{const c=te(R.value),b=new FormData;for(var _ in c)b.append(_,c[_]);At.value||$t(b).then(p=>{Y.success("Success")})},l=j(()=>(console.log("info",B.value),x(R.value,"city_id").model=x(B.value,"city_id").model,x(R.value,"state_id").model=x(B.value,"state_id").model,x(R.value,"postal_code").model=x(B.value,"postal_code").model,x(R.value,"country_id").model=x(B.value,"country_id").model,R.value));return(c,b)=>{const _=Be,p=Ht,v=Rt,i=J,M=q,S=se;return s(),n("div",null,[t(o)&&t(o).category=="Adult"?(s(),n(i,{key:0},{"header-left":a(()=>[_o]),"header-right":a(()=>[]),content:a(()=>[e("div",po,[t(ne)?(s(),n("div",ho,[e(v,{title:`${t(ne).name} ${t(ne).second_name} ${t(ne).last_name}`,class:"border-1 p-4 radius-small"},{icon:a(()=>[e(_,{size:"medium",picture:`${t(le)}storage/${t(ne).photo}`,subtitle:"Principal Family"},null,8,["picture"])]),action:a(()=>[e(p,{"id-member":t(ne).id},null,8,["id-member"])]),_:1},8,["title"])])):d("",!0),(s(!0),n(W,null,G(t(yt),(V,r)=>(s(),n("div",{class:"column is-4 mb-4",key:`family-${r}`},[e(v,{title:`${V.member.name} ${V.member.second_name} ${t(o).last_name}`,subtitle:V.member.relationships,class:"border-1 p-4 radius-small"},{icon:a(()=>[e(_,{size:"medium",picture:`${t(le)}storage/${V.member.photo}`},null,8,["picture"])]),action:a(()=>[e(p,{"id-member":V.members_id},null,8,["id-member"])]),_:2},1032,["title","subtitle"])]))),128))])]),_:1})):d("",!0),t(o)&&t(o).category=="Minor"?(s(),n(i,{key:1},{"header-left":a(()=>[fo]),"header-right":a(()=>[e(M,{onClick:m,color:"primary"},{default:a(()=>[vo]),_:1})]),content:a(()=>[e("div",bo,[yo,e("div",$o,[e(_,{picture:`${t(le)}storage/${t(x)(t(R),"parent_photo").data}`,size:"large"},null,8,["picture"])]),e(S,{"inputs-step":t(l)},null,8,["inputs-step"])])]),_:1})):d("",!0)])}}});const ko=e("div",null,[e("h1",{class:"title is-4 mb-0"},"Emergency Contact"),e("p",null,"Edit member's emergency contact")],-1),Mo=D(" Save Changes "),Co={class:""},xo=e("h1",{class:"title is-5"},"Emergency Contact Information",-1);var wo=L({expose:[],setup(I){const m=()=>{const l=te(Ye.value);console.log(l),gt(l).then(c=>{Y.success("Success")})};return(l,c)=>{const b=q,_=se,p=J;return s(),n(p,null,{"header-left":a(()=>[ko]),"header-right":a(()=>[e(b,{onClick:m,color:"primary"},{default:a(()=>[Mo]),_:1})]),content:a(()=>[e("div",Co,[xo,e(_,{"inputs-step":t(Ye)},null,8,["inputs-step"])])]),_:1})}}});const Do=e("div",null,[e("h1",{class:"title is-4 mb-0"},"Check-ins History"),e("p",null,"Edit member's check-ins history")],-1),Po={class:"p-6"},Yo={class:"mt-4"},Io={class:"table is-hoverable is-fullwidth"},So=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"DATE"),e("th",{scope:"col"},"TIME")])],-1);var Vo=L({expose:[],setup(I){return(m,l)=>{const c=J;return t(o)?(s(),n(c,{key:0},{"header-left":a(()=>[Do]),"header-right":a(()=>[]),content:a(()=>[e("div",Po,[e("div",Yo,[e("table",Io,[So,e("tbody",null,[(s(!0),n(W,null,G(t(kt),(b,_)=>(s(),n("tr",{key:`access-${_}`},[e("td",null,u(t(T)(b.created_at).format("MM/DD/YYYY")),1),e("td",null,u(t(T)(b.created_at).format("HH:mm:ss")),1)]))),128))])])])])]),_:1})):d("",!0)}}});const $e=g([{typeInput:"text",name:"description",placeholder:"Description",model:"",class:"is-12",isLabel:!0,required:!0},{typeInput:"text",name:"amount",placeholder:"Amount",model:"",class:"is-12",isLabel:!0,required:!0}]),Ao=async(I={})=>await Fe.post("make-manual-payment",I),Eo=D("Confirm");var jo=L({expose:[],props:{openModal:{type:Boolean,default:!1},paymentMethodId:{type:String,default:""},paymentGateway:{type:Number,default:1}},emits:["closeModal","refreshTransactions"],setup(I,{emit:m}){const l=I,c=g(!1),b=async()=>{const p=te($e.value);await o.value;const v={amount:p.amount,description:p.description,payment_method_id:l.paymentGateway,payment_method_stripe_id:l.paymentMethodId,member_id:o.value.id};c.value=!0;try{await Ao(v),ge($e.value),Y.success("Success"),m("closeModal")}catch(i){typeof i.response.data.message=="string"?Y.error(i.response.data.message):Y.error(i)}finally{c.value=!1}},_=()=>{ge($e.value),m("closeModal")};return(p,v)=>{const i=se,M=q,S=fe;return s(),n(S,{open:l.openModal,title:"Create a new payment",size:"small",actions:"right",onClose:_},{content:a(()=>[e(i,{"inputs-step":t($e)},null,8,["inputs-step"])]),action:a(()=>[e(M,{color:"primary",raised:"",onClick:b,loading:c.value},{default:a(()=>[Eo]),_:1},8,["loading"])]),_:1},8,["open"])}}});const To=e("div",null,[e("h1",{class:"title is-4 mb-0"},"Purchases History"),e("p",null,"Edit member's purchases history")],-1),zo=e("p",{class:"title is-5"},"Card List",-1),Lo=e("div",{class:"d-flex align-items-center"},[e("p",{class:"title is-1 mb-0"},[e("i",{class:"fas fa-shopping-bag","aria-hidden":"true"})]),e("div",{class:"ml-4"},[e("p",{class:"title is-4 mb-2"},"Make a new payment with cash")])],-1);var Bo=L({expose:[],setup(I){const m=g(null),l=g(!1),c=g(1),b=()=>{},_=i=>{m.value=i,c.value=1,l.value=!0},p=()=>{l.value=!0,c.value=2},v=()=>{l.value=!1};return(i,M)=>{const S=jo,V=Ne,r=K,y=J;return t(o)?(s(),n(y,{key:0},{"header-left":a(()=>[To]),"header-right":a(()=>[]),content:a(()=>[zo,e(S,{"payment-method-id":m.value,"open-modal":l.value,"payment-gateway":c.value,onCloseModal:v},null,8,["payment-method-id","open-modal","payment-gateway"]),t(o).user?(s(),n(V,{key:0,"show-option":!0,class:"mb-6",onMakePayment:_,onOnMethodPayment:b,method_default:t(o).user.pm_last_four,"show-new-card":!0,memberid:t(o).id},null,8,["method_default","memberid"])):d("",!0),e(r,{onClick:p,color:"success",class:"btn-card"},{default:a(()=>[Lo]),_:1})]),_:1})):d("",!0)}}});const Fo=e("div",null,[e("h1",{class:"title is-4 mb-0"},"Subscription Invoice History"),e("p")],-1),No=e("p",null,"Invoices",-1),Ho={class:"table is-hoverable is-fullwidth"},Ro=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Description"),e("th",{scope:"col"},"Created"),e("th",{scope:"col"},"Amount"),e("th",{scope:"col"},"Method"),e("th",{scope:"col"},"Download"),e("th",{scope:"col"},"Status")])],-1),qo={key:0},Wo=e("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),Oo={key:1},Uo=e("td",null,"Subscription",-1),Go={key:0},Ko={key:1},Jo={key:0},Qo={key:1},Zo=e("td",null,"Cash",-1),Xo=e("td",null,null,-1);var ea=L({expose:[],setup(I){const m=ke({data:[]});return j(()=>h.value.payments),j(()=>{let l=[];return Ee.value.forEach(c=>{l.push({membership:c.membership.name,payments:c.payments})}),l}),Z(async()=>{const l={invoice_type:1};await Ae(o.value.id,l).then(c=>{m.data=c.data.invoices}).catch(c=>{})}),(l,c)=>{const b=q,_=Ce,p=K,v=J;return t(o)?(s(),n(v,{key:0},{"header-left":a(()=>[Fo]),"header-right":a(()=>[]),content:a(()=>[e(p,{class:"my-4"},{default:a(()=>[No,e("table",Ho,[Ro,t(o).subscription&&t(m).data?(s(),n("tbody",qo,[(s(!0),n(W,null,G(t(m).data,(i,M)=>(s(),n("tr",{key:`invoice-${M}`},[e("td",null,[e("p",null,u(i.description),1)]),e("td",null,u(t(T)(i.updated_at).format("MM/DD/YYYY")),1),e("td",null,u(t(E)(i.total/100)),1),e("td",null,u(i.collection_method),1),e("td",null,[e("a",{href:i.invoice_pdf,target:"_blank"},[e(b,null,{default:a(()=>[Wo]),_:1})],8,["href"])]),e("td",null,[e(_,{class:"mr-1 mb-1",label:i.status},null,8,["label"])])]))),128))])):t(o).membership_members&&t(o).membership_members.invoice_local?(s(),n("tbody",Oo,[(s(!0),n(W,null,G(t(o).membership_members.invoice_local,(i,M)=>(s(),n("tr",{key:`invoice-${M}`},[Uo,e("td",null,u(t(T)(i.updated).format("MM/DD/YYYY")),1),e("td",null,[i.period_start?(s(),n("span",Go,u(t(T)(i.period_start).format("MM/DD/YYYY")),1)):(s(),n("span",Ko))]),e("td",null,[i.period_end?(s(),n("span",Jo,u(t(T)(i.period_end).format("MM/DD/YYYY")),1)):(s(),n("span",Qo))]),e("td",null,u(t(E)(i.amount/100)),1),Zo,Xo,e("td",null,u(i.status?"paid":"incomplete"),1)]))),128))])):d("",!0)])]),_:1})]),_:1})):d("",!0)}}});const ta=e("div",null,[e("h1",{class:"title is-4 mb-0"},"Product Invoice History"),e("p")],-1),sa=e("p",null,"Invoices",-1),na={class:"table is-hoverable is-fullwidth"},oa=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Description"),e("th",{scope:"col"},"Created"),e("th",{scope:"col"},"Amount"),e("th",{scope:"col"},"Method"),e("th",{scope:"col"},"Download"),e("th",{scope:"col"},"Status")])],-1),aa={key:0},la=e("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),ra={key:1},ia=e("td",null,"Subscription",-1),ca={key:0},ua={key:1},da={key:0},ma={key:1},_a=e("td",null,"Cash",-1),pa=e("td",null,null,-1);var ha=L({expose:[],setup(I){const m=ke({data:[]});return j(()=>h.value.payments),j(()=>{let l=[];return Ee.value.forEach(c=>{l.push({membership:c.membership.name,payments:c.payments})}),l}),Z(async()=>{const l={invoice_type:2},{data:c}=await Ae(o.value.id,l);m.data=c.invoices}),(l,c)=>{const b=q,_=Ce,p=K,v=J;return t(o)?(s(),n(v,{key:0},{"header-left":a(()=>[ta]),"header-right":a(()=>[]),content:a(()=>[e(p,{class:"my-4"},{default:a(()=>[sa,e("table",na,[oa,t(o).subscription&&t(m).data?(s(),n("tbody",aa,[(s(!0),n(W,null,G(t(m).data,(i,M)=>(s(),n("tr",{key:`invoice-${M}`},[e("td",null,[e("p",null,u(i.description),1)]),e("td",null,u(t(T)(i.created).format("MM/DD/YYYY")),1),e("td",null,u(t(E)(i.total/100)),1),e("td",null,u(i.collection_method),1),e("td",null,[e("a",{href:i.invoice_pdf,target:"_blank"},[e(b,null,{default:a(()=>[la]),_:1})],8,["href"])]),e("td",null,[e(_,{class:"mr-1 mb-1",label:i.status},null,8,["label"])])]))),128))])):t(o).membership_members&&t(o).membership_members.invoice_local?(s(),n("tbody",ra,[(s(!0),n(W,null,G(t(o).membership_members.invoice_local,(i,M)=>(s(),n("tr",{key:`invoice-${M}`},[ia,e("td",null,u(t(T)(i.created).format("MM/DD/YYYY")),1),e("td",null,[i.period_start?(s(),n("span",ca,u(t(T)(i.period_start).format("MM/DD/YYYY")),1)):(s(),n("span",ua))]),e("td",null,[i.period_end?(s(),n("span",da,u(t(T)(i.period_end).format("MM/DD/YYYY")),1)):(s(),n("span",ma))]),e("td",null,u(t(E)(i.amount/100)),1),_a,pa,e("td",null,u(i.status?"paid":"incomplete"),1)]))),128))])):d("",!0)])]),_:1}),d("",!0)]),_:1})):d("",!0)}}});const fa=e("div",null,[e("h1",{class:"title is-4 mb-0"},"Charge Invoice History"),e("p")],-1),va=e("p",null,"Invoices",-1),ba={class:"table is-hoverable is-fullwidth"},ya=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Description"),e("th",{scope:"col"},"Created"),e("th",{scope:"col"},"Amount"),e("th",{scope:"col"},"Method"),e("th",{scope:"col"},"Download"),e("th",{scope:"col"},"Status")])],-1),$a={key:0},ga=e("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),ka={key:1},Ma=e("td",null,"Subscription",-1),Ca={key:0},xa={key:1},wa={key:0},Da={key:1},Pa=e("td",null,"Cash",-1),Ya=e("td",null,null,-1);var Ia=L({expose:[],setup(I){const m=ke({data:[]});return j(()=>h.value.payments),j(()=>{let l=[];return Ee.value.forEach(c=>{l.push({membership:c.membership.name,payments:c.payments})}),l}),Z(async()=>{const l={invoice_type:3},{data:c}=await Ae(o.value.id,l);m.data=c.invoices}),(l,c)=>{const b=q,_=Ce,p=K,v=J;return t(o)?(s(),n(v,{key:0},{"header-left":a(()=>[fa]),"header-right":a(()=>[]),content:a(()=>[e(p,{class:"my-4"},{default:a(()=>[va,e("table",ba,[ya,t(o).subscription&&t(m).data?(s(),n("tbody",$a,[(s(!0),n(W,null,G(t(m).data,(i,M)=>(s(),n("tr",{key:`invoice-${M}`},[e("td",null,[e("p",null,u(i.description),1)]),e("td",null,u(t(T)(i.created).format("MM/DD/YYYY")),1),e("td",null,u(t(E)(i.total/100)),1),e("td",null,u(i.collection_method),1),e("td",null,[e("a",{href:i.invoice_pdf,target:"_blank"},[e(b,null,{default:a(()=>[ga]),_:1})],8,["href"])]),e("td",null,[e(_,{class:"mr-1 mb-1",label:i.status},null,8,["label"])])]))),128))])):t(o).membership_members&&t(o).membership_members.invoice_local?(s(),n("tbody",ka,[(s(!0),n(W,null,G(t(o).membership_members.invoice_local,(i,M)=>(s(),n("tr",{key:`invoice-${M}`},[Ma,e("td",null,u(t(T)(i.created).format("MM/DD/YYYY")),1),e("td",null,[i.period_start?(s(),n("span",Ca,u(t(T)(i.period_start).format("MM/DD/YYYY")),1)):(s(),n("span",xa))]),e("td",null,[i.period_end?(s(),n("span",wa,u(t(T)(i.period_end).format("MM/DD/YYYY")),1)):(s(),n("span",Da))]),e("td",null,u(t(E)(i.amount/100)),1),Pa,Ya,e("td",null,u(i.status?"paid":"incomplete"),1)]))),128))])):d("",!0)])]),_:1}),d("",!0)]),_:1})):d("",!0)}}});const Re={},Sa={key:0},Va={key:1},Aa={key:2};function Ea(I,m){const l=ea,c=ha,b=Ia,_=qt;return s(),n(_,{selected:"subscription",tabs:[{label:"Subscription Invoice",value:"subscription"},{label:"Product Invoice",value:"product"},{label:"Charge Invoice",value:"charge"}]},{tab:a(({activeValue:p})=>[p==="subscription"?(s(),n("div",Sa,[e(l)])):p==="product"?(s(),n("div",Va,[e(c)])):p==="charge"?(s(),n("div",Aa,[e(b)])):d("",!0)]),_:1})}Re.render=Ea;const ja=e("div",null,[e("h1",{class:"title is-4 mb-0"}," Waiver "),e("p",null,"Edit member's waiver information")],-1),Ta=D(" Convert to Members "),za={class:"columns is-multiline"},La={class:"border-1 document_box p-4 d-flex justify-content-center radius-small"},Ba={href:"234",class:"text-center"},Fa=e("img",{style:{width:"70px"},src:Te,alt:""},null,-1);var Na=L({expose:[],setup(I){const m=g([{name:"Waiver_010221.pdf",url:""},{name:"Waiver_010221.pdf",url:""}]);return(l,c)=>{const b=q,_=J;return s(),n(_,null,{"header-left":a(()=>[ja]),"header-right":a(()=>[e(b,{color:"info"},{default:a(()=>[Ta]),_:1})]),content:a(()=>[e("div",za,[(s(!0),n(W,null,G(m.value,(p,v)=>(s(),n("div",{class:"column is-2 mb-4",key:`family-${v}`},[e("div",La,[e("a",Ba,[Fa,e("p",null,u(p.name),1)])])]))),128))])]),_:1})}}});const Ha=D("Confirm");var Ra=L({expose:[],props:{openModal:{type:Boolean,default:!1}},emits:["closeModal","refreshTransactions"],setup(I,{emit:m}){const l=I,c=g(!1),b=async()=>{const p=te(be.value),v={amount:p.amount,description:p.description};c.value=!0;try{p.transaction_type==="Add Credit"?await Mt(o.value.id,v):await Ct(o.value.id,v),ge(be.value),Y.success("Success"),m("closeModal"),m("refreshTransactions")}catch(i){typeof i.response.data.message=="string"?Y.error(i.response.data.message):Y.error(i)}finally{c.value=!1}},_=()=>{ge(be.value),m("closeModal")};return(p,v)=>{const i=se,M=q,S=fe;return s(),n(S,{open:l.openModal,title:"Create a new transaction",size:"small",actions:"right",onClose:_},{content:a(()=>[e(i,{"inputs-step":t(be)},null,8,["inputs-step"])]),action:a(()=>[e(M,{color:"primary",raised:"",onClick:b,loading:c.value},{default:a(()=>[Ha]),_:1},8,["loading"])]),_:1},8,["open"])}}});const qa=e("div",null,[e("h1",{class:"title is-4 mb-0"},"Credit History"),e("p",null,"Edit member's credit history")],-1),Wa=D(" New Transaction "),Oa={class:"title"},Ua={class:"mt-4"},Ga={class:"table is-hoverable is-fullwidth"},Ka=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"ID"),e("th",{scope:"col"},"Description"),e("th",{scope:"col"},"Date"),e("th",{scope:"col"},"Type"),e("th",{scope:"col"},"Amount")])],-1),Ja={key:0};var Qa=L({expose:[],setup(I){const m=ke({open:!1}),l=g(0);Z(async()=>{b()});const c=async()=>{const{data:v}=await wt(o.value.id);l.value=v.balance},b=async()=>{await xt(o.value.id),c()},_=()=>{m.open=!m.open},p=()=>{m.open=!1};return(v,i)=>{const M=q,S=Ra,V=K,r=J;return t(o)?(s(),n(r,{key:0},{"header-left":a(()=>[qa]),"header-right":a(()=>[e(M,{onClick:_,color:"primary"},{default:a(()=>[Wa]),_:1})]),content:a(()=>[e(S,{"open-modal":t(m).open,onCloseModal:p,onRefreshTransactions:b},null,8,["open-modal"]),e("p",Oa,"Credit: "+u(l.value)+"$",1),e(V,{class:"p-"},{default:a(()=>[e("div",Ua,[e("table",Ga,[Ka,t(ze)?(s(),n("tbody",Ja,[(s(!0),n(W,null,G(t(ze).data,(y,$)=>(s(),n("tr",{key:`transaction-${$}`},[e("td",null,u(y.id),1),e("td",null,u(y.meta.description),1),e("td",null,u(t(T)(y.created_at).format("MM/DD/YYYY")),1),e("td",null,u(y.type),1),e("td",null,u(y.amount),1)]))),128))])):d("",!0)])])]),_:1})]),_:1})):d("",!0)}}});const Za={key:0,class:"columns is-multiline"},Xa={class:"column is-3"},el={class:"column is-9"},tl={class:"columns is-multiline column is-12"},sl={class:"columns is-multiline column is-12"},nl={key:1,class:"columns is-multiline"},ol={class:"column is-3"},al={class:"column is-9"},ll={class:"d-flex justify-content-between"},rl=e("b",null,"Member since.",-1),il=e("b",null,"Membership Active:",-1),cl=e("b",null,"Due Date: ",-1),ul={key:0},dl=e("b",null,"Discount: ",-1),ml={key:0};var ar=L({expose:[],setup(I){const m=je();Ot.value="Member Profile",Et({title:"Members"});const l=g(!1),c=g("personalInformation"),b=r=>{c.value=r.value};ae(()=>m.query,(r,y)=>{Object.keys(r).length>0&&(M(),i())});const _=g("ERROR MEMBERSHIP"),p=g("");ae(o,r=>{r.sinMembresia&&(_.value="NO MEMBERSHIP",p.value="Please, select a membership"),!r.isSolvente&&!r.sinMembresia&&r.subscription&&(_.value=`Membership ${r.subscription.status}`,p.value=r.subscription.latest_invoice&&r.subscription.latest_invoice.payments_intents&&r.subscription.latest_invoice.payments_intents.length>0?`Last payment status : ${r.subscription.latest_invoice.payments_intents[0].status}`:""),r.subscription&&r.subscription.subscription&&!r.subscription.latest_invoice&&(p.value=`Last payment status : ${r.subscription.subscription.status}`),r.membership_members&&r.membership_members.cacelation_date&&(p.value=`Cancel date : ${T(r.membership_members.cacelation_date).format("MM-DD-YYYY")}`)}),ae(()=>m.hash,r=>{c.value=m.hash.slice(1)}),ae(()=>m.query.id,r=>{c.value="personalInformation"});const v=g(!0),i=()=>{v.value=!0,setTimeout(()=>{v.value=!1},500)};Z(()=>{m.hash!=""&&(c.value=m.hash.slice(1)),Zt().then(r=>{F(C,"locations_id",Xt.value)}),Qt().then(r=>{F(B,"country_id",r.contries),F(B,"city_id",r.cities),F(B,"state_id",r.states),F(Pe,"city_id",r.cities),F(Pe,"state_id",r.states),F(Pe,"country_id",r.contries),F(R.value,"city_id",r.cities),F(R.value,"state_id",r.states),F(R.value,"country_id",r.contries)}),He().then(r=>{F(C,"memberships_id",r.data.memberships)}),Ut().then(r=>{F(C,"discount",r.data.discounts)}),Gt().then(r=>{F(C,"recurrences_id",r.data)}),Kt().then(r=>{F(C,"staff_id",r.data)}),M()});const M=async()=>{await Dt(m.query.id).then(r=>{console.log("response.data",r.data);for(var y in r.data)if(y=="select_type")r.data[y]=="Individual"?(x(B.value,"select_type").model=!1,x(B.value,"company_name").typeInput="hidden"):(x(B.value,"select_type").model=!0,x(B.value,"company_name").typeInput="text");else if(y=="membership_members"){r.data[y]||(_.value="Does not have a membership",p.value="Does not have a membership go to the Membership/Contract section and create a new membership and press New Membership",console.error("no posee una membresia :("));for(var $ in r.data[y])$=="memberships_location"?r.data[y][$]?(x(C,"locations_id").model=r.data[y][$].companies_locations_id,Jt([r.data[y][$].companies_locations_id]).then(A=>{F(C,"diciplines",A.data)})):console.error("no posee una locacion :("):$=="diciplines"?(x(C,"diciplines").model=[],r.data[y][$].forEach(A=>{x(C,"diciplines").model.push(A.diciplines_id)})):$=="discount"?r.data[y][$]&&(x(C,"discount").model=r.data[y][$].id):$=="status"?r.data[y][$]==2&&(x(C,"memberships_id").model=""):x(C,$)!=null&&oe(C,$,r.data[y][$])}else if(y=="trainers"){let A=[];r.data[y].forEach(O=>{A.push(O.id)}),oe(C,"staff_id",A)}else if(y=="emergency")for($ in r.data[y])oe(Ye,$,r.data[y][$]);else if(y=="guardian")for($ in r.data[y])$=="parent_address"?x(R.value,"address").model=r.data[y][$]:$=="parent_photo"?(r.data[y][$]!=""||r.data[y][$]!=null?x(R.value,"parent_photo").required=!1:x(R.value,"parent_photo").required=!0,x(R.value,"parent_photo").data=r.data[y][$]):oe(R,$,r.data[y][$]);else y=="leo_vet_fr"?oe(B,y,r.data[y]==1):oe(B,y,r.data[y]);v.value=!1})},S=j(()=>{let r="";return o.value.subscription?(o.value.subscription.subscription&&o.value.subscription.subscription.status=="active"?r="active":r=o.value.subscription.status,o.value.subscription.status=="active"||o.value.subscription.status=="sincard",o.value.subscription.status=="canceled"&&T()<=T(o.value.membership_members.cacelation_date)&&(r="active")):o.value.sinMembresia&&(o.value.user&&o.value.user.pm_last_four?r="nomembershipcontarjeta":r="nomembership"),r}),V=()=>{v.value=!0,M()};return(r,y)=>{const $=Ve,A=as,O=K,f=Zs,z=Ce,N=sn,ie=mo,ce=go,ue=wo,de=Vo,me=Bo,U=Re,_e=Na,k=Qa,w=Wt;return s(),n(w,null,{default:a(()=>[v.value?(s(),n("div",Za,[e("div",Xa,[e($,{height:"700px"})]),e("div",el,[e("div",tl,[e($,{height:"150px"})]),e("div",sl,[e($,{height:"530px"})])])])):d("",!0),!v.value&&t(o)?(s(),n("div",nl,[e("div",ol,[e(A,{style:{position:"sticky",top:"10px"},category:t(o).category,onChangeMenu:b,class:t(S)},null,8,["category","class"])]),e("div",al,[t(Pt)?d("",!0):(s(),n(O,{key:0,class:[`\r
            mb-4\r
            d-flex\r
            justify-content-between\r
            align-items-center\r
            cardprofile\r
          `,t(S)]},{default:a(()=>[e("div",null,[e("p",null,u(p.value),1)])]),_:1},8,["class"])),l.value?(s(),n(f,{key:1,class:"mb-4"})):d("",!0),t(o).membership_members!=null?(s(),n(O,{key:2,class:"mb-4"},{default:a(()=>{var P;return[e("div",ll,[e("div",null,[e("p",null,[e("b",null,[D("Member #"+u(t(o).id)+" - ",1),e("small",null,u(t(o).category),1)])]),e("p",null,[e("small",null,[rl,D(" "+u(t(T)(t(o).created_at).format("ddd - DD MMM YYYY")),1)])]),e("p",null,[il,D(" "+u(t(h).membership.name),1)]),e("p",null,[cl,D(" "+u(t(T)(t(o).subscription.proxima_factura).format("ddd - DD MMM YYYY")),1)]),(P=t(o).membership_members)!=null&&P.discount?(s(),n("p",ul,[dl,D(" "+u(t(o).membership_members.discount.name),1)])):d("",!0)]),t(o).subscription?(s(),n("div",ml,[e(z,{color:"info",label:t(o).subscription.status,rounded:""},null,8,["label"])])):d("",!0)])]}),_:1})):d("",!0),re(e(N,{category:t(o).category},null,8,["category"]),[[Ie,c.value=="personalInformation"]]),re(e(ie,{onReload:V},null,512),[[Ie,c.value=="memberMembership"]]),c.value=="memberFamily"?(s(),n(ce,{key:3})):d("",!0),c.value=="memberEmergency"?(s(),n(ue,{key:4})):d("",!0),c.value=="memberCheckins"?(s(),n(de,{key:5})):d("",!0),c.value=="memberPurchases"?(s(),n(me,{key:6})):d("",!0),c.value=="memberInvoices"?(s(),n(U,{key:7})):d("",!0),c.value=="memberWaiver"?(s(),n(_e,{key:8})):d("",!0),c.value=="memberCredit"?(s(),n(k,{key:9})):d("",!0)])])):d("",!0)]),_:1})}}});export{ar as default};
