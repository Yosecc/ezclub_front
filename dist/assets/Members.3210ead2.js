import{r as l,c as u,g as s,A as r,n as m,h as g,a as w,s as x,q as L,Z as $,C as F,k as v,_ as N}from"./index.4457215e.js";import{g as T}from"./Diciplines.164662a5.js";import{v as O}from"./Discounts.a9c8271e.js";import{g as R}from"./Memberships.f99f3fde.js";const de=l([]),ue=l(null),S=l([]),C=l(null),k=l(null);l(null);l(!1);const ce=l(!1);l(null);const pe=l(null),me=l(null),ye=l(null),M=l(null),Y=l([]),G=l({name:"category",values:["Adult","Minor","Prospect"],model:"Adult",required:!0}),D=l([]),I=u(()=>G.value.model),he=l([{typeInput:"switchEventChangeInput",name:"mismatarjeta",values:["","Pay with the same card"],model:!0,required:!1,class:"is-12",isLabel:!0}]),be=l([{typeInput:"switchEventChangeInput",name:"prorrateo",values:["","Prorated Payment"],model:!0,required:!1,class:"is-4",isLabel:!0}]),fe=l([{typeInput:"date",name:"schedules",placeholder:"Subscription Schedules",model:"",required:!1,class:"is-4",isLabel:!0}]),ve=l([{typeInput:"text",name:"description",placeholder:"Transaction description",model:"",class:"is-12",required:!0,isLabel:!0},{typeInput:"select",name:"transaction_type",placeholder:"Transaction Type",model:"",class:"is-12",values:["Add Credit","Remove Credit"],isLabel:!0,required:!0},{typeInput:"number",name:"amount",placeholder:"Amount $",model:"",class:"is-12",isLabel:!0,required:!0}]),A=l([]),V=async e=>await r.get(`validateEmail?email=${e}`),B=async(e,a)=>await r.get(`validateNames?name=${e}&last_name=${a}`),U=function(e,a){const t=a.model;if(/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i.test(t))V(t).then(i=>{A.value=[]}).catch(i=>{A.value.push("next");for(const c in i.response.data)m.error(`${c} : ${i.response.data[c]}`)});else return m.error("email not valid")},q=function(e,a){s(_.value,"name").model!=""&&s(_.value,"last_name").model!=""&&B(s(_.value,"name").model,s(_.value,"last_name").model).then(t=>{}).catch(t=>{for(const o in t.response.data)m.error(`${o} : ${t.response.data[o]}`)})},_=l([{typeInput:"switchEventChangeInput",name:"select_type",values:["Individual","Company"],model:!1,required:!1,class:"is-6",isLabel:!0,categories:["Adult"],typeMember:["Individual","Company"],change:function(e){this.model?s(e,"company_name").typeInput="hidden":s(e,"company_name").typeInput="text"}},{typeInput:"file",name:"photo",placeholder:"Member Picture",model:"",required:!0,class:"is-12 d-flex justify-content-end",isLabel:!0,categories:["Adult","Minor"],typeMember:["Individual","Company"],camera:!0,modalName:"Miembro"},{typeInput:"text",name:"company_name",placeholder:"Company Name",model:"",class:"is-12",isLabel:!0,categories:["Adult"],typeMember:["Company"]},{typeInput:"text",name:"name",placeholder:"First Name",model:"",required:!0,class:"is-4",isLabel:!0,categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"],keyUp:function(e,a){},change:q},{typeInput:"text",name:"second_name",placeholder:"Middle Name",model:"",required:!1,class:"is-4",isLabel:!0,categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"text",name:"last_name",placeholder:"Last Name",model:"",required:!0,class:"is-4",isLabel:!0,categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"],change:q},{typeInput:"text",name:"bar_code",placeholder:"Member ID Card",model:"",required:!0,class:"is-6",isLabel:!0,categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"],hasError:!1,keyUp:async(e,a)=>{a.model.length>=9&&await r.get(`searchmember/${a.model}?type=validate`).then(t=>{t.data.status?(a.hasError=!0,m.error("Barcode already exists")):a.hasError=!1}).catch(t=>{a.hasError=!1})}},{typeInput:"date",name:"date_birth",placeholder:"Date of Birth",model:"",required:!0,class:I.value=="Prospect"?"is-6":"is-3",isLabel:!0,categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"],maxLength:10,maxDate:g().subtract(2,"years").format("YYYY-MM-DD"),keyUp:(e,a)=>{const t=["YYYY-MM-DD","YYYY/MM/DD"];a.model.length>=10&&(g(a.model,t,!0).isValid()?a.hasError=!1:(m.error("Date invalid"),a.hasError=!0))}},{typeInput:"select",name:"gender",placeholder:"Gender",values:["Male","Female"],model:"",required:!0,class:I.value=="Prospect"?"is-6":"is-3",isLabel:!0,categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"select",name:"goverment_id",placeholder:"Goverment ID Type",values:["Florida Driver License","Other State ID","Florida ID Card","Passport","Foreing Country ID","Florida Personal Identification Card","Florida Learner License"],model:"",required:!1,class:"is-4",isLabel:!0,categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"text",name:"personal_identifications",placeholder:"ID #",model:"",required:!1,class:"is-8",isLabel:!0,categories:["Adult","Prospect","Minor"],typeMember:["Individual","Company"]},{typeInput:"text",name:"address",placeholder:"Address",model:"",required:!0,class:"is-12",isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"]},{typeInput:"keyInput",name:"city_id",placeholder:"City",value:"",model:"",required:!0,values:[],valuesCalculated:[],class:"is-3",showList:!1,isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"],keyUp:function(e,a){a.values.length&&(a.valuesCalculated=a.values.filter(t=>t.name.match(new RegExp(a.value,"i")))),a.valuesCalculated.length&&a.value!=""?a.showList=!0:a.showList=!1,e.keyCode==40&&a.values.length&&(a.showList=!0,document[`form-list-${a.name}`][`form-select-${a.name}`].focus()),a.value==""&&(a.showList=!1,a.model="")},selectOption:function(e,a){a.value=a.values.find(t=>t.id==e.target.value).name,a.model=e.target.value,a.showList=!1},keyUpEnter:function(e,a){a.showList=!0}},{typeInput:"selectData",name:"state_id",placeholder:"State",model:"",required:!0,values:[""],class:"is-3",isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"],filterOptionText:function(e){return e.name}},{typeInput:"number",name:"postal_code",placeholder:"Postal Code",required:!0,model:"",class:"is-3",isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"]},{typeInput:"selectData",name:"country_id",placeholder:"Country",model:"US",required:!0,values:[""],class:"is-3",isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"],filterOptionText:function(e){return e.name}},{typeInput:"email",name:"email",placeholder:"Email",model:"",required:!0,class:"is-6",isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"],keyUp:function(e,a){},change:U},{typeInput:"tel",name:"phone",placeholder:"Phone Numbers",model:"",required:!0,class:"is-6",isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"],mask:"(###) ###-####"},{typeInput:"switch",name:"leo_vet_fr",values:["","LEO / VET / FR"],model:!1,default:!1,required:!1,class:"is-6",isLabel:!0,categories:["Adult"],typeMember:["Individual"]},{typeInput:"number",name:"id_leo_vet_fr",placeholder:"LEO / VET / FR ID#",model:"",required:!1,class:"is-6",isLabel:!0,categories:["Adult"],typeMember:["Individual"]},{typeInput:"hidden",name:"is_family",placeholder:"",model:0,class:"is-6",isLabel:!0,categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"hidden",name:"principal_family",placeholder:"LEO / VET / FR ID#",model:1,class:"is-6",isLabel:!0,categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]},{typeInput:"textarea",name:"notes",placeholder:"Notes",model:"",disabled:!1,class:"is-12",isLabel:!0,categories:["Adult","Minor","Prospect"],typeMember:["Individual","Company"]}]),j=l([{typeInput:"switchEventChangeInput",typeInputDefault:"switchEventChangeInput",name:"category",values:["Adult","Minor"],class:"is-6",isLabel:!0,model:!1,category:["Adult","Minor"]},{typeInput:"file",typeInputDefault:"file",name:"photo",placeholder:"Member Picture",class:"is-6 d-flex justify-content-end",isLabel:!0,model:"",required:!1,category:["Adult","Minor"],camera:!0,modalName:"Familiar"},{typeInput:"select",typeInputDefault:"select",name:"relationships",placeholder:"Relationship",values:["Son","Daughter","Wife","Husband","Father","Mother","Brother","Sister","Other"],model:"",class:"is-6",isLabel:!0,required:!0,category:["Adult","Minor"]},{typeInput:"text",typeInputDefault:"text",name:"bar_code",placeholder:"Member ID Card",model:"",class:"is-6",isLabel:!0,required:!1,category:["Adult","Minor"]},{typeInput:"date",typeInputDefault:"date",name:"date_birth",placeholder:"Date of Birth",model:"",class:"is-6",isLabel:!0,required:!0,category:["Adult","Minor"],maxDate:g().subtract(2,"years").format("YYYY-MM-DD")},{typeInput:"select",typeInputDefault:"select",name:"gender",placeholder:"Gender",values:["Male","Female"],model:"",class:"is-6",isLabel:!0,required:!0,category:["Adult","Minor"]},{typeInput:"text",typeInputDefault:"text",name:"name",placeholder:"First Name",model:"",class:"is-4",isLabel:!0,required:!0,category:["Adult","Minor"]},{typeInput:"text",typeInputDefault:"text",name:"second_name",placeholder:"Middle Name",model:"",class:"is-4",isLabel:!0,required:!1,category:["Adult","Minor"]},{typeInput:"text",typeInputDefault:"text",name:"last_name",placeholder:"Last Name",model:"",class:"is-4",isLabel:!0,required:!0,category:["Adult","Minor"]},{typeInput:"select",typeInputDefault:"select",name:"goverment_id",placeholder:"Goverment ID Type",values:["Florida Driver License","Other State ID","Florida ID Card","Passport","Foreing Country ID","Florida Personal Identification Card","Florida Learner License"],model:"",class:"is-4",isLabel:!0,required:!1,category:["Adult"]},{typeInput:"number",typeInputDefault:"number",name:"personal_identifications",placeholder:"ID #",model:"",class:"is-8",isLabel:!0,required:!1,category:["Adult"]},{typeInput:"switchEventChangeInput",typeInputDefault:"switchEventChangeInput",name:"misma_direccion",values:["","Use the same address as the parent member"],model:!1,required:!1,class:"is-12",isLabel:!0,category:["Adult"]},{typeInput:"text",typeInputDefault:"text",name:"address",placeholder:"Address",model:"",class:"is-12",isLabel:!0,required:!0,category:["Adult"]},{typeInput:"selectData",typeInputDefault:"selectData",name:"city_id",placeholder:"City",model:"",values:[""],class:"is-3",isLabel:!0,required:!0,category:["Adult"],typeMember:["Individual","Company"]},{typeInput:"selectData",typeInputDefault:"selectData",name:"state_id",placeholder:"State",model:"",values:[""],class:"is-3",isLabel:!0,required:!0,category:["Adult"],typeMember:["Individual","Company"]},{typeInput:"number",typeInputDefault:"number",name:"postal_code",placeholder:"Postal Code",model:"",class:"is-3",isLabel:!0,required:!0,category:["Adult"],typeMember:["Individual","Company"]},{typeInput:"selectData",typeInputDefault:"selectData",name:"country_id",placeholder:"Country",model:"",values:[""],class:"is-3",isLabel:!0,required:!0,category:["Adult"],typeMember:["Individual","Company"]},{typeInput:"email",typeInputDefault:"email",name:"email",placeholder:"Email",model:"",class:"is-6",isLabel:!0,required:!0,category:["Adult"]},{typeInput:"number",typeInputDefault:"number",name:"phone",placeholder:"Phone Number",model:"",class:"is-6",isLabel:!0,required:!0,category:["Adult"]},{typeInput:"checkbox",typeInputDefault:"checkbox",name:"leo_vet_fr",placeholder:"LEO / VET / FR",model:[],required:!1,class:"is-6",isLabel:!0,category:["Adult"],typeMember:["Individual"]},{typeInput:"number",typeInputDefault:"number",name:"id_leo_vet_fr",placeholder:"LEO / VET / FR ID#",model:"",required:!1,class:"is-6",isLabel:!0,category:["Adult"],typeMember:["Individual"]},{typeInput:"hidden",typeInputDefault:"hidden",name:"is_family",placeholder:"",model:1,class:"is-6",isLabel:!0,category:["Adult","Minor"],typeMember:["Individual","Company"]},{typeInput:"hidden",typeInputDefault:"hidden",name:"principal_family",placeholder:"",model:0,class:"is-6",isLabel:!0,category:["Adult","Minor"],typeMember:["Individual","Company"]}]),Ie=u(()=>j.value),_e=l([{typeInput:"checkboxGroup",name:"notifications",text:"When you ask clients to opt in, remind them that we'll still send receipts and anything critical",values:[{name:"notifications_types_id",value:1,placeholder:"Account Information",values:[{placeholder:"Email",name:"email",model:["email"]},{placeholder:"SMS",name:"sms",model:["sms"]}]},{name:"notifications_types_id",value:2,placeholder:"Reminders and schedule changes",values:[{placeholder:"Email",name:"email",model:["email"]},{placeholder:"SMS",name:"sms",model:["sms"]}]},{name:"notifications_types_id",value:3,placeholder:"News and promos",values:[{placeholder:"Email",name:"email",model:["email"]},{placeholder:"SMS",name:"sms",model:["sms"]}]}]}]),ge=w([{typeInput:"switchEventChangeInput",name:"recurrence",values:["","Recurrence"],placeholder:"Recurrence",model:!0,disabled:!1,class:"is-12",display:!0,isLabel:!0},{typeInput:"selectDataActionChangeInput",name:"memberships_id",placeholder:"Membership Type",values:[],model:"",disabled:!1,required:!0,class:"is-12",isLabel:!0},{typeInput:"radioBoxsInput",name:"recurrences_id",placeholder:"Recurrence & Amount",values:[],model:"",disabled:!1,required:!0,class:"is-12",isLabel:!0,filterName:"descriptions",otros:"amount"},{typeInput:"hidden",name:"amount",placeholder:"Amount",required:!0,model:"",disabled:!1,class:"is-12",isLabel:!0},{typeInput:"selectDataActionChangeInput",name:"locations_id",placeholder:"Locations Sale",required:!0,values:[],model:"",disabled:!1,class:"is-4",isLabel:!0},{typeInput:"DropdownCheckbox",name:"diciplines",text:"Disciplines",placeholder:"Disciplines",required:!0,model:[],values:[],disabled:!1,class:"is-12",isLabel:!0,drop:!1},{typeInput:"selectDataActionChangeInput",name:"discount",placeholder:"Discount",values:[],data:null,model:"",disabled:!1,class:"is-6",isLabel:!0},{typeInput:"switchEventChangeInput",name:"is_initiation_fee",values:["YES","NO"],placeholder:"Initiation fee",default:!1,model:!1,disabled:!1,class:"is-3",isLabel:!0},{typeInput:"switchEventChangeInput",default:!1,name:"is_card_price",placeholder:"Card",values:["NO","YES"],model:!1,disabled:!1,class:"is-3",isLabel:!0},{typeInput:"DropdownCheckbox",name:"staff_id",placeholder:"Trainer",values:[],model:"",disabled:!1,required:!1,class:"is-12",drop:!1},{typeInput:"hidden",name:"initiation_fee",required:!0,placeholder:"Initiation fee",model:[],disabled:!0,class:"is-4",isLabel:!0}]),Me=l([{typeInput:"textarea",name:"notes",placeholder:"Notes",model:"",disabled:!1,class:"is-12",isLabel:!0}]),y=l([{typeInput:"hidden",name:"member_id",placeholder:"",model:"",class:"is-12 d-flex justify-content-end",isLabel:!0,required:!1},{typeInput:"file",name:"parent_photo",placeholder:"Parent/Guardian Picture",model:"",class:"is-12 d-flex justify-content-end",isLabel:!0,required:!0,camera:!0},{typeInput:"select",name:"parent_relationships",placeholder:"Parent Relationships",values:["Father","Mother","Brother","Sister","Grandfather","Grandmother","Legal Guardian","Other"],model:"",class:"is-4",isLabel:!0,required:!0},{typeInput:"text",name:"parent_name",placeholder:"First Name",model:"",class:"is-4",isLabel:!0,required:!0},{typeInput:"text",name:"parent_second_name",placeholder:"Middle Name",model:"",class:"is-4",isLabel:!0,required:!1},{typeInput:"text",name:"parent_last_name",placeholder:"Last Name",model:"",class:"is-4",isLabel:!0,required:!0},{typeInput:"select",name:"parent_goverment_id",placeholder:"Goverment ID Type",values:["Florida Driver License","Other State ID","Florida ID Card","Passport","Foreing Country ID","Florida Personal Identification Card","Florida Learner License"],model:"",class:"is-4",isLabel:!0,required:!0},{typeInput:"number",name:"parent_personal_identifications",placeholder:"ID #",model:"",class:"is-4",isLabel:!0,required:!0},{typeInput:"text",name:"address",placeholder:"Address",model:"",required:!0,class:"is-12",isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"]},{typeInput:"selectData",name:"city_id",placeholder:"City",model:"",required:!0,values:[""],class:"is-3",isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"],filterOptionText:function(e){return e.name}},{typeInput:"selectData",name:"state_id",placeholder:"State",model:"",required:!0,values:[""],class:"is-3",isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"],filterOptionText:function(e){return e.name}},{typeInput:"number",name:"postal_code",placeholder:"Postal Code",required:!0,model:"",class:"is-3",isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"]},{typeInput:"selectData",name:"country_id",placeholder:"Country",model:"",required:!0,values:[""],class:"is-3",isLabel:!0,categories:["Adult","Prospect"],typeMember:["Individual","Company"],filterOptionText:function(e){return e.name}},{typeInput:"email",name:"parent_email",placeholder:"Email",model:"",class:"is-4",isLabel:!0,required:!0},{typeInput:"text",name:"parent_phone",placeholder:"Phone Number",model:"",class:"is-4",isLabel:!0,required:!0}]),Le=l([{typeInput:"text",name:"first_name",placeholder:"First Name",model:"",class:"is-4",isLabel:!0},{typeInput:"text",name:"middle_name",placeholder:"Last Name",model:"",class:"is-4",isLabel:!0},{typeInput:"text",name:"last_name",placeholder:"Last Name",model:"",class:"is-4",isLabel:!0},{typeInput:"email",name:"email",placeholder:"Email",model:"",class:"is-8",isLabel:!0},{typeInput:"number",name:"phone_number",placeholder:"Phone",model:"",class:"is-4",isLabel:!0},{typeInput:"text",name:"address",placeholder:"Address",model:"",class:"is-8",isLabel:!0},{typeInput:"select",name:"relationship",placeholder:"Relationship",values:["Sand","Dother","Wife","Girlfriend","Boyfriend","Father","Mother"],model:"",class:"is-4",isLabel:!0,required:!1}]),De=w([]),d=l(),W=async e=>r.post("getPresupuesto",e),E=async(e,a=1)=>r.post("recurrences_select",{memberships_id:e,is_recurrence:a}),Z=async e=>{const a=await r.post("members",e);return e.value=a.data.member,a},Ce=async e=>{const a=await r.get(`members/${e}/edit`);return d.value=a.data,a},Ae=async e=>await r.post("paymentStripe",e),qe=async e=>await r.post(`members/updatePersonalInformation/${d.value.id}`,e),Pe=async e=>await r.post(`members/subscribeDebitAutomatic/${e}`),we=async e=>await r.post(`members/sendEmailContractAndWaiver/${e}`),xe=async e=>await r.post(`members/updateMembershipMember/${f.value.id}`,e),$e=async(e,a=null)=>await r.get(`members/pause_membership/${f.value.id}?fecha=${a}`),Ee=async(e,a=null,t=!0)=>await r.post(`members/hold_membership/${f.value.id}`,{fecha:a,prorrateo:t}),Fe=async e=>r.get(`searchmember/${e}`),Ne=async()=>await r.post(`members/cancelMembershipMember/${f.value.id}`),Te=async(e,a)=>await r.post(`members/update-membership-member/${e}`,a),Oe=async e=>await r.get(`get_presupuesto_membresia/${e}`),Re=async(e,a)=>await r.post("members/deletePaymentMethod",{id:e,paymentMethod:a}),Se=async(e,a)=>await r.post("members/defaultPaymentMethod",{id:e,paymentMethod:a}),ke=async e=>await r.post(`members/contactEmergencystore/${d.value.id}`,e),Ye=async()=>await r.post(`members/addPenalty/${d.value.id}`),Ge=async()=>await r.post(`syncStripeResource/${d.value.id}`),Ve=async(e,a)=>await r.post(`paymentCash/${e}`,a),Be=async e=>await r.post(`members/guardian/${d.value.id}`,e),Ue=async e=>await r.post("newMembershipMember",e),je=async(e,a)=>await r.post(`sign/${a}`,{sign:e}),We=async e=>await r.get(`members/cards/${e}`),Ze=async(e,a)=>{const t=await r.get(`members/list_invoices/${e}`,{params:a});return d.value.invoices=t.data.invoices,d.value.pagos=t.data.pagos,d.value.invoicesSistem=t.data.invoicesSistem,t},He=async e=>await r.get(`credit/${e}/balance`),ze=async e=>{const a=await r.get(`credit/${e}`);return D.value=a.data,a},Je=async(e,a)=>(await r.post(`/credit/${e}/add`,a)).data,Ke=async(e,a)=>(await r.post(`/credit/${e}/remove`,a)).data,Qe=async()=>await r.post("members/subscriptions_create_stripe",{members:S.value,trial_end:1,trial:!1}),Xe=async(e,a)=>await r.post(`paymentInvoice/${e}`,a),f=u(()=>d.value?d.value.membership_members:null),ea=u(()=>D.value?D.value:null),aa=u(()=>d.value.membership_members_history),ta=u(()=>d.value.families_children),sa=u(()=>d.value.family_parent?d.value.family_parent.pincipal_family:null);u(()=>d.value.emergency);const ra=u(()=>d.value.accessDay),P=u(()=>f.value.payments);u(()=>{let e=f.value.created_at;return P.value[0].status&&(e=P.value[0].created_at),g(e).add(f.value.recurrence.recurrence,"d")});const na=u(()=>d.value.isSolvente);u(()=>d.value.sinMembresia);const H=function(e){const a=this.values.find(i=>i.id==this.model);s(e,"recurrences_id").model="",x(e,"initiation_fee",a.initiation_fee);const t=[];a.locations.forEach(i=>{i.sale==1&&t.push(i.company_locations)}),L(e,"locations_id",t);let o=1;s(e,"recurrence").model||(o=0),I.value=="Prospect"&&(o=0),E(this.model,o).then(i=>{s(e,"recurrences_id").values=i.data}),R(this.model).then(i=>{i.data.length&&(L(e,"diciplines",i.data),s(e,"diciplines").values.push({id:0,name:"All"})),this.values.find(h=>h.id==this.model).diciplines_number==0?s(e,"diciplines").required=!1:s(e,"diciplines").required=!0,K(e)})},z=function(e){x(e,"amount",this.values.find(a=>a.id==this.model).amount)},J=function(e){T([this.model]).then(a=>{L(e,"diciplines",a.data)})},K=e=>{$(e,"memberships_id").all_diciplines==1?s(e,"diciplines").values.forEach(a=>{s(e,"diciplines").model.push(a.id)}):s(e,"diciplines").model=[]},Q=function(e){this.model!=""?O(this.values.find(a=>a.id==this.model).code,"membership").then(a=>{this.data=a.data,m.success("Discuount valid")}).catch(a=>{m.error(a.response.data),this.model=""}):this.data=null},X=function(e){return`${e.name}`},ee=function(e){return e.second_name?`${e.name} ${e.second_name} ${e.last_name}`:`${e.name}  ${e.last_name}`},ae=function(e,a,t){const o=$(a,"memberships_id").diciplines_number;if(o>0&&(o<=this.model.length&&(e.returnValue=!1),o==this.model.length))if(this.model.includes(t)){const i=this.model.findIndex(h=>h==t),c=[];this.model.forEach((h,n)=>{i!=n&&c.push(h)}),this.model=c}else m.error("You must select a limit of "+o+" diciplines")},te=function(e){const a=s(e,"memberships_id").model;if(s(e,"recurrences_id").model="",s(e,"memberships_id").model="",a!=""){let t=null;this.model?t=0:t=1,I.value=="Prospect"&&(t=0),E(a,t).then(o=>{s(e,"recurrences_id").values=o.data})}},la=e=>{s(e,"memberships_id").change=H,s(e,"recurrences_id").change=z,s(e,"locations_id").change=J,s(e,"discount").change=Q,s(e,"discount").filter=X,s(e,"staff_id").filter=ee,s(e,"diciplines").change=function(a,t){},s(e,"recurrence").change=te,s(e,"diciplines").click=ae},ia=async e=>{const a=new FormData,t=v(e.member);N(a,t);for(let n=0;n<e.contact.length;n++){const p=e.contact[n];for(const b in p)a.append(`notifications[${n}][${b}]`,p[b])}const o=v(e.membresia);for(const n in o)if(n=="diciplines"){const p=o[n];for(let b=0;b<p.length;++b)a.append("diciplines[]",p[b])}else a.append(n,o[n]);a.append("total",e.total),a.append("payment_type_id",3);const i=v(e.categoriesMembers,{array:!1});if(i.category=="Minor"){a.append("address",s(y.value,"address").model),a.append("postal_code",s(y.value,"postal_code").model),a.append("city_id",s(y.value,"city_id").model),a.append("country_id",s(y.value,"country_id").model),a.append("state_id",s(y.value,"state_id").model),a.append("email",s(y.value,"parent_email").model);const n=v(y.value);for(const p in n)a.append(`guardian[${p}]`,n[p])}for(const n in i)a.append(n,i[n]);const c=v(e.notasInput);for(const n in c)a.append(n,c[n]);return a.append("presupuesto_id",e.presupuesto_id),M.value&&a.append("id_principal",M.value),await Z(a).then(n=>(C.value=n.data.id,k.value=n.data.membership_members_id,s(e.member,"is_family").model==0&&(M.value=C.value),n)).catch(n=>{for(const p in n.response.data.errores)n.response.data.errores[p].forEach(b=>{m.error(`${p}: ${b}`)});return n})},se=e=>({memberships_id:s(e,"memberships_id").model,recurrences_id:s(e,"recurrences_id").model,is_initiation_fee:!s(e,"is_initiation_fee").model,is_card_price:s(e,"is_card_price").model,discount:s(e,"discount").data?s(e,"discount").data.code:null}),oa=async(e,a)=>{const t={...se(e)};return I.value=="Minor"?t.email=s(y.value,"parent_email")?s(y.value,"parent_email").model:null:t.email=s(a,"email")?s(a,"email").model:null,t.leo_vet_fr=s(a,"leo_vet_fr")?s(a,"leo_vet_fr").model:null,s(e,"prorrateo")!=null&&(t.prorrateo=s(e,"prorrateo").model),s(e,"schedules")!=null&&(t.schedules=s(e,"schedules").model),console.log(t),await W(t).then(i=>{Y.value.push({...i.data,member:a,membresia:e,schedules:t.schedules?t.schedules:null})}).catch(i=>{if(typeof i.response.data=="string")m.error(`${i.response.data}`);else for(const c in i.response.data)i.response.data[c].forEach(h=>{m.error(`${c}: ${h}`)})})},da=e=>{const a=[];return e.forEach(t=>{a.push({id:t.id,picture:`${F}storage/${t.photo}`,initials:re(t.name,t.last_name),color:""})}),a},re=(e,a)=>e.substr(0,1)+a.substr(0,1);export{de as $,Oe as A,we as B,Pe as C,y as D,sa as E,ta as F,Be as G,Le as H,ke as I,ra as J,Ze as K,aa as L,ve as M,Je as N,Ke as O,ze as P,He as Q,ea as R,Ie as S,Ce as T,na as U,M as V,Ae as W,ue as X,ia as Y,Ue as Z,S as _,Se as a,Qe as a0,re as a1,pe as a2,A as a3,me as a4,De as a5,ye as a6,I as a7,he as a8,G as a9,Me as aa,C as ab,k as ac,_e as ad,Fe as ae,ge as b,f as c,Ve as d,qe as e,E as f,We as g,la as h,_ as i,be as j,fe as k,Y as l,d as m,da as n,xe as o,ce as p,oa as q,Ne as r,Re as s,je as t,Te as u,$e as v,Ee as w,Xe as x,Ye as y,Ge as z};
