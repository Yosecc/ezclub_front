import{_ as e}from"./V-PlaceholderPage.vue_vue&type=script&setup=true&lang.63737147.js";import{_ as a}from"./V-Checkbox.vue_vue&type=script&setup=true&lang.46f55814.js";import{_ as s}from"./V-Control.5136ae9f.js";import{_ as l}from"./V-Loader.vue_vue&type=script&setup=true&lang.82fbf6e3.js";import{_ as t}from"./V-Dropdown.b805b674.js";import{d as i,a4 as r,r as n,H as m,w as o,o as c,i as u,j as p,k as d,a9 as b,D as v,L as f,c as g,h,G as _,ab as x,Q as y,R as k,E as j,F as w,P as V}from"./vendor.512b7acb.js";import{B as P,C,D}from"./Members.70e89f13.js";import{n as S,b as $}from"./index.f50cdc96.js";import{_ as T}from"./V-Avatar.vue_vue&type=script&setup=true&lang.471307b0.js";import{_ as A}from"./FlexTableDropdown.vue_vue&type=script&setup=true&lang.82c0c51e.js";import{_ as z}from"./V-FlexPagination.vue_vue&type=script&setup=true&lang.57c4f8fc.js";import{_ as M,a as E}from"./search-4-dark.fb3880a5.js";const F=d("div",{class:"icon"},[d("i",{class:"lnir lnir-round-box-check","aria-hidden":"true"})],-1),L=d("div",{class:"meta"},[d("span",null,"Process Subscriptions"),d("span",null,"Subscriptions automatic")],-1);var R=i({expose:[],props:{},setup(e){r();const a=n(!1),s=n(!1);m((()=>{})),o((()=>s.value),(e=>{e&&new Pusher("bfeef3fa74babbbef3cb",{cluster:"us2"}).subscribe("process_subscription_channel").bind("process_subscription_event",(function(e){let a=`${e.message.member.id}: ${e.message.member.name} ${e.message.member.last_name} <br> ${e.message.message}`;e.message.status?(P.value.find((a=>a.id==e.message.member.id)).isSolvente=!0,S.success(a)):S.error(a)}))}));const i=()=>{C.value.length&&(s.value=!0,a.value=!0,D().then((e=>{S.success("Finalizado"),a.value=!1})).catch((e=>{a.value=!1,S.error(e.response.data)})))};return(e,s)=>{const r=l,n=t;return c(),u(n,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:p((()=>[d(r,{size:"small",active:a.value},{default:p((()=>[d("a",{onClick:b(i,["prevent"]),role:"menuitem",class:"dropdown-item is-media",disabled:0==v(C).length},[F,L],8,["onClick","disabled"])])),_:1},8,["active"])])),_:1})}}});const I={class:"page-content-inner"},q={class:"flex-list-wrapper flex-list-v1"},U=d("img",{class:"light-image",src:M,alt:""},null,-1),B=d("img",{class:"dark-image",src:E,alt:""},null,-1),G={class:"flex-table"},H=d("span",{class:"is-grow"},"Member",-1),O=d("span",null,"Email",-1),Q=d("span",null,"Membership Type",-1),W=d("span",null,"Trainer",-1),J=d("span",null,"Phone #",-1),K=d("span",{class:"cell-end"},"Status",-1),N={class:"cell-end"},X={class:"d-flex justify-content-end align-items-center"},Y={class:"flex-list-inner"},Z={class:"item-name dark-inverted"},ee={class:"flex-table-cell","data-th":"member-id"},ae={class:"light-text"},se={class:"flex-table-cell","data-th":"Membership Type"},le={key:0,class:"light-text"},te={class:"flex-table-cell is-media is-grow","data-th":"Trainer"},ie={key:1,class:"light-text dark-inverted ml-2"},re={class:"flex-table-cell","data-th":"Phone"},ne={class:"light-text"},me={class:"flex-table-cell cell-end","data-th":"Status"},oe={class:"flex-table-cell cell-end","data-th":"Actions"};var ce=i({expose:[],props:{members:{type:Array,required:!0},name:{type:String,default:"Item"},paginationData:{type:Object,default:{itemPerPage:15,totalItems:1,currentPage:1,maxLinksDisplayed:7}},filters:{type:String}},emits:["filterChange","onSearch"],setup(l,{emit:t}){const i=l;f(),r(),n(""),n("all"),n({});const m=g((()=>i.filters?i.members.filter((e=>e.name.match(new RegExp(i.filters,"i"))||e.last_name.match(new RegExp(i.filters,"i"))||e.id==i.filters||e.phone==i.filters||e.personal_identifications==i.filters)):i.members));o((()=>m.value),(e=>{})),n({status:!1,member:null});const b=(e,a)=>e.substr(0,1)+a.substr(0,1);o((()=>i.members),(()=>{}));const P=n([]);return o((()=>P.value),(e=>{0!=e.length?(C.value=[],m.value.forEach((e=>{C.value.push(e.id)}))):C.value=[]})),(l,t)=>{var r,n;const o=e,f=a,g=s,D=R,S=T,M=h("router-link"),E=A,F=z;return c(),u("div",null,[d("div",I,[d("div",q,[d(o,{class:[0!==v(m).length&&"is-hidden"],title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:p((()=>[U,B])),_:1},8,["class"]),d("div",G,[_("Table header"),0!==v(m).length?(c(),u("div",{key:0,class:["flex-table-header",[0===v(m).length&&"is-hidden"]]},[H,O,Q,W,J,K,_(" <span>Card Default</span> "),d("span",N,[d("div",X,[d(g,{raw:"",subcontrol:""},{default:p((()=>[d(f,{modelValue:P.value,"onUpdate:modelValue":t[1]||(t[1]=e=>P.value=e),value:"all","is-label":!1,label:"All",color:"primary"},null,8,["modelValue"])])),_:1}),d(D)])])],2)):_("v-if",!0),d("div",Y,[d(x,{name:"list",tag:"div"},{default:p((()=>[_("Table item"),(c(!0),u(y,null,k(v(m),(e=>(c(),u("div",{key:`${i.name}-${e.id}`,class:["flex-table-item cursor-pointer",e.isSolvente?"":"bg-danger"]},[d("div",{onClick:e=>{},class:"flex-table-cell is-media is-grow"},[d(S,{picture:`${v($)}storage/${e.photo}`,color:"primary",initials:b(e.name,e.last_name),size:"medium"},null,8,["picture","initials"]),_(' <V-PlaceloadAvatar size="medium" /> '),d("div",null,[d("span",Z,[d("h3",null,[d(M,{to:{name:"members-profile",query:{id:e.id}},style:{color:"white"}},{default:p((()=>[j(w(e.id)+" "+w(e.name)+" "+w(e.second_name)+" "+w(e.last_name),1)])),_:2},1032,["to"])])]),_(' <span class="item-meta">\n                      <span>{{ item.position }}</span>\n                    </span> ')])],8,["onClick"]),d("div",ee,[d("span",ae,w(e.email),1)]),d("div",se,[e.membership_members?(c(),u("span",le,w(e.membership_members.membership.name),1)):_("v-if",!0)]),d("div",te,[null!=e.trainer?(c(),u(S,{key:0,picture:`${v($)}storage/${e.trainer.photo}`,color:"h-green",initials:b(e.trainer.name,e.trainer.last_name),size:"medium"},null,8,["picture","initials"])):_("v-if",!0),null!=e.trainer?(c(),u("span",ie,w(e.trainer.name)+" "+w(e.trainer.second_name)+" "+w(e.trainer.last_name),1)):_("v-if",!0)]),d("div",re,[d("span",ne,w(e.phone),1)]),d("div",me,[d("span",{class:["tag is-rounded",null!=e.membership_members?"is-success":""]},w(null!=e.membership_members?"Active":"Inactive"),3)]),_(' <div v-if="item.user" class="flex-table-cell">\n                  <p class="mr-3">{{ item.user.pm_type }}</p>\n                  <p>****{{ item.user.pm_last_four }}</p>\n                </div> '),_(' <div class="flex-table-cell" data-th="Relations">\n                  <V-AvatarStack\n                    :avatars="item.contacts"\n                    size="small"\n                    :limit="3"\n                    class="is-pushed-mobile"\n                  />\n                </div> '),d("div",oe,[d(g,{raw:"",subcontrol:""},{default:p((()=>[d(f,{modelValue:v(C),"onUpdate:modelValue":t[2]||(t[2]=e=>V(C)?C.value=e:null),value:e.id,"is-label":!1,color:"primary"},null,8,["modelValue","value"])])),_:2},1024),d(E,{"id-member":e.id,member:e},null,8,["id-member","member"])])],2)))),128))])),_:1})])]),_("Table Pagination"),v(m).length>0?(c(),u(F,{key:0,"item-per-page":null!=(r=i.paginationData.per_page)?r:15,"total-items":null!=(n=i.paginationData.total)?n:0,"current-page":i.paginationData.current_page},null,8,["item-per-page","total-items","current-page"])):_("v-if",!0)])]),_(' <sidebar-member\n      :status="memberCard.status"\n      :member="memberCard.member"\n      @closeMemberCard="closeMemberCard"\n    /> ')])}}});export{ce as _};
