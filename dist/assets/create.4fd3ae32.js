import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.667d2417.js";import{_ as t}from"./V-Control.5136ae9f.js";import{_ as a}from"./V-Field.vue_vue&type=script&setup=true&lang.5cc17432.js";import{_ as l}from"./inputsLayaut.vue_vue&type=style&index=0&lang.aa5c0d97.js";import{_ as s}from"./formLayaut.vue_vue&type=style&index=0&lang.0872bfe2.js";import{d as n,r as u,w as i,c as r,o,i as p,j as m,k as c,D as d,Q as v,R as f,G as y,S as b,Y as h,E as _,F as g,H as x,U as S,a9 as j,a4 as C,z as M,A as k,B as A,O as P}from"./vendor.512b7acb.js";import{p as w,h as D,g as V,s as F,v as N,P as $,A as I,n as T,c as q,m as E,a as B,d as R}from"./index.f50cdc96.js";import{q as J,c as O,E as z,b as L,e as U,h as G,F as H,G as K,H as Q,y as W,I as Y,J as X,K as Z,L as ee,m as te}from"./Members.70e89f13.js";import{_ as ae}from"./V-Card.vue_vue&type=script&setup=true&lang.1618d39e.js";import{_ as le}from"./V-Loader.vue_vue&type=script&setup=true&lang.82fbf6e3.js";import{_ as se}from"./V-Placeload.982e0955.js";import{_ as ne}from"./V-Modal.vue_vue&type=script&setup=true&lang.b069e1cd.js";import{_ as ue}from"./V-Progress.vue_vue&type=script&setup=true&lang.16e581ea.js";import{_ as ie}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.97bdf002.js";import{a as re,m as oe}from"./Memberships.24aa274d.js";import{g as pe}from"./Recurrences.4c569bec.js";import{g as me}from"./Discounts.5c2236c4.js";import{e as ce,c as de,s as ve,d as fe}from"./config.fe407726.js";import{h as ye}from"./Staffs.1896e2d0.js";import{o as be}from"./PaymentMethodsData.3196e14c.js";import{p as he}from"./sidebarLayoutState.08ab8119.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.65c51667.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.46f55814.js";import"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.2808a08d.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.058d7636.js";import"./useDropdown.10df4d81.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.471307b0.js";import"./V-Dropdown.b805b674.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.f78f5288.js";import"./Companies.289760bb.js";import"./activePanelState.53d13aa7.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.b66af604.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.8ff326ca.js";import"./V-Message.vue_vue&type=script&setup=true&lang.4f410568.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.14f85ffe.js";import"./navbarLayoutState.2485848b.js";import"./video.81ca49e0.js";import"./darkModeState.8ae54720.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.c6af2930.js";import"./AnimatedLogo.afd186e6.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.33fcd2c5.js";import"./V-Block.vue_vue&type=script&setup=true&lang.7ac5b30d.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.9114be65.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.9d07b6d1.js";var _e=n({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e,n=u(!1);i((()=>a.inputs),((e,t)=>{v()}));const v=()=>{n.value=!0,setTimeout((()=>{n.value=!1}),500)},f=r((()=>y.value?a.inputs.filter((e=>e.typeMember.includes("Company"))):a.inputs.filter((e=>e.typeMember.includes("Individual"))))),y=u(!1),b=e=>{y.value=!e.input.model,v()},h=e=>{let a=w(f.value);D.value||(a.select_type=a.select_type?"Company":"Individual",t("returData",a),t("changeStep",e))};return(t,a)=>{const u=l,i=s;return o(),p(i,{titles:{title:e.title},"is-loading":n.value,buttons:["next","back"],step:1,onChangeStep:h},{default:m((()=>[c(u,{"inputs-step":d(f),onChangeSwitch:b},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}}),ge=n({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e=>{t("changeStep",e)};return(t,n)=>{const u=l,i=s;return o(),p(i,{titles:{title:e.title},buttons:["next","prev"],step:2,onChangeStep:a},{default:m((()=>[c(u,{"inputs-step":d(J)},null,8,["inputs-step"])])),_:1},8,["titles"])}}});const xe={key:0},Se=_(" Remove Family Member "),je={key:1,class:"column d-flex justify-content-center flex-column is-4 mx-auto"},Ce=_(" Add Another Family Member ");var Me=n({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(n,{emit:_}){const g=n,x=u(!1);i((()=>g.inputs),((e,t)=>{S()}));const S=()=>{x.value=!0,setTimeout((()=>{x.value=!1}),500)},j=u([]);r((()=>(S(),j.value.forEach(((e,t)=>{M.value.includes(t)?j.value[t]=e.filter((e=>e.category.includes("Minor"))):j.value[t]=JSON.parse(JSON.stringify(g.inputs))})),j.value)));const C=e=>{_("returData",j),_("changeStep",e)},M=u([]),k=r((()=>j.value.length>0)),A=u(0),P=()=>{if(A.value>0)for(var e=0;e<A.value;++e){const e=u(JSON.parse(JSON.stringify(g.inputs)));V(e.value,"misma_direccion").change=w,j.value.push(e.value)}},w=function(e){this.model?(F(e,"postal_code",""),F(e,"country_id",""),F(e,"city_id",""),F(e,"state_id","")):(F(e,"postal_code",N(O.value,"postal_code")),F(e,"country_id",N(O.value,"country_id")),F(e,"city_id",N(O.value,"city_id")),F(e,"state_id",N(O.value,"state_id")))};return(u,i)=>{const r=l,_=e,g=ae,S=t,w=a,D=s;return o(),p(D,{titles:{title:n.title},"is-loading":x.value,buttons:["next","prev"],step:2,onChangeStep:C},{default:m((()=>[d(k)?(o(),p("div",xe,[(o(!0),p(v,null,f(j.value,((e,t)=>(o(),p(g,{key:t,class:"mb-4"},{default:m((()=>[c(r,{"inputs-step":e,onChangeSwitch:e=>{return a=t,void M.value.findIndex((e=>e==a));var a}},null,8,["inputs-step","onChangeSwitch"]),c(_,{onClick:e=>j.value.splice(t,1),color:"danger",class:"mx-auto",icon:"fas fa-times"},{default:m((()=>[Se])),_:2},1032,["onClick"])])),_:2},1024)))),128))])):y("v-if",!0),d(k)?y("v-if",!0):(o(),p("div",je,[c(w,{class:"mb-4"},{default:m((()=>[c(S,null,{default:m((()=>[b(c("input",{type:"number","onUpdate:modelValue":i[1]||(i[1]=e=>A.value=e),class:"input text-center",placeholder:"Family quantity"},null,512),[[h,A.value]])])),_:1})])),_:1}),c(_,{onClick:P,color:"info",icon:"fas fa-check",raised:""},{default:m((()=>[Ce])),_:1})]))])),_:1},8,["titles","is-loading"])}}}),ke=n({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep"],setup(e,{emit:t}){const a=e,n=u(!1);i((()=>a.inputs),((e,t)=>{f()}));const v=e=>{let a=[];y.value.forEach((e=>{e.values.forEach((e=>{let t=e.values.find((e=>"sms"==e.name)).model.length,l=e.values.find((e=>"email"==e.name)).model.length;a.push({[e.name]:e.value,sms:t>0,email:l>0})}))})),t("returnData",a),t("changeStep",e)},f=()=>{n.value=!0,setTimeout((()=>{n.value=!1}),500)},y=r((()=>a.inputs)),b=u(!1),h=e=>{b.value=!e.input.model,f()};return(t,a)=>{const u=l,i=s;return o(),p(i,{titles:{title:e.title},"is-loading":n.value,buttons:["next","prev"],step:3,onChangeStep:v},{default:m((()=>[c(u,{"inputs-step":d(y),onChangeSwitch:h},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}});const Ae={class:""};var Pe=n({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberships:{type:Array,default:[]},notes:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(e,{emit:t}){const a=e,n=u(!1),y=u([]);i((()=>a.inputs),((e,t)=>{b()}));const b=()=>{n.value=!0,setTimeout((()=>{n.value=!1}),500)},h=e=>{let a=null;z.value.forEach(((e,t)=>{0==t?a=e.inputs:y.value.push(e)})),D.value||(t("returnData",{memberMembership:a,familyMembership:y}),t("changeStep",e))},_=r((()=>{z.value=[];const e=u(JSON.parse(JSON.stringify(L.value)));U(e.value),z.value.push({member:a.member,inputs:e.value});for(var t=0;t<a.familiares.length;++t){const e=u(JSON.parse(JSON.stringify(L.value)));U(e.value),z.value.push({member:a.familiares[t],inputs:e.value})}return z.value}));return(t,a)=>{const u=l,i=ae,r=s;return o(),p(r,{titles:{title:e.title},isloading:n.value,buttons:["next","prev"],step:4,onChangeStep:h},{default:m((()=>[(o(!0),p(v,null,f(d(_),((e,t)=>(o(),p(i,{key:`ss${t}`,class:"mb-4"},{default:m((()=>[c("p",Ae,[c("b",null,g(d(N)(e.member,"name"))+" "+g(d(N)(e.member,"second_name"))+" "+g(d(N)(e.member,"last_name")),1)]),c(u,{"inputs-step":e.inputs},null,8,["inputs-step"])])),_:2},1024)))),128)),c(i,{class:"mb-4"},{default:m((()=>[c(u,{"inputs-step":e.notes},null,8,["inputs-step"])])),_:1})])),_:1},8,["titles","isloading"])}}});const we=c("div",{id:"payment-element"},[y("Stripe.js injects the Payment Element")],-1),De=_("Pay now "),Ve=c("div",{id:"payment-message",class:"hidden"},null,-1);var Fe=n({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},emits:["PaymentAction"],setup(t,{emit:a}){const l=t,s=Stripe($.value);i((()=>l.id),(e=>{console.log("cambio"),n.value=!0,k()}));const n=u(!0);u({id:l.id,amount:l.amount});const d=u(),f=r((()=>"stripe"!=l.url?{payment_type_id:3,amount:l.amount}:{id:l.id,member_mermship_id:l.member_membership,amount:l.amount,payment_type_id:1}));u(null);const _=u(null),g=u(null),C=u(!1),M=u(null),k=async()=>{let e=await I.post(l.url,f.value).then((e=>{_.value=e.data.clientSecret,M.value=e.data.user_id,d.value=s.elements({clientSecret:_.value,appearance:{theme:"night",rules:{".Input":{boxShadow:"none"}}}}),g.value=d.value.create("card",{classes:{base:"base_card"}}),g.value.mount("#payment-element")})).catch((e=>{n.value=!1}));return n.value=!1,e},A=u(null),P=async e=>{e.preventDefault(),C.value=!0;const{setupIntent:t,error:n}=await s.confirmCardSetup(_.value,{payment_method:{card:g.value,billing_details:{name:A.value}}});if(n)C.value=!1,console.log(),T.error(n.message);else{const{payment_method:e}=t,{data:s}=await I.post("paymentStripe",{payment_method:e,amount:l.amount,user_id:M.value,membership_member_id:l.member_membership}).catch((e=>{C.value=!1}));s&&(a("PaymentAction",s),T.success("Success Payment"))}C.value=!1};return x((()=>{C.value=!1,k()})),(t,a)=>{const l=se,s=e,u=le,i=ae;return o(),p(v,null,[n.value?(o(),p(l,{key:0,height:"500px"})):y("v-if",!0),b(c(i,{class:"mt-6"},{default:m((()=>[c("form",{onSubmit:j(P,["prevent"]),id:"payment-form"},[b(c("input",{id:"card-holder-name",class:"input mb-3","onUpdate:modelValue":a[1]||(a[1]=e=>A.value=e),placeholder:"Name",type:"text"},null,512),[[h,A.value]]),we,c(u,{size:"small",active:C.value},{default:m((()=>[c(s,{id:"submit",class:"mt-4",color:"info"},{default:m((()=>[De])),_:1})])),_:1},8,["active"]),Ve],40,["onSubmit"])])),_:1},512),[[S,!n.value]])],64)}}});const Ne=c("p",{class:"title is-3"},"Payment Success",-1),$e=c("h1",{class:"title is-6"},null,-1),Ie={class:"table is-hoverable is-striped is-fullwidth"},Te=c("thead",null,[c("tr",null,[c("th",{scope:"col"},"Membership Name"),c("th",{scope:"col"},"Plan"),c("th",{scope:"col"},"Cost"),y(' <th scope="col">Initiation Fee</th> '),y(' <th scope="col">Discount</th> '),y(' <th scope="col">Taxes</th> '),c("th",{scope:"col"},"Import")])],-1),qe=c("p",null,null,-1),Ee={style:{"text-align":"right"}},Be={key:0},Re=c("td",null,"Initiation Fee",-1),Je={style:{"text-align":"right"}},Oe={style:{"text-align":"right"}},ze=c("td",{colspan:"3",style:{"text-align":"right"}},[c("b",null,"Subtotal")],-1),Le={style:{"text-align":"right"}},Ue={colspan:"3",style:{"text-align":"right"}},Ge={style:{"text-align":"right"}},He=c("td",{colspan:"3",style:{"text-align":"right"}},[c("b",null,"Total to pay")],-1),Ke={style:{"text-align":"right"}},Qe=c("td",{colspan:"3",style:{"text-align":"right"}},"Recurring total",-1),We={key:2,class:"d-flex justify-content-between"},Ye=_(" Card Payment "),Xe={class:"d-flex mb-4 justify-content-between"},Ze={class:"title is-5"},et=_(" Total: "),tt={class:"title is-5"},at=_(" Cash Total: "),lt={class:"\n            d-flex\n            justify-content-center\n            align-items-center\n            flex-column\n            mb-4\n          "},st=c("p",{class:"title is-5 mb-4"},"Change Back:",-1),nt={class:"title is-3 mb-0"},ut={class:"d-flex justify-content-center flex-wrap mb-4"},it=c("div",{class:"w-100"},null,-1),rt={class:"d-flex justify-content-center"},ot=_("Reset"),pt=_("Confirm");var mt=n({expose:[],props:{type:{type:String,default:"create"},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberMembership:{type:Array,default:[]},familyMembership:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(l,{emit:n}){x((()=>{j()}));const S=u(null),j=async()=>{let e={memberships_id:V(P.value.inputs,"memberships_id").model,recurrences_id:V(P.value.inputs,"recurrences_id").model,is_initiation_fee:0==V(P.value.inputs,"is_initiation_fee").model.length};G(e).then((e=>{S.value=e.data}))},k=u(!1),A=(e,t=3)=>{n("returnData",{total:O}),n("changeStep",e,t,{cash:X.value,changeBack:Z.value})},P=r((()=>z.value[0])),w=r((()=>{let e=q(P.value.inputs,"memberships_id");return null!=e?e:[]})),D=r((()=>{let e=q(P.value.inputs,"recurrences_id");return null!=e?e:[]})),F=r((()=>{let e=N(P.value.inputs,"initiation_fee");return null!=e?e:[]})),$=r((()=>{let e=V(P.value.inputs,"discount");return null!=e?e:[]})),I=r((()=>{let e=parseFloat(M().format("DD")),t=0,a=0;return D.value.days>=30&&(a=e-D.value.payday,t=D.value.amount/D.value.days*a),{days:a,amount:Math.abs(Math.round(t))}})),T=e=>{let t=parseFloat(M().format("DD")),a=0,l=0;return e.days>=30&&(l=t-e.payday,a=e.amount/e.days*l),{days:l,amount:Math.abs(Math.round(a))}},B=e=>{if(""!=N(P.value.inputs,"memberships_id"))return"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:E(e.tax.value),value:e.tax.value}},R=r((()=>B(w))),J=r((()=>{let e=0;return e+=D.value.amount,N(P.value.inputs,"is_initiation_fee").length||(e+=F.value),e-=I.value.amount,$.value.data&&("dolar"==$.value.data.type?e-=$.value.data.value:"percentaje"==$.value.data.type&&(e-=e/100*$.value.data.value)),e+=e/100*R.value.value,N(P.value.member,"leo_vet_fr").length&&(e-=e/100*w.value.descuento_vet),e})),O=r((()=>{let e=0;return e+=J.value,e+=U.value,e})),L=r((()=>{let e=[];return z.value.forEach(((t,a)=>{a>0&&(console.log(t),e.push(t))})),e})),U=r((()=>{let e=0;return L.value.forEach((t=>{if(""!=N(t.inputs,"memberships_id")&&""!=N(t.inputs,"recurrences_id")){let l=(e=>{let t=0;return t+=e.membershipCost,e.is_initiation_fee.length||(t+=e.initiation_fee),t-=e.prorated,null!=e.discount&&("dolar"==e.discount.type?t-=e.discount.value:"percentaje"==e.discount.type&&(t-=t/100*e.discount.value)),t+=t/100*e.objTax.value,e.is_vet&&(t-=t/100*e.discount_vet),t})({membershipCost:(a=q(t.inputs,"recurrences_id"),a.amount),is_initiation_fee:N(t.inputs,"is_initiation_fee"),initiation_fee:N(t.inputs,"initiation_fee"),objTax:B(q(t.inputs,"memberships_id")),prorated:T(q(t.inputs,"recurrences_id")).amount,discount:V(t.inputs,"discount").data,is_vet:V(t.member,"leo_vet_fr").model.length,discount_vet:q(t.inputs,"memberships_id").descuento_vet});e+=l}var a})),e})),W=u(!1);i((()=>K),((e,t)=>{W.value=!0,re.value=!1})),i(H.value,(()=>{H.value||(re.value=!1)}));const Y=u(!1),X=u(0),Z=r((()=>{const e=parseFloat(X.value)-parseFloat(O.value);return e>0?e:0})),ee=u(3),te=r((()=>null!=K.value&&null!=Q.value&&3==ee.value)),se=C(),ue=u(!0),ie=e=>{se.push({name:"members-profile",query:{id:K.value},hash:"#memberMembership"}),ee.value=0,ue.value=!1};u(!1);const re=u(!1);return u(!1),(n,u)=>{const i=ae,r=e,x=le,j=Fe,C=t,M=a,w=ne,D=s;return""!=d(N)(d(P).inputs,"memberships_id")?(o(),p(D,{key:0,titles:{title:l.title},"is-loading":k.value,buttons:["prev"],step:5,onChangeStep:A},{default:m((()=>[ue.value?y("v-if",!0):(o(),p(i,{key:0,color:"success",class:"mb-3"},{default:m((()=>[Ne])),_:1})),S.value?(o(),p(i,{key:1,class:"mb-4"},{default:m((()=>[$e,c("table",Ie,[Te,c("tbody",null,[c("tr",null,[c("td",null,g(S.value.membership.name),1),c("td",null,g(S.value.quote.computed.recurring.interval),1),c("td",null,[qe,_(" "+g(d(E)((new Intl.NumberFormat).format(10*S.value.quote.computed.recurring.amount_subtotal))),1)]),c("td",Ee,g(d(E)((new Intl.NumberFormat).format(10*S.value.quote.computed.recurring.amount_subtotal))),1)]),0==d(V)(d(P).inputs,"is_initiation_fee").model.length?(o(),p("tr",Be,[c("td",null,g(S.value.membership.name),1),Re,c("td",null,g(d(E)((new Intl.NumberFormat).format(S.value.membership.initiation_fee))),1),c("td",Je,g(d(E)(S.value.membership.initiation_fee)),1)])):y("v-if",!0),c("tr",Oe,[ze,c("td",null,g(d(E)((new Intl.NumberFormat).format(10*S.value.quote.amount_subtotal))),1)]),c("tr",Le,[c("td",Ue," Tax "+g(S.value.tax.percentage)+"% ",1),c("td",null,g(d(E)((new Intl.NumberFormat).format(10*S.value.quote.total_details.amount_tax))),1)]),c("tr",Ge,[He,c("td",null,g(d(E)((new Intl.NumberFormat).format(10*S.value.quote.amount_total))),1)]),c("tr",Ke,[Qe,c("td",null,g(d(E)((new Intl.NumberFormat).format(10*S.value.quote.computed.recurring.amount_total))),1)])])])])),_:1})):y("v-if",!0),ue.value?(o(),p("div",We,[c(x,{size:"small",active:re.value},{default:m((()=>[c(r,{color:"success",onClick:u[1]||(u[1]=e=>(A(6,3),ee.value=3,re.value=!0))},{default:m((()=>[Ye])),_:1})])),_:1},8,["active"]),y(' <VButton color="warning" @click="openModalCash = true">\n        Cash Payment\n      </VButton> ')])):y("v-if",!0),y(" <p>{{ idMemberMembership }}</p> "),y(' <stripeForm\n      v-if="isStripe"\n      :amount="total"\n      :id="idMember"\n      :member_membership="idMemberMembership"\n    /> '),d(te)?(o(),p(j,{key:3,amount:d(O),id:d(K),member_membership:d(Q),onPaymentAction:ie},null,8,["amount","id","member_membership"])):y("v-if",!0),c(w,{open:Y.value,actions:"center",onClose:u[6]||(u[6]=e=>Y.value=!1)},{content:m((()=>[c("div",Xe,[c("p",Ze,[et,c("b",null,g(d(E)(d(O))),1)]),c("p",tt,[at,c("b",null,g(d(E)(X.value)),1)])]),c("div",lt,[st,c("p",nt,[c("b",null,g(d(E)(d(Z))),1)])]),c("div",ut,[c(r,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:u[2]||(u[2]=e=>X.value=d(O))},{default:m((()=>[_(" Full Payment "+g(d(E)(d(O))),1)])),_:1}),it,(o(),p(v,null,f([5,10,20,50,100],((e,t)=>c(r,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>X.value+=e},{default:m((()=>[_(" $"+g(e),1)])),_:2},1032,["onClick"]))),64))]),c("div",rt,[c(M,null,{default:m((()=>[c(C,null,{default:m((()=>[b(c("input",{"onUpdate:modelValue":u[3]||(u[3]=e=>X.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[h,X.value]])])),_:1})])),_:1})])])),action:m((()=>[c(r,{color:void 0,onClick:u[4]||(u[4]=e=>X.value=0),class:"d-flex justify-content-center",raised:""},{default:m((()=>[ot])),_:1}),c(r,{color:"success",onClick:u[5]||(u[5]=e=>(A(6,1),ee.value=1)),disabled:d(O)>X.value,class:"d-flex justify-content-center",raised:""},{default:m((()=>[pt])),_:1},8,["disabled"])])),_:1},8,["open"])])),_:1},8,["titles","is-loading"])):y("v-if",!0)}}});k("data-v-5a5e3b40");const ct={class:"content"},dt={class:"content-text"};A();var vt=n({expose:[],props:{active:{type:Boolean,default:!1,required:!0},step:{type:Number,default:0,required:!0},text:{type:String,default:""}},setup(e){const t=e,a=r((()=>t.active?100:0));return(t,l)=>{const s=ue;return o(),p("div",ct,[c("div",{class:["circle",e.active?"active":""]},null,2),c(s,{class:"progressbar",value:d(a),size:"smaller"},null,8,["value"]),c("div",dt,[c("p",null,"STEP "+g(e.step),1),c("p",null,[c("b",null,g(e.text),1)])])])}}});vt.__scopeId="data-v-5a5e3b40";const ft={class:"columns is-multiline"},yt={class:"column is-12"},bt={class:"column is-9"},ht={class:"column is-3"};var _t=n({expose:[],setup(l){he.value="Add New members",P({title:"Members"}),x((()=>{le(),re().then((e=>{B(L,"memberships_id",e.data.memberships)})),V(L.value,"memberships_id").disabled=!1,V(L.value,"recurrences_id").disabled=!1,V(L.value,"is_initiation_fee").disabled=!1,V(L.value,"discount").disabled=!1,me(1,"membership").then((e=>{B(L,"discount",e.data.discounts)})),pe().then((e=>{})),ce().then((e=>{B(O,"city_id",de.value),B(W,"city_id",de.value),B(O,"state_id",ve.value),B(W,"state_id",ve.value),B(O,"country_id",fe.value),B(W,"country_id",fe.value)})),ye().then((e=>{B(L,"staff_id",e.data)}))}));const s=u(1),n=u([{step:1,text:"Member Information",categories:["Adult","Minor","Prospect"]},{step:2,text:"Add Family Member",categories:["Adult","Prospect"]},{step:2,text:"Parent / Guardian",categories:["Minor"]},{step:3,text:"Contact Preference",categories:["Adult","Minor","Prospect"]},{step:4,text:"Select membership",categories:["Adult","Minor","Prospect"]},{step:5,text:"Add Payment Method",categories:["Adult","Minor","Prospect"]},{step:6,text:"Sign Contract & Waiver",categories:["Adult","Minor","Prospect"]}]),i=r((()=>O.value.filter((e=>e.categories.includes(X.value.model))))),h=r((()=>n.value.find((e=>e.step==s.value&&e.categories.includes(X.value.model))))),j=r((()=>n.value.filter((e=>e.categories.includes(X.value.model))))),C=r((()=>w(J.value))),M=(e,t=3,a={})=>{X.value.model,6==e?ae(t,a):s.value=e},k=u(null),A=e=>{k.value=e},D=u(null),F=e=>{D.value=e},N=u([]),$=e=>{N.value=e.value},I=u([]),q=u([]),E=e=>{q.value=e.familyMembership.value,I.value=e.memberMembership};u(null),u(null);const U=u(null),G=e=>{U.value=e.total.value},ae=(e,t)=>{const a=new FormData;((e,t)=>{for(var a in t)e.append(a,t[a])})(a,k.value);let l=D.value;for(var s=0;s<l.length;s++){var n=l[s];for(var u in n)a.append(`notifications[${s}][${u}]`,n[u])}let i=w(I.value);for(var s in i)if("diciplines"==s){let e=i[s];for(var r=0;r<e.length;++r)a.append("diciplines[]",e[r])}else a.append(s,i[s]);a.append("total",U.value),a.append("payment_type_id",e),1==e&&(a.append("cash",t.cash),a.append("cash_back",t.changeBack));let o=w(X.value,{array:!1});for(var s in o)a.append(s,o[s]);let p=w(Y.value);for(var s in p)a.append(s,p[s]);let m=w(be.value);for(var s in m)a.append(s,m[s]);for(var s in q.value.forEach(((e,t)=>{let l=w(e.member);for(var s in l)"category"==s&&(l[s]?l[s]="Minor":l[s]="Adult"),a.append(`familiares[${t}][${s}]`,l[s]);let n=D.value;for(s=0;s<n.length;s++){var u=n[s];for(var i in u)a.append(`familiares[${t}][notifications][${s}][${i}]`,u[i])}let r=w(e.inputs);for(var s in r)if("diciplines"==s){let e=r[s];for(var o=0;o<e.length;++o)a.append(`familiares[${t}][diciplines][]`,e[o])}else a.append(`familiares[${t}][${s}]`,r[s]);a.append(`familiares[${t}][total]`,U.value);let p=w(Y.value);for(var s in p)a.append(`familiares[${t}][${s}]`,p[s]);let m=w(be.value);for(var s in m)a.append(`familiares[${t}][${s}]`,m[s])})),C.value)a.append(s,C.value[s]);ee(a).then((e=>{H.value=!1,console.log(e),K.value=e.data.member.id,Q.value=e.data.member.membership_members.id,te.value=e.data.member,console.log(te.value)})).catch((e=>{for(var t in console.log(e),e.value=!0,e.response.data.errores)e.response.data.errores[t].forEach((e=>{T.error(`${t}: ${e}`)}))}))},le=()=>{K.value=null,Q.value=null;let e=["is_family","principal_family"];R(O.value.filter((t=>!e.includes(t.name)))),e=["recurrence"],R(L.value.filter((t=>!e.includes(t.name)))),R(Y.value),R(J.value)};return(l,n)=>{const u=e,r=t,x=a,C=_e,k=ge,P=Me,w=ke,D=Pe,V=mt,T=vt,B=ie;return o(),p(B,null,{default:m((()=>[y(" Display a payment form "),c("div",ft,[c("div",yt,[1==s.value?(o(),p(x,{key:0,class:"w-100",addons:""},{default:m((()=>[(o(!0),p(v,null,f(d(X).values,((e,t)=>(o(),p(r,{key:`categoymember-${t}`},{default:m((()=>[c(u,{onClick:t=>d(X).model=e,color:d(X).model==e?"primary":void 0,rounded:""},{default:m((()=>[_(g(e),1)])),_:2},1032,["onClick","color"])])),_:2},1024)))),128))])),_:1})):y("v-if",!0)]),c("div",bt,[y(" memberInformation "),b(c(C,{type:"create",title:d(h).text,inputs:d(i),onChangeStep:M,onReturData:A},null,8,["title","inputs"]),[[S,1==s.value]]),y(" parentGuardian "),b(c(k,{title:d(h).text,onChangeStep:M},null,8,["title"]),[[S,2==s.value&&"Minor"==d(X).model]]),y(" familyMembers "),b(c(P,{type:"create",title:d(h).text,inputs:d(W),onChangeStep:M,onReturData:$},null,8,["title","inputs"]),[[S,2==s.value&&("Adult"==d(X).model||"Prospect"==d(X).model)]]),y(" contactPreference "),b(c(w,{type:"create",title:d(h).text,inputs:d(Z),onChangeStep:M,onReturnData:F},null,8,["title","inputs"]),[[S,3==s.value]]),y(" selectMembership "),b(c(D,{type:"create",member:d(i),familiares:N.value,title:d(h).text,inputs:d(z),memberships:d(oe),notes:d(Y),onChangeStep:M,onReturnData:E},null,8,["member","familiares","title","inputs","memberships","notes"]),[[S,4==s.value]]),y(" paymentMethod "),5==s.value?(o(),p(V,{key:0,type:"create",title:d(h).text,member:d(i),familiares:N.value,inputs:d(z),"member-membership":I.value,"family-membership":q.value,onChangeStep:M,onReturnData:G},null,8,["title","member","familiares","inputs","member-membership","family-membership"])):y("v-if",!0)]),c("div",ht,[(o(!0),p(v,null,f(d(j),((e,t)=>(o(),p(T,{key:t,active:e.step<=s.value,step:e.step,text:e.text},null,8,["active","step","text"])))),128))])])])),_:1})}}});export default _t;
