import{_ as e}from"./V-Card.vue_vue&type=script&setup=true&lang.a508baf8.js";import{_ as t}from"./V-Avatar.vue_vue&type=script&setup=true&lang.acbf948e.js";import{_ as l}from"./V-Control.b36667bf.js";import{_ as a}from"./V-PlaceholderPage.vue_vue&type=script&setup=true&lang.814e506a.js";import{_ as s}from"./V-Button.vue_vue&type=script&setup=true&lang.a97a12f7.js";import{r as n,b as o,d as u,A as c,o as r,h as i,k as d,E as p,K as m,j as v,a4 as f,B as y,H as _,J as h,N as b,O as g,w as x,L as k,G as j,R as C,S as w,X as S,Q as P,z as V,D as $,a8 as T}from"./vendor.e3a29b40.js";import{A as E,a as A,P as R,F as U}from"./index.ea4dc01e.js";import{n as z,m as B}from"./Mixin.ee770f22.js";import{_ as D}from"./V-Tag.vue_vue&type=script&setup=true&lang.eb96c098.js";import{_ as L}from"./V-Field.vue_vue&type=script&setup=true&lang.189c1bf7.js";import{_ as q}from"./V-Modal.vue_vue&type=script&setup=true&lang.5145729d.js";import{_ as O}from"./V-Placeload.9d0101ab.js";import{_ as I}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.5cc46d8b.js";import{_ as M,a as F}from"./search-4-dark.fb3880a5.js";import{p as N}from"./sidebarLayoutState.436b738a.js";import{g as H,i as G}from"./Inventory.2515a52f.js";import{g as J,a as K,p as Q,d as W}from"./Products.50dfc48a.js";import"./moment.08a7f518.js";import"./notyf.es.f84e4201.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.a2170d68.js";import"./useDropdown.dfad556c.js";import"./V-Dropdown.7404a3e2.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.1a89ef3a.js";import"./activePanelState.5a49edcb.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.8482ace6.js";import"./V-Message.vue_vue&type=script&setup=true&lang.f3abd056.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.b59ccca7.js";import"./navbarLayoutState.0d75d701.js";import"./video.674f0486.js";import"./darkModeState.a53f3c67.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.2f79059e.js";import"./AnimatedLogo.e43df3fc.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.5e6c3f74.js";import"./V-Block.vue_vue&type=script&setup=true&lang.f5251e79.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.16aa198e.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.c5504f9b.js";const X=n([]),Y=n(!1),Z=e=>{-1==X.value.findIndex((t=>t.product_id==e.id))?X.value.push({product_id:e.id,count:1,products_amount:e.price,name:e.name}):X.value.find((t=>t.product_id==e.id)).count++},ee=o((()=>{let e=0;return X.value.forEach((t=>{e+=t.products_amount*t.count})),e})),te=o((()=>ee.value/100*7)),le=o((()=>ee.value+te.value)),ae=(e,t,l)=>{"minus"==e?(t.count>0&&t.count--,0==t.count&&X.value.splice(l,1)):t.count++},se=n(0),ne=o((()=>{const e=se.value-le.value;return e>0?e:0})),oe=e=>{console.log(e),se.value+=e},ue=n(null),ce=n({email:null,phone:null,barcode:null}),re=()=>{const e={total:le.value,tax_id:1,payment_type_id:ue.value,email:ce.value.email,phone:ce.value.phone,barcode:ce.value.barcode,change_back:ne.value,products:X.value};ve(e).then((e=>{console.log(e.data),1==ue.value&&(ue.value=null,ce.value.email=null,ce.value.phone=null,ce.value.barcode=null,se.value=0,X.value=[],pe.value=3,ie.value=!1),3==ue.value&&(me.value=e.data.order),me.value=e.data.order,z.success("Success")})).catch((e=>{z.error(e.response.data.message)}))},ie=n(!1),de=n(!1),pe=n(1),me=n(null),ve=async e=>await E.post("orders",e),fe=n(""),ye=async()=>{const e=await E.get(`orders/send_receipt/${me.value}`,{params:{type:fe.value}});return z.success("Send"),pe.value=1,e},_e={class:"card-grid-item-content"},he={class:"dark-inverted text-center"},be={class:"title is-6"},ge={class:"title is-3"},xe={key:0,class:"is-7 title"},ke={key:1,class:"is-7 title"},je={class:"card-grid-item-footer"},Ce=_(" ADD ");var we=u({expose:[],props:{product:{type:Object,default:{}}},setup:e=>(y(),c((()=>{})),(t,l)=>{const a=s;return r(),i("a",{href:"#",onClick:l[2]||(l[2]=f((t=>p(Z)(e.product)),["prevent"])),class:"card-grid-item"},[d("img",{src:`${p(A)}storage/${e.product.photo}`,alt:"",onErrorOnce:l[1]||(l[1]=e=>e.target.src="https://via.placeholder.com/400x300")},null,40,["src"]),d("div",_e,[d("h3",he,[d("h2",be,m(e.product.name),1),d("h2",ge,m(p(B)(e.product.price)),1),e.product.stock?(r(),i("p",xe," Stock: "+m(e.product.stock.current_stock),1)):(r(),i("p",ke,"Stock: 0"))])]),d("div",je,[d(a,{color:"white",class:"w-100 justify-content-center"},{default:v((()=>[Ce])),_:1})])])})});const Se={class:"table is-striped is-fullwidth"},Pe=d("thead",null,[d("tr",null,[d("th",{scope:"col"},"Description"),d("th",{scope:"col"},"Cuantity"),d("th",{scope:"col"},"Value")])],-1),Ve={class:"d-flex"},$e={class:""},Te=d("hr",null,null,-1),Ee={class:"table is-striped is-fullwidth"},Ae=d("td",null,"SubTotal",-1),Re={class:"text-right"},Ue=d("td",null,"Tax",-1),ze={class:"text-right"},Be=d("td",null,[d("b",null,"Total")],-1),De={class:"text-right"},Le=_(" Checkout ");var qe=u({expose:[],props:{},emits:["proccessCheckout"],setup:(t,{emit:l})=>(y(),c((()=>{})),(t,l)=>{const a=D,n=s,o=e;return r(),i(o,{class:"d-flex flex-column justify-content-between",style:{"min-height":"500px"}},{default:v((()=>[d("div",null,[h(t.$slots,"default"),d("table",Se,[Pe,d("tbody",null,[(r(!0),i(b,null,g(p(X),((e,t)=>(r(),i("tr",{key:`cart-${t}`},[d("td",null,m(e.name),1),d("td",null,[d("div",Ve,[d(a,{color:"white",onClick:l=>p(ae)("minus",e,t),label:"-"},null,8,["onClick"]),d(a,{color:"white",label:e.count},null,8,["label"]),d(a,{color:"white",onClick:l=>p(ae)("plus",e,t),label:"+"},null,8,["onClick"])])]),d("td",null,m(p(B)(e.products_amount*e.count)),1)])))),128))])])]),d("div",$e,[Te,d("table",Ee,[d("tbody",null,[d("tr",null,[Ae,d("td",Re,m(p(B)(p(ee))),1)]),d("tr",null,[Ue,d("td",ze,m(p(B)(p(te))),1)]),d("tr",null,[Be,d("td",De,m(p(B)(p(le))),1)])])]),d(n,{color:"success",disabled:0==p(X).length,onClick:l[1]||(l[1]=e=>t.$emit("proccessCheckout")),class:"w-100 justify-content-center"},{default:v((()=>[Le])),_:1},8,["disabled"])])])),_:3})})});const Oe=d("div",{id:"payment-element"},null,-1),Ie=_(" Pay now "),Me=d("div",{id:"payment-message",class:"hidden"},null,-1);var Fe=u({expose:[],props:{amount:{type:Number,required:!0},order_id:{type:Number,required:!0}},setup(t){const l=t,a=Stripe(R.value);x((()=>l.id),(e=>{console.log("cambio"),u.value=!0,y()}));const u=n(!0);n({id:l.id,amount:l.amount});const p=n(),m=o((()=>(console.log(l.order_id),{id:l.order_id,amount:l.amount,payment_type_id:1}))),y=async()=>{let e=await E.post(`orders/paymentStripeProduct/${l.order_id}`,m.value).then((e=>{p.value=a.elements({clientSecret:e.data.clientSecret,appearance:{theme:"night",rules:{".Input":{boxShadow:"none"}}}});p.value.create("payment").mount("#payment-element")})).catch((e=>{}));return u.value=!1,e},_=async e=>{e.preventDefault();const{error:t}=await a.confirmPayment({elements:p.value,confirmParams:{return_url:`${U.value}store?id=`+l.order_id}});"card_error"===t.type||"validation_error"===t.type?console.log(t.message):console.log("An unexpected error occured.")};return c((()=>{y()})),(t,l)=>{const a=O,n=s,o=e;return r(),i(b,null,[u.value?(r(),i(a,{key:0,height:"500px"})):k("",!0),j(d(o,{class:"mt-6"},{default:v((()=>[d("form",{onSubmit:f(_,["prevent"]),id:"payment-form"},[Oe,d(n,{id:"submit",class:"mt-4",color:"success"},{default:v((()=>[Ie])),_:1}),Me],40,["onSubmit"])])),_:1},512),[[C,!u.value]])],64)}}});const Ne={class:"table is-striped is-fullwidth"},He=d("td",null,[d("p",{class:"title is-4"},[d("b",null,"Total")])],-1),Ge={class:"text-right"},Je={class:"title is-4"},Ke=_(" Card "),Qe=_(" Cash "),We={class:"d-flex mb-4 justify-content-between"},Xe={class:"title is-5"},Ye=_(" Total: "),Ze={class:"title is-5"},et=_(" Cash Total: "),tt={class:"\n            d-flex\n            justify-content-center\n            align-items-center\n            flex-column\n            mb-4\n          "},lt=d("p",{class:"title is-5 mb-4"},"Change Back:",-1),at={class:"title is-3 mb-0"},st={class:"d-flex justify-content-center flex-wrap mb-4"},nt=d("div",{class:"w-100"},null,-1),ot={class:"d-flex justify-content-center"},ut=_("Reset"),ct=_("Confirm");var rt=u({expose:[],props:{},emits:["proccessCheckout"],setup(t,{emit:a}){y(),c((()=>{}));const n=()=>{de.value=!0,ue.value=3,re()};return x((()=>me.value),(e=>{console.log("acambio")})),(t,a)=>{const o=l,u=L,c=s,f=q,y=Fe,x=e;return r(),i(x,{class:"d-flex flex-column justify-content-between",style:{"min-height":"500px"}},{default:v((()=>[d("div",null,[h(t.$slots,"default"),d("table",Ne,[d("tbody",null,[d("tr",null,[He,d("td",Ge,[d("p",Je,m(p(B)(p(le))),1)])])])]),d(u,null,{default:v((()=>[d(o,null,{default:v((()=>[j(d("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>p(ce).email=e),class:"input",placeholder:"Email"},null,512),[[w,p(ce).email]])])),_:1})])),_:1}),d(u,null,{default:v((()=>[d(o,null,{default:v((()=>[j(d("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>p(ce).phone=e),class:"input",placeholder:"Phone"},null,512),[[w,p(ce).phone]])])),_:1})])),_:1}),d(u,null,{default:v((()=>[d(o,null,{default:v((()=>[j(d("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>p(ce).barcode=e),class:"input",placeholder:"Barcode"},null,512),[[w,p(ce).barcode]])])),_:1})])),_:1})]),d("div",null,[d(c,{color:"success",disabled:0==p(X).length,onClick:n,class:"w-100 justify-content-center mb-4"},{default:v((()=>[Ke])),_:1},8,["disabled"]),d(c,{color:"warning",disabled:0==p(X).length,onClick:a[4]||(a[4]=e=>{ue.value=1,ie.value=!0,p(re)}),class:"w-100 justify-content-center mb-4"},{default:v((()=>[Qe])),_:1},8,["disabled"])]),d(f,{open:p(ie),actions:"center",onClose:a[8]||(a[8]=e=>ie.value=!1)},{content:v((()=>[d("div",We,[d("p",Xe,[Ye,d("b",null,m(p(B)(p(le))),1)]),d("p",Ze,[et,d("b",null,m(p(B)(p(se))),1)])]),d("div",tt,[lt,d("p",at,[d("b",null,m(p(B)(p(ne))),1)])]),d("div",st,[d(c,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:a[5]||(a[5]=e=>se.value=p(le))},{default:v((()=>[_(" Full Payment "+m(p(B)(p(le))),1)])),_:1}),nt,(r(),i(b,null,g([5,10,20,50,100],((e,t)=>d(c,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>p(oe)(e)},{default:v((()=>[_(" $"+m(e),1)])),_:2},1032,["onClick"]))),64))]),d("div",ot,[d(u,null,{default:v((()=>[d(o,null,{default:v((()=>[j(d("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>S(se)?se.value=e:null),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[w,p(se)]])])),_:1})])),_:1})])])),action:v((()=>[d(c,{color:"",onClick:a[7]||(a[7]=e=>se.value=0),class:"d-flex justify-content-center",raised:""},{default:v((()=>[ut])),_:1}),d(c,{color:"success",onClick:p(re),disabled:p(le)>p(se),class:"d-flex justify-content-center",raised:""},{default:v((()=>[ct])),_:1},8,["onClick","disabled"])])),_:1},8,["open"]),d(f,{open:p(de),actions:"center",onClose:a[9]||(a[9]=e=>de.value=!1)},{content:v((()=>[p(me)?(r(),i(y,{key:0,amount:p(le),order_id:p(me)},null,8,["amount","order_id"])):k("",!0)])),action:v((()=>[])),_:1},8,["open"])])),_:3})}}});const it=d("h1",{class:"title is-5 text-center"},"PURCHASE COMPLETE!",-1),dt={class:"select"},pt=d("option",{value:""},"Select data",-1),mt=d("option",{value:"email"},"Email",-1),vt=d("option",{value:"phone"},"Phone",-1),ft=d("option",{value:"barcode"},"Barcode",-1),yt=_(" Send Receipt "),_t={class:""},ht=_(" Complete ");var bt=u({expose:[],props:{},emits:["proccessCheckout"],setup:(t,{emit:a})=>(y(),c((()=>{})),(t,a)=>{const n=l,o=L,u=s,c=e;return r(),i(c,{class:"d-flex flex-column justify-content-between",style:{"min-height":"500px"}},{default:v((()=>[d("div",null,[h(t.$slots,"default"),it,d(o,null,{default:v((()=>[d(n,null,{default:v((()=>[d("div",dt,[j(d("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>S(fe)?fe.value=e:null)},[pt,mt,vt,ft],512),[[P,p(fe)]])])])),_:1})])),_:1}),d(u,{color:"success",class:"mx-auto text-center d-block",onClick:p(ye)},{default:v((()=>[yt])),_:1},8,["onClick"])]),d("div",_t,[d(u,{color:"success",onClick:a[2]||(a[2]=e=>pe.value=1),class:"w-100 justify-content-center"},{default:v((()=>[ht])),_:1})])])),_:3})})});const gt={style:{"min-height":"400px"}},xt={class:"d-flex justify-content-between mb-4"},kt=d("h3",{class:"title is-5 mb-2"},"Order",-1),jt={class:"d-flex justify-content-between mb-4"},Ct=d("h3",{class:"title is-5 mb-2"},"Order",-1);var wt=u({expose:[],props:{},setup(t){y(),c((()=>{}));const l=n([{step:1,name:"Shopping",icon:"fa-shopping-cart"},{step:2,name:"Receipt",icon:"fa-money-check"},{step:3,name:"Receipt",icon:"fa-receipt"}]);return(t,a)=>{const s=e,n=D,o=qe,u=rt,c=bt;return r(),i("div",gt,[d(s,{class:"mb-4 d-flex justify-content-around"},{default:v((()=>[(r(!0),i(b,null,g(l.value,((e,t)=>(r(),i("p",{key:`sterpmenu-${t}`,style:{"font-size":"20px"},title:e.name,class:e.step==p(pe)?"text-primary":"",onClick:t=>pe.value=e.step},[d("i",{class:["fas",e.icon],"aria-hidden":"true"},null,2)],10,["title","onClick"])))),128))])),_:1}),1==p(pe)?(r(),i(o,{key:0,onProccessCheckout:a[1]||(a[1]=e=>pe.value=2)},{default:v((()=>[d("div",xt,[kt,p(X)?(r(),i(n,{key:0,color:"info",label:`${p(X).length} products`,rounded:"",elevated:""},null,8,["label"])):k("",!0)])])),_:1})):k("",!0),2==p(pe)?(r(),i(u,{key:1},{default:v((()=>[d("div",jt,[Ct,p(X)?(r(),i(n,{key:0,color:"info",label:`${p(X).length} products`,rounded:"",elevated:""},null,8,["label"])):k("",!0)])])),_:1})):k("",!0),3==p(pe)?(r(),i(c,{key:2})):k("",!0)])}}});const St={key:0,class:"page-content-inner columns is-multiline"},Pt={class:"column is-8"},Vt={class:"card-grid-toolbar"},$t={key:0,class:"columns is-multiline w-100"},Tt=d("p",null,"View All",-1),Et={class:"card-grid card-grid-v4"},At=d("img",{class:"light-image",src:M,alt:""},null,-1),Rt=d("img",{class:"dark-image",src:F,alt:""},null,-1),Ut={class:"column is-4 card_counte"},zt={key:1},Bt=d("h3",{class:"title is-5 mb-2"},"Sorry",-1),Dt=d("p",null,"Sale not available: an inventory is open",-1);var Lt=u({expose:[],setup(s){N.value="Store",V({title:"Store"});const u=y(),f=$();c((()=>{null!=u.query.payment_intent_client_secret&&"succeeded"==u.query.redirect_status&&(async e=>await E.post("orders/activate",{payment_intent_client_secret:e}))(u.query.payment_intent_client_secret).then((e=>{z.success("Payment"),f.replace({query:{}})})),H().then((e=>{G.value.length>0&&(1==G.value[0].status?Y.value=!0:Y.value=!1)})),J().then((e=>{console.log(e.data)})),K().then((e=>{console.log(e.data)}))}));const _=n("");n(null);const h=o((()=>_.value?Q.value.filter((e=>e.name.match(new RegExp(_.value,"i"))||e.category.name.match(new RegExp(_.value,"i"))||e.product_categories_id==_.value||e.vard_code==_.value)):Q.value));return n(0),(s,n)=>{const o=e,u=t,c=l,f=a,y=we,x=wt,C=I;return r(),i(C,null,{default:v((()=>[p(Y)?(r(),i("div",zt,[d(o,{radius:"large",color:"danger"},{default:v((()=>[Bt,Dt])),_:1})])):(r(),i("div",St,[d("div",Pt,[d("div",Vt,[p(W)?(r(),i("div",$t,[d(o,{onClick:n[1]||(n[1]=e=>_.value=""),class:"\n                column\n                is-2\n                d-flex\n                flex-column\n                align-items-center\n                justify-content-center\n                text-center\n                cursor-pointer\n              "},{default:v((()=>[Tt])),_:1}),(r(!0),i(b,null,g(p(W),((e,t)=>(r(),i(o,{onClick:t=>_.value=e.id,key:`categorie-${t}`,class:"\n                column\n                is-2\n                d-flex\n                flex-column\n                align-items-center\n                justify-content-center\n                text-center\n                cursor-pointer\n              "},{default:v((()=>[d(u,{size:"medium",picture:`${p(A)}storage/${e.image}`},null,8,["picture"]),d("p",null,m(e.name),1)])),_:2},1032,["onClick"])))),128))])):k("",!0),d(c,{icon:"feather:search"},{default:v((()=>[j(d("input",{"onUpdate:modelValue":n[2]||(n[2]=e=>_.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[w,_.value]])])),_:1})]),d("div",Et,[d(f,{class:[0!==p(h).length&&"is-hidden"],title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n              search terms you've entered. Please try different search terms or\n              criteria.",larger:""},{image:v((()=>[At,Rt])),_:1},8,["class"]),d(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:v((()=>[(r(!0),i(b,null,g(p(h),(e=>(r(),i("div",{key:e.id,class:"column is-3"},[d(y,{product:e},null,8,["product"])])))),128))])),_:1})])]),d("div",Ut,[d(x)])]))])),_:1})}}});export default Lt;
