import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.19e0de69.js";import{_ as t}from"./V-Control.46cc2837.js";import{_ as a}from"./V-Field.vue_vue&type=script&setup=true&lang.5cab5a8d.js";import{_ as s}from"./inputsLayaut.vue_vue&type=style&index=0&lang.db4f1fa3.js";import{_ as l}from"./formLayaut.vue_vue&type=style&index=0&lang.2ed213c2.js";import{p as n,h as u,g as i,s as r,v as o,m as p,b as c,P as m,A as d,n as v,a as y,e as f}from"./index.b05546b7.js";import{D as b,q as h,c as _,E as g,F as x,G as S,b as j,H as k,e as C,I as M,k as A,s as P,J as w,K as D,L as V,M as N,N as $,O as I,y as O,P as q,Q as E,R as F}from"./Members.43765420.js";import{d as T,r as R,w as J,b as z,o as B,h as L,j as U,k as G,D as Q,Q as K,R as H,J as Y,S as W,Y as X,E as Z,y as ee,z as te,F as ae,G as se,U as le,a8 as ne,K as ue,A as ie,B as re,L as oe}from"./vendor.d0c8bc4f.js";import{_ as pe}from"./V-Card.vue_vue&type=script&setup=true&lang.3e73d9de.js";import{_ as ce}from"./V-Placeload.ba28fd33.js";import{_ as me}from"./V-Loader.vue_vue&type=script&setup=true&lang.ee9a9239.js";import{_ as de}from"./V-Modal.vue_vue&type=script&setup=true&lang.b53d2d79.js";import{c as ve}from"./Companies.b2984950.js";import{_ as ye}from"./signComponent.vue_vue&type=script&setup=true&lang.74eaf2a5.js";import{_ as fe}from"./V-Progress.vue_vue&type=script&setup=true&lang.f55ee5e7.js";import{_ as be}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.267057e2.js";import{a as he,m as _e}from"./Memberships.26298c73.js";import{g as ge}from"./Recurrences.1e98b530.js";import{g as xe}from"./Discounts.8b9eef4b.js";import{e as Se,c as je,s as ke,d as Ce}from"./config.66922fd2.js";import{h as Me}from"./Staffs.a1bc2e13.js";import{p as Ae}from"./sidebarLayoutState.24ad74be.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.438fd8f7.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.3464e18c.js";import"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.6ebe6131.js";import"./pdf_icon.d44191be.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.c35d3d66.js";import"./useDropdown.6d34f9a4.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.e8b89c92.js";import"./V-Dropdown.7e196bf4.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.84f721dd.js";import"./activePanelState.b9e0947e.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.180e4c8b.js";import"./V-Tag.vue_vue&type=script&setup=true&lang.39ace96b.js";import"./V-Message.vue_vue&type=script&setup=true&lang.9d01539d.js";import"./V-Tabs.vue_vue&type=script&setup=true&lang.12102989.js";import"./navbarLayoutState.cc0c2812.js";import"./video.6d0592c0.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.bd4b68fd.js";import"./darkModeState.2cf6bce9.js";import"./AnimatedLogo.7babd236.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.e23c671a.js";import"./V-Block.vue_vue&type=script&setup=true&lang.e2962b14.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.67afcfe6.js";import"./userPopovers.f4b9fc60.js";import"./Toolbar.vue_vue&type=script&setup=true&lang.ff5e9d07.js";var Pe=T({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e,i=R(!1);J((()=>a.inputs),((e,t)=>{r()}));const r=()=>{i.value=!0,setTimeout((()=>{i.value=!1}),500)},o=z((()=>p.value?a.inputs.filter((e=>e.typeMember.includes("Company"))):a.inputs.filter((e=>e.typeMember.includes("Individual"))))),p=R(!1),c=e=>{p.value=!e.input.model,r()},m=e=>{let a=n(o.value);u.value||(a.select_type=a.select_type?"Company":"Individual",b.value=a,t("returData",a),t("changeStep",e))};return(t,a)=>{const n=s,u=l;return B(),L(u,{titles:{title:e.title},"is-loading":i.value,buttons:["next","back"],step:1,onChangeStep:m},{default:U((()=>[G(n,{"inputs-step":Q(o),onChangeSwitch:c},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}}),we=T({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(e,{emit:t}){const a=e=>{t("changeStep",e)};return(t,n)=>{const u=s,i=l;return B(),L(i,{titles:{title:e.title},buttons:["next","prev"],step:2,onChangeStep:a},{default:U((()=>[G(u,{"inputs-step":Q(h)},null,8,["inputs-step"])])),_:1},8,["titles"])}}});const De={key:0},Ve=Z(" Remove Family Member "),Ne={key:1,class:"column d-flex justify-content-center flex-column is-4 mx-auto"},$e=Z(" Add Another Family Member ");var Ie=T({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(n,{emit:u}){const p=n,c=R(!1);J((()=>p.inputs),((e,t)=>{m()}));const m=()=>{c.value=!0,setTimeout((()=>{c.value=!1}),500)},d=R([]);z((()=>(m(),d.value.forEach(((e,t)=>{y.value.includes(t)?d.value[t]=e.filter((e=>e.category.includes("Minor"))):d.value[t]=JSON.parse(JSON.stringify(p.inputs))})),d.value)));const v=e=>{u("returData",d),u("changeStep",e)},y=R([]),f=z((()=>d.value.length>0)),b=R(0),h=()=>{if(b.value>0)for(var e=0;e<b.value;++e){const e=ee(JSON.parse(JSON.stringify(p.inputs)));i(e,"misma_direccion").change=S,i(e,"category").change=g,d.value.push(e)}},g=function(e){console.log(e),e.forEach((e=>{this.model?e.category.includes("Adult")&&(e.typeInput=e.typeInputDefault):e.category.includes("Minor")||(e.typeInput="hidden")})),this.model||(x(e),r(e,"email",`family_${te().format("hms")}_${o(_.value,"email")}`),r(e,"phone",o(_.value,"phone"))),console.log(this.model)},x=e=>{r(e,"address",o(_.value,"address")),r(e,"postal_code",o(_.value,"postal_code")),r(e,"country_id",o(_.value,"country_id")),r(e,"city_id",o(_.value,"city_id")),r(e,"state_id",o(_.value,"state_id"))},S=function(e){console.log("llejay"),this.model?(r(e,"postal_code",""),r(e,"country_id",""),r(e,"city_id",""),r(e,"state_id","")):x(e)};return(u,i)=>{const r=s,o=e,p=pe,m=t,_=a,g=l;return B(),L(g,{titles:{title:n.title},"is-loading":c.value,buttons:["next","prev"],step:2,onChangeStep:v},{default:U((()=>[Q(f)?(B(),L("div",De,[(B(!0),L(K,null,H(d.value,((e,t)=>(B(),L(p,{key:t,class:"mb-4"},{default:U((()=>[G(r,{"inputs-step":e,onChangeSwitch:e=>{return a=t,void y.value.findIndex((e=>e==a));var a}},null,8,["inputs-step","onChangeSwitch"]),G(o,{onClick:e=>d.value.splice(t,1),color:"danger",class:"mx-auto",icon:"fas fa-times"},{default:U((()=>[Ve])),_:2},1032,["onClick"])])),_:2},1024)))),128))])):Y("",!0),Q(f)?Y("",!0):(B(),L("div",Ne,[G(_,{class:"mb-4"},{default:U((()=>[G(m,null,{default:U((()=>[W(G("input",{type:"number","onUpdate:modelValue":i[1]||(i[1]=e=>b.value=e),class:"input text-center",placeholder:"Family quantity"},null,512),[[X,b.value]])])),_:1})])),_:1}),G(o,{onClick:h,color:"info",icon:"fas fa-check",raised:""},{default:U((()=>[$e])),_:1})]))])),_:1},8,["titles","is-loading"])}}}),Oe=T({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep"],setup(e,{emit:t}){const a=e,n=R(!1);J((()=>a.inputs),((e,t)=>{i()}));const u=e=>{let a=[];r.value.forEach((e=>{e.values.forEach((e=>{let t=e.values.find((e=>"sms"==e.name)).model.length,s=e.values.find((e=>"email"==e.name)).model.length;a.push({[e.name]:e.value,sms:t>0,email:s>0})}))})),g.value=a,t("returnData",a),t("changeStep",e)},i=()=>{n.value=!0,setTimeout((()=>{n.value=!1}),500)},r=z((()=>a.inputs)),o=R(!1),p=e=>{o.value=!e.input.model,i()};return(t,a)=>{const i=s,o=l;return B(),L(o,{titles:{title:e.title},"is-loading":n.value,buttons:["next","prev"],step:3,onChangeStep:u},{default:U((()=>[G(i,{"inputs-step":Q(r),onChangeSwitch:p},null,8,["inputs-step"])])),_:1},8,["titles","is-loading"])}}});const qe={class:""};var Ee=T({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberships:{type:Array,default:[]},notes:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(e,{emit:t}){const a=e,n=R(!1),r=R([]);J((()=>a.inputs),((e,t)=>{p()}));const p=()=>{n.value=!0,setTimeout((()=>{n.value=!1}),500)},c=e=>{let a=null;x.forEach(((e,t)=>{0==t?a=e.inputs:r.value.push(e)})),u.value||(S.value=a,t("returnData",{memberMembership:a,familyMembership:r}),t("changeStep",e))},m=z((()=>{const e=ee([]);x.value=[];let t=[];j.forEach((e=>{t.push(JSON.parse(JSON.stringify(e)))})),e.push(d(a.member,JSON.parse(JSON.stringify(t))));for(var s=0;s<a.familiares.length;++s)e.push(d(a.familiares[s],JSON.parse(JSON.stringify(t))));return x.value=e,e})),d=(e,t,a)=>{const s={member:null,membresia:null};return"Prospect"==k.value?(i(t,"recurrence").model=!1,i(t,"recurrence").display=!1,i(t,"is_initiation_fee").model=!0,i(t,"is_card_price").model=!0):(i(t,"recurrence").model=!0,i(t,"recurrence").display=!0,i(t,"is_initiation_fee").model=!1,i(t,"is_card_price").model=!1),s.member=e,s.membresia=t,C(s.membresia,s.member),s};return(t,a)=>{const u=s,i=pe,r=l;return B(),L(r,{titles:{title:e.title},isloading:n.value,buttons:["next","prev"],step:4,onChangeStep:c},{default:U((()=>[(B(!0),L(K,null,H(Q(m),((e,t)=>(B(),L(i,{key:`ss${t}`,class:"mb-4"},{default:U((()=>[G("p",qe,[G("b",null,ae(Q(o)(e.member,"name"))+" "+ae(Q(o)(e.member,"second_name"))+" "+ae(Q(o)(e.member,"last_name")),1)]),G(u,{"inputs-step":e.membresia},null,8,["inputs-step"])])),_:2},1024)))),128)),G(i,{class:"mb-4"},{default:U((()=>[G(u,{"inputs-step":e.notes},null,8,["inputs-step"])])),_:1})])),_:1},8,["titles","isloading"])}}});const Fe=G("p",{class:"title is-3"},[G("i",{class:"fas fa-money-bill","aria-hidden":"true"})],-1),Te=G("p",{class:"title is-5"},"Cash",-1),Re={class:"d-flex mb-4 justify-content-between"},Je={class:"title is-5"},ze=Z(" Total: "),Be={class:"title is-5"},Le=Z(" Cash Total: "),Ue={class:"\n          d-flex\n          justify-content-center\n          align-items-center\n          flex-column\n          mb-4\n        "},Ge=G("p",{class:"title is-5 mb-4"},"Change Back:",-1),Qe={class:"title is-3 mb-0"},Ke={class:"d-flex justify-content-center flex-wrap mb-4"},He=G("div",{class:"w-100"},null,-1),Ye={class:"d-flex justify-content-center"},We=Z("Reset"),Xe=Z("Confirm");var Ze=T({expose:[],props:{total:{type:[Number,String],default:0}},emits:["onPaymentCash"],setup(s,{emit:l}){const n=s,u=R(!1),i=R(0),r=z((()=>{const e=parseFloat(i.value)-parseFloat(n.total/100);return e>0?e:0})),o=()=>{u.value=!1,l("onPaymentCash",{changeBack:r.value,cash:i.value})};return(l,n)=>{const c=pe,m=e,d=t,v=a,y=de;return B(),L(K,null,[G(c,{color:"warning",class:"mx-2 btn-card w-100 justify-content-center column is-4",onClick:n[1]||(n[1]=e=>u.value=!0)},{default:U((()=>[Fe,Te])),_:1}),G(y,{title:"",open:u.value,actions:"center",onClose:n[5]||(n[5]=e=>u.value=!1)},{content:U((()=>[G("div",Re,[G("p",Je,[ze,G("b",null,ae(Q(p)(s.total/100)),1)]),G("p",Be,[Le,G("b",null,ae(Q(p)(i.value)),1)])]),G("div",Ue,[Ge,G("p",Qe,[G("b",null,ae(Q(p)(Q(r))),1)])]),G("div",Ke,[G(m,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:n[2]||(n[2]=e=>i.value=s.total/100)},{default:U((()=>[Z(" Full Payment "+ae(Q(p)(s.total/100)),1)])),_:1}),He,(B(),L(K,null,H([5,10,20,50,100],((e,t)=>G(m,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>(e=>{i.value=parseFloat(i.value)+parseFloat(e)})(e)},{default:U((()=>[Z(" $"+ae(e),1)])),_:2},1032,["onClick"]))),64))]),G("div",Ye,[G(v,null,{default:U((()=>[G(d,null,{default:U((()=>[W(G("input",{"onUpdate:modelValue":n[3]||(n[3]=e=>i.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[X,i.value]])])),_:1})])),_:1})])])),action:U((()=>[G(m,{onClick:n[4]||(n[4]=e=>i.value=0),class:"d-flex justify-content-center",raised:""},{default:U((()=>[We])),_:1}),G(m,{color:"success",onClick:o,disabled:s.total/100>i.value,class:"d-flex justify-content-center",raised:""},{default:U((()=>[Xe])),_:1},8,["disabled"])])),_:1},8,["open"])],64)}}});const et={class:"d-flex justify-content-between align-items-start"},tt=G("div",null,[G("p",{class:"title is-3"},[G("i",{class:"fas fa-receipt",style:{color:"white !important"},"aria-hidden":"true"})]),G("p",{class:"title is-5",style:{color:"white !important"}},"View Order")],-1),at={key:0,class:"title is-6"},st=G("i",{class:"fas fa-check","aria-hidden":"true"},null,-1);var lt=T({expose:[],props:{membership_member:{type:[Number,String],default:0}},setup(e){const t=e,a=R(!1);return se((()=>{})),(e,s)=>{const l=pe,n=de;return B(),L(K,null,[G(l,{style:{background:"#388e3c"},class:"mx-2 mx-auto mt-4 is-4 column btn-card justify-content-center",onClick:s[1]||(s[1]=e=>a.value=!0)},{default:U((()=>[G("div",et,[tt,e.openModalRecibo?(B(),L("p",at,[st])):Y("",!0)])])),_:1}),G(n,{title:"",open:a.value,actions:"center",onClose:s[2]||(s[2]=e=>a.value=!1)},{content:U((()=>[G("iframe",{src:`${Q(c)}ticket_membership/${t.membership_member}?companie_id=${Q(ve).id}`,width:"100%",height:"500px",frameborder:"0"},null,8,["src"]),G("a",{href:`${Q(c)}/ticket_membership/${t.membership_member}?companie_id=${Q(ve).id}`},"Open",8,["href"])])),action:U((()=>[])),_:1},8,["open"])],64)}}});const nt=G("div",{id:"payment-element"},null,-1),ut=Z("Pay now "),it=G("div",{id:"payment-message",class:"hidden"},null,-1);var rt=T({expose:[],props:{amount:{type:[Number,String],required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0},variosMiembros:{type:Boolean,default:!1},miembros:{type:Array,default:[]}},emits:["PaymentAction"],setup(t,{emit:a}){const s=t,l=Stripe(m.value);J((()=>s.id),(e=>{n.value=!0,y()}));const n=R(!0);R({id:s.id,amount:s.amount});const u=R(),i=z((()=>"stripe"!=s.url?{payment_type_id:3,amount:s.amount}:{id:s.id,member_mermship_id:s.member_membership,amount:s.amount,payment_type_id:1}));R(null);const r=R(null),o=R(null),p=R(!1),c=R(null),y=async()=>{let e=await d.post(s.url,i.value).then((e=>{r.value=e.data.clientSecret,c.value=e.data.user_id,u.value=l.elements({clientSecret:r.value,appearance:{theme:"night",rules:{".Input":{boxShadow:"none"}}}}),o.value=u.value.create("card",{classes:{base:"base_card"}}),o.value.mount("#payment-element")})).catch((e=>{n.value=!1}));return n.value=!1,e},f=R(null),b=async e=>{e.preventDefault(),p.value=!0;const{setupIntent:t,error:n}=await l.confirmCardSetup(r.value,{payment_method:{card:o.value,billing_details:{name:f.value}}});if(n)p.value=!1,v.error(n.message);else{const{payment_method:e}=t;s.variosMiembros?s.miembros.forEach((t=>{d.post("paymentStripe",{payment_method:e,user_id:t.idMember,membership_member_id:t.idMemberMembership,payment_type_id:3}).catch((e=>{p.value=!1}))})):await d.post("paymentStripe",{payment_method:e,amount:s.amount,user_id:c.value,membership_member_id:s.member_membership,payment_type_id:3}).catch((e=>{p.value=!1})),i.value&&(a("PaymentAction",i),v.success("Success Payment"))}p.value=!1};return se((()=>{p.value=!1,y()})),(t,a)=>{const s=ce,l=e,u=me,i=pe;return B(),L(K,null,[n.value?(B(),L(s,{key:0,height:"200px",class:"mt-6"})):Y("",!0),W(G(i,{class:"mt-6"},{default:U((()=>[G("form",{onSubmit:ne(b,["prevent"]),id:"payment-form"},[W(G("input",{id:"card-holder-name",class:"input mb-3","onUpdate:modelValue":a[1]||(a[1]=e=>f.value=e),placeholder:"Name",type:"text"},null,512),[[X,f.value]]),nt,G(u,{size:"small",active:p.value},{default:U((()=>[G(l,{id:"submit",class:"mt-4",color:"info"},{default:U((()=>[ut])),_:1})])),_:1},8,["active"]),it],40,["onSubmit"])])),_:1},512),[[le,!n.value]])],64)}}});const ot={class:"w-100"},pt={class:"my-4"},ct={key:0},mt=G("small",null,"Register the principal first",-1),dt=Z(" Process Membership "),vt={key:0,class:"columns is-multiline justify-content-center mt-6"},yt={class:"d-flex justify-content-between align-items-start"},ft=G("div",null,[G("p",{class:"title is-3"},[G("i",{class:"fas fa-credit-card","aria-hidden":"true"})]),G("p",{class:"title is-5"},"Debit Automatic")],-1),bt={key:0,class:"title is-6"},ht=G("i",{class:"fas fa-check","aria-hidden":"true"},null,-1),_t={class:"columns is-multiline justify-content-center mt-6"},gt=G("p",{class:"title is-4"},"Payment Success",-1);var xt=T({expose:[],props:{member:{type:Array,required:!0},membresia:{type:Array,required:!0},contact:{type:Array,required:!0},presupuesto_id:{type:String},total:{type:[String,Number],required:!0},categoriesMembers:{type:Object,required:!0},notasInput:{type:Object,required:!0}},emits:["PaymentAction"],setup(t,{emit:a}){const s=t,l=R(null),n=R(!1),u=R(null),r=R(null);se((()=>{n.value=!1,o.value=!1}));const o=R(!1),p=e=>{o.value=!0,a("PaymentAction",e)},c=z((()=>0==i(s.member,"is_family").model)),m=z((()=>!o.value&&!(!c.value&&!M.value))),d=e=>{A(e,r.value).then((e=>{if(e.data.status)v.success("Sign Success");else for(var t in v.error(e.data.mensaje),e.data.errores)e.data.errores[t].forEach((e=>{v.error(`${t} : ${e}`)}))})).catch((e=>{}))},y=e=>{if(l.value=1,r.value){const t={cash:e.cash,payment_type_id:l.value,total:s.total,cash_back:e.changeBack,membership_member_id:r.value};P(r.value,t).then((e=>{console.log(e.data),p(u.value),v.success("Success Payment")})).catch((e=>{console.log(e.response)}))}else v.error("The membership ID is required. Click on Process Membership to generate it automatically")};return(t,a)=>{const v=e,f=me,b=pe,h=Ze,_=lt,g=rt,x=ye;return B(),L("div",ot,[G("div",pt,[G("p",null,ae(Q(i)(s.member,"name").model)+" "+ae(Q(i)(s.member,"last_name").model),1),G("p",null,[G("small",null,ae(Q(c)?"Main member":"Family"),1)]),Q(c)||Q(M)?Y("",!0):(B(),L("p",ct,[mt]))]),G(f,{size:"small",active:n.value},{default:U((()=>[G(v,{color:"success",onClick:a[1]||(a[1]=e=>Q(m)?(l.value=null,n.value=!0,u.value=null,r.value=null,w({member:s.member,contact:s.contact,membresia:s.membresia,total:s.total,categoriesMembers:s.categoriesMembers,notasInput:s.notasInput,presupuesto_id:s.presupuesto_id}).then((e=>{u.value=e.data.id,r.value=e.data.membership_members_id})).catch((e=>{})),void(n.value=!1)):null),style:Q(m)?{}:{opacity:".5"}},{default:U((()=>[dt])),_:1},8,["style"])])),_:1},8,["active"]),u.value&&!o.value?(B(),L("div",vt,[G(b,{color:"info",class:"mx-2 btn-card w-100 column is-4",style:1==l.value?{opacity:"0.4"}:{},onClick:a[2]||(a[2]=e=>l.value=3)},{default:U((()=>[G("div",yt,[ft,3==l.value?(B(),L("p",bt,[ht])):Y("",!0)])])),_:1},8,["style"]),G(h,{total:s.total,onOnPaymentCash:y},null,8,["total"])])):Y("",!0),G("div",_t,[r.value&&o.value?(B(),L(_,{key:0,membership_member:r.value},null,8,["membership_member"])):Y("",!0)]),3!=l.value||o.value?Y("",!0):(B(),L(g,{key:1,amount:s.total,id:u.value,member_membership:r.value,onPaymentAction:a[3]||(a[3]=e=>p(u.value))},null,8,["amount","id","member_membership"])),o.value?(B(),L(b,{key:2,color:"success",class:"my-6"},{default:U((()=>[gt])),_:1})):Y("",!0),o.value?(B(),L(x,{key:3,onOnSign:d,"is-sign":!0,contract:`contract_${u.value}_${r.value}_${Q(i)(s.member,"personal_identifications").model}.pdf`,"url-contract":`generateContract/${u.value}`},null,8,["contract","url-contract"])):Y("",!0)])}}});const St={class:"table is-hoverable is-striped is-fullwidth"},jt=G("thead",null,[G("tr",null,[G("th",{scope:"col"},"Membership Name"),G("th",{scope:"col"},"Plan"),G("th",{scope:"col"},"Quantity"),G("th",{scope:"col"},"Cost"),G("th",{scope:"col"},"Import")])],-1),kt={class:"text-capitalize"},Ct={style:{"text-align":"right"}},Mt={style:{"text-align":"right"}},At={style:{"text-align":"right"}},Pt=G("td",{colspan:"4",style:{"text-align":"right"}},[G("b",null,"Subtotal")],-1),wt={key:0,style:{"text-align":"right"}},Dt={colspan:"4"},Vt={key:0},Nt={key:1},$t={style:{"text-align":"right"}},It=G("td",{colspan:"4",style:{"text-align":"right"}},"Tax 7%",-1),Ot={style:{"text-align":"right"}},qt=G("td",{colspan:"4",style:{"text-align":"right"}},[G("b",null,"Total to pay")],-1),Et={key:1,style:{"text-align":"right"}},Ft=G("td",{colspan:"4",style:{"text-align":"right"}},"Recurring total",-1);var Tt=T({expose:[],props:{presupuesto:{type:Object,required:!0}},setup:e=>(t,a)=>{const s=pe;return e.presupuesto?(B(),L(s,{key:0,class:"mb-4"},{default:U((()=>[G("table",St,[jt,G("tbody",null,[(B(!0),L(K,null,H(e.presupuesto.membresias,((e,t)=>(B(),L("tr",{key:`membresia-${t}`},[G("td",null,ae(e.description),1),G("td",kt,ae(e.type?e.type:"Initiation Fee"),1),G("td",null,ae(e.quantity),1),G("td",Ct,ae(Q(p)(e.amount_subtotal/e.quantity/100)),1),G("td",Mt,ae(Q(p)(e.amount_subtotal/100)),1)])))),128)),G("tr",At,[Pt,G("td",null,ae(Q(p)(e.presupuesto.totales.upfront.amount_subtotal/100)),1)]),e.presupuesto.discount?(B(),L("tr",wt,[G("td",Dt,[Z(ae(e.presupuesto.discount.name)+" ",1),"percentaje"==e.presupuesto.discount.type?(B(),L("span",Vt," ( "+ae(e.presupuesto.discount.value)+"% off ) ",1)):(B(),L("span",Nt," ( $"+ae(e.presupuesto.discount.value)+" off ) ",1))]),G("td",null," - "+ae(Q(p)(e.presupuesto.totales.upfront.total_details.amount_discount/100)),1)])):Y("",!0),G("tr",$t,[It,G("td",null,ae(Q(p)(e.presupuesto.totales.upfront.total_details.amount_tax/100)),1)]),G("tr",Ot,[qt,G("td",null,ae(Q(p)(e.presupuesto.totales.upfront.amount_total/100)),1)]),e.presupuesto.totales.recurring?(B(),L("tr",Et,[Ft,G("td",null,ae(Q(p)(e.presupuesto.totales.recurring.amount_total/100)),1)])):Y("",!0)])]),ue(t.$slots,"default")])),_:3})):Y("",!0)}});const Rt={key:1},Jt={class:"d-flex justify-content-end w-100"},zt={class:"d-flex justify-content-between w-100"},Bt=Z(" Finish "),Lt=Z(" Cancel "),Ut=Z(" Register another member ");var Gt=T({expose:[],props:{type:{type:String,default:"create"},title:{type:String,default:""}},emits:["changeStep","returnData"],setup(t,{emit:a}){R(!1);const s=R(!1),n=z((()=>x.value[0])),u=z((()=>{let e=[];return x.value.forEach(((t,a)=>{a>0&&e.push(t)})),e}));se((()=>{i(D.value,"mismatarjeta").change=r,V.value=[],n.value?(N(n.value.membresia,n.value.member),u.value.length&&u.value.forEach((e=>{N(e.membresia,e.member)}))):(console.error("No tiene membresia"),v.error("Membership is required"))}));const r=function(){this.model},o=(e,t=3,s)=>{a("returnData",{total:s}),a("changeStep",e,t,{})},p=z((()=>{let e=[];return V.value.forEach((t=>{0==i(t.member,"is_family").model&&e.push(t)})),V.value.forEach((t=>{1==i(t.member,"is_family").model&&e.push(t)})),e}));R([]);const c=()=>{window.location.reload()},m=R([]),d=e=>{m.value.push(e)};return(a,n)=>{const u=ce,i=xt,r=Tt,v=e,y=l;return B(),L(y,{titles:{title:t.title},"is-loading":s.value,buttons:["prev"],step:5,onChangeStep:o},{default:U((()=>[Q(V).length?Y("",!0):(B(),L(u,{key:0,height:"300px",class:"mb-4"})),Q(V)?(B(),L("div",Rt,[(B(!0),L(K,null,H(Q(p),((e,t)=>(B(),L(r,{key:`presupuesto-${t}`,class:"mb-4",presupuesto:e},{default:U((()=>[G("div",Jt,[G(i,{member:e.member,membresia:e.membresia,contact:Q(g),presupuesto_id:e.presupuesto_id,"categories-members":Q($),"notas-input":Q(I),total:e.totales.upfront.amount_total,onPaymentAction:d},null,8,["member","membresia","contact","presupuesto_id","categories-members","notas-input","total"])])])),_:2},1032,["presupuesto"])))),128))])):Y("",!0),G("div",zt,[Q(p).length>0&&m.value.length==Q(p).length?(B(),L(v,{key:0,color:"danger",to:{name:"index"}},{default:U((()=>[Bt])),_:1})):(B(),L(v,{key:1,color:"danger",to:{name:"index"}},{default:U((()=>[Lt])),_:1})),Q(p).length>0&&m.value.length==Q(p).length?(B(),L(v,{key:2,color:"success",onClick:c},{default:U((()=>[Ut])),_:1})):Y("",!0)])])),_:1},8,["titles","is-loading"])}}});ie("data-v-915b2888");const Qt={class:"content"},Kt={class:"content-text"};re();var Ht=T({expose:[],props:{active:{type:Boolean,default:!1,required:!0},step:{type:Number,default:0,required:!0},text:{type:String,default:""}},setup(e){const t=e,a=z((()=>t.active?100:0));return(t,s)=>{const l=fe;return B(),L("div",Qt,[G("div",{class:["circle",e.active?"active":""]},null,2),G(l,{class:"progressbar",value:Q(a),size:"smaller"},null,8,["value"]),G("div",Kt,[G("p",null,"STEP "+ae(e.step),1),G("p",null,[G("b",null,ae(e.text),1)])])])}}});Ht.__scopeId="data-v-915b2888";const Yt={class:"columns is-multiline"},Wt={class:"column is-12"},Xt={class:"column is-9"},Zt={class:"column is-3"};var ea=T({expose:[],setup(s){Ae.value="Add New members",oe({title:"Members"}),se((()=>{A(),he().then((e=>{y(j,"memberships_id",e.data.memberships)})),i(j,"memberships_id").disabled=!1,i(j,"recurrences_id").disabled=!1,i(j,"is_initiation_fee").disabled=!1,i(j,"discount").disabled=!1,xe(1,"membership").then((e=>{y(j,"discount",e.data.discounts)})),ge(),Se().then((e=>{y(_,"city_id",je.value),y(O,"city_id",je.value),y(h,"city_id",je.value),y(_,"state_id",ke.value),y(O,"state_id",ke.value),y(h,"state_id",ke.value),y(_,"country_id",Ce.value),y(O,"country_id",Ce.value),y(h,"country_id",Ce.value)})),Me().then((e=>{y(j,"staff_id",e.data)}))}));const l=R(1),u=R([{step:1,text:"Member Information",categories:["Adult","Minor","Prospect"]},{step:2,text:"Add Family Member",categories:["Adult"]},{step:2,text:"Parent / Guardian",categories:["Minor"]},{step:2,text:"Contact Preference",categories:["Prospect"]},{step:3,text:"Contact Preference",categories:["Adult","Minor"]},{step:4,text:"Select membership",categories:["Adult","Minor","Prospect"]},{step:5,text:"Add Payment Method",categories:["Adult","Minor","Prospect"]}]),r=z((()=>_.value.filter((e=>e.categories.includes($.value.model))))),o=z((()=>u.value.find((e=>e.step==l.value&&e.categories.includes($.value.model))))),p=z((()=>u.value.filter((e=>e.categories.includes($.value.model)))));z((()=>n(h.value)));const c=(e,t=3,a={})=>{$.value.model,6==e?sendData(t,a):l.value=e},m=R(null),d=e=>{m.value=e},v=R(null),b=e=>{v.value=e},g=R([]),k=e=>{g.value=e.value},C=R([]),M=e=>{C.value=e.familyMembership.value,S.value=e.memberMembership};R(null),R(null),R(null);const A=()=>{q.value=null,E.value=null;let e=["is_family","principal_family"];f(_.value.filter((t=>!e.includes(t.name)))),e=["recurrence"],f(j.filter((t=>!e.includes(t.name)))),f(I.value),f(h.value)};return(s,n)=>{const u=e,i=t,m=a,v=Pe,y=we,f=Ie,h=Oe,_=Ee,j=Gt,A=Ht,P=be;return B(),L(P,null,{default:U((()=>[G("div",Yt,[G("div",Wt,[1==l.value?(B(),L(m,{key:0,class:"w-100",addons:""},{default:U((()=>[(B(!0),L(K,null,H(Q($).values,((e,t)=>(B(),L(i,{key:`categoymember-${t}`},{default:U((()=>[G(u,{onClick:t=>Q($).model=e,color:Q($).model==e?"primary":void 0,rounded:""},{default:U((()=>[Z(ae(e),1)])),_:2},1032,["onClick","color"])])),_:2},1024)))),128))])),_:1})):Y("",!0)]),G("div",Xt,[W(G(v,{type:"create",title:Q(o).text,inputs:Q(r),onChangeStep:c,onReturData:d},null,8,["title","inputs"]),[[le,1==l.value]]),W(G(y,{title:Q(o).text,onChangeStep:c},null,8,["title"]),[[le,2==l.value&&"Minor"==Q($).model]]),W(G(f,{type:"create",title:Q(o).text,inputs:Q(O),onChangeStep:c,onReturData:k},null,8,["title","inputs"]),[[le,2==l.value&&"Adult"==Q($).model]]),W(G(h,{type:"create",title:Q(o).text,inputs:Q(F),onChangeStep:c,onReturnData:b},null,8,["title","inputs"]),[[le,3==l.value||2==l.value&&"Prospect"==Q($).model]]),W(G(_,{type:"create",member:Q(r),familiares:g.value,title:Q(o).text,inputs:Q(x),memberships:Q(_e),notes:Q(I),onChangeStep:c,onReturnData:M},null,8,["member","familiares","title","inputs","memberships","notes"]),[[le,4==l.value]]),5==l.value?(B(),L(j,{key:0,type:"create",title:Q(o).text,member:Q(r),familiares:g.value,inputs:Q(x),"member-membership":Q(S),"family-membership":C.value,onChangeStep:c},null,8,["title","member","familiares","inputs","member-membership","family-membership"])):Y("",!0)]),G("div",Zt,[(B(!0),L(K,null,H(Q(p),((e,t)=>(B(),L(A,{key:t,active:e.step<=l.value,step:e.step,text:e.text},null,8,["active","step","text"])))),128))])])])),_:1})}}});export default ea;
