import{A as a,n as e,g as t}from"./index.0a8619b7.js";import{l as s}from"./Companies.41d94d6d.js";import{r as o,c as l}from"./vendor.6f1ebb59.js";const n=o([]),r=o(!1);o(!1);const u=o(1),c=o(null),d=o(!1),i=o(!1),v=o(null),p=o(null),_=o(!1),m=a=>{const t=n.value.findIndex((e=>e.product_id==a.id));if(a.stock&&a.stock.current_stock>0)if(-1==t)n.value.push({product_id:a.id,count:1,products_amount:a.price,name:a.name,stock:a.stock.current_stock});else{n.value.find((e=>e.product_id==a.id)).count+1<=a.stock.current_stock?n.value.find((e=>e.product_id==a.id)).count++:e.error("Sin Stock")}else e.error("Sin Stock")},y=l((()=>{let a=0;return n.value.forEach((e=>{a+=e.products_amount*e.count})),a})),f=l((()=>z.value&&y.value?y.value/100*z.value.find((a=>1==a.id)).value:0)),k=l((()=>y.value+f.value)),h=(a,t,s)=>{"minus"==a?(t.count>0&&t.count--,0==t.count&&n.value.splice(s,1)):t.count+1<=t.stock?t.count++:e.error("Sin Stock")},w=o(0),b=l((()=>{const a=parseFloat(w.value)-parseFloat(k.value);return a>0?a:0})),g=a=>{w.value=parseFloat(w.value)+parseFloat(a)},x=o(null),S=o({email:null,phone:null,barcode:null}),j=()=>{const a={total:k.value,tax_id:1,payment_type_id:x.value,email:S.value.email,phone:S.value.phone,barcode:S.value.barcode,change_back:b.value,products:n.value,locations_id:t(s.value,"locations_id").model};F(a).then((a=>{console.log(a.data),1==x.value&&(x.value=null,S.value.email=null,S.value.phone=null,S.value.barcode=null,w.value=0,n.value=[],u.value=3,r.value=!1),3==x.value&&(c.value=a.data.order),c.value=a.data.order,e.success("Success"),C({invoice_pdf:a.data.invoice_pdf,order:a.data.order})})).catch((a=>{e.error(a.response.data.message)}))},F=async e=>await a.post("orders",e),q=async e=>await a.post("orders/activate",{payment_intent_client_secret:e});o("");const z=o(null),A=async()=>{const e=await a.get("taxes");return z.value=e.data.taxes,e},C=a=>{p.value=a.invoice_pdf,c.value=a.order,d.value=!0},E=async e=>await a.post("orders/store_debit_automatic",e),I=async e=>await a.post("orders/swipe_card",e),$=async e=>await a.post("orders/cancel_payment_intent",{id:e}),B=async(e,t)=>await a.post("orders/another_try",{id:e,terminal_id:t}),D=async e=>await a.post("orders/capture_payment",{id:e}),G=async e=>await a.get(`orders/send_receipt/${e}`);export{m as a,n as b,h as c,k as d,r as e,w as f,b as g,g as h,C as i,E as j,G as k,x as l,v as m,d as n,c as o,j as p,I as q,$ as r,y as s,f as t,B as u,D as v,_ as w,A as x,q as y,i as z};
