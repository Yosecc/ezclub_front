import{_ as e}from"./V-Placeload.8fe4e440.js";import{_ as t}from"./V-Avatar.vue_vue&type=script&setup=true&lang.b74dc949.js";import{_ as a}from"./V-Card.vue_vue&type=script&setup=true&lang.b57414a9.js";import{d as n,O as s,w as l,o as i,b as o,r,F as c,i as u,j as d,I as m,k as p,l as v,H as y,S as h,U as f,W as b,X as _,a2 as g,G as k,B as M,_ as C,ad as x,A as w,P as j}from"./vendor.84e48f7c.js";import{m as Y,f as D,b as V,h as I,i as S,j as $,k as P,l as E,n as T,o as F,d as B,q as A,r as H,t as z,u as N,v as q,w as O,x as R,y as W,z as L,A as G,B as U,C as J,D as X,E as K,c as Q,F as Z}from"./Members.ee8a92ac.js";import{b as ee,P as te,A as ae,F as ne,c as se,v as le,g as ie,m as oe,n as re,p as ce,h as ue,e as de,a as me,s as pe}from"./index.5855fd6a.js";import{_ as ve}from"./V-Button.vue_vue&type=script&setup=true&lang.115c9f56.js";import{_ as ye}from"./V-Loader.vue_vue&type=script&setup=true&lang.a67ef8b7.js";import{_ as he}from"./V-Control.b8a16a92.js";import{_ as fe}from"./V-Field.vue_vue&type=script&setup=true&lang.5a5e683f.js";import{_ as be}from"./V-Modal.vue_vue&type=script&setup=true&lang.f91cc122.js";import{_ as _e}from"./subscriptionIndex.vue_vue&type=script&setup=true&lang.f2cca9c3.js";import{_ as ge}from"./inputsLayaut.vue_vue&type=style&index=0&lang.9a5f1b2d.js";import{_ as ke}from"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.cc314943.js";import{m as Me,_ as Ce}from"./MemberCards.2805a0da.js";import{_ as xe}from"./signComponent.vue_vue&type=script&setup=true&lang.57abf7e0.js";import{_ as we}from"./pdf_icon.8e3b435a.js";import{o as je,a as Ye,f as De}from"./Companies.679555f4.js";import{_ as Ve}from"./FlexTableDropdown.vue_vue&type=script&setup=true&lang.7c52ce45.js";import{_ as Ie}from"./V-Block.vue_vue&type=script&setup=true&lang.d16ae397.js";import{m as Se,d as $e}from"./subscription-method-stripe-checkout.vue_vue&type=script&setup=true&lang.45a17c74.js";import{_ as Pe}from"./V-Tag.vue_vue&type=script&setup=true&lang.43768b74.js";import{_ as Ee}from"./V-Tabs.vue_vue&type=script&setup=true&lang.ad69db29.js";import{_ as Te}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.8d78868c.js";import{p as Fe}from"./sidebarLayoutState.bceb862d.js";import{g as Be}from"./Discounts.5a427a3a.js";import{a as Ae}from"./Memberships.5191990f.js";import{g as He}from"./Recurrences.b2ac232b.js";import{g as ze}from"./Staffs.6305c347.js";import{g as Ne}from"./Diciplines.6c8947e5.js";import{e as qe}from"./config.4c5cdc38.js";import{g as Oe}from"./Subscriptions.a28327c8.js";import"./V-SwitchBlock.vue_vue&type=script&setup=true&lang.f9906d24.js";import"./Presupuesto.vue_vue&type=script&setup=true&lang.d5a70a4c.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.8a41fb82.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.3090aa96.js";import"./V-Dropdown.7cdac118.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.1503437d.js";import"./useDropdown.3858e0aa.js";import"./V-PlaceholderSection.vue_vue&type=script&setup=true&lang.12764c4e.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.3fa8e32c.js";import"./activePanelState.de92bd5f.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.1c78e14a.js";import"./video.f5cea5d5.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.f7104d79.js";import"./darkModeState.0452d175.js";import"./AnimatedLogo.2dcbd823.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.051c3ce8.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.e7d23443.js";import"./userPopovers.f4b9fc60.js";const Re={class:"d-flex justify-content-center align-items-center flex-column mb-4"},We={class:"mt-5 text-center"},Le={class:"title is-5 is-narrow"},Ge={class:"w-100 mt-5"},Ue=v("i",{class:"iconify",style:{"font-size":"20px",color:"white"},"data-icon":"feather:arrow-right","aria-hidden":"true"},null,-1);var Je=n({expose:[],props:{category:{type:String,default:"Adult"}},emits:["changeMenu"],setup(e,{emit:n}){const b=e,_=s();l((()=>_.hash),(e=>{x.value=g.findIndex((e=>e.component==_.hash.slice(1)))})),i((()=>{""!=_.hash&&(x.value=g.findIndex((e=>e.component==_.hash.slice(1))))}));const g=[{name:"Personal Information",component:"personalInformation"},{name:"Subscription",component:"susbcriptionIndex"},{name:"Contract",component:"memberMembership"},{name:"Family Members",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Invoices",component:"memberInvoices"}],k=[{name:"Personal Information",component:"personalInformation"},{name:"Subscription",component:"susbcriptionIndex"},{name:"Contract",component:"memberMembership"},{name:"Parent / Guardian",component:"memberFamily"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Invoices",component:"memberInvoices"}],M=[{name:"Personal Information",component:"personalInformation"},{name:"Subscription",component:"susbcriptionIndex"},{name:"Contract",component:"memberMembership"},{name:"Emergency",component:"memberEmergency"},{name:"Check-ins",component:"memberCheckins"},{name:"Invoices",component:"memberInvoices"}],C=o((()=>"Adult"==b.category?g:"Minor"==b.category?k:M)),x=r(0),w=r(null),j=o((()=>null!=C.value[x.value]?C.value[x.value].component:w.value));return(e,s)=>{const l=t,i=a;return c(Y)?(u(),d(i,{key:0,class:"cardprofile"},{default:p((()=>[v("div",Re,[v(l,{picture:c(Y).photo?`${c(ee)}storage/${c(Y).photo}`:"",size:"xl"},null,8,["picture"]),v("div",We,[m(" <p>{{ member }}</p> "),v("h2",Le,y(c(Y).name)+" "+y(c(Y).second_name)+" "+y(c(Y).last_name),1)])]),v("div",Ge,[v("ul",null,[(u(!0),d(h,null,f(c(C),((e,t)=>(u(),d("li",{key:`item-${t}`},[v(i,{class:["\r\n              mb-3\r\n              item_menu\r\n              d-flex\r\n              justify-content-between\r\n              align-items-center\r\n            ",x.value==t?"active":""],color:x.value==t?"warning":void 0,elevated:x.value==t,onClick:e=>(e=>{x.value=e,n("changeMenu",j)})(t)},{default:p((()=>[v("p",null,y(e.name),1),Ue])),_:2},1032,["class","color","elevated","onClick"])])))),128))])])])),_:1})):m("v-if",!0)}}});const Xe=v("div",{id:"payment-element"},[m("Stripe.js injects the Payment Element")],-1),Ke=k(" Pay now "),Qe=v("div",{id:"payment-message",class:"hidden"},null,-1);var Ze=n({expose:[],props:{amount:{type:Number,required:!0},id:{type:Number,required:!0},url:{type:String,default:"stripe"},member_membership:{type:Number,default:0}},setup(t){const n=t,s=Stripe(te.value);l((()=>n.id),(e=>{console.log("cambio"),c.value=!0,x()}));const c=r(!0);r({id:n.id,amount:n.amount});const y=r(),f=o((()=>"stripe"!=n.url?{payment_type_id:3,amount:n.amount}:{id:n.id,member_mermship_id:n.member_membership,amount:n.amount,payment_type_id:1})),k=r(null),M=r(null),C=r(!1),x=async()=>{let e=await ae.post(n.url,f.value).then((e=>{k.value=e.data.clientSecret,y.value=s.elements({clientSecret:k.value}),M.value=y.value.create("payment"),M.value.mount("#payment-element")})).catch((e=>{}));return c.value=!1,e},w=async e=>{e.preventDefault(),C.value=!0,await s.confirmPayment({elements:y.value,confirmParams:{return_url:`${ne.value}members/process?payment_type=3&id=`+n.id+`&membership=${n.member_membership}`}}),C.value=!1};return i((()=>{x()})),(t,n)=>{const s=e,l=ve,i=ye,o=a;return u(),d(h,null,[c.value?(u(),d(s,{key:0,height:"500px"})):m("v-if",!0),b(v(o,{class:"mt-6"},{default:p((()=>[m(" <p>{{ memberMermship }}</p> "),v("form",{onSubmit:g(w,["prevent"]),id:"payment-form"},[m(' <input id="card-holder-name" type="text"> '),Xe,m(' <button id="submit">\r\n        <div class="spinner hidden" id="spinner"></div>\r\n        <span id="button-text">Pay now</span>\r\n      </button> '),v(i,{size:"small",active:C.value},{default:p((()=>[v(l,{id:"submit",class:"mt-4",color:"success"},{default:p((()=>[Ke])),_:1})])),_:1},8,["active"]),Qe],40,["onSubmit"])])),_:1},512),[[_,!c.value]])],64)}}});const et={class:"table is-hoverable is-striped is-fullwidth"},tt=v("th",{scope:"col"},"Members",-1),at=v("th",{scope:"col"},"Membership Name",-1),nt=v("th",{scope:"col"},"Recurrence",-1),st=v("th",{scope:"col"},"Prorated",-1),lt=v("th",{scope:"col"},"Membership Cost",-1),it=v("th",{scope:"col"},"Initiation Fee",-1),ot=v("th",{scope:"col"},"Discount",-1),rt=v("th",{scope:"col"},"Taxes",-1),ct={key:0,scope:"col"},ut=v("th",{scope:"col"},"Sub Total",-1),dt={key:0},mt={key:0},pt={key:1},vt={key:2},yt={key:0},ht=v("br",null,null,-1),ft={key:1},bt={key:0},_t={key:1},gt={key:0},kt={key:0},Mt={key:1},Ct={key:1},xt={key:3},wt={class:"is-end"},jt={class:"d-flex justify-content-between"},Yt=k(" Card Payment "),Dt=k(" Cash Payment "),Vt={class:"d-flex mb-4 justify-content-between"},It={class:"title is-5"},St=k(" Total: "),$t={class:"title is-5"},Pt=k(" Cash Total: "),Et={class:"\r\n            d-flex\r\n            justify-content-center\r\n            align-items-center\r\n            flex-column\r\n            mb-4\r\n          "},Tt=v("p",{class:"title is-5 mb-4"},"Change Back:",-1),Ft={class:"title is-3 mb-0"},Bt={class:"d-flex justify-content-center flex-wrap mb-4"},At=v("div",{class:"w-100"},null,-1),Ht={class:"d-flex justify-content-center"},zt=k("Reset"),Nt=k("Confirm");var qt=n({expose:[],setup(e){r(!1);const t=r(!1);i((()=>{console.log("se monto el payment")}));const n=o((()=>{let e=se(V,"memberships_id");return null!=e?e:[]})),s=o((()=>{let e=se(V,"recurrences_id");return null!=e?e:[]})),l=o((()=>{let e=le(V,"initiation_fee");return null!=e?e:[]})),_=o((()=>{let e=ie(V,"discount");return null!=e?e:[]})),g=o((()=>{let e=parseFloat(M().format("DD")),t=0,a=0;return s.value.days>=30&&(a=e-s.value.payday,t=s.value.amount/s.value.days*a),{days:a,amount:Math.abs(Math.round(t))}})),x=o((()=>(e=>{if(""!=le(V,"memberships_id"))return"percentaje"==(e=e.value?e.value:e).tax.type?{text:`${e.tax.value}%`,value:e.tax.value,type:"procentaje"}:{text:oe(e.tax.value),value:e.tax.value}})(n))),w=r(null),j=o((()=>{let e=0;return e+=s.value.amount,le(V,"is_initiation_fee").length||(e+=l.value),e-=g.value.amount,_.value.data&&("dolar"==_.value.data.type?e-=_.value.data.value:"percentaje"==_.value.data.type&&(e-=e/100*_.value.data.value)),e+=e/100*x.value.value,Y.value.penalty&&(w.value=n.value.penalty,e+=w.value),Y.value.leo_vet_fr&&(e-=e/100*n.value.descuento_vet),e})),S=o((()=>{let e=0;return e+=j.value,e})),$=r(!1),P=r(0),E=o((()=>{const e=parseFloat(P.value)-parseFloat(S.value);return e>0?e:0}));r(1);const T=async()=>{await I(D.value.id,{total:S.value,payment_type_id:1,cash:P.value,cash_back:E.value}).then((e=>{re.success("Payment Success"),window.location.reload()})).catch((e=>{}))};return(e,i)=>{const o=ve,r=a,M=Ze,I=he,F=fe,B=be;return u(),d("div",null,[v(r,{class:""},{default:p((()=>{return[v("table",et,[v("thead",null,[v("tr",null,[tt,at,nt,st,lt,it,ot,rt,w.value?(u(),d("th",ct,"Penalty")):m("v-if",!0),ut])]),0!=c(n).length?(u(),d("tbody",dt,[v("tr",null,[v("td",null,[v("p",null,[v("b",null,y(c(Y).name)+" "+y(c(Y).second_name)+" "+y(c(Y).last_name),1)])]),0!=c(n).legnth?(u(),d("td",mt,y(c(n).name),1)):m("v-if",!0),0!=c(s).length?(u(),d("td",pt,y(c(s).descriptions),1)):m("v-if",!0),0!=c(s).length?(u(),d("td",vt,[c(s).days>=30?(u(),d("span",yt,[k(y(c(g).days)+" days : ",1),ht,k(" - "+y(c(oe)(c(g).amount)),1)])):(u(),d("span",ft,"-"))])):m("v-if",!0),v("td",null,y(c(oe)((e=c(s),e.amount))),1),v("td",null,[c(le)(c(V),"is_initiation_fee").length?(u(),d("span",_t,y(c(oe)(0)),1)):(u(),d("span",bt,y(c(oe)(c(l))),1))]),v("td",null,[null!=c(_).data?(u(),d("span",gt,["dolar"==c(_).data.type?(u(),d("span",kt," - "+y(c(oe)(c(_).data.value)),1)):m("v-if",!0),"percentaje"==c(_).data.type?(u(),d("span",Mt,y(c(_).data.value)+"%",1)):m("v-if",!0)])):(u(),d("span",Ct,"-"))]),v("td",null,y(c(x).text),1),w.value?(u(),d("td",xt,y(c(oe)(w.value)),1)):m("v-if",!0),v("td",null,y(c(oe)(c(j))),1)]),v("tr",null,[v("td",{style:{"text-align":"right"},colspan:w.value?"9":"8"}," Total ",8,["colspan"]),v("td",wt,y(c(oe)(c(S))),1)])])):m("v-if",!0)]),v("div",jt,[v(o,{color:"success",disabled:0==c(n).length||isNaN(c(S)),onClick:i[1]||(i[1]=e=>t.value=!0)},{default:p((()=>[Yt])),_:1},8,["disabled"]),v(o,{disabled:0==c(n).length||isNaN(c(S)),color:"warning",onClick:i[2]||(i[2]=e=>$.value=!0)},{default:p((()=>[Dt])),_:1},8,["disabled"])])];var e})),_:1}),t.value?(u(),d(M,{key:0,class:"",url:`new_payment/${c(D).id}`,amount:c(S),id:c(Y).id,member_membership:c(D).id},null,8,["url","amount","id","member_membership"])):m("v-if",!0),v(B,{open:$.value,actions:"center",onClose:i[6]||(i[6]=e=>$.value=!1)},{content:p((()=>[v("div",Vt,[v("p",It,[St,v("b",null,y(c(oe)(c(S))),1)]),v("p",$t,[Pt,v("b",null,y(c(oe)(P.value)),1)])]),v("div",Et,[Tt,v("p",Ft,[v("b",null,y(c(oe)(c(E))),1)])]),v("div",Bt,[v(o,{bold:"",class:"m-3",style:{"font-size":"14px"},onClick:i[3]||(i[3]=e=>P.value=c(S))},{default:p((()=>[k(" Full Payment "+y(c(oe)(c(S))),1)])),_:1}),At,(u(),d(h,null,f([5,10,20,50,100],((e,t)=>v(o,{key:`calculato-${t}`,bold:"",class:"m-3",style:{"font-size":"14px"},onClick:t=>P.value+=e},{default:p((()=>[k(" $"+y(e),1)])),_:2},1032,["onClick"]))),64))]),v("div",Ht,[v(F,null,{default:p((()=>[v(I,null,{default:p((()=>[b(v("input",{"onUpdate:modelValue":i[4]||(i[4]=e=>P.value=e),type:"text",class:"input text-center",placeholder:"Cash"},null,512),[[C,P.value]])])),_:1})])),_:1})])])),action:p((()=>[v(o,{onClick:i[5]||(i[5]=e=>P.value=0),class:"d-flex justify-content-center",raised:""},{default:p((()=>[zt])),_:1}),v(o,{color:"success",onClick:T,disabled:c(S)>P.value,class:"d-flex justify-content-center",raised:""},{default:p((()=>[Nt])),_:1},8,["disabled"])])),_:1},8,["open"])])}}});const Ot=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Personal Information"),v("p",null,"Edit member's personal information")],-1),Rt=k(" Save Changes "),Wt=k(" Convert to Members ");var Lt=n({expose:[],props:{category:{type:String,default:"Adult"},suscripcion:{type:Object,default:null},user:{type:Object,default:null}},setup(e){const t=e,a=x();i((()=>{t.suscripcion&&t.user&&(ie(S.value,"email").model=t.user.email,ie(S.value,"email").disabled=!0,ie(S.value,"country_id").model=34),console.log(ie(S.value,"category"))})),o((()=>"Prospect"==t.category));const n=r(!1),s=()=>{n.value=!0;let e=ce(S.value),s=new FormData;for(var l in e)s.append(l,e[l]);Y.value?$(s).then((e=>{re.success("Edit Success"),n.value=!1})).catch((e=>{n.value=!1})):(t.suscripcion&&s.append("suscripcion_id",t.suscripcion.id),Me(s).then((e=>{re.success("Success"),n.value=!1,console.log(e.data.member.id),a.push({name:"members-profile",query:{id:e.data.member.id},hash:"#susbcriptionIndex"})})).catch((e=>{n.value=!1})))},l=o((()=>(console.log("personal",S.value),S.value.filter((e=>e.categories.includes(t.category))))));return(e,a)=>{const i=ve,o=ye,r=ge,y=ke;return u(),d(y,null,{"header-left":p((()=>[Ot])),"header-right":p((()=>[v(o,{size:"small",active:n.value},{default:p((()=>[v(i,{onClick:s,color:"primary"},{default:p((()=>[Rt])),_:1}),"Prospect"==t.category?(u(),d(i,{key:0,color:"info",class:"ml-3"},{default:p((()=>[Wt])),_:1})):m("v-if",!0)])),_:1},8,["active"])])),content:p((()=>["Minor"==t.category?(u(),d(r,{key:0,"inputs-step":c(l)},null,8,["inputs-step"])):(u(),d(r,{key:1,"inputs-step":c(S)},null,8,["inputs-step"])),m(" <p>{{ inputsInformation }}</p> ")])),_:1})}}});const Gt=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Contract"),v("p",null,"Edit member's membership and contract information")],-1),Ut={class:"columns is-multiline justify-content-center"},Jt={key:0,style:{position:"sticky",top:"10px"},class:"columns is-multiline"},Xt={class:"column is-16"},Kt=v("h1",{class:"title is-6"},"Active Waiver Information",-1),Qt={class:"text-center"},Zt=v("img",{src:we,class:"mr-3",width:"40",alt:""},null,-1),ea={class:"column is-16"},ta=v("h1",{class:"title is-6"},"Active Contract Information",-1),aa={class:"text-center"},na=v("img",{src:we,class:"mr-3",width:"40",alt:""},null,-1),sa={key:1,class:"column is-4 text-center"},la=v("p",{class:"title is-4"},"Change the location to perform actions",-1),ia={key:2,class:"columns is-multiline column mt-4 is-12"},oa={class:"column is-12"};var ra=n({expose:[],props:{},emits:["reload"],setup(e,{emit:t}){i((()=>{P(V)})),r(null),r(null),r(null),r(null),r(null),r(!1),r(null),r(!1),r(!1),r({total:null}),r([{typeInput:"switchEventChangeInput",name:"prorrateo",values:["NO","Yes"],model:!0,required:!1,class:"is-12",isLabel:!0}]),x();const n=s();o((()=>{if(n.fullPath.includes("/members/profile")){let e=V.findIndex((e=>"prorrateo"==e.name)),t=V.findIndex((e=>"schedules"==e.name));-1==e&&(V.unshift(E.value[0]),ie(V,"recurrence").class="is-4"),-1==t&&(V.push(T.value[0]),ie(V,"prorrateo").change=function(e){this.model?ie(e,"schedules").disabled=!0:ie(e,"schedules").disabled=!1})}if(Y.value&&D.value&&1==D.value.status){let e=["locations_id","diciplines","staff_id","discount","is_last_month","multigym"];return h.value&&je.value==h.value.id&&e.push("discount"),V.filter((t=>e.includes(t.name)))}return V}));const l=e=>{F(e,D.value.id).then((e=>{if(e.data.status)re.success("Sign Success");else for(var t in re.error(e.data.mensaje),e.data.errores)e.data.errores[t].forEach((e=>{re.error(`${t} : ${e}`)}))})).catch((e=>{}))};r(!1),r(null),r(!1);const h=o((()=>Y.value.user&&Y.value.user.location_facturacion?Y.value.user.location_facturacion:D.value&&1==D.value.payment_type_id?{id:D.value.locations_id}:null));return(e,t)=>{const n=a,s=xe,i=ke;return u(),d(i,null,{"header-left":p((()=>[Gt])),content:p((()=>[m(" <p>{{ locationSistemID }}/ {{ locationFacturacion }}</p> "),v("div",Ut,[c(Y).membership_members?(u(),d("div",Jt,[m(" WAIVER "),v("div",Xt,[c(Y)&&c(D)?(u(),d(n,{key:0,class:"mb-4 w-100"},{default:p((()=>[Kt,v("div",Qt,[v("a",{target:"_blank",href:`${c(ee)}generateWeiver/${c(Y).id}`,class:"d-flex justify-content-start align-items-center"},[Zt,v("p",null," weiver_"+y(c(Y).id)+"_"+y(c(Y).membership_members.id)+"_"+y(c(Y).personal_identifications)+".pdf ",1),m(' <V-Button color="success" outlined class="mt-4 py-1">\r\n                        View PDF\r\n                      </V-Button> ')],8,["href"])])])),_:1})):m("v-if",!0)]),m(" Contract "),v("div",ea,[c(Y)&&c(D)?(u(),d(n,{key:0,class:"mb-4 w-100"},{default:p((()=>[ta,v("div",aa,[v("a",{target:"_blank",href:`${c(ee)}generateContract/${c(Y).id}`,class:"d-flex justify-content-start align-items-center"},[na,v("p",null," contract_"+y(c(Y).id)+"_"+y(c(Y).membership_members.id)+"_"+y(c(Y).personal_identifications)+".pdf ",1),m('  <V-Button color="success" outlined class="mt-4 py-1">\r\n                        View PDF\r\n                      </V-Button> ')],8,["href"])])])),_:1})):m("v-if",!0)])])):(u(),d("div",sa,[la])),m(" Contract "),c(Y)&&c(D)&&!c(D).sign?(u(),d("div",ia,[v("div",oa,[v(s,{onOnSign:l,"is-sign":!c(D).sign,contract:`contract_${c(Y).id}_${c(Y).membership_members.id}_${c(Y).personal_identifications}.pdf`,"url-contract":`generateContract/${c(Y).id}`},null,8,["is-sign","contract","url-contract"])])])):m("v-if",!0)])])),_:1})}}});const ca=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Family Members"),v("p",null,"Edit member's family members")],-1),ua={class:"columns is-multiline"},da={key:0,class:"column is-4 mb-4"},ma=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Parent"),v("p",null,"Edit parent contact")],-1),pa=k(" Save Changes "),va={class:""},ya=v("h1",{class:"title is-5"},"Parent Contact Information",-1),ha={class:"d-flex justify-content-end mr-6"};var fa=n({expose:[],setup(e){r([{id:1,name:"Wonder Woman",subtitle:"Mother/Adult",img:"https://picsum.photos/150/150"},{id:2,name:"Lionel Messi",subtitle:"Father/Minor",img:"https://picsum.photos/150/151"}]);const a=()=>{const e=ce(B.value),t=new FormData;for(var a in e)t.append(a,e[a]);ue.value||z(t).then((e=>{re.success("Success")}))},n=o((()=>(console.log("info",S.value),ie(B.value,"city_id").model=ie(S.value,"city_id").model,ie(B.value,"state_id").model=ie(S.value,"state_id").model,ie(B.value,"postal_code").model=ie(S.value,"postal_code").model,ie(B.value,"country_id").model=ie(S.value,"country_id").model,B.value)));return(e,s)=>{const l=t,i=Ve,o=Ie,r=ke,y=ve,b=ge;return u(),d("div",null,[c(Y)&&"Adult"==c(Y).category?(u(),d(r,{key:0},{"header-left":p((()=>[ca])),"header-right":p((()=>[m(' <VButton color="primary"> Save Changes </VButton> ')])),content:p((()=>[v("div",ua,[m(" <p>{{ memberParent.photo }}</p> "),c(A)?(u(),d("div",da,[v(o,{title:`${c(A).name} ${c(A).second_name} ${c(A).last_name}`,class:"border-1 p-4 radius-small"},{icon:p((()=>[v(l,{size:"medium",picture:`${c(ee)}storage/${c(A).photo}`,subtitle:"Principal Family"},null,8,["picture"])])),action:p((()=>[v(i,{"id-member":c(A).id},null,8,["id-member"])])),_:1},8,["title"])])):m("v-if",!0),(u(!0),d(h,null,f(c(H),((e,t)=>(u(),d("div",{class:"column is-4 mb-4",key:`family-${t}`},[v(o,{title:`${e.member.name} ${e.member.second_name} ${c(Y).last_name}`,subtitle:e.member.relationships,class:"border-1 p-4 radius-small"},{icon:p((()=>[v(l,{size:"medium",picture:`${c(ee)}storage/${e.member.photo}`},null,8,["picture"])])),action:p((()=>[v(i,{"id-member":e.members_id},null,8,["id-member"])])),_:2},1032,["title","subtitle"])])))),128))])])),_:1})):m("v-if",!0),c(Y)&&"Minor"==c(Y).category?(u(),d(r,{key:1},{"header-left":p((()=>[ma])),"header-right":p((()=>[v(y,{onClick:a,color:"primary"},{default:p((()=>[pa])),_:1})])),content:p((()=>[v("div",va,[ya,v("div",ha,[v(l,{picture:`${c(ee)}storage/${c(ie)(c(B),"parent_photo").data}`,size:"large"},null,8,["picture"])]),v(b,{"inputs-step":c(n)},null,8,["inputs-step"])])])),_:1})):m("v-if",!0)])}}});const ba=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Emergency Contact"),v("p",null,"Edit member's emergency contact")],-1),_a=k(" Save Changes "),ga={class:""},ka=v("h1",{class:"title is-5"},"Emergency Contact Information",-1);var Ma=n({expose:[],setup(e){const t=()=>{const e=ce(N.value);console.log(e),q(e).then((e=>{re.success("Success")}))};return(e,a)=>{const n=ve,s=ge,l=ke;return u(),d(l,null,{"header-left":p((()=>[ba])),"header-right":p((()=>[v(n,{onClick:t,color:"primary"},{default:p((()=>[_a])),_:1})])),content:p((()=>[v("div",ga,[ka,v(s,{"inputs-step":c(N)},null,8,["inputs-step"])])])),_:1})}}});const Ca=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Check-ins History"),v("p",null,"Edit member's check-ins history")],-1),xa={class:"p-6"},wa={class:"mt-4"},ja={class:"table is-hoverable is-fullwidth"},Ya=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"DATE"),v("th",{scope:"col"},"TIME"),m(' <th scope="col">STAFF</th> ')])],-1);var Da=n({expose:[],setup:e=>(e,t)=>{const a=ke;return c(Y)?(u(),d(a,{key:0},{"header-left":p((()=>[Ca])),"header-right":p((()=>[])),content:p((()=>[v("div",xa,[m(' <div class="d-flex">\n          <V-Field class="field mr-3">\n            <V-Control>\n              <input\n                type="date"\n                class="input"\n                placeholder="input.placeholder"\n              />\n            </V-Control>\n          </V-Field>\n          <V-Field class="field mr-3">\n            <V-Control>\n              <input\n                type="date"\n                class="input"\n                placeholder="input.placeholder"\n              />\n            </V-Control>\n          </V-Field>\n          <VButton color="primary"> Export </VButton>\n        </div> '),v("div",wa,[v("table",ja,[Ya,v("tbody",null,[(u(!0),d(h,null,f(c(O),((e,t)=>(u(),d("tr",{key:`access-${t}`},[v("td",null,y(c(M)(e.created_at).format("MM/DD/YYYY")),1),v("td",null,y(c(M)(e.created_at).format("HH:mm:ss")),1),m(" <td>{{ access.user.name }}</td> ")])))),128))])])])])])),_:1})):m("v-if",!0)}});const Va=k("Confirm");var Ia=n({expose:[],props:{openModal:{type:Boolean,default:!1},paymentMethodId:{type:String,default:""},paymentGateway:{type:Number,default:1}},emits:["closeModal","refreshTransactions"],setup(e,{emit:t}){const a=e,n=r(!1),s=async()=>{const e=ce(Se.value);await Y.value;const s={amount:e.amount,description:e.description,payment_method_id:a.paymentGateway,payment_method_stripe_id:a.paymentMethodId,member_id:Y.value.id};n.value=!0;try{await $e(s),de(Se.value),re.success("Success"),t("closeModal")}catch(l){"string"==typeof l.response.data.message?re.error(l.response.data.message):re.error(l)}finally{n.value=!1}},l=()=>{de(Se.value),t("closeModal")};return(e,t)=>{const i=ge,o=ve,r=be;return u(),d(r,{open:a.openModal,title:"Create a new payment",size:"small",actions:"right",onClose:l},{content:p((()=>[v(i,{"inputs-step":c(Se)},null,8,["inputs-step"])])),action:p((()=>[v(o,{color:"primary",raised:"",onClick:s,loading:n.value},{default:p((()=>[Va])),_:1},8,["loading"])])),_:1},8,["open"])}}});const Sa=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Purchases History"),v("p",null,"Edit member's purchases history")],-1),$a=v("p",{class:"title is-5"},"Card List",-1),Pa=v("div",{class:"d-flex align-items-center"},[v("p",{class:"title is-1 mb-0"},[v("i",{class:"fas fa-shopping-bag","aria-hidden":"true"})]),v("div",{class:"ml-4"},[v("p",{class:"title is-4 mb-2"},"Make a new payment with cash")])],-1);var Ea=n({expose:[],setup(e){const t=r(null),n=r(!1),s=r(1),l=()=>{},i=e=>{t.value=e,s.value=1,n.value=!0},o=()=>{n.value=!0,s.value=2},y=()=>{n.value=!1};return(e,r)=>{const h=Ia,f=Ce,b=a,_=ke;return c(Y)?(u(),d(_,{key:0},{"header-left":p((()=>[Sa])),"header-right":p((()=>[])),content:p((()=>[$a,v(h,{"payment-method-id":t.value,"open-modal":n.value,"payment-gateway":s.value,onCloseModal:y},null,8,["payment-method-id","open-modal","payment-gateway"]),c(Y).user?(u(),d(f,{key:0,"show-option":!0,class:"mb-6",onMakePayment:i,onOnMethodPayment:l,method_default:c(Y).user.pm_last_four,"show-new-card":!0,memberid:c(Y).id},null,8,["method_default","memberid"])):m("v-if",!0),v(b,{onClick:o,color:"success",class:"btn-card"},{default:p((()=>[Pa])),_:1})])),_:1})):m("v-if",!0)}}});const Ta=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Subscription Invoice History"),v("p")],-1),Fa=v("p",null,"Invoices",-1),Ba={class:"table is-hoverable is-fullwidth"},Aa=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Description"),v("th",{scope:"col"},"Created"),v("th",{scope:"col"},"Amount"),v("th",{scope:"col"},"Method"),v("th",{scope:"col"},"Download"),v("th",{scope:"col"},"Status")])],-1),Ha={key:0},za={key:0},Na={key:1},qa=v("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),Oa={key:1},Ra=v("td",null,"Subscription",-1),Wa={key:0},La={key:1},Ga={key:0},Ua={key:1},Ja=v("td",null,"Cash",-1),Xa=v("td",null,[m(' <a :href="invoice.invoice_pdf" target="_blank">\n                  <VButton>\n                    <i class="fas fa-download" aria-hidden="true"></i>\n                  </VButton>\n                </a> ')],-1);var Ka=n({expose:[],setup(e){const t=w({data:[]});return o((()=>D.value.payments)),o((()=>{let e=[];return W.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),i((async()=>{await R(Y.value.id,{invoice_type:1}).then((e=>{t.data=e.data.invoices})).catch((e=>{}))})),(e,n)=>{const s=ve,l=Pe,i=a,o=ke;return c(Y)?(u(),d(o,{key:0},{"header-left":p((()=>[Ta])),"header-right":p((()=>[])),content:p((()=>[m(" <memberCreditCard /> "),v(i,{class:"my-4"},{default:p((()=>[Fa,v("table",Ba,[Aa,c(t).data&&c(t).data.length?(u(),d("tbody",Ha,[(u(!0),d(h,null,f(c(t).data,((e,t)=>(u(),d("tr",{key:`invoice-${t}`},[v("td",null,[v("p",null,y(e.description),1),m(' <span\n                  v-for="(item, keyy) in JSON.parse(invoice.billing_reason)"\n                  :key="`invo-${keyy}`"\n                >\n                  <VTag v-if="item" class="mr-1 mb-1" :label="item" />\n                </span> ')]),m(" <td> "),m(' <VTag class="mr-2" :label="invoice.billing_reason" /> '),m(" </td> "),v("td",null,[m(" <p>{{ invoice.created }}</p> "),k(y(c(M)(e.created).format("MM/DD/YYYY")),1)]),"Cash"==e.collection_method?(u(),d("td",za,y(c(oe)(e.total)),1)):(u(),d("td",Na,y(c(oe)(e.total/100)),1)),v("td",null,y(e.collection_method),1),v("td",null,[v("a",{href:e.invoice_pdf,target:"_blank"},[v(s,null,{default:p((()=>[qa])),_:1})],8,["href"])]),v("td",null,[v(l,{class:"mr-1 mb-1",label:e.status},null,8,["label"]),m(' <VTag\n                  class="mr-1 mb-1"\n                  :label="invoice.payments_intents[0].status"\n                /> ')])])))),128))])):c(Y).membership_members&&c(Y).membership_members.invoice_local?(u(),d("tbody",Oa,[(u(!0),d(h,null,f(c(Y).membership_members.invoice_local,((e,t)=>(u(),d("tr",{key:`invoice-${t}`},[Ra,v("td",null,[m(" <p>{{ invoice.updated }}</p> "),k(y(c(M)(e.updated).format("MM/DD/YYYY")),1)]),v("td",null,[e.period_start?(u(),d("span",Wa,y(c(M)(e.period_start).format("MM/DD/YYYY")),1)):(u(),d("span",La))]),v("td",null,[e.period_end?(u(),d("span",Ga,y(c(M)(e.period_end).format("MM/DD/YYYY")),1)):(u(),d("span",Ua))]),v("td",null,y(c(oe)(e.amount/100)),1),Ja,Xa,v("td",null,[k(y(e.status?"paid":"incomplete"),1),m(" <br /> "),m(" <small>{{ invoice.description_status }}</small> ")])])))),128))])):m("v-if",!0)])])),_:1}),m(' <VCard class="mb-4" v-if="false">\n        <p>Payment Attempts</p>\n        <table class="table is-hoverable is-fullwidth">\n          <thead>\n            <tr>\n              <th scope="col">Description</th>\n              <th scope="col">Created</th>\n              <th scope="col">Mount</th>\n              <th scope="col">Method</th>\n              <th scope="col">Download</th>\n              <th scope="col">Status</th>\n              <th scope="col">Status Description</th>\n            </tr>\n          </thead>\n          <tbody v-if="memberMermship">\n            <tr v-for="(invoice, key) in member.pagos" :key="`pagos-${key}`">\n              <td>{{ invoice.description }}</td>\n              <td>\n                {{ moment(invoice.created).format(\'MM/DD/YYYY\') }}\n              </td>\n\n              <td>{{ moneda(invoice.total / 100) }}</td>\n              <td>{{ invoice.collection_method }}</td>\n              <td>\n                <a :href="invoice.invoice_pdf" target="_blank">\n                  <VButton>\n                    <i class="fas fa-download" aria-hidden="true"></i>\n                  </VButton>\n                </a>\n              </td>\n              <td>{{ invoice.status }}</td>\n              <td>{{ invoice.status_description }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </VCard> ')])),_:1})):m("v-if",!0)}}});const Qa=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Product Invoice History"),v("p")],-1),Za=v("p",null,"Invoices",-1),en={class:"table is-hoverable is-fullwidth"},tn=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Description"),v("th",{scope:"col"},"Created"),v("th",{scope:"col"},"Amount"),v("th",{scope:"col"},"Method"),v("th",{scope:"col"},"Download"),v("th",{scope:"col"},"Status")])],-1),an={key:0},nn=v("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),sn={key:1},ln=v("td",null,"Subscription",-1),on={key:0},rn={key:1},cn={key:0},un={key:1},dn=v("td",null,"Cash",-1),mn=v("td",null,[m(' <a :href="invoice.invoice_pdf" target="_blank">\n                  <VButton>\n                    <i class="fas fa-download" aria-hidden="true"></i>\n                  </VButton>\n                </a> ')],-1);var pn=n({expose:[],setup(e){const t=w({data:[]});return o((()=>D.value.payments)),o((()=>{let e=[];return W.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),i((async()=>{const{data:e}=await R(Y.value.id,{invoice_type:2});t.data=e.invoices})),(e,n)=>{const s=ve,l=Pe,i=a,o=ke;return c(Y)?(u(),d(o,{key:0},{"header-left":p((()=>[Qa])),"header-right":p((()=>[])),content:p((()=>[m(" <memberCreditCard /> "),v(i,{class:"my-4"},{default:p((()=>[Za,v("table",en,[tn,c(t).data&&c(t).data.length?(u(),d("tbody",an,[(u(!0),d(h,null,f(c(t).data,((e,t)=>(u(),d("tr",{key:`invoice-${t}`},[v("td",null,[v("p",null,y(e.description),1),m(' <span\n                  v-for="(item, keyy) in JSON.parse(invoice.billing_reason)"\n                  :key="`invo-${keyy}`"\n                >\n                  <VTag v-if="item" class="mr-1 mb-1" :label="item" />\n                </span> ')]),m(" <td> "),m(' <VTag class="mr-2" :label="invoice.billing_reason" /> '),m(" </td> "),v("td",null,y(c(M)(e.created).format("MM/DD/YYYY")),1),v("td",null,y(c(oe)(e.total/100)),1),v("td",null,y(e.collection_method),1),v("td",null,[v("a",{href:e.invoice_pdf,target:"_blank"},[v(s,null,{default:p((()=>[nn])),_:1})],8,["href"])]),v("td",null,[v(l,{class:"mr-1 mb-1",label:e.status},null,8,["label"]),m(' <VTag\n                  class="mr-1 mb-1"\n                  :label="invoice.payments_intents[0].status"\n                /> ')])])))),128))])):c(Y).membership_members&&c(Y).membership_members.invoice_local?(u(),d("tbody",sn,[(u(!0),d(h,null,f(c(Y).membership_members.invoice_local,((e,t)=>(u(),d("tr",{key:`invoice-${t}`},[ln,v("td",null,y(c(M)(e.created).format("MM/DD/YYYY")),1),v("td",null,[e.period_start?(u(),d("span",on,y(c(M)(e.period_start).format("MM/DD/YYYY")),1)):(u(),d("span",rn))]),v("td",null,[e.period_end?(u(),d("span",cn,y(c(M)(e.period_end).format("MM/DD/YYYY")),1)):(u(),d("span",un))]),v("td",null,y(c(oe)(e.amount/100)),1),dn,mn,v("td",null,[k(y(e.status?"paid":"incomplete"),1),m(" <br /> "),m(" <small>{{ invoice.description_status }}</small> ")])])))),128))])):m("v-if",!0),m(" <tbody\n            v-for=\"(payment, key) in paymentsMemberchipsHistory\"\n            :key=\"`paymentHistory-${key}`\"\n          >\n            <tr v-for=\"(p, k) in payment.payments\" :key=\"`pay-${k}`\">\n              <td>{{ moment(p.created_at).format('DD/MM/YYYY') }}</td>\n              <td>{{ moment(p.created_at).format('HH:mm:ss') }}</td>\n              <td>{{ moneda(p.amount) }}</td>\n              <td>{{ p.payment_type.name }}</td>\n              <td>{{ payment.membership }}</td>\n              <td>{{ p.status ? 'succeded' : 'error' }}</td>\n            </tr>\n          </tbody> ")])])),_:1}),m("v-if",!0)])),_:1})):m("v-if",!0)}}});const vn=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Charge Invoice History"),v("p")],-1),yn=v("p",null,"Invoices",-1),hn={class:"table is-hoverable is-fullwidth"},fn=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"Description"),v("th",{scope:"col"},"Created"),v("th",{scope:"col"},"Amount"),v("th",{scope:"col"},"Method"),v("th",{scope:"col"},"Download"),v("th",{scope:"col"},"Status")])],-1),bn={key:0},_n=v("i",{class:"fas fa-download","aria-hidden":"true"},null,-1),gn={key:1},kn=v("td",null,"Subscription",-1),Mn={key:0},Cn={key:1},xn={key:0},wn={key:1},jn=v("td",null,"Cash",-1),Yn=v("td",null,[m(' <a :href="invoice.invoice_pdf" target="_blank">\n                  <VButton>\n                    <i class="fas fa-download" aria-hidden="true"></i>\n                  </VButton>\n                </a> ')],-1);var Dn=n({expose:[],setup(e){const t=w({data:[]});return o((()=>D.value.payments)),o((()=>{let e=[];return W.value.forEach((t=>{e.push({membership:t.membership.name,payments:t.payments})})),e})),i((async()=>{const{data:e}=await R(Y.value.id,{invoice_type:3});t.data=e.invoices})),(e,n)=>{const s=ve,l=Pe,i=a,o=ke;return c(Y)?(u(),d(o,{key:0},{"header-left":p((()=>[vn])),"header-right":p((()=>[])),content:p((()=>[m(" <memberCreditCard /> "),v(i,{class:"my-4"},{default:p((()=>[yn,v("table",hn,[fn,c(t).data&&c(t).data.length?(u(),d("tbody",bn,[(u(!0),d(h,null,f(c(t).data,((e,t)=>(u(),d("tr",{key:`invoice-${t}`},[v("td",null,[v("p",null,y(e.description),1),m(' <span\n                  v-for="(item, keyy) in JSON.parse(invoice.billing_reason)"\n                  :key="`invo-${keyy}`"\n                >\n                  <VTag v-if="item" class="mr-1 mb-1" :label="item" />\n                </span> ')]),m(" <td> "),m(' <VTag class="mr-2" :label="invoice.billing_reason" /> '),m(" </td> "),v("td",null,y(c(M)(e.created).format("MM/DD/YYYY")),1),v("td",null,y(c(oe)(e.total/100)),1),v("td",null,y(e.collection_method),1),v("td",null,[v("a",{href:e.invoice_pdf,target:"_blank"},[v(s,null,{default:p((()=>[_n])),_:1})],8,["href"])]),v("td",null,[v(l,{class:"mr-1 mb-1",label:e.status},null,8,["label"]),m(' <VTag\n                  class="mr-1 mb-1"\n                  :label="invoice.payments_intents[0].status"\n                /> ')])])))),128))])):c(Y).membership_members&&c(Y).membership_members.invoice_local?(u(),d("tbody",gn,[(u(!0),d(h,null,f(c(Y).membership_members.invoice_local,((e,t)=>(u(),d("tr",{key:`invoice-${t}`},[kn,v("td",null,y(c(M)(e.created).format("MM/DD/YYYY")),1),v("td",null,[e.period_start?(u(),d("span",Mn,y(c(M)(e.period_start).format("MM/DD/YYYY")),1)):(u(),d("span",Cn))]),v("td",null,[e.period_end?(u(),d("span",xn,y(c(M)(e.period_end).format("MM/DD/YYYY")),1)):(u(),d("span",wn))]),v("td",null,y(c(oe)(e.amount/100)),1),jn,Yn,v("td",null,[k(y(e.status?"paid":"incomplete"),1),m(" <br /> "),m(" <small>{{ invoice.description_status }}</small> ")])])))),128))])):m("v-if",!0),m(" <tbody\n            v-for=\"(payment, key) in paymentsMemberchipsHistory\"\n            :key=\"`paymentHistory-${key}`\"\n          >\n            <tr v-for=\"(p, k) in payment.payments\" :key=\"`pay-${k}`\">\n              <td>{{ moment(p.created_at).format('DD/MM/YYYY') }}</td>\n              <td>{{ moment(p.created_at).format('HH:mm:ss') }}</td>\n              <td>{{ moneda(p.amount) }}</td>\n              <td>{{ p.payment_type.name }}</td>\n              <td>{{ payment.membership }}</td>\n              <td>{{ p.status ? 'succeded' : 'error' }}</td>\n            </tr>\n          </tbody> ")])])),_:1}),m("v-if",!0)])),_:1})):m("v-if",!0)}}});const Vn={},In={key:0},Sn={key:1},$n={key:2};Vn.render=function(e,t){const a=Ka,n=pn,s=Dn,l=Ee;return u(),d(l,{selected:"subscription",tabs:[{label:"Subscription Invoice",value:"subscription"},{label:"Product Invoice",value:"product"},{label:"Charge Invoice",value:"charge"}]},{tab:p((({activeValue:e})=>["subscription"===e?(u(),d("div",In,[v(a)])):"product"===e?(u(),d("div",Sn,[v(n)])):"charge"===e?(u(),d("div",$n,[v(s)])):m("v-if",!0)])),_:1})};const Pn=v("div",null,[v("h1",{class:"title is-4 mb-0"}," Waiver "),v("p",null,"Edit member's waiver information")],-1),En=k(" Convert to Members "),Tn={class:"columns is-multiline"},Fn={class:"border-1 document_box p-4 d-flex justify-content-center radius-small"},Bn={href:"234",class:"text-center"},An=v("img",{style:{width:"70px"},src:we,alt:""},null,-1);var Hn=n({expose:[],setup(e){const t=r([{name:"Waiver_010221.pdf",url:""},{name:"Waiver_010221.pdf",url:""}]);return(e,a)=>{const n=ve,s=ke;return u(),d(s,null,{"header-left":p((()=>[Pn])),"header-right":p((()=>[v(n,{color:"info"},{default:p((()=>[En])),_:1})])),content:p((()=>[v("div",Tn,[(u(!0),d(h,null,f(t.value,((e,t)=>(u(),d("div",{class:"column is-2 mb-4",key:`family-${t}`},[v("div",Fn,[v("a",Bn,[An,v("p",null,y(e.name),1)])])])))),128))])])),_:1})}}});const zn=k("Confirm");var Nn=n({expose:[],props:{openModal:{type:Boolean,default:!1}},emits:["closeModal","refreshTransactions"],setup(e,{emit:t}){const a=e,n=r(!1),s=async()=>{const e=ce(L.value),a={amount:e.amount,description:e.description};n.value=!0;try{"Add Credit"===e.transaction_type?await G(Y.value.id,a):await U(Y.value.id,a),de(L.value),re.success("Success"),t("closeModal"),t("refreshTransactions")}catch(s){"string"==typeof s.response.data.message?re.error(s.response.data.message):re.error(s)}finally{n.value=!1}},l=()=>{de(L.value),t("closeModal")};return(e,t)=>{const i=ge,o=ve,r=be;return u(),d(r,{open:a.openModal,title:"Create a new transaction",size:"small",actions:"right",onClose:l},{content:p((()=>[v(i,{"inputs-step":c(L)},null,8,["inputs-step"])])),action:p((()=>[v(o,{color:"primary",raised:"",onClick:s,loading:n.value},{default:p((()=>[zn])),_:1},8,["loading"])])),_:1},8,["open"])}}});const qn=v("div",null,[v("h1",{class:"title is-4 mb-0"},"Credit History"),v("p",null,"Edit member's credit history")],-1),On=k(" New Transaction "),Rn={class:"title"},Wn={class:"mt-4"},Ln={class:"table is-hoverable is-fullwidth"},Gn=v("thead",null,[v("tr",null,[v("th",{scope:"col"},"ID"),v("th",{scope:"col"},"Description"),v("th",{scope:"col"},"Date"),v("th",{scope:"col"},"Type"),v("th",{scope:"col"},"Amount")])],-1),Un={key:0};var Jn=n({expose:[],setup(e){const t=w({open:!1}),n=r(0);i((async()=>{s()}));const s=async()=>{await J(Y.value.id),(async()=>{const{data:e}=await X(Y.value.id);n.value=e.balance})()},l=()=>{t.open=!t.open},o=()=>{t.open=!1};return(e,i)=>{const r=ve,b=Nn,_=a,g=ke;return c(Y)?(u(),d(g,{key:0},{"header-left":p((()=>[qn])),"header-right":p((()=>[v(r,{onClick:l,color:"primary"},{default:p((()=>[On])),_:1})])),content:p((()=>[v(b,{"open-modal":c(t).open,onCloseModal:o,onRefreshTransactions:s},null,8,["open-modal"]),v("p",Rn,"Credit: "+y(n.value)+"$",1),v(_,{class:"p-"},{default:p((()=>[v("div",Wn,[v("table",Ln,[Gn,c(K)?(u(),d("tbody",Un,[(u(!0),d(h,null,f(c(K).data,((e,t)=>(u(),d("tr",{key:`transaction-${t}`},[v("td",null,y(e.id),1),v("td",null,y(e.meta.description),1),v("td",null,y(c(M)(e.created_at).format("MM/DD/YYYY")),1),v("td",null,y(e.type),1),v("td",null,y(e.amount),1)])))),128))])):m("v-if",!0)])])])),_:1})])),_:1})):m("v-if",!0)}}});const Xn={key:0,class:"columns is-multiline"},Kn={class:"column is-3"},Qn={class:"column is-9"},Zn={class:"columns is-multiline column is-12"},es={class:"columns is-multiline column is-12"},ts={key:1,class:"columns is-multiline"},as={class:"column is-3"},ns={class:"column is-9"},ss={class:"d-flex justify-content-between"},ls=v("b",null,"Member since.",-1),is=v("p",null,[m(" <b>Membership Active:</b> {{ memberMermship.membership.name }}  ")],-1),os={key:2},rs={class:"text-right"},cs={class:"title is-6 mb-0"},us={class:"title is-6"},ds={key:0};var ms=n({expose:[],setup(n){const h=x(),f=s();Fe.value="Member Profile",j({title:"Members"});const g=r(!1),C=r("personalInformation"),w=e=>{C.value=e.value};l((()=>f.query),((e,t)=>{Object.keys(e).length>0&&(T(),P())}));const D=r("ERROR MEMBERSHIP"),I=r("");l(Y,(e=>{})),l((()=>f.hash),(e=>{C.value=f.hash.slice(1)})),l((()=>f.query.id),(e=>{C.value="personalInformation"}));const $=r(!0),P=()=>{$.value=!0,setTimeout((()=>{$.value=!1}),500)},E=r(null);i((()=>{""!=f.hash&&(C.value=f.hash.slice(1)),Ye().then((e=>{me(V,"locations_id",De.value),me(V,"locations",De.value)})),qe().then((e=>{me(S,"country_id",e.contries),me(S,"city_id",e.cities),me(S,"state_id",e.states),me(Q,"city_id",e.cities),me(Q,"state_id",e.states),me(Q,"country_id",e.contries),me(B.value,"city_id",e.cities),me(B.value,"state_id",e.states),me(B.value,"country_id",e.contries)})),Ae(1).then((e=>{me(V,"memberships_id",e.data.memberships)})),Be().then((e=>{me(V,"discount",e.data.discounts)})),He().then((e=>{me(V,"recurrences_id",e.data)})),ze().then((e=>{me(V,"staff_id",e.data)})),null!=f.query.id&&T(),null!=f.query.code&&($.value=!1,Oe(f.query.code).then((e=>{E.value=e.data.suscripcion,e.data.suscripcion.member&&(Y.value=e.data.suscripcion.member,h.push({name:"members-profile",query:{id:e.data.suscripcion.member.id},hash:"#susbcriptionIndex"}))})))}));const T=async()=>{await Z(f.query.id).then((e=>{for(var t in e.data)if("select_type"==t)"Individual"==e.data[t]?(ie(S.value,"select_type").model=!1,ie(S.value,"company_name").typeInput="hidden"):(ie(S.value,"select_type").model=!0,ie(S.value,"company_name").typeInput="text");else if("membership_members"==t)for(var a in e.data[t]||(D.value="Does not have a membership",I.value="Does not have a membership go to the Membership/Contract section and create a new membership and press New Membership",console.error("no posee una membresia :(")),e.data[t])if("memberships_location"==a)e.data[t][a]?(ie(V,"locations_id").model=e.data[t][a].companies_locations_id,Ne([e.data[t][a].companies_locations_id]).then((e=>{me(V,"diciplines",e.data)}))):console.error("no posee una locacion :(");else if("diciplines"==a)ie(V,"diciplines").model=[],e.data[t][a].forEach((e=>{ie(V,"diciplines").model.push(e.diciplines_id)}));else if("discount"==a)e.data[t][a]&&(ie(V,"discount").model=e.data[t][a].id);else if("status"==a)2==e.data[t][a]&&(ie(V,"memberships_id").model="");else if("locations"==a){let n=[];e.data[t][a].length&&e.data[t][a].forEach((e=>{n.push(e.companies_locations_id)})),ie(V,"locations").model=n}else null!=ie(V,a)&&pe(V,a,e.data[t][a]);else if("trainers"==t){let a=[];e.data[t].forEach((e=>{a.push(e.id)})),pe(V,"staff_id",a)}else if("emergency"==t)for(a in e.data[t])pe(N,a,e.data[t][a]);else if("guardian"==t)for(a in e.data[t])"parent_address"==a?ie(B.value,"address").model=e.data[t][a]:"parent_photo"==a?(""!=e.data[t][a]||null!=e.data[t][a]?ie(B.value,"parent_photo").required=!1:ie(B.value,"parent_photo").required=!0,ie(B.value,"parent_photo").data=e.data[t][a]):pe(B,a,e.data[t][a]);else"leo_vet_fr"==t?pe(S,t,1==e.data[t]):"category"==t?"Adult"==e.data[t]?ie(S.value,"category").model=!0:ie(S.value,"category").model=!1:pe(S,t,e.data[t]);$.value=!1}))},F=o((()=>Y.value.estado.color)),A=()=>{$.value=!0,T()};return(n,s)=>{const l=e,i=Je,o=qt,r=a,h=_e,f=Lt,x=ra,j=fa,D=Ma,V=Da,I=Ea,S=Vn,P=Hn,T=Jn,B=t,H=Te;return u(),d(H,null,{default:p((()=>[$.value?(u(),d("div",Xn,[v("div",Kn,[v(l,{height:"700px"})]),v("div",Qn,[v("div",Zn,[v(l,{height:"150px"})]),v("div",es,[v(l,{height:"530px"})])])])):m("v-if",!0),!$.value&&c(Y)?(u(),d("div",ts,[v("div",as,[v(i,{style:[{position:"sticky",top:"10px"},{background:c(F)}],category:c(Y).category,onChangeMenu:w},null,8,["category","style"])]),m(" <p>{{ isSolvente }}</p> "),v("div",ns,[g.value?(u(),d(o,{key:0,class:"mb-4"})):m("v-if",!0),null!=c(Y).membership_members?(u(),d(r,{key:1,class:"mb-4"},{default:p((()=>[v("div",ss,[v("div",null,[v("p",null,[v("b",null,[k("Member #"+y(c(Y).id)+" - ",1),v("small",null,y(c(Y).category),1)])]),v("p",null,[v("small",null,[ls,k(" "+y(c(M)(c(Y).created_at).format("ddd - DD MMM YYYY")),1)])]),is])])])),_:1})):m("v-if",!0),"susbcriptionIndex"==C.value?(u(),d(h,{key:2})):m("v-if",!0),b(v(f,{category:c(Y).category},null,8,["category"]),[[_,"personalInformation"==C.value]]),b(v(x,{onReload:A},null,512),[[_,"memberMembership"==C.value]]),"memberFamily"==C.value?(u(),d(j,{key:3})):m("v-if",!0),"memberEmergency"==C.value?(u(),d(D,{key:4})):m("v-if",!0),"memberCheckins"==C.value?(u(),d(V,{key:5})):m("v-if",!0),"memberPurchases"==C.value?(u(),d(I,{key:6})):m("v-if",!0),"memberInvoices"==C.value?(u(),d(S,{key:7})):m("v-if",!0),"memberWaiver"==C.value?(u(),d(P,{key:8})):m("v-if",!0),"memberCredit"==C.value?(u(),d(T,{key:9})):m("v-if",!0)])])):m("v-if",!0),!$.value&&E.value?(u(),d("div",os,[c(Y)?m("v-if",!0):(u(),d(r,{key:0,class:"\n          mb-4\n          d-flex\n          justify-content-between\n          align-items-center\n          cardprofile\n        "},{default:p((()=>[v("div",null,[v(B,{size:"big",initials:"CT"})]),v("div",rs,[v("p",cs," Username: "+y(E.value.user.name),1),v("p",us,"Email: "+y(E.value.user.email),1),v("p",null,y(E.value.memberships_members.paymenttype.name),1),E.value.user.cards.length?(u(),d("p",ds,y(E.value.user.cards[0].brand)+" ****"+y(E.value.user.cards[0].last4),1)):m("v-if",!0)])])),_:1})),c(Y)?m("v-if",!0):(u(),d(h,{key:1,suscripcion:E.value},null,8,["suscripcion"])),c(Y)?m("v-if",!0):(u(),d(f,{key:2,class:"mt-4",category:"",suscripcion:E.value,user:E.value.user},null,8,["suscripcion","user"]))])):m("v-if",!0)])),_:1})}}});export default ms;
