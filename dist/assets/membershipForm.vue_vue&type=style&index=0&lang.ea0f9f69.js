var e=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,l=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,i=(e,i)=>{for(var n in i||(i={}))a.call(i,n)&&l(e,n,i[n]);if(s)for(var n of s(i))t.call(i,n)&&l(e,n,i[n]);return e};import{_ as n}from"./inputsLayaut.vue_vue&type=style&index=0&lang.996de933.js";import{_ as o}from"./formLayaut.vue_vue&type=style&index=0&lang.1dc86fff.js";import{d as r,L as c,a4 as p,b as u,w as d,r as m,o as f,i as v,D as b,j as h,k as y}from"./vendor.0b0c2a98.js";import{i as g,s as j,f as _,d as E,e as O,b as w,n as A}from"./Memberships.1b7802c9.js";import{a as S}from"./Diciplines.db383ad4.js";import{a as x,g as L,p as $,h as k,n as D}from"./index.6309fa0f.js";const P={class:"columns is-multiline"},q={class:"column is-12"},B={class:"column is-6"},I={class:"column is-6"},M={class:"column is-12"},z={class:"column is-12"};var C=r({expose:[],props:{type:{type:String,default:"create"},buttons:{type:Array,default:["save","back"]},isLoading:{type:Boolean,default:!1}},setup(e){const s=e,a=c(),t=p(),l=u((()=>"create"==s.type?{title:"Add a new membership",subtitle:"Add information for a new club membership"}:{title:"Edit membership",subtitle:"Edit information for a club membership"})),r=u((()=>g.find((e=>"locations_options"==e.name)))),C=u((()=>g.find((e=>"locations"==e.name))));d(C.value,(e=>{F(e)}));const F=e=>{let a=[];e.model.length>0&&(e.model.forEach((t=>{let l=e.values.find((e=>e.id==t));"create"==s.type&&a.push({name:"locationsSaleOrAccess",value:l.id,placeholder:l.name,values:[{placeholder:"Access",name:"access",model:["access"]},{placeholder:"Sale",name:"sale",model:["sale"]}]})})),x(g,"locations_options",a)),S(C.value.model).then((e=>{x(g,"diciplines",e.data),L(g,"diciplines").values.push({id:0,name:"All"})}))};u((()=>g.find((e=>"diciplines"==e.name))));const G=m(!1),H=()=>{G.value=!0;let e=i(i(i(i(i({},$(g)),$(E)),$(O)),$(A)),$(w)),l=[];"create"==s.type&&e.locations.length>0&&(e.locations.forEach((e=>{let s=r.value.values.find((s=>s.value==e));l.push({id:e,access:s.values.find((e=>"access"==e.name)).model.length?1:0,sale:s.values.find((e=>"sale"==e.name)).model.length?1:0})})),e.locations=l,delete e.locations_options),k.value||("create"==s.type?j(e).then((e=>{G.value=!1,t.back()})).catch((e=>{for(var s in G.value=!1,e.response.data.errores)e.response.data.errores[s].forEach((e=>{D.error(`${e}: ${s}`)}))})):_(a.query.id,e).then((e=>{D.success("Success"),G.value=!1})).catch((e=>{for(var s in G.value=!1,e.response.data.errores)e.response.data.errores[s].forEach((e=>{D.error(`${e}: ${s}`)}))})))};return(a,t)=>{const i=n,r=o;return f(),v(r,{buttons:s.buttons,titles:b(l),"is-loading":e.isLoading,"is-loader-active":G.value,onSaveData:H},{default:h((()=>[y("div",P,[y("div",q,[y(i,{"inputs-step":b(g)},null,8,["inputs-step"])]),y("div",B,[y(i,{"inputs-step":b(E)},null,8,["inputs-step"])]),y("div",I,[y(i,{"inputs-step":b(O)},null,8,["inputs-step"])]),y("div",M,[y(i,{"inputs-step":b(w)},null,8,["inputs-step"])]),y("div",z,[y(i,{"inputs-step":b(A)},null,8,["inputs-step"])])])])),_:1},8,["buttons","titles","is-loading","is-loader-active"])}}});export{C as _};
