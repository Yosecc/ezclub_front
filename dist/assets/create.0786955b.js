import{_ as e}from"./V-Card.vue_vue&type=script&setup=true&lang.b57414a9.js";import{_ as t}from"./V-Loader.vue_vue&type=script&setup=true&lang.a67ef8b7.js";import{_ as a}from"./inputsLayaut.vue_vue&type=style&index=0&lang.9a5f1b2d.js";import{_ as s}from"./V-SwitchBlock.vue_vue&type=script&setup=true&lang.f9906d24.js";import{_ as l}from"./V-Control.b8a16a92.js";import{_ as i}from"./V-Field.vue_vue&type=script&setup=true&lang.5a5e683f.js";import{_ as o}from"./V-Button.vue_vue&type=script&setup=true&lang.115c9f56.js";import{_ as n}from"./Presupuesto.vue_vue&type=script&setup=true&lang.69c56141.js";import{_ as r}from"./SearchBar.vue_vue&type=style&index=0&lang.ee90735c.js";import{c as u,_ as c,a as p,b as d}from"./subscription-method-stripe-checkout.vue_vue&type=script&setup=true&lang.c90186a3.js";import{_ as m}from"./V-Tag.vue_vue&type=script&setup=true&lang.43768b74.js";import{_ as v}from"./SidebarLayout.vue_vue&type=script&setup=true&lang.12f27a68.js";import{d as f,P as y,O as _,ad as h,r as b,A as g,b as j,w as x,o as V,R as w,i as k,j as C,k as T,l as z,S,U as P,F as L,H as I,I as A,W as B,G as O}from"./vendor.84e48f7c.js";import{p as Y}from"./sidebarLayoutState.bceb862d.js";import{b as M,d as E,i as U,e as D,s as H,f as R,B as F}from"./Subscriptions.fc616ddf.js";import{e as G,c as $,s as q,d as N}from"./config.680fd2af.js";import{a as W,g as J,e as K,m as Q,n as X,s as Z}from"./index.46ea8f6b.js";import{i as ee}from"./Members.dc0a9073.js";import"./V-SwitchSegment.vue_vue&type=script&setup=true&lang.8a41fb82.js";import"./V-Modal.vue_vue&type=script&setup=true&lang.f91cc122.js";import"./V-Checkbox.vue_vue&type=script&setup=true&lang.3090aa96.js";import"./V-Placeload.8fe4e440.js";import"./V-Avatar.vue_vue&type=script&setup=true&lang.b74dc949.js";import"./MemberCards.b14fa83c.js";import"./V-PlaceholderSection.vue_vue&type=script&setup=true&lang.12764c4e.js";import"./Companies.5af72a07.js";import"./ActivityPanel.vue_vue&type=style&index=0&lang.de0d6a06.js";import"./useDropdown.3858e0aa.js";import"./V-Dropdown.7cdac118.js";import"./V-Icon.vue_vue&type=script&setup=true&lang.1503437d.js";import"./activePanelState.de92bd5f.js";import"./fastpizza.1e58d0ec.js";import"./TaskPanel.vue_vue&type=style&index=0&lang.1c78e14a.js";import"./video.f5cea5d5.js";import"./SearchPanel.vue_vue&type=style&index=0&lang.f7104d79.js";import"./darkModeState.0452d175.js";import"./AnimatedLogo.2dcbd823.js";import"./V-IconBox.vue_vue&type=script&setup=true&lang.051c3ce8.js";import"./V-Block.vue_vue&type=script&setup=true&lang.d16ae397.js";import"./UserPopoverContent.vue_vue&type=script&setup=true&lang.e7d23443.js";import"./userPopovers.f4b9fc60.js";import"./Discounts.a575d4d9.js";import"./Diciplines.9072b775.js";import"./Memberships.bc47030e.js";const te={class:"columns is-multiline"},ae={class:"column is-9"},se=z("h1",{class:"title is-4"},"1. Select a membership",-1),le={class:"columns is-multiline"},ie={class:"title is-4"},oe={class:"column is-3"},ne={class:"title is-5 text-left mt-2"},re={key:0},ue={key:1},ce={key:0,class:"column is-12"},pe=z("h1",{class:"title is-4"},"2. Approve the budget",-1),de=O("Accept and continue "),me={key:1,class:"column is-12"},ve=z("h1",{class:"title is-4"},[O(" 3. Enter the member's email. "),A(' \n          <br />\n            <small style="font-size: 12px"\n              >* Then select a match if possible...otherwise press ENTER</small\n            >\n          <br />\n            <small style="font-size: 12px"\n              >* If you want to register a minor, please enter the email of the\n              family member to register</small\n            > \n        ')],-1),fe={class:"columns is-multiline"},ye={class:"column is-3"},_e=z("p",{class:"title is-6 mb-1"},[z("b",null,"Total")],-1),he={class:"title is-3 mb-0"},be={class:"is-3 column"},ge=z("p",{class:"title is-6"}," You must load a card to continue. If you do not have a card, define the paymentType option as cash ",-1),je={class:"column is-3"},xe=z("p",{class:"title is-6"}," You must load a card to continue. If you do not have a card, define the paymentType option as cash ",-1);var Ve=f({expose:[],setup(f){Y.value="Subscriptions",y({title:"Subscriptions"}),_(),h();const O=b([]),Ve=b(!0),we=b(!1),ke=b(void 0),Ce=b(null),Te=b(null);g({number:5,status:!1,time:5e3});const ze=j((()=>{const e=O.value.find((e=>e.id==H.memberships_id));return null==e?void 0:e.amounts.filter((e=>e.is_recurrence==Ve.value&&null!=e.recurrencia))})),Se=j((()=>{for(var e in H)null!=J(U.value,e)&&(H[e]=J(U.value,e).model);return H}));x((()=>H.memberships_id),(e=>{H.recurrences_id=null,D.value=null,we.value=!1})),V((()=>{Oe(),M().then((e=>{O.value=e.data})),E(1,"membership").then((e=>{W(U,"discount",e.data.discounts)})),J(U,"payment_type_id").model=3,G().then((e=>{W(ee,"city_id",$.value),W(ee,"state_id",q.value),W(ee,"country_id",N.value),J(ee.value,"country_id").model=34}))}));const Pe=()=>{we.value=!0,setTimeout((()=>{window.scrollTo(0,window.scrollY+500)}),300)},Le=()=>{D.value=null,we.value=!1,Ie.value=!0,R(Se.value).then((e=>{D.value=e.data,setTimeout((()=>{window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight),Ie.value=!1}),300)})).catch((e=>{Ie.value=!1,ke.value="info",setTimeout((()=>{ke.value=void 0}),500)}))},Ie=b(!1),Ae=async e=>{Te.value?(Ie.value=!0,H.email=Te.value,H.subscription_payment_type_id=J(U,"payment_type_id").model,Object.assign(H,e),console.log("solicitud",H),await F(H).then((e=>{window.location.href=e.data.url})).catch((e=>{X.error("Error"),Ie.value=!1}))):X.error("Email is required")},Be=()=>{setTimeout((()=>{if(console.log("member",Ce),Ce.value)for(var e in Ce.value&&Ce.value.user&&(Me.value=!0),Ce.value)"photo"!=e&&Z(ee,e,Ce.value[e]);else Z(ee,"email",Te.value);let t=window.scrollY+window.scrollY/4;window.scrollTo(0,t)}),300)},Oe=async()=>{K(U.value),K(ee.value),D.value=null,H.memberships_id=null,H.recurrences_id=null,H.is_initiation_fee=!1,H.is_card_price=!1,H.discount=null,H.is_last_month=!1,H.prorrateo=!0,H.schedules="",H.leo_vet_fr=!1,H.multigym=!1},Ye=j((()=>J(U,"payment_type_id").model));j((()=>!J(ee.value,"category").model));const Me=b(!1),Ee=j((()=>!(3!=Ye.value||!Me.value)||1==Ye.value)),Ue=(e=null)=>{e&&e.payment_method_id&&(Me.value=!0)};return(f,y)=>{const _=e,h=t,b=a,g=s,j=l,x=i,V=o,Y=n,M=r,E=u,R=m,F=c,G=p,$=d,q=v,N=w("tooltip");return k(),C(q,null,{default:T((()=>[z("div",te,[z("div",ae,[se,z(_,{color:ke.value,class:"mb-4"},{default:T((()=>[z(h,{size:"large",active:!O.value.length},{default:T((()=>[z("div",le,[(k(!0),C(S,null,P(O.value,((e,t)=>(k(),C("div",{key:`membership-${t}`,class:"column is-4 btn btn-card",onClick:t=>L(H).memberships_id=e.id},[z(_,{color:L(H).memberships_id==e.id?"primary":void 0,class:"h-100"},{default:T((()=>[z("div",null,[z("h1",ie,I(e.name),1),A(" <p>{{ item }}</p> ")])])),_:2},1032,["color"])],8,["onClick"])))),128))])])),_:1},8,["active"])])),_:1},8,["color"]),z(_,{class:""},{default:T((()=>[z(b,{"inputs-step":L(U)},null,8,["inputs-step"])])),_:1})]),z("div",oe,[z(_,{color:ke.value,class:"h-100 d-flex flex-column justify-content-between"},{default:T((()=>[z("div",null,[z(_,{class:"px-3 py-3 my-3"},{default:T((()=>[z(x,null,{default:T((()=>[z(j,null,{default:T((()=>[z(g,{modelValue:Ve.value,"onUpdate:modelValue":y[1]||(y[1]=e=>Ve.value=e),label:"Recurring Subscription",color:"primary"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(k(!0),C(S,null,P(L(ze),((e,t)=>(k(),C("div",{key:`membership-precios-${t}`,class:"btn btn-card",onClick:t=>L(H).recurrences_id=e.id},[z(_,{color:L(H).recurrences_id==e.id?"primary":void 0,class:"mb-3 py-4"},{default:T((()=>[z("p",null,I(e.recurrencia.descriptions),1),z("p",ne,I(L(Q)(e.amount)),1)])),_:2},1032,["color"])],8,["onClick"])))),128))]),z("div",null,[z(h,{size:"large",active:Ie.value},{default:T((()=>[z(V,{onClick:Le,color:L(D)?void 0:"primary",class:"d-flex justify-content-center mt-6 py-5 w-100",style:{"text-align":"center","text-transform":"uppercase","font-size":"20px","font-weight":"900"}},{default:T((()=>[L(D)?(k(),C("span",ue," restart")):(k(),C("span",re,"start subscription"))])),_:1},8,["color"])])),_:1},8,["active"])])])),_:1},8,["color"])]),L(D)?(k(),C("div",ce,[pe,z(_,null,{default:T((()=>[z(Y,{presupuesto:L(D)},null,8,["presupuesto"]),we.value?A("v-if",!0):(k(),C(V,{key:0,onClick:Pe,color:"primary",class:"d-flex justify-content-center py-5 px-6 ml-auto",style:{"text-align":"center","text-transform":"uppercase","font-size":"20px","font-weight":"900"}},{default:T((()=>[de])),_:1}))])),_:1})])):A("v-if",!0),L(D)&&we.value?(k(),C("div",me,[ve,z(_,{style:{"margin-bottom":"24px"}},{default:T((()=>[z(M,{dato:"email",valor:Te.value,"onUpdate:valor":y[2]||(y[2]=e=>Te.value=e),modelValue:Ce.value,"onUpdate:modelValue":y[3]||(y[3]=e=>Ce.value=e),"not-payment-methods":!1,"not-search":!1,onOnSubmit:Be},null,8,["valor","modelValue"])])),_:1}),z(_,{style:{"margin-bottom":"24px"}},{default:T((()=>[z("div",fe,[z("div",ye,[z(h,{size:"small",class:"h-100",active:Ie.value},{default:T((()=>[z(_,{class:"mb-4 h-100"},{default:T((()=>[z("div",null,[_e,z("p",he,I(L(Q)(L(D).total)),1)])])),_:1})])),_:1},8,["active"])]),z("div",be,[z(h,{size:"small",active:Ie.value},{default:T((()=>[z(E,{total:L(D).total,email:Te.value,confirmar_email:!0,onOnPayment:Ae},null,8,["total","email"])])),_:1},8,["active"])]),A(' <div class="column is-2"> '),A(' <VLoader size="small" class="h-100 mr-0" :active="isLoaderActive">\n                <subscription-method-payment-debit-automatic\n                  :total="20"\n                  :card="false"\n                  :user="{ email: dato, id: null }"\n                  :new-user="true"\n                  :text-card="\'Cards\'"\n                  :outline="true"\n                  @onPayment="onActionCard"\n                >\n                  <template #righttop>\n                    <VTag\n                      v-tooltip="\n                        \'This option does not generate any charge to the card\'\n                      "\n                      color="solid"\n                      label="?"\n                    />\n                  </template>\n                </subscription-method-payment-debit-automatic>\n              </VLoader> '),A(" </div> "),z("div",{class:["column",(L(Ye),"is-3")]},[z(h,{size:"small",active:Ie.value},{default:T((()=>[z(G,{total:L(D).total,email:Te.value,confirmar_email:!0,onOnPayment:Ae,define_status:L(Ee)},{righttop:T((()=>[3!=L(Ye)||Me.value?A("v-if",!0):B((k(),C(R,{key:0,color:"solid",label:"?"},null,512)),[[N,"You must load a card to continue. If you do not have a card, define the paymentType option as cash "]])])),modalprev:T((()=>[ge,z(h,{size:"small",class:"h-100 mr-0",active:Ie.value},{default:T((()=>[z(F,{total:20,card:!1,user:{email:Te.value,id:Ce.value&&Ce.value.user?Ce.value.user.id:null},"new-user":!Ce.value||!Ce.value.user,"text-card":"Cards (+)",outline:!0,onOnPayment:Ue},{righttop:T((()=>[B(z(R,{color:"solid",label:"?"},null,512),[[N,"This option does not generate any charge to the card"]])])),_:1},8,["user","new-user","text-card"])])),_:1},8,["active"])])),_:1},8,["total","email","define_status"])])),_:1},8,["active"])],2),z("div",je,[z(h,{size:"small",active:Ie.value},{default:T((()=>[z($,{total:L(D).total,onOnPayment:Ae,define_status:!(3==L(Ye)&&!Me.value),email:Te.value,confirmar_email:!0},{righttop:T((()=>[Me.value?A("v-if",!0):B((k(),C(R,{key:0,color:"solid",label:"?"},null,512)),[[N,"You must load a card to continue. If you do not have a card, define the paymentType option as cash "]])])),modalprev:T((()=>[xe,z(h,{size:"small",class:"h-100 mr-0",active:Ie.value},{default:T((()=>[z(F,{total:0,card:!1,user:{email:Te.value,id:Ce.value&&Ce.value.user?Ce.value.user.id:null},"new-user":!Ce.value||!Ce.value.user,"text-card":"Cards (+)",outline:!0,onOnPayment:Ue},{righttop:T((()=>[B(z(R,{color:"solid",label:"?"},null,512),[[N,"This option does not generate any charge to the card"]])])),_:1},8,["user","new-user","text-card"])])),_:1},8,["active"])])),_:1},8,["total","define_status","email"])])),_:1},8,["active"])])])])),_:1}),A(' <VLoader :active="isLoaderActive">\n          <VButton\n            @click="proccessSuscripcion"\n            color="info"\n            class="d-flex justify-content-center py-5 px-6 ml-auto"\n            style="\n              text-align: \'center\';\n              text-transform: uppercase;\n              font-size: 20px;\n              font-weight: 900;\n            "\n          >\n            Process\n          </VButton>\n        </VLoader> '),A(' <VCard v-if="dato">\n          <inputsLayaut :inputs-step="inputsInformation" />\n          <div v-if="isMinor">\n            <VCard>\n              <p class="title is-5">Guardian Information</p>\n              <inputsLayaut :inputs-step="parentInsputs" />\n            </VCard>\n          </div>\n          <div class="mt-3">\n            <p v-if="tiempo.status">\n              You will be redirected, please wait a moment ...\n              {{ tiempo.number }}\n            </p>\n            <VLoader size="large" :active="isLoaderActive">\n              <VButton\n                @click="proccessMember"\n                color="info"\n                class="d-flex justify-content-center py-5 px-6 ml-auto"\n                style="\n                  text-align: center;\n                  text-transform: uppercase;\n                  font-size: 20px;\n                  font-weight: 900;\n                "\n              >\n                Continue\n              </VButton>\n            </VLoader>\n          </div>\n        </VCard> ')])):A("v-if",!0)])])),_:1})}}});export default Ve;
