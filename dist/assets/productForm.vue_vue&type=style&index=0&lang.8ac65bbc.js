import{_ as e}from"./V-Button.vue_vue&type=script&setup=true&lang.e4f3f19e.js";import{_ as t}from"./V-Avatar.vue_vue&type=script&setup=true&lang.119fc4d3.js";import{_ as s}from"./Companies.071a68fa.js";import{_ as a}from"./V-CardAdvanced.vue_vue&type=script&setup=true&lang.fc314ba9.js";import{_ as r}from"./V-Tag.vue_vue&type=script&setup=true&lang.62f4b657.js";import{_ as o}from"./V-Card.vue_vue&type=script&setup=true&lang.e9093fe9.js";import{d as l,b as c,o as i,h as n,k as u,j as p,K as d,B as m,J as f,D as v,L as h,N as y,G as b}from"./vendor.685e53b0.js";import{h as _}from"./moment.08a7f518.js";import{i as g,c as j,d as k,e as w,f as $,s as x}from"./Products.108435f0.js";import{v as A,i as C,n as P,p as E,c as D}from"./ActivityPanel.vue_vue&type=style&index=0&lang.4c69e724.js";import{a as V}from"./index.2562c924.js";const Y={class:"title is-4 mb-0"},B=b(" Go Back "),S=b(" Save Changes "),G={class:"columns is-multiline mx-auto"},M={class:"p-6 column is-12"},T=u("h1",{class:"title is-5 mb-0"},"Product Picture",-1),q={class:"d-flex justify-content-center"},z={class:"text-center"},F={class:"column is-12"},J=u("h1",{class:"title is-5"},"Prices",-1),K={class:"table is-hoverable is-fullwidth"},L=u("thead",null,[u("tr",null,[u("th",{scope:"col"},"Status"),u("th",{scope:"col"},"Price"),u("th",{scope:"col"},"Create Date"),u("th",{scope:"col"},"User")])],-1),N={class:"w-100 justify-content-center d-flex"},U=b(" Add Price ");var H=l({expose:[],props:{type:{type:String,default:"create"}},setup(l){const b=l,H=m(),I=c((()=>"create"==b.type?{title:"Add a new product",subtitle:"Add information for a new product"}:{title:"Edit product",subtitle:"Edit information for a product"})),O=c((()=>`${V.value}storage/${A(g.value,"photo")}`)),Q=()=>{""!=C(j.value,"price").model?confirm("Are you sure you want to add a new price? This action will disable the previous price and it cannot be restored")&&w(C(j.value,"price").model).then((e=>{P.success("success save"),window.location.reload()})).catch((e=>{for(var t in e.response.data.errores)e.response.data.errores[t].forEach((e=>{P.error(`${t}: ${e}`)}))})):P.error("Price is required")},R=()=>{let e=E(g.value);e.price=C(j.value,"price").model;const t=new FormData;for(var s in e)"locations"==s?e[s].forEach((e=>{t.append("locations[]",e)})):t.append(s,e[s]);console.log(...t),"edit"==b.type&&$(t).then((e=>{P.success(e.data.message),D(g.value),H.back()})).catch((e=>{for(var t in e.response.data.errores)e.response.data.errores[t].forEach((e=>{P.error(`${t}: ${e}`)}))})),"create"==b.type&&x(t).then((e=>{P.success(e.data.message),D(g.value),H.back()})).catch((e=>{for(var t in e.response.data.errores)e.response.data.errores[t].forEach((e=>{P.error(`${t}: ${e}`)}))}))};return(c,m)=>{const b=e,w=t,$=s,x=a,A=r,C=o;return i(),n("div",null,[u(x,null,{"header-left":p((()=>[u("div",null,[u("h1",Y,f(v(I).title),1),u("p",null,f(v(I).subtitle),1)])])),"header-right":p((()=>[u(b,{onClick:m[1]||(m[1]=e=>v(H).back()),class:"mr-3"},{default:p((()=>[B])),_:1}),u(b,{onClick:R,color:"primary"},{default:p((()=>[S])),_:1})])),content:p((()=>[u("div",G,[u("div",M,[T,u("div",q,[u("div",z,[u(w,{picture:v(O),class:"mb-4",size:"xl"},null,8,["picture"]),u($,{"inputs-step":c.input_image},null,8,["inputs-step"])])])]),u("div",F,[u($,{"inputs-step":v(g)},null,8,["inputs-step"]),"create"==l.type?(i(),n($,{key:0,"inputs-step":v(j)},null,8,["inputs-step"])):d("",!0)])])])),_:1}),"edit"==l.type?(i(),n(C,{key:0,class:"mt-4"},{default:p((()=>[J,u("table",K,[L,u("tbody",null,[(i(!0),n(h,null,y(v(k).prices,((e,t)=>(i(),n("tr",{key:`price-${t}`},[u("td",null,[u(A,{color:e.status?"success":"danger",label:e.status?"Active":"Archived",rounded:""},null,8,["color","label"])]),u("td",null,"$"+f(e.price),1),u("td",null,f(v(_)(e.created_at).format("MM-DD-YYYY")),1),u("td",null,f(e.user.name),1)])))),128))])]),u("div",N,[u($,{"inputs-step":v(j)},null,8,["inputs-step"]),u(b,{color:"info",onClick:Q,class:"mt-5 ml-3"},{default:p((()=>[U])),_:1})])])),_:1})):d("",!0)])}}});export{H as _};
