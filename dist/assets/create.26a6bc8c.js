import{_ as me}from"./V-Button.vue_vue_type_script_setup_true_lang.72d178c7.js";import{_ as de}from"./V-Control.92200beb.js";import{_ as _e}from"./V-Field.vue_vue_type_script_setup_true_lang.33752939.js";import{_ as W}from"./inputsLayaut.vue_vue_type_style_index_0_lang.bc2ca8d6.js";import{_ as B}from"./formLayaut.vue_vue_type_style_index_0_lang.2638a67d.js";import{d as N,r as v,m as Y,c as I,o as d,e as _,w as b,u as a,k as fe,l as ve,f as r,j as ee,g as i,t as O,E as Me,a8 as z,F as X,G as Q,y as T,H as J,L as $e,i as q,a as he,s as w,h as De,ah as F,n as Ae,p as Ie,b as ke,B as Pe,q as P,I as H}from"./index.4457215e.js";import{a2 as Ve,a3 as we,D as f,X as S,i as V,a4 as ge,b as $,a5 as j,a6 as ue,a7 as Le,h as Fe,a8 as Ee,l as K,q as pe,a9 as L,aa as ce,S as Z,ab as Ne,ac as Oe,ad as Te}from"./Members.3210ead2.js";import{_ as je}from"./SearchBar.vue_vue_type_style_index_0_lang.1852ce89.js";import{_ as ye}from"./V-Card.vue_vue_type_script_setup_true_lang.f80f1beb.js";import{_ as Je}from"./V-Placeload.9684d098.js";import{a as Be,b as qe}from"./Presupuesto.vue_vue_type_script_setup_true_lang.4c0b2df3.js";import{_ as Re}from"./V-Progress.vue_vue_type_script_setup_true_lang.15284a16.js";import{_ as Ge}from"./SidebarLayout.vue_vue_type_script_setup_true_lang.a7af6f4a.js";import{a as Ue,m as He}from"./Memberships.f99f3fde.js";import{g as Ke}from"./Recurrences.4c691414.js";import{g as ze}from"./Discounts.a9c8271e.js";import{e as Xe,c as le,s as re,d as ie}from"./config.f468f56a.js";import{g as Qe}from"./Staffs.ad83113a.js";import{p as We}from"./sidebarLayoutState.d2b676a9.js";import"./V-SwitchSegment.vue_vue_type_script_setup_true_lang.96e64ac9.js";import"./V-Modal.vue_vue_type_script_setup_true_lang.f0368080.js";import"./V-Checkbox.vue_vue_type_script_setup_true_lang.70a8d51f.js";import"./V-Loader.vue_vue_type_script_setup_true_lang.f82321d3.js";import"./V-CardAdvanced.vue_vue_type_script_setup_true_lang.66aff21d.js";import"./Diciplines.164662a5.js";import"./V-Avatar.vue_vue_type_script_setup_true_lang.b4183814.js";import"./Companies.4f645ec0.js";import"./MemberCards.vue_vue_type_script_setup_true_lang.ec94bd88.js";import"./signComponent.vue_vue_type_script_setup_true_lang.4373d048.js";import"./pdf_icon.c303a5d8.js";import"./ActivityPanel.vue_vue_type_style_index_0_lang.8acd0baa.js";import"./useDropdown.d2881c63.js";import"./V-Dropdown.c58eb584.js";import"./V-Icon.vue_vue_type_script_setup_true_lang.a0e27302.js";import"./activePanelState.d3359fb3.js";import"./fastpizza.70124fcb.js";import"./TaskPanel.vue_vue_type_style_index_0_lang.50493a6a.js";import"./V-Tag.vue_vue_type_script_setup_true_lang.0d8ff65f.js";import"./video.d6dbc99d.js";import"./SearchPanel.vue_vue_type_style_index_0_lang.63cec0b9.js";import"./darkModeState.1f6503fc.js";import"./AnimatedLogo.d670690a.js";import"./V-IconBox.vue_vue_type_script_setup_true_lang.772b752f.js";import"./V-Block.vue_vue_type_script_setup_true_lang.00657afe.js";import"./UserPopoverContent.vue_vue_type_script_setup_true_lang.5fb53f85.js";import"./userPopovers.f4b9fc60.js";var Ye=N({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(y,{emit:u}){const h=y,c=v(!1);Y(()=>h.inputs,(n,t)=>{g()});const g=()=>{c.value=!0,setTimeout(()=>{c.value=!1},500)},p=I(()=>m.value?h.inputs.filter(n=>n.typeMember.includes("Company")):h.inputs.filter(n=>n.typeMember.includes("Individual"))),m=v(!1),x=n=>{m.value=!n.input.model,g()},M=n=>{let t=fe(p.value);ve.value||(t.select_type=t.select_type?"Company":"Individual",Ve.value=t,u("returData",t),u("changeStep",n))};return(n,t)=>{const s=W,l=B;return d(),_(l,{titles:{title:y.title},"is-loading":c.value,buttons:["next","back"],"buttons-disabled":a(we),step:1,onChangeStep:M},{default:b(()=>[r(s,{"inputs-step":a(p),onChangeSwitch:x},null,8,["inputs-step"])]),_:1},8,["titles","is-loading","buttons-disabled"])}}});var Ze=N({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(y,{emit:u}){const h=v(null),c=v([]),g=m=>{u("changeStep",m)};ee(()=>{c.value=[],i(f.value,"parent_email").disabled=!0}),Y(()=>S.value,()=>{S.value?(c.value=[],console.log(S.value),i(f.value,"member_id").model=S.value.id,i(f.value,"parent_email").model=S.value.email,i(f.value,"postal_code").model=S.value.postal_code,i(f.value,"city_id").model=S.value.city_id,i(f.value,"country_id").model=S.value.country_id,i(f.value,"state_id").model=S.value.state_id,i(f.value,"parent_name").model=S.value.name,i(f.value,"address").model=S.value.address,i(f.value,"parent_second_name").model=S.value.second_name,i(f.value,"parent_last_name").model=S.value.last_name,i(f.value,"parent_goverment_id").model=S.value.goverment_id,i(f.value,"parent_personal_identifications").model=S.value.personal_identifications,i(f.value,"parent_phone").model=S.value.phone,f.value.forEach(m=>{m.required=!1})):(z(f.value),f.value.forEach(m=>{m.required=!0}))});const p=m=>{m===!1?(c.value.push("next"),i(f.value,"parent_email").model=""):(c.value=[],i(f.value,"parent_email").model=m)};return(m,x)=>{const M=je,n=W,t=B;return d(),_(t,{titles:{title:y.title},buttons:["next","prev"],"buttons-disabled":c.value,step:2,onChangeStep:g},{default:b(()=>[r("p",null,O(h.value),1),r(M,{"is-head":!0,"place-holder":"Enter the guardian email",onOnSubmit:p,class:"",modelValue:a(S),"onUpdate:modelValue":x[1]||(x[1]=s=>Me(S)?S.value=s:null)},null,8,["modelValue"]),r(n,{"inputs-step":a(f)},null,8,["inputs-step"])]),_:1},8,["titles","buttons-disabled"])}}});const et={key:0},tt=q(" Remove Family Member "),at={key:1,class:"column d-flex justify-content-center flex-column is-4 mx-auto"},st=q(" Add Another Family Member ");var nt=N({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep","returData"],setup(y,{emit:u}){const h=y,c=v(!1);Y(()=>h.inputs,(o,e)=>{g()});const g=()=>{c.value=!0,setTimeout(()=>{c.value=!1},500)},p=v([]);I(()=>(g(),p.value.forEach((o,e)=>{x.value.includes(e)?p.value[e]=o.filter(k=>k.category.includes("Minor")):p.value[e]=JSON.parse(JSON.stringify(h.inputs))}),p.value));const m=o=>{u("returData",p),u("changeStep",o)},x=v([]),M=o=>{x.value.findIndex(e=>e==o)},n=I(()=>p.value.length>0),t=v(0),s=()=>{if(t.value>0)for(var o=0;o<t.value;++o){const e=he(JSON.parse(JSON.stringify(h.inputs)));i(e,"misma_direccion").change=D,i(e,"category").change=l,p.value.push(e)}},l=function(o){console.log(o),o.forEach(e=>{this.model?e.category.includes("Adult")&&(e.typeInput=e.typeInputDefault):e.category.includes("Minor")||(e.typeInput="hidden")}),this.model||(C(o),w(o,"email",`family_${De().format("hms")}_${F(V.value,"email")}`),w(o,"phone",F(V.value,"phone"))),console.log(this.model)},C=o=>{w(o,"address",F(V.value,"address")),w(o,"postal_code",F(V.value,"postal_code")),w(o,"country_id",F(V.value,"country_id")),w(o,"city_id",F(V.value,"city_id")),w(o,"state_id",F(V.value,"state_id"))},D=function(o){console.log("llejay"),this.model?(w(o,"postal_code",""),w(o,"country_id",""),w(o,"city_id",""),w(o,"state_id","")):C(o)};return(o,e)=>{const k=W,A=me,R=ye,te=de,ae=_e,se=B;return d(),_(se,{titles:{title:y.title},"is-loading":c.value,buttons:["next","prev"],step:2,onChangeStep:m},{default:b(()=>[a(n)?(d(),_("div",et,[(d(!0),_(X,null,Q(p.value,(G,U)=>(d(),_(R,{key:U,class:"mb-4"},{default:b(()=>[r(k,{"inputs-step":G,onChangeSwitch:ne=>M(U)},null,8,["inputs-step","onChangeSwitch"]),r(A,{onClick:ne=>p.value.splice(U,1),color:"danger",class:"mx-auto",icon:"fas fa-times"},{default:b(()=>[tt]),_:2},1032,["onClick"])]),_:2},1024))),128))])):T("",!0),a(n)?T("",!0):(d(),_("div",at,[r(ae,{class:"mb-4"},{default:b(()=>[r(te,null,{default:b(()=>[J(r("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=G=>t.value=G),class:"input text-center",placeholder:"Family quantity"},null,512),[[$e,t.value]])]),_:1})]),_:1}),r(A,{onClick:s,color:"info",icon:"fas fa-check",raised:""},{default:b(()=>[st]),_:1})]))]),_:1},8,["titles","is-loading"])}}}),ot=N({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""}},emits:["changeStep"],setup(y,{emit:u}){const h=y,c=v(!1);Y(()=>h.inputs,(n,t)=>{p()});const g=n=>{let t=[];m.value.forEach(s=>{s.values.forEach(l=>{let C=l.values.find(o=>o.name=="sms").model.length,D=l.values.find(o=>o.name=="email").model.length;t.push({[l.name]:l.value,sms:C>0,email:D>0})})}),ge.value=t,u("returnData",t),u("changeStep",n)},p=()=>{c.value=!0,setTimeout(()=>{c.value=!1},500)},m=I(()=>h.inputs),x=v(!1),M=n=>{x.value=!n.input.model,p()};return(n,t)=>{const s=W,l=B;return d(),_(l,{titles:{title:y.title},"is-loading":c.value,buttons:["next","prev"],step:3,onChangeStep:g},{default:b(()=>[r(s,{"inputs-step":a(m),onChangeSwitch:M},null,8,["inputs-step"])]),_:1},8,["titles","is-loading"])}}});const lt={class:""};var rt=N({expose:[],props:{type:{type:String,default:"create"},inputs:{type:Array,default:[]},title:{type:String,default:""},member:{type:Array,default:[]},familiares:{type:Array,default:[]},memberships:{type:Array,default:[]},notes:{type:Array,default:[]}},emits:["changeStep","returnData"],setup(y,{emit:u}){const h=y,c=v(!1),g=v([]);Y(()=>h.inputs,(n,t)=>{p()}),ee(()=>{let n=$.findIndex(s=>s.name=="prorrateo"),t=$.findIndex(s=>s.name=="schedules");i($,"recurrence").class="is-12",n!=-1&&($.splice(n,1),p()),t!=-1&&($.splice(t,1),p())});const p=()=>{c.value=!0,setTimeout(()=>{c.value=!1},500)},m=n=>{let t=null;j.forEach((s,l)=>{l==0?t=s.inputs:g.value.push(s)}),ve.value||(ue.value=t,u("returnData",{memberMembership:t,familyMembership:g}),u("changeStep",n))},x=I(()=>{const n=he([]);j.value=[];let t=[];$.forEach(l=>{t.push(JSON.parse(JSON.stringify(l)))}),n.push(M(h.member,JSON.parse(JSON.stringify(t))));for(var s=0;s<h.familiares.length;++s)n.push(M(h.familiares[s],JSON.parse(JSON.stringify(t))));return j.value=n,n}),M=(n,t,s)=>{const l={member:null,membresia:null};return Le.value=="Prospect"?(i(t,"recurrence").model=!1,i(t,"recurrence").display=!1,i(t,"is_initiation_fee").model=!0,i(t,"is_card_price").model=!0):(i(t,"recurrence").model=!0,i(t,"recurrence").display=!0,i(t,"is_initiation_fee").model=!1,i(t,"is_card_price").model=!1),l.member=n,l.membresia=t,Fe(l.membresia,l.member),l};return(n,t)=>{const s=W,l=ye,C=B;return d(),_(C,{titles:{title:y.title},isloading:c.value,buttons:["next","prev"],step:4,onChangeStep:m},{default:b(()=>[(d(!0),_(X,null,Q(a(x),(D,o)=>(d(),_(l,{key:`ss${o}`,class:"mb-4"},{default:b(()=>[r("p",lt,[r("b",null,O(a(F)(D.member,"name"))+" "+O(a(F)(D.member,"second_name"))+" "+O(a(F)(D.member,"last_name")),1)]),r(s,{"inputs-step":D.membresia},null,8,["inputs-step"])]),_:2},1024))),128)),r(l,{class:"mb-4"},{default:b(()=>[r(s,{"inputs-step":y.notes},null,8,["inputs-step"])]),_:1})]),_:1},8,["titles","isloading"])}}});const it={key:1},ut={class:"d-flex justify-content-end w-100"},ct={class:"d-flex justify-content-between w-100"},mt=q(" Finish "),pt=q(" Cancel "),dt=q(" Register another member ");var _t=N({expose:[],props:{type:{type:String,default:"create"},title:{type:String,default:""}},emits:["changeStep","returnData"],setup(y,{emit:u}){v(!1);const h=v(!1),c=I(()=>j.value[0]),g=I(()=>{let s=[];return j.value.forEach((l,C)=>{C>0&&s.push(l)}),s});ee(()=>{i(Ee.value,"mismatarjeta").change=p,K.value=[],c.value?(pe(c.value.membresia,c.value.member),g.value.length&&g.value.forEach(s=>{pe(s.membresia,s.member)})):(console.error("No tiene membresia"),Ae.error("Membership is required"))});const p=function(){this.model},m=(s,l=3,C)=>{u("returnData",{total:C}),u("changeStep",s,l,{})},x=I(()=>{let s=[];return K.value.forEach(l=>{i(l.member,"is_family").model==0&&s.push(l)}),K.value.forEach(l=>{i(l.member,"is_family").model==1&&s.push(l)}),s});v([]);const M=()=>{window.location.reload()},n=v([]),t=s=>{n.value.push(s)};return(s,l)=>{const C=Je,D=Be,o=qe,e=me,k=B;return d(),_(k,{titles:{title:y.title},"is-loading":h.value,buttons:["prev"],step:5,onChangeStep:m},{default:b(()=>[a(K).length?T("",!0):(d(),_(C,{key:0,height:"300px",class:"mb-4"})),a(K)?(d(),_("div",it,[(d(!0),_(X,null,Q(a(x),(A,R)=>(d(),_(o,{key:`presupuesto-${R}`,class:"mb-4",presupuesto:A},{default:b(()=>[r("div",ut,[r(D,{member:A.member,membresia:A.membresia,contact:a(ge),presupuesto_id:A.presupuesto_id,"categories-members":a(L),"notas-input":a(ce),total:A.totales.upfront.amount_total,presupuesto:A,onPaymentAction:t},null,8,["member","membresia","contact","presupuesto_id","categories-members","notas-input","total","presupuesto"])])]),_:2},1032,["presupuesto"]))),128))])):T("",!0),r("div",ct,[a(x).length>0&&n.value.length==a(x).length?(d(),_(e,{key:0,color:"danger",to:{name:"index"}},{default:b(()=>[mt]),_:1})):(d(),_(e,{key:1,color:"danger",to:{name:"index"}},{default:b(()=>[pt]),_:1})),a(x).length>0&&n.value.length==a(x).length?(d(),_(e,{key:2,color:"success",onClick:M},{default:b(()=>[dt]),_:1})):T("",!0)])]),_:1},8,["titles","is-loading"])}}});Ie("data-v-915b2888");const ft={class:"content"},vt={class:"content-text"};ke();var be=N({expose:[],props:{active:{type:Boolean,default:!1,required:!0},step:{type:Number,default:0,required:!0},text:{type:String,default:""}},setup(y){const u=y,h=I(()=>u.active?100:0);return(c,g)=>{const p=Re;return d(),_("div",ft,[r("div",{class:["circle",y.active?"active":""]},null,2),r(p,{class:"progressbar",value:a(h),size:"smaller"},null,8,["value"]),r("div",vt,[r("p",null,"STEP "+O(y.step),1),r("p",null,[r("b",null,O(y.text),1)])])])}}});be.__scopeId="data-v-915b2888";const ht={class:"columns is-multiline"},gt={class:"column is-12"},yt={class:"column is-9"},bt={class:"column is-3"};var _a=N({expose:[],setup(y){We.value="Add New members",Pe({title:"Members"}),ee(()=>{o(),Ue().then(e=>{P($,"memberships_id",e.data.memberships)}),i($,"memberships_id").disabled=!1,i($,"recurrences_id").disabled=!1,i($,"is_initiation_fee").disabled=!1,i($,"discount").disabled=!1,ze(1,"membership").then(e=>{P($,"discount",e.data.discounts)}),Ke(),Xe().then(e=>{P(V,"city_id",le.value),P(Z,"city_id",le.value),P(f,"city_id",le.value),P(V,"state_id",re.value),P(Z,"state_id",re.value),P(f,"state_id",re.value),P(V,"country_id",ie.value),P(Z,"country_id",ie.value),P(f,"country_id",ie.value)}),Qe().then(e=>{P($,"staff_id",e.data)})});const u=v(1),h=v([{step:1,text:"Member Information",categories:["Adult","Minor","Prospect"]},{step:2,text:"Add Family Member",categories:["Adult"]},{step:2,text:"Parent / Guardian",categories:["Minor"]},{step:2,text:"Contact Preference",categories:["Prospect"]},{step:3,text:"Contact Preference",categories:["Adult","Minor"]},{step:4,text:"Select membership",categories:["Adult","Minor","Prospect"]},{step:5,text:"Add Payment Method",categories:["Adult","Minor","Prospect"]}]),c=I(()=>V.value.filter(e=>e.categories.includes(L.value.model))),g=I(()=>h.value.find(e=>e.step==u.value&&e.categories.includes(L.value.model))),p=I(()=>h.value.filter(e=>e.categories.includes(L.value.model)));I(()=>fe(f.value));const m=(e,k=3,A={})=>{L.value.model=="Prospect",e==6?sendData(k,A):u.value=e},x=v(null),M=e=>{x.value=e},n=v(null),t=e=>{n.value=e},s=v([]),l=e=>{s.value=e.value},C=v([]),D=e=>{C.value=e.familyMembership.value,ue.value=e.memberMembership};v(null),v(null),v(null);const o=()=>{Ne.value=null,Oe.value=null;let e=["is_family","principal_family"];z(V.value.filter(k=>!e.includes(k.name))),e=["recurrence"],z($.filter(k=>!e.includes(k.name))),z(ce.value),z(f.value)};return(e,k)=>{const A=me,R=de,te=_e,ae=Ye,se=Ze,G=nt,U=ot,ne=rt,xe=_t,Se=be,Ce=Ge;return d(),_(Ce,null,{default:b(()=>[r("div",ht,[r("div",gt,[u.value==1?(d(),_(te,{key:0,class:"w-100",addons:""},{default:b(()=>[(d(!0),_(X,null,Q(a(L).values,(E,oe)=>(d(),_(R,{key:`categoymember-${oe}`},{default:b(()=>[r(A,{onClick:xt=>a(L).model=E,color:a(L).model==E?"primary":void 0,rounded:""},{default:b(()=>[q(O(E=="Prospect"?"Temporary Members":E),1)]),_:2},1032,["onClick","color"])]),_:2},1024))),128))]),_:1})):T("",!0)]),r("div",yt,[J(r(ae,{type:"create",title:a(g).text,inputs:a(c),onChangeStep:m,onReturData:M},null,8,["title","inputs"]),[[H,u.value==1]]),J(r(se,{title:a(g).text,onChangeStep:m},null,8,["title"]),[[H,u.value==2&&a(L).model=="Minor"]]),J(r(G,{type:"create",title:a(g).text,inputs:a(Z),onChangeStep:m,onReturData:l},null,8,["title","inputs"]),[[H,u.value==2&&a(L).model=="Adult"]]),J(r(U,{type:"create",title:a(g).text,inputs:a(Te),onChangeStep:m,onReturnData:t},null,8,["title","inputs"]),[[H,u.value==3||u.value==2&&a(L).model=="Prospect"]]),J(r(ne,{type:"create",member:a(c),familiares:s.value,title:a(g).text,inputs:a(j),memberships:a(He),notes:a(ce),onChangeStep:m,onReturnData:D},null,8,["member","familiares","title","inputs","memberships","notes"]),[[H,u.value==4]]),u.value==5?(d(),_(xe,{key:0,type:"create",title:a(g).text,member:a(c),familiares:s.value,inputs:a(j),"member-membership":a(ue),"family-membership":C.value,onChangeStep:m},null,8,["title","member","familiares","inputs","member-membership","family-membership"])):T("",!0)]),r("div",bt,[(d(!0),_(X,null,Q(a(p),(E,oe)=>(d(),_(Se,{key:oe,active:E.step<=u.value,step:E.step,text:E.text},null,8,["active","step","text"]))),128))])])]),_:1})}}});export{_a as default};
